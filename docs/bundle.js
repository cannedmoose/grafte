!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){var i,r,a;(function(s,o){var l=(s=s||n(1)).window,u=s.document,h=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],n=t.slice,i=Object.create,r=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=t.forEach||function(e,t){for(var n=0,i=this.length;n<i;n++)e.call(t,this[n],n,this)},l=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)},u=Object.assign||function(e){for(var t=1,n=arguments.length;t<n;t++){var i=arguments[t];for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e},h=function(e,t,n){if(e){var i=r(e,"length");(i&&"number"==typeof i.value?s:l).call(e,t,n=n||e)}return n};function c(t,n,i,s,o){var l={};function u(e,u){"string"==typeof(u=u||(u=r(n,e))&&(u.get?u:u.value))&&"#"===u[0]&&(u=t[u.substring(1)]||u);var h,c="function"==typeof u,f=u,g=o||c&&!u.base?u&&u.get?e in t:t[e]:null;o&&g||(c&&g&&(u.base=g),c&&!1!==s&&(h=e.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[h[3].toLowerCase()+h[4]]=h[2]),f&&!c&&f.get&&"function"==typeof f.get&&d.isPlainObject(f)||(f={value:f,writable:!0}),(r(t,e)||{configurable:!0}).configurable&&(f.configurable=!0,f.enumerable=null!=i?i:!h),a(t,e,f))}if(n){for(var h in n)n.hasOwnProperty(h)&&!e.test(h)&&u(h);for(var h in l){var c=l[h],f=t["set"+c],g=t["get"+c]||f&&t["is"+c];!g||!0!==s&&0!==g.length||u(h,{get:g,set:f})}}return t}function d(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];n&&u(this,n)}return this}return c(d,{inject:function(e){if(e){var t=!0===e.statics?e:e.statics,n=e.beans,i=e.preserve;t!==e&&c(this.prototype,e,e.enumerable,n,i),c(this,t,null,n,i)}for(var r=1,a=arguments.length;r<a;r++)this.inject(arguments[r]);return this},extend:function(){for(var e,t,n,r=this,s=0,o=arguments.length;s<o&&(!e||!t);s++)n=arguments[s],e=e||n.initialize,t=t||n.prototype;return t=(e=e||function(){r.apply(this,arguments)}).prototype=t||i(this.prototype),a(t,"constructor",{value:e,writable:!0,configurable:!0}),c(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=r,e}}).inject({enumerable:!1,initialize:d,set:d,inject:function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];n&&c(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var e=i(this);return e.inject.apply(e,arguments)},each:function(e,t){return h(this,e,t)},clone:function(){return new this.constructor(this)},statics:{set:u,each:h,create:i,define:a,describe:r,clone:function(e){return u(new e.constructor,e)},isPlainObject:function(e){var t=null!=e&&e.constructor;return t&&(t===Object||t===d||"Object"===t.name)},pick:function(e,t){return e!==o?e:t},slice:function(e,t,i){return n.call(e,t,i)}}})};e.exports=h,h.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+h.each(this,(function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+("number"===n?p.instance.number(e):"string"===n?"'"+e+"'":e))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return h.importJSON(e,this)},exportJSON:function(e){return h.exportJSON(this,e)},toJSON:function(){return h.serialize(this)},set:function(e,t){return e&&h.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!h.exports[n]&&(h.exports[n]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)&&Array.isArray(t)){if((n=e.length)!==t.length)return!1;for(;n--;)if(!h.equals(e[n],t[n]))return!1}else{var n,i=Object.keys(e);if((n=i.length)!==Object.keys(t).length)return!1;for(;n--;){var r=i[n];if(!t.hasOwnProperty(r)||!h.equals(e[r],t[r]))return!1}}return!0}return!1},read:function(e,t,n,i){if(this===h){var r=this.peek(e,t);return e.__index++,r}var a=this.prototype,s=a._readIndex,l=t||s&&e.__index||0,u=e.length,c=e[l];if(i=i||u-l,c instanceof this||n&&n.readNull&&null==c&&i<=1)return s&&(e.__index=l+1),c&&n&&n.clone?c.clone():c;if(c=h.create(a),s&&(c.__read=!0),c=c.initialize.apply(c,l>0||l+i<u?h.slice(e,l,l+i):e)||c,s){e.__index=l+c.__read;var d=c.__filtered;d&&(e.__filtered=d,c.__filtered=o),c.__read=o}return c},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,n,i){for(var r,a=[],s=t||0,o=i?s+i:e.length,l=s;l<o;l++)a.push(Array.isArray(r=e[l])?this.read(r,0,n):this.read(e,l,n,1));return a},readNamed:function(e,t,n,i,r){var a=this.getNamed(e,t),s=a!==o;if(s){var l=e.__filtered;if(!l){var u=this.getSource(e);(l=e.__filtered=h.create(u)).__unfiltered=u}l[t]=o}return this.read(s?[a]:e,n,i,r)},readSupported:function(e,t){var n=this.getSource(e),i=this,r=!1;return n&&Object.keys(n).forEach((function(n){if(n in t){var a=i.readNamed(e,n);a!==o&&(t[n]=a),r=!0}})),r},getSource:function(e){var t=e.__source;if(t===o){var n=1===e.length&&e[0];t=e.__source=n&&h.isPlainObject(n)?n:null}return t},getNamed:function(e,t){var n=this.getSource(e);if(n)return t?n[t]:e.__filtered||n},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,n,i){var r;function a(i){if(!(n&&i in n||r&&i in r)){var a=t[i];a!==o&&(e[i]=a)}}if(i){for(var s,l={},u=0,h=i.length;u<h;u++)(s=i[u])in t&&(a(s),l[s]=!0);r=l}return Object.keys(t.__unfiltered||t).forEach(a),e},isPlainValue:function(e,t){return h.isPlainObject(e)||Array.isArray(e)||t&&"string"==typeof e},serialize:function(e,t,n,i){t=t||{};var r,a=!i;if(a&&(t.formatter=new p(t.precision),i={length:0,definitions:{},references:{},add:function(e,t){var n="#"+e._id,i=this.references[n];if(!i){this.length++;var r=t.call(e),a=e._class;a&&r[0]!==a&&r.unshift(a),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),e&&e._serialize){r=e._serialize(t,i);var s=e._class;!s||e._compactSerialize||!a&&n||r[0]===s||r.unshift(s)}else if(Array.isArray(e)){r=[];for(var o=0,l=e.length;o<l;o++)r[o]=h.serialize(e[o],t,n,i)}else if(h.isPlainObject(e)){r={};var u=Object.keys(e);for(o=0,l=u.length;o<l;o++){var c=u[o];r[c]=h.serialize(e[c],t,n,i)}}else r="number"==typeof e?t.formatter.number(e,t.precision):e;return a&&i.length>0?[["dictionary",i.definitions],r]:r},deserialize:function(e,t,n,i,r){var a=e,s=!n,o=s&&e&&e.length&&"dictionary"===e[0][0];if(n=n||{},Array.isArray(e)){var l=e[0],u="dictionary"===l;if(1==e.length&&/^#/.test(l))return n.dictionary[l];a=[];for(var c=(l=h.exports[l])?1:0,d=e.length;c<d;c++)a.push(h.deserialize(e[c],t,n,u,o));if(l){var f=a;a=t?t(l,f,s||r):new l(f)}}else if(h.isPlainObject(e))for(var g in a={},i&&(n.dictionary=a),e)a[g]=h.deserialize(e[g],t,n);return o?a[1]:a},exportJSON:function(e,t){var n=h.serialize(e,t);return t&&0==t.asString?n:JSON.stringify(n)},importJSON:function(e,t){return h.deserialize("string"==typeof e?JSON.parse(e):e,(function(e,n,i){var r=i&&t&&t.constructor===e,a=r?t:h.create(e.prototype);if(1===n.length&&a instanceof j&&(r||!(a instanceof A))){var s=n[0];h.isPlainObject(s)&&(s.insert=!1,r&&(n=n.concat([{insert:!0}])))}return(r?a.set:e).apply(a,n),r&&(t=null),a}))},push:function(e,t){var n=t.length;if(n<4096)e.push.apply(e,t);else{var i=e.length;e.length+=n;for(var r=0;r<n;r++)e[i+r]=t[r]}return e},splice:function(e,t,n,i){var r=t&&t.length,a=n===o;(n=a?e.length:n)>e.length&&(n=e.length);for(var s=0;s<r;s++)t[s]._index=n+s;if(a)return h.push(e,t),[];var l=[n,i];t&&h.push(l,t);for(var u=e.splice.apply(e,l),c=(s=0,u.length);s<c;s++)u[s]._index=o;for(s=n+r,c=e.length;s<c;s++)e[s]._index=s;return u},capitalize:function(e){return e.replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}))},camelize:function(e){return e.replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var c={on:function(e,t){if("string"!=typeof e)h.each(e,(function(e,t){this.on(t,e)}),this);else{var n=this._eventTypes,i=n&&n[e],r=this._callbacks=this._callbacks||{};-1===(r=r[e]=r[e]||[]).indexOf(t)&&(r.push(t),i&&i.install&&1===r.length&&i.install.call(this,e))}return this},off:function(e,t){if("string"==typeof e){var n,i=this._eventTypes,r=i&&i[e],a=this._callbacks&&this._callbacks[e];return a&&(!t||-1!==(n=a.indexOf(t))&&1===a.length?(r&&r.uninstall&&r.uninstall.call(this,e),delete this._callbacks[e]):-1!==n&&a.splice(n,1)),this}h.each(e,(function(e,t){this.off(t,e)}),this)},once:function(e,t){return this.on(e,(function n(){t.apply(this,arguments),this.off(e,n)}))},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var i=h.slice(arguments,1),r=t&&t.target&&!t.currentTarget;n=n.slice(),r&&(t.currentTarget=this);for(var a=0,s=n.length;a<s;a++)if(0==n[a].apply(this,i)){t&&t.stop&&t.stop();break}return r&&delete t.currentTarget,!0},responds:function(e){return!(!this._callbacks||!this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,i=e?"install":"uninstall";if(t)for(var r in n)if(n[r].length>0){var a=t[r],s=a&&a[i];s&&s.call(this,r)}},statics:{inject:function e(t){var n=t._events;if(n){var i={};h.each(n,(function(e,n){var r="string"==typeof e,a=r?e:n,s=h.capitalize(a),o=a.substring(2).toLowerCase();i[o]=r?{}:e,a="_"+a,t["get"+s]=function(){return this[a]},t["set"+s]=function(e){var t=this[a];t&&this.off(o,t),e&&this.on(o,e),this[a]=e}})),t._eventTypes=i}return e.base.apply(this,arguments)}}},d=h.extend({_class:"PaperScope",initialize:function e(){de=this,this.settings=new h({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var n=le.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:ue.nativeModes},le.release(n)}if(!this.agent){var i=s.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],a="darwin"===r?"mac":r,o=t.agent=t.browser={platform:a};a&&(o[a]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(e,t,n,i,r){if(!o.chrome){var a="opera"===t?i:/^(node|trident)$/.test(t)?r:n;o.version=a,o.versionNumber=parseFloat(a),t={trident:"msie",jsdom:"node"}[t]||t,o.name=t,o[t]=!0}})),o.chrome&&delete o.webkit,o.atom&&delete o.chrome}},version:"0.12.4-grafte",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var n=de.PaperScript.execute(e,this,t);return Y.updateFocus(),n},install:function(e){var t=this;for(var n in h.each(["project","view","tool"],(function(n){h.define(e,n,{configurable:!0,get:function(){return t[n]}})})),this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return de=this,this.project=new z(e),this},createCanvas:function(e,t){return le.getCanvas(e,t)},activate:function(){de=this},clear:function(){for(var e=this.projects,t=this.tools,n=e.length-1;n>=0;n--)e[n].remove();for(n=t.length-1;n>=0;n--)t[n].remove()},remove:function(){this.clear(),delete d._scopes[this._id]},statics:new function(){function e(e){return e+="Attribute",function(t,n){return t[e](n)||t[e]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),f=h.extend(c,{initialize:function(e){this._scope=de,this._index=this._scope[this._list].push(this)-1,!e&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(h.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),g={findItemBoundsCollisions:function(e,t,n){function i(e){for(var t=new Array(e.length),n=0;n<e.length;n++){var i=e[n].getBounds();t[n]=[i.left,i.top,i.right,i.bottom]}return t}var r=i(e),a=t&&t!==e?i(t):r;return this.findBoundsCollisions(r,a,n||0)},findCurveBoundsCollisions:function(e,t,n,i){function r(e){for(var t=Math.min,n=Math.max,i=new Array(e.length),r=0;r<e.length;r++){var a=e[r];i[r]=[t(a[0],a[2],a[4],a[6]),t(a[1],a[3],a[5],a[7]),n(a[0],a[2],a[4],a[6]),n(a[1],a[3],a[5],a[7])]}return i}var a=r(e),s=t&&t!==e?r(t):a;if(i){for(var o=this.findBoundsCollisions(a,s,n||0,!1,!0),l=this.findBoundsCollisions(a,s,n||0,!0,!0),u=[],h=0,c=o.length;h<c;h++)u[h]={hor:o[h],ver:l[h]};return u}return this.findBoundsCollisions(a,s,n||0)},findBoundsCollisions:function(e,t,n,i,r){var a=!t||e===t,s=a?e:e.concat(t),o=e.length,l=s.length;function u(e,t,n){for(var i=0,r=e.length;i<r;){var a=r+i>>>1;s[e[a]][t]<n?i=a+1:r=a}return i-1}for(var h=i?1:0,c=h+2,d=i?0:1,f=d+2,g=new Array(l),p=0;p<l;p++)g[p]=p;g.sort((function(e,t){return s[e][h]-s[t][h]}));var m=[],_=new Array(o);for(p=0;p<l;p++){var v=g[p],y=s[v],w=a?v:v-o,b=v<o,x=a||!b,k=b?[]:null;if(m.length){var C=u(m,c,y[h]-n)+1;if(m.splice(0,C),a&&r){k=k.concat(m);for(var S=0;S<m.length;S++)_[I=m[S]].push(w)}else{var z=y[f],j=y[d];for(S=0;S<m.length;S++){var I=m[S],A=s[I],P=I<o,M=a||I>=o;(r||(b&&M||x&&P)&&z>=A[d]-n&&j<=A[f]+n)&&(b&&M&&k.push(a?I:I-o),x&&P&&_[I].push(w))}}}if(b&&(e===t&&k.push(v),_[v]=k),m.length){var T=u(m,c,y[c]);m.splice(T+1,0,v)}else m.push(v)}for(p=0;p<_.length;p++){var E=_[p];E&&E.sort((function(e,t){return e-t}))}return _}},p=h.extend({initialize:function(e){this.precision=h.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});p.instance=new p;var m=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow,a=Math.log2||function(e){return Math.log(e)*Math.LOG2E};function s(e,t,n){return e<t?t:e>n?n:e}function o(e,t,i){function r(e){var t=134217729*e,n=e-t+t;return[n,e-n]}var a=t*t-e*i,s=t*t+e*i;if(3*n(a)<s){var o=r(e),l=r(t),u=r(i),h=t*t,c=e*i;a=h-c+(l[0]*l[0]-h+2*l[0]*l[1]+l[1]*l[1]-(o[0]*u[0]-c+o[0]*u[1]+o[1]*u[0]+o[1]*u[1]))}return a}function l(){var e=Math.max.apply(Math,arguments);return e&&(e<1e-8||e>1e8)?r(2,-Math.round(a(e))):0}return{EPSILON:1e-12,MACHINE_EPSILON:112e-18,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(i(2)-1)/3,isZero:function(e){return e>=-1e-12&&e<=1e-12},isMachineZero:function(e){return e>=-112e-18&&e<=112e-18},clamp:s,integrate:function(n,i,r,a){for(var s=e[a-2],o=t[a-2],l=.5*(r-i),u=l+i,h=0,c=a+1>>1,d=1&a?o[h++]*n(u):0;h<c;){var f=l*s[h];d+=o[h++]*(n(u+f)+n(u-f))}return l*d},findRoot:function(e,t,i,r,a,o,l){for(var u=0;u<o;u++){var h=e(i),c=h/t(i),d=i-c;if(n(c)<l){i=d;break}h>0?(a=i,i=d<=r?.5*(r+a):d):(r=i,i=d>=a?.5*(r+a):d)}return s(i,r,a)},solveQuadratic:function(e,t,r,a,u,h){var c,d=1/0;if(n(e)<1e-12){if(n(t)<1e-12)return n(r)<1e-12?-1:0;c=-r/t}else{var f=o(e,t*=-.5,r);if(f&&n(f)<112e-18){var g=l(n(e),n(t),n(r));g&&(f=o(e*=g,t*=g,r*=g))}if(f>=-112e-18){var p=f<0?0:i(f),m=t+(t<0?-p:p);0===m?d=-(c=r/e):(c=m/e,d=r/m)}}var _=0,v=null==u,y=u-1e-12,w=h+1e-12;return isFinite(c)&&(v||c>y&&c<w)&&(a[_++]=v?c:s(c,u,h)),d!==c&&isFinite(d)&&(v||d>y&&d<w)&&(a[_++]=v?d:s(d,u,h)),_},solveCubic:function(e,t,a,o,u,h,c){var d,f,g,p,_,v=l(n(e),n(t),n(a),n(o));function y(n){var i=e*(d=n);p=(i+(f=i+t))*d+(g=f*d+a),_=g*d+o}if(v&&(e*=v,t*=v,a*=v,o*=v),n(e)<1e-12)e=t,f=a,g=o,d=1/0;else if(n(o)<1e-12)f=t,g=a,d=0;else{y(-t/e/3);var w=_/e,b=r(n(w),1/3),x=w<0?-1:1,k=-p/e,C=k>0?1.324717957244746*Math.max(b,i(k)):b,S=d-x*C;if(S!==d){do{y(S),S=0===p?d:d-_/p/(1+112e-18)}while(x*S>x*d);n(e)*d*d>n(o/d)&&(f=((g=-o/d)-a)/d)}}var z=m.solveQuadratic(e,f,g,u,h,c),j=null==h;return isFinite(d)&&(0===z||z>0&&d!==u[0]&&d!==u[1])&&(j||d>h-1e-12&&d<c+1e-12)&&(u[z++]=j?d:s(d,h,c)),z}}},_={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}return this._id++}},v=h.extend({_class:"Point",_readIndex:!0,initialize:function(e,t){var n=typeof e,i=this.__read,r=0;if("number"===n){var a="number"==typeof t;this._set(e,a?t:e),i&&(r=a?2:1)}else if("undefined"===n||null===e)this._set(0,0),i&&(r=null===e?1:0);else{var s="string"===n?e.split(/[\s,]+/)||[]:e;r=1,Array.isArray(s)?this._set(+s[0],+(s.length>1?s[1]:s[0])):"x"in s?this._set(s.x||0,s.y||0):"width"in s?this._set(s.width||0,s.height||0):"angle"in s?(this._set(s.length||0,0),this.setAngle(s.angle||0)):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new v(this.x,this.y)},toString:function(){var e=p.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();m.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=v.read(arguments),t=this.getLength()*e.getLength();if(m.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=v.read(arguments);return 180*Math.atan2(this.cross(e),this.dot(e))/Math.PI},getDistance:function(){var e=arguments,t=v.read(e),n=t.x-this.x,i=t.y-this.y,r=n*n+i*i,a=h.read(e);return a?r:Math.sqrt(r)},normalize:function(e){e===o&&(e=1);var t=this.getLength(),n=0!==t?e/t:0,i=new v(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(e,t){if(0===e)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,i=Math.sin(e),r=Math.cos(e);return n=new v(n.x*r-n.y*i,n.x*i+n.y*r),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=v.read(arguments);return new v(this.x+e.x,this.y+e.y)},subtract:function(){var e=v.read(arguments);return new v(this.x-e.x,this.y-e.y)},multiply:function(){var e=v.read(arguments);return new v(this.x*e.x,this.y*e.y)},divide:function(){var e=v.read(arguments);return new v(this.x/e.x,this.y/e.y)},modulo:function(){var e=v.read(arguments);return new v(this.x%e.x,this.y%e.y)},negate:function(){return new v(-this.x,-this.y)},isInside:function(){return x.read(arguments).contains(this)},isClose:function(){var e=arguments,t=v.read(e),n=h.read(e);return this.getDistance(t)<=n},isCollinear:function(){var e=v.read(arguments);return v.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=v.read(arguments);return v.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=m.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=v.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=v.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=v.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new v(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=v.read(e),n=v.read(e);return new v(Math.min(t.x,n.x),Math.min(t.y,n.y))},max:function(){var e=arguments,t=v.read(e),n=v.read(e);return new v(Math.max(t.x,n.x),Math.max(t.y,n.y))},random:function(){return new v(Math.random(),Math.random())},isCollinear:function(e,t,n,i){return Math.abs(e*i-t*n)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+i*i))},isOrthogonal:function(e,t,n,i){return Math.abs(e*n+t*i)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+i*i))}}},h.each(["round","ceil","floor","abs"],(function(e){var t=Math[e];this[e]=function(){return new v(t(this.x),t(this.y))}}),{})),y=v.extend({initialize:function(e,t,n,i){this._x=e,this._y=t,this._owner=n,this._setter=i},_set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),w=h.extend({_class:"Size",_readIndex:!0,initialize:function(e,t){var n=typeof e,i=this.__read,r=0;if("number"===n){var a="number"==typeof t;this._set(e,a?t:e),i&&(r=a?2:1)}else if("undefined"===n||null===e)this._set(0,0),i&&(r=null===e?1:0);else{var s="string"===n?e.split(/[\s,]+/)||[]:e;r=1,Array.isArray(s)?this._set(+s[0],+(s.length>1?s[1]:s[0])):"width"in s?this._set(s.width||0,s.height||0):"x"in s?this._set(s.x||0,s.y||0):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new w(this.width,this.height)},toString:function(){var e=p.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=w.read(arguments);return new w(this.width+e.width,this.height+e.height)},subtract:function(){var e=w.read(arguments);return new w(this.width-e.width,this.height-e.height)},multiply:function(){var e=w.read(arguments);return new w(this.width*e.width,this.height*e.height)},divide:function(){var e=w.read(arguments);return new w(this.width/e.width,this.height/e.height)},modulo:function(){var e=w.read(arguments);return new w(this.width%e.width,this.height%e.height)},negate:function(){return new w(-this.width,-this.height)},isZero:function(){var e=m.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new w(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new w(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new w(Math.random(),Math.random())}}},h.each(["round","ceil","floor","abs"],(function(e){var t=Math[e];this[e]=function(){return new w(t(this.width),t(this.height))}}),{})),b=w.extend({initialize:function(e,t,n,i){this._width=e,this._height=t,this._owner=n,this._setter=i},_set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),x=h.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(e,t,n,i){var r,a=arguments,s=typeof e;if("number"===s?(this._set(e,t,n,i),r=4):"undefined"===s||null===e?(this._set(0,0,0,0),r=null===e?1:0):1===a.length&&(Array.isArray(e)?(this._set.apply(this,e),r=1):e.x!==o||e.width!==o?(this._set(e.x||0,e.y||0,e.width||0,e.height||0),r=1):e.from===o&&e.to===o&&(this._set(0,0,0,0),h.readSupported(a,this)&&(r=1))),r===o){var l,u,c=v.readNamed(a,"from"),d=h.peek(a),f=c.x,g=c.y;if(d&&d.x!==o||h.hasNamed(a,"to")){var p=v.readNamed(a,"to");l=p.x-f,u=p.y-g,l<0&&(f=p.x,l=-l),u<0&&(g=p.y,u=-u)}else{var m=w.read(a);l=m.width,u=m.height}this._set(f,g,l,u),r=a.__index}var _=a.__filtered;return _&&(this.__filtered=_),this.__read&&(this.__read=r),this},set:"#initialize",_set:function(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this},clone:function(){return new x(this.x,this.y,this.width,this.height)},equals:function(e){var t=h.isPlainValue(e)?x.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=p.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){return new(e?v:y)(this.x,this.y,this,"setPoint")},setPoint:function(){var e=v.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){return new(e?w:b)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=w.read(arguments),t=this._sx,n=this._sy,i=e.width,r=e.height;t&&(this.x+=(this.width-i)*t),n&&(this.y+=(this.height-r)*n),this.width=i,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=.5===this._sx?2*t:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=.5===this._sy?2*t:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=.5===this._sx?2*t:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=.5===this._sy?2*t:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||.5===this._sx?this.x=e-this.width/2:(this._sx&&(this.x+=2*(e-this.x)*this._sx),this.width=2*(e-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||.5===this._sy?this.y=e-this.height/2:(this._sy&&(this.y+=2*(e-this.y)*this._sy),this.height=2*(e-this.y)),this._sy=.5,this._fh=0},getCenter:function(e){return new(e?v:y)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=v.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(e){return e&&e.width!==o||4===(Array.isArray(e)?e:arguments).length?this._containsRectangle(x.read(arguments)):this._containsPoint(v.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=x.read(arguments),t=h.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=x.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),i=Math.min(this.x+this.width,e.x+e.width),r=Math.min(this.y+this.height,e.y+e.height);return new x(t,n,i-t,r-n)},unite:function(){var e=x.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x+e.width),r=Math.max(this.y+this.height,e.y+e.height);return new x(t,n,i-t,r-n)},include:function(){var e=v.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x),r=Math.max(this.y+this.height,e.y);return new x(t,n,i-t,r-n)},expand:function(){var e=w.read(arguments),t=e.width,n=e.height;return new x(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===o?e:t)-this.height)}},h.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(e,t){var n=e.join(""),i=/^[RL]/.test(n);t>=4&&(e[1]+=i?"Y":"X");var r=e[i?0:1],a=e[i?1:0],s="get"+r,o="get"+a,l="set"+r,u="set"+a,h="set"+n;this["get"+n]=function(e){return new(e?v:y)(this[s](),this[o](),this,h)},this[h]=function(){var e=v.read(arguments);this[l](e.x),this[u](e.y)}}),{beans:!0})),k=x.extend({initialize:function(e,t,n,i,r,a){this._set(e,t,n,i,!0),this._owner=r,this._setter=a},_set:function(e,t,n,i,r){return this._x=e,this._y=t,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var e=x.prototype;return h.each(["x","y","width","height"],(function(e){var t=h.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._dontNotify||this._owner[this._setter](this)}}),h.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(e){var t=this._owner;t._changeSelection&&t._changeSelection(2,e)}}))}),C=h.extend({_class:"Matrix",initialize:function e(t,n){var i=arguments,r=i.length,a=!0;if(r>=6?this._set.apply(this,i):1===r||2===r?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,n):Array.isArray(t)?this._set.apply(this,n?t.concat([n]):t):a=!1:r?a=!1:this.reset(),!a)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,n,i,r,a,s){return this._a=e,this._b=t,this._c=n,this._d=i,this._tx=r,this._ty=a,s||this._changed(),this},_serialize:function(e,t){return h.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new C(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=p.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return!!n&&(n.transform(null,h.pick(e,!0),t),this.isIdentity())},translate:function(){var e=v.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=arguments,t=v.read(e),n=v.read(e,0,{readNull:!0});return n&&this.translate(n),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=v.read(arguments,1),n=t.x,i=t.y,r=Math.cos(e),a=Math.sin(e),s=n-n*r+i*a,o=i-n*a-i*r,l=this._a,u=this._b,h=this._c,c=this._d;return this._a=r*l+a*h,this._b=r*u+a*c,this._c=-a*l+r*h,this._d=-a*u+r*c,this._tx+=s*l+o*h,this._ty+=s*u+o*c,this._changed(),this},shear:function(){var e=arguments,t=v.read(e),n=v.read(e,0,{readNull:!0});n&&this.translate(n);var i=this._a,r=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*i,this._d+=t.x*r,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var e=arguments,t=v.read(e),n=v.read(e,0,{readNull:!0}),i=Math.PI/180,r=new v(Math.tan(t.x*i),Math.tan(t.y*i));return this.shear(r,n)},append:function(e,t){if(e){var n=this._a,i=this._b,r=this._c,a=this._d,s=e._a,o=e._c,l=e._b,u=e._d,h=e._tx,c=e._ty;this._a=s*n+l*r,this._c=o*n+u*r,this._b=s*i+l*a,this._d=o*i+u*a,this._tx+=h*n+c*r,this._ty+=h*i+c*a,t||this._changed()}return this},prepend:function(e,t){if(e){var n=this._a,i=this._b,r=this._c,a=this._d,s=this._tx,o=this._ty,l=e._a,u=e._c,h=e._b,c=e._d,d=e._tx,f=e._ty;this._a=l*n+u*i,this._c=l*r+u*a,this._b=h*n+c*i,this._d=h*r+c*a,this._tx=l*s+u*o+d,this._ty=h*s+c*o+f,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,i=this._d,r=this._tx,a=this._ty,s=e*i-t*n,o=null;return s&&!isNaN(s)&&isFinite(r)&&isFinite(a)&&(this._a=i/s,this._b=-t/s,this._c=-n/s,this._d=e/s,this._tx=(n*a-i*r)/s,this._ty=(t*r-e*a)/s,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new C(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return arguments.length<3?this._transformPoint(v.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var i=e.x,r=e.y;return t||(t=new v),t._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var i=0,r=2*n;i<r;i+=2){var a=e[i],s=e[i+1];t[i]=a*this._a+s*this._c+this._tx,t[i+1]=a*this._b+s*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,i=t+e.width,r=n+e.height,a=[t,n,i,n,i,r,t,r];return this._transformCoordinates(a,a,4)},_transformBounds:function(e,t,n){for(var i=this._transformCorners(e),r=i.slice(0,2),a=r.slice(),s=2;s<8;s++){var o=i[s],l=1&s;o<r[l]?r[l]=o:o>a[l]&&(a[l]=o)}return t||(t=new x),t._set(r[0],r[1],a[0]-r[0],a[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(v.read(arguments))},_inverseTransform:function(e,t,n){var i=this._a,r=this._b,a=this._c,s=this._d,o=this._tx,l=this._ty,u=i*s-r*a,h=null;if(u&&!isNaN(u)&&isFinite(o)&&isFinite(l)){var c=e.x-this._tx,d=e.y-this._ty;t||(t=new v),h=t._set((c*s-d*a)/u,(d*i-c*r)/u,n)}return h},decompose:function(){var e,t,n,i=this._a,r=this._b,a=this._c,s=this._d,o=i*s-r*a,l=Math.sqrt,u=Math.atan2,h=180/Math.PI;if(0!==i||0!==r){var c=l(i*i+r*r);e=Math.acos(i/c)*(r>0?1:-1),t=[c,o/c],n=[u(i*a+r*s,c*c),0]}else if(0!==a||0!==s){var d=l(a*a+s*s);e=Math.asin(a/d)*(s>0?1:-1),t=[o/d,d],n=[0,u(i*a+r*s,d*d)]}else e=0,n=t=[0,0];return{translation:this.getTranslation(),rotation:e*h,scaling:new v(t),skewing:new v(n[0]*h,n[1]*h)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new v(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},h.each(["a","b","c","d","tx","ty"],(function(e){var t=h.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._changed()}}),{})),S=h.extend({_class:"Line",initialize:function(e,t,n,i,r){var a=!1;arguments.length>=4?(this._px=e,this._py=t,this._vx=n,this._vy=i,a=r):(this._px=e.x,this._py=e.y,this._vx=t.x,this._vy=t.y,a=n),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new v(this._px,this._py)},getVector:function(){return new v(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return S.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return S.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return S.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return v.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return v.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,i,r,a,s,o,l,u){l||(n-=e,i-=t,s-=r,o-=a);var h=n*o-i*s;if(!m.isMachineZero(h)){var c=e-r,d=t-a,f=(s*d-o*c)/h,g=(n*d-i*c)/h;if(u||-1e-12<f&&f<1+1e-12&&-1e-12<g&&g<1+1e-12)return u||(f=f<=0?0:f>=1?1:f),new v(e+f*n,t+f*i)}},getSide:function(e,t,n,i,r,a,s,o){s||(n-=e,i-=t);var l=r-e,u=l*i-(a-t)*n;return!o&&m.isMachineZero(u)&&(u=(l*n+l*n)/(n*n+i*i))>=0&&u<=1&&(u=0),u<0?-1:u>0?1:0},getSignedDistance:function(e,t,n,i,r,a,s){return s||(n-=e,i-=t),0===n?i>0?r-e:e-r:0===i?n<0?a-t:t-a:((r-e)*i-(a-t)*n)/(i>n?i*Math.sqrt(1+n*n/(i*i)):n*Math.sqrt(1+i*i/(n*n)))},getDistance:function(e,t,n,i,r,a,s){return Math.abs(S.getSignedDistance(e,t,n,i,r,a,s))}}}),z=f.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(e){f.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new G(null,null,this),this._view=Y.create(this,e||le.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return h.serialize(this._children,e,!0,t)},_changed:function(e,t){if(1&e){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}this.emit("changed",new h({flags:e,item:t}));var i=this._changes;if(i&&t){var r=this._changesById,a=t._id,s=r[a];s?s.flags|=e:i.push(r[a]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return!!e.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new A({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:T,match:function(n){var i=n._definition,r=i._id;return t[r]||(t[r]=!0,e.push(i)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var i=e[n],r=i._selection;1&r&&i.isInserted()?t.push(i):r||this._updateSelection(i)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(o,e)},insertLayer:function(e,t){if(t instanceof A){t._remove(!1,!0),h.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,n){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(o,new A(j.NO_INSERT),!0)).insertChild(e,t),n&&t.activate&&t.activate(),t},getItems:function(e){return j._getItems(this,e)},getItem:function(e){return j._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return h.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){"mouseup"===e&&(t.mousedrag=null);var n=t[e];if(n){for(var i in n){var r=n[i];for(var a in t){var s=t[a];s&&s!=n&&delete s[r._id]}r.remove()}t[e]=null}}},draw:function(e,t,n,i){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,a=new h({offset:new v(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new C],updateMatrix:!0}),s=0,o=r.length;s<o;s++)r[s].draw(e,a);if(e.restore(),this._selectionCount>0&&i){e.save(),e.strokeWidth=1;var l=this._selectionItems,u=this._scope.settings.handleSize,c=this._updateVersion;for(var d in l)l[d]._drawSelection(e,t,u,l,c);e.restore()}}}),j=h.extend(c,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=h.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new C,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return h.each(e,(function(e){this._events[e]={install:function(e){this.getView()._countItemEvent(e,1)},uninstall:function(e){this.getView()._countItemEvent(e,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var n=e&&h.isPlainObject(e),i=n&&!0===e.internal,r=this._matrix=new C,a=n&&e.project||de.project,s=de.settings;return this._id=i?null:_.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&s.applyMatrix,t&&r.translate(t),r._owner=this,this._style=new G(a._currentStyle,this,a),i||n&&0==e.insert||!s.insertItems&&(!n||!0!==e.insert)?this._setProject(a):(n&&e.parent||a)._insertItem(o,this,!0),n&&e!==j.NO_INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(e,t){var n={},i=this;function r(r,a){for(var s in r){var o=i[s];!a&&h.equals(o,"leading"===s?1.2*r.fontSize:r[s])||(n[s]=h.serialize(o,e,"data"!==s,t))}}return r(this._serializeFields),this instanceof I||r(this._style._defaults,!0),[this._class,n]},_changed:function(e){var t=this._symbol,n=this._parent||t,i=this._project;8&e&&(this._bounds=this._position=this._decomposed=o),16&e&&(this._globalMatrix=o),n&&72&e&&j._clearBoundsCache(n),2&e&&j._clearBoundsCache(this),i&&i._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var n=t._children,i=t._namedChildren;(i[e]=i[e]||[]).push(this),e in n||(n[e]=this)}this._name=e||o,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},h.each(["locked","visible","blendMode","opacity","guide"],(function(e){var t=h.capitalize(e),n="_"+e,i={locked:256,visible:265};this["get"+t]=function(){return this[n]},this["set"+t]=function(t){t!=this[n]&&(this[n]=t,this._changed(i[e]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren)for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0;return!!(1&this._selection)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,i=t.length;n<i;n++)t[n].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(1&this._selection);if(e&&t){for(var n=0,i=e.length;n<i;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,i=t.length;n<i;n++)t[n].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?v:y,n=this._position||(this._position=this._getPositionFromBounds());return new t(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(v.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new y(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=v.read(arguments,0,{clone:!0,readNull:!0}),this._position=o}},h.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(e,t){this[t]=function(t){return this.getBounds(t,e)}}),{beans:!0,getBounds:function(e,t){var n=t||e instanceof C,i=h.set({},n?t:e,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var r=this._getCachedBounds(n&&e,i).rect;return arguments.length?r:new k(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var e=x.read(arguments),t=this.getBounds(),n=this._matrix,i=new C,r=e.getCenter();i.translate(r),e.width==t.width&&e.height==t.height||(n.isInvertible()||(n.set(n._backup||(new C).translate(n.getTranslation())),t=this.getBounds()),i.scale(0!==t.width?e.width/t.width:0,0!==t.height?e.height/t.height:0)),r=t.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(e,t){var n=this._children;return n&&n.length?(j._updateBoundsCache(this,t.cacheItem),j._getBounds(n,e,t)):new x},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,n){e=e&&e._orNullIfIdentity();var i=t.internal&&!n,r=t.cacheItem,a=i?null:this._matrix._orNullIfIdentity(),s=r&&(!e||e.equals(a))&&this._getBoundsCacheKey(t,i),o=this._bounds;if(j._updateBoundsCache(this._parent||this._symbol,r),s&&o&&s in o)return{rect:(d=o[s]).rect.clone(),nonscaling:d.nonscaling};var l=this._getBounds(e||a,t),u=l.rect||l,h=this._style,c=l.nonscaling||h.hasStroke()&&!h.getStrokeScaling();if(s){o||(this._bounds=o={});var d=o[s]={rect:u.clone(),nonscaling:c,internal:i}}return{rect:u,nonscaling:c}},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():e;return i&&i._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,i=e._boundsCache=e._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(t),i.ids[n]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=o;for(var n=0,i=t.list,r=i.length;n<r;n++){var a=i[n];a!==e&&(a._bounds=a._position=o,a._boundsCache&&j._clearBoundsCache(a))}}},_getBounds:function(e,t,n){var i=1/0,r=-i,a=i,s=r,o=!1;n=n||{};for(var l=0,u=e.length;l<u;l++){var h=e[l];if(h._visible&&!h.isEmpty(!0)){var c=h._getCachedBounds(t&&t.appended(h._matrix),n,!0),d=c.rect;i=Math.min(d.x,i),a=Math.min(d.y,a),r=Math.max(d.x+d.width,r),s=Math.max(d.y+d.height,s),c.nonscaling&&(o=!0)}}return{rect:isFinite(i)?new x(i,a,r-i,s-a):new x,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(null!=t&&null!=e){var n=this._decomposed;this.rotate(e-t),n&&(n.rotation=e,this._decomposed=n)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new y(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=v.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var n=this.getRotation(),i=this._decomposed,r=new C,a=this.getPosition(!0);r.translate(a),n&&r.rotate(n),r.scale(t.x/e.x,t.y/e.y),n&&r.rotate(-n),r.translate(a.negate()),this.transform(r),i&&(i.scaling=t,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.initialize.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var n=this._parent,i=[];n;){if(!n._globalMatrix){t=null;for(var r=0,a=i.length;r<a;r++)i[r]._globalMatrix=null;break}i.push(n),n=n._parent}return t||(t=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&t.prepend(n.getGlobalMatrix(!0))),e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof A)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return h.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(j.NO_INSERT),n=this._children,i=h.pick(e?e.insert:o,e===o||!0===e),r=h.pick(e?e.deep:o,!0);n&&t.copyAttributes(this),n&&!r||t.copyContent(this),n||t.copyAttributes(this),i&&t.insertAbove(this);var a=this._name,s=this._parent;if(a&&s){n=s._children;for(var l=a,u=1;n[a];)a=l+" "+u++;a!==l&&t.setName(a)}return t},copyContent:function(e){for(var t=e._children,n=0,i=t&&t.length;n<i;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,r=n.length;i<r;i++){var a=n[i];e.hasOwnProperty(a)&&(this[a]=e[a])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var s=e._data,o=e._name;this._data=s?h.clone(s):null,o&&this.setName(o)},rasterize:function(e,t){var n=this.getStrokeBounds(),i=(e||this.getView().getResolution())/72,r=n.getTopLeft().floor(),a=n.getBottomRight().ceil(),s=new w(a.subtract(r)),l=new M(j.NO_INSERT);if(!s.isZero()){var u=le.getCanvas(s.multiply(i)),c=u.getContext("2d"),d=(new C).scale(i).translate(r.negate());c.save(),d.applyToContext(c),this.draw(c,new h({matrices:[d]})),c.restore(),l.setCanvas(u)}return l.transform((new C).translate(r.add(s.divide(2))).scale(1/i)),(t===o||t)&&l.insertAbove(this),l},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(v.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return x.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new F.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof j&&this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0}},new function(){function e(){var e=arguments;return this._hitTest(v.read(e),O.getOptions(e))}function t(){var e=arguments,t=v.read(e),n=O.getOptions(e),i=[];return this._hitTest(t,new h({all:i},n)),i}function n(e,t,n,i){var r=this._children;if(r)for(var a=r.length-1;a>=0;a--){var s=r[a],o=s!==i&&s._hitTest(e,t,n);if(o&&!t.all)return o}return null}return z.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var i=this._matrix,r=n?n.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(t.tolerance,1e-12),s=t._tolerancePadding=new w(F._getStrokePadding(a,i._shiftless().invert()));if(!(e=i._inverseTransform(e))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(s.multiply(2))._containsPoint(e))return null;var o,l,u=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==h.hyphenate(this._class)||t.class&&!(this instanceof t.class)),c=t.match,d=this;function f(e){return e&&c&&!c(e)&&(e=null),e&&t.all&&t.all.push(e),e}function g(t,n){var i=n?o["get"+n]():d.getPosition();if(e.subtract(i).divide(s).length<=1)return new O(t,d,{name:n?h.hyphenate(n):t,point:i})}var p=t.position,m=t.center,_=t.bounds;if(u&&this._parent&&(p||m||_)){if((m||_)&&(o=this.getInternalBounds()),!(l=p&&g("position")||m&&g("center","Center"))&&_)for(var v=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],y=0;y<8&&!l;y++)l=g("bounds",v[y]);l=f(l)}return l||(l=this._hitTestChildren(e,t,r)||u&&f(this._hitTestSelf(e,t,r,this.getStrokeScaling()?null:r._shiftless().invert()))||null),l&&l.point&&(l.point=i.transform(l.point)),l},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new O("fill",this)},matches:function(e,t){var n=typeof e;if("object"===n){for(var i in e)if(e.hasOwnProperty(i)&&!this.matches(i,e[i]))return!1;return!0}if("function"===n)return e(this);if("match"===e)return t(this);var r=/^(empty|editable)$/.test(e)?this["is"+h.capitalize(e)]():"type"===e?h.hyphenate(this._class):this[e];if("class"===e){if("function"==typeof t)return this instanceof t;r=this._class}if("function"==typeof t)return!!t(r);if(t){if(t.test)return t.test(r);if(h.isPlainObject(t))return function e(t,n){for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],a=n[i];if(h.isPlainObject(r)&&h.isPlainObject(a)){if(!e(r,a))return!1}else if(!h.equals(r,a))return!1}return!0}(t,r)}return h.equals(r,t)},getItems:function(e){return j._getItems(this,e,this._matrix)},getItem:function(e){return j._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,n,i,r,a){if(!r){var s="object"==typeof n&&n,o=s&&s.overlapping,l=s&&s.inside,u=(v=o||l)&&x.read([v]);r={items:[],recursive:s&&!1!==s.recursive,inside:!!l,overlapping:!!o,rect:u,path:o&&new F.Rectangle({rectangle:u,insert:!1})},s&&(n=h.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var c=t._children,d=r.items;i=(u=r.rect)&&(i||new C);for(var f=0,g=c&&c.length;f<g;f++){var p=c[f],m=i&&i.appended(p._matrix),_=!0;if(u){var v=p.getBounds(m);if(!u.intersects(v))continue;u.contains(v)||r.overlapping&&(v.contains(u)||r.path.intersects(p,m))||(_=!1)}if(_&&p.matches(n)&&(d.push(p),a))break;if(!1!==r.recursive&&e(p,n,m,r,a),a&&d.length>0)break}return d}}},{importJSON:function(e){var t=h.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(o,e)},insertChild:function(e,t){var n=t?this.insertChildren(e,[t]):null;return n&&n[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var n=this._children;if(n&&t&&t.length>0){for(var i={},r=(t=h.slice(t)).length-1;r>=0;r--){var a=(u=t[r])&&u._id;!u||i[a]?t.splice(r,1):(u._remove(!1,!0),i[a]=!0)}h.splice(n,t,e,0);for(var s=this._project,o=s._changes,l=(r=0,t.length);r<l;r++){var u,c=(u=t[r])._name;u._parent=this,u._setProject(s,!0),c&&u.setName(c),o&&u._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var n=e&&e._getOwner(),i=e!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(e._index+t,i)),i},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(o,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(o,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&1===t.length){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,i=this._name,r=n[i],a=r?r.indexOf(this):-1;-1!==a&&(t[i]==this&&delete t[i],r.splice(a,1),r.length?t[i]=r[0]:delete n[i])}},_remove:function(e,t){var n=this._getOwner(),i=this._project,r=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=r&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),h.splice(n._children,null,r,1)),this._installEvents(!1),e&&i._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=h.pick(t,this._children.length);for(var n=h.splice(this._children,null,e,t-e),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,n=t?t.length:0;if(e){for(var i=0;i<n;i++)if(!t[i].isEmpty(e))return!1;return!0}return!n},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(e){var t=[];do{t.unshift(e)}while(e=e._parent);return t}for(var n=t(this),i=t(e),r=0,a=Math.min(n.length,i.length);r<a;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(e){return-1===this._getOrder(e)},isBelow:function(e){return 1===this._getOrder(e)},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return!!e&&e.isDescendant(this)},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},h.each(["rotate","scale","shear","skew"],(function(e){var t="rotate"===e;this[e]=function(){var n=arguments,i=(t?h:v).read(n),r=v.read(n,0,{readNull:!0});return this.transform((new C)[e](i,r||this.getPosition(!0)))}}),{translate:function(){var e=new C;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n){var i=this._matrix,r=e&&!e.isIdentity(),a=n&&this._canApplyMatrix||this._applyMatrix&&(r||!i.isIdentity()||t&&this._children);if(!r&&!a)return this;if(r){!e.isInvertible()&&i.isInvertible()&&(i._backup=i.getValues()),i.prepend(e,!0);var s=this._style,o=s.getFillColor(!0),l=s.getStrokeColor(!0);o&&o.transform(e),l&&l.transform(e)}if(a&&(a=this._transformContent(i,t,n))){var u=this._pivot;u&&i._transformPoint(u,u,!0),i.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var h=this._bounds,c=this._position;(r||a)&&this._changed(25);var d=r&&h&&e.decompose();if(d&&d.skewing.isZero()&&d.rotation%90==0){for(var f in h){var g=h[f];if(g.nonscaling)delete h[f];else if(a||!g.internal){var p=g.rect;e._transformBounds(p,p)}}this._bounds=h;var m=h[this._getBoundsCacheKey(this._boundsOptions||{})];m&&(this._position=this._getPositionFromBounds(m.rect))}else r&&c&&this._pivot&&(this._position=e._transformPoint(c,c));return this},_transformContent:function(e,t,n){var i=this._children;if(i){for(var r=0,a=i.length;r<a;r++)i[r].transform(e,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(v.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(v.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(v.read(arguments))},localToParent:function(){return this._matrix._transformPoint(v.read(arguments))},fitBounds:function(e,t){e=x.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=e.height/e.width,a=(t?i>r:i<r)?e.width/n.width:e.height/n.height,s=new x(new v,new w(n.width*a,n.height*a));s.setCenter(e.getCenter()),this.setBounds(s)}}),{_setStyles:function(e,t,n){var i=this._style,r=this._matrix;if(i.hasFill()&&(e.fillStyle=i.getFillColor().toCanvasStyle(e,r)),i.hasStroke()){e.strokeStyle=i.getStrokeColor().toCanvasStyle(e,r),e.lineWidth=i.getStrokeWidth();var a=i.getStrokeJoin(),s=i.getStrokeCap(),o=i.getMiterLimit();if(a&&(e.lineJoin=a),s&&(e.lineCap=s),o&&(e.miterLimit=o),de.support.nativeDash){var l=i.getDashArray(),u=i.getDashOffset();l&&l.length&&("setLineDash"in e?(e.setLineDash(l),e.lineDashOffset=u):(e.mozDash=l,e.mozDashOffset=u))}}if(i.hasShadow()){var h=t.pixelRatio||1,c=n._shiftless().prepend((new C).scale(h,h)),d=c.transform(new v(i.getShadowBlur(),0)),f=c.transform(this.getShadowOffset());e.shadowColor=i.getShadowColor().toCanvasStyle(e),e.shadowBlur=d.getLength(),e.shadowOffsetX=f.x,e.shadowOffsetY=f.y}},draw:function(e,t,n){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var i=t.matrices,r=t.viewMatrix,a=this._matrix,s=i[i.length-1].appended(a);if(s.isInvertible()){r=r?r.appended(s):s,i.push(s),t.updateMatrix&&(this._globalMatrix=s);var o,l,u,h=this._blendMode,c=this._opacity,d="normal"===h,f=ue.nativeModes[h],g=d&&1===c||t.dontStart||t.clip||(f||d&&c<1)&&this._canComposite(),p=t.pixelRatio||1;if(!g){var m=this.getStrokeBounds(r);if(!m.width||!m.height)return void i.pop();u=t.offset,l=t.offset=m.getTopLeft().floor(),o=e,e=le.getContext(m.getSize().ceil().add(1).multiply(p)),1!==p&&e.scale(p,p)}e.save();var _=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&r,v=!g&&t.clipItem,y=!_||v;if(g?(e.globalAlpha=c,f&&(e.globalCompositeOperation=h)):y&&e.translate(-l.x,-l.y),y&&(g?a:r).applyToContext(e),v&&t.clipItem.draw(e,t.extend({clip:!0})),_){e.setTransform(p,0,0,p,0,0);var w=t.offset;w&&e.translate(-w.x,-w.y)}this._draw(e,t,r,_),e.restore(),i.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),g||(ue.process(h,e,o,c,l.subtract(u).multiply(p)),le.release(e),t.offset=u)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof q)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,i,r){var a=this._selection,s=1&a,o=2&a||s&&this._selectBounds,l=4&a;if(this._drawSelected||(s=!1),(s||o||l)&&this._isUpdated(r)){var u,h=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),c=t.appended(this.getGlobalMatrix(!0)),d=n/2;if(e.strokeStyle=e.fillStyle=h?h.toCanvasStyle(e):"#009dec",s&&this._drawSelected(e,c,i),l){var f=this.getPosition(!0),g=this._parent,p=g?g.localToGlobal(f):f,m=p.x,_=p.y;e.beginPath(),e.arc(m,_,d,0,2*Math.PI,!0),e.stroke();for(var v=[[0,-1],[1,0],[0,1],[-1,0]],y=d,w=n+1,b=0;b<4;b++){var x=v[b],k=x[0],C=x[1];e.moveTo(m+k*y,_+C*y),e.lineTo(m+k*w,_+C*w),e.stroke()}}if(o){var S=c._transformCorners(this.getInternalBounds());for(e.beginPath(),b=0;b<8;b++)e[b?"lineTo":"moveTo"](S[b],S[++b]);for(e.closePath(),e.stroke(),b=0;b<8;b++)e.fillRect(S[b]-d,S[++b]-d,n,n)}}},_canComposite:function(){return!1}},h.each(["down","drag","up","move"],(function(e){this["removeOn"+h.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}}),{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}}),{tween:function(e,t,n){n||(n=t,t=e,e=null,n||(n=t,t=null));var i=n&&n.easing,r=n&&n.start,a=null!=n&&("number"==typeof n?n:n.duration),s=new se(this,e,t,a,i,r);return a&&this.on("frame",(function e(t){s._handleFrame(1e3*t.time),s.running||this.off("frame",e)})),s},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),I=j.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function e(t){e.base.call(this,t),2050&t&&(this._clipItem=o)},_getClipItem:function(){var e=this._clipItem;if(e===o){e=null;for(var t=this._children,n=0,i=t.length;n<i;n++)if(t[n]._clipMask){e=t[n];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,n){var i=this._getClipItem();return i?i._getCachedBounds(i._matrix.prepended(t),h.set({},n,{stroke:!1})):e.base.call(this,t,n)},_hitTestChildren:function e(t,n,i){var r=this._getClipItem();return(!r||r.contains(t))&&e.base.call(this,t,n,i,r)},_draw:function(e,t){var n=t.clip,i=!n&&this._getClipItem();t=t.extend({clipItem:i,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):i&&i.draw(e,t.extend({clip:!0}));for(var r=this._children,a=0,s=r.length;a<s;a++){var o=r[a];o!==i&&o.draw(e,t)}}}),A=I.extend({_class:"Layer",initialize:function(){I.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function e(){return this._parent?e.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),P=j.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e,t){this._initialize(e,t)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&h.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new b(e.width,e.height,this,"setSize")},setSize:function(){var e=w.read(arguments);if(this._size){if(!this._size.equals(e)){var t=this._type,n=e.width,i=e.height;"rectangle"===t?this._radius.set(w.min(this._radius,e.divide(2).abs())):"circle"===t?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===t&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=e.clone()},getRadius:function(){var e=this._radius;return"circle"===this._type?e:new b(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if("circle"===t){if(e===this._radius)return;var n=2*e;this._radius=e,this._size._set(n,n)}else if(e=w.read(arguments),this._radius){if(this._radius.equals(e))return;this._radius.set(e),"rectangle"===t?(n=w.max(this._size,e.multiply(2)),this._size.set(n)):"ellipse"===t&&this._size._set(2*e.width,2*e.height)}else this._radius=e.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new(F[h.capitalize(this._type)])({center:new v,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),de.settings.applyMatrix&&t.setApplyMatrix(!0),(e===o||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,n,i){var r=this._style,a=r.hasFill(),s=r.hasStroke(),o=t.dontFinish||t.clip,l=!i;if(a||s||o){var u=this._type,h=this._radius,c="circle"===u;if(t.dontStart||e.beginPath(),l&&c)e.arc(0,0,h,0,2*Math.PI,!0);else{var d=c?h:h.width,f=c?h:h.height,g=this._size,p=g.width,m=g.height;if(l&&"rectangle"===u&&0===d&&0===f)e.rect(-p/2,-m/2,p,m);else{var _=p/2,v=m/2,y=.44771525016920644,w=d*y,b=f*y,x=[-_,-v+f,-_,-v+b,-_+w,-v,-_+d,-v,_-d,-v,_-w,-v,_,-v+b,_,-v+f,_,v-f,_,v-b,_-w,v,_-d,v,-_+d,v,-_+w,v,-_,v-b,-_,v-f];i&&i.transform(x,x,32),e.moveTo(x[0],x[1]),e.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]),_!==d&&e.lineTo(x[8],x[9]),e.bezierCurveTo(x[10],x[11],x[12],x[13],x[14],x[15]),v!==f&&e.lineTo(x[16],x[17]),e.bezierCurveTo(x[18],x[19],x[20],x[21],x[22],x[23]),_!==d&&e.lineTo(x[24],x[25]),e.bezierCurveTo(x[26],x[27],x[28],x[29],x[30],x[31])}}e.closePath()}o||!a&&!s||(this._setStyles(e,t,n),a&&(e.fill(r.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),s&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new x(this._size).setCenter(0,0),i=this._style,r=t.stroke&&i.hasStroke()&&i.getStrokeWidth();return e&&(n=e._transformBounds(n)),r?n.expand(F._getStrokePadding(r,this._getStrokeMatrix(e,t))):n}},new function(){function e(e,t,n){var i=e._radius;if(!i.isZero())for(var r=e._size.divide(2),a=1;a<=4;a++){var s=new v(a>1&&a<4?-1:1,a>2?-1:1),o=s.multiply(r),l=o.subtract(s.multiply(i));if(new x(n?o.add(s.multiply(n)):o,l).contains(t))return{point:l,quadrant:a}}}function t(e,t,n,i){var r=e.divide(t);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(t).divide(n).length<=1}return{_contains:function t(n){if("rectangle"===this._type){var i=e(this,n);return i?n.subtract(i.point).divide(this._radius).getLength()<=1:t.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r,a,s){var o=!1,l=this._style,u=r.stroke&&l.hasStroke(),h=r.fill&&l.hasFill();if(u||h){var c=this._type,d=this._radius,f=u?l.getStrokeWidth()/2:0,g=r._tolerancePadding.add(F._getStrokePadding(f,!l.getStrokeScaling()&&s));if("rectangle"===c){var p=g.multiply(2),m=e(this,i,p);if(m)o=t(i.subtract(m.point),d,g,m.quadrant);else{var _=new x(this._size).setCenter(0,0),v=_.expand(p),y=_.expand(p.negate());o=v._containsPoint(i)&&!y._containsPoint(i)}}else o=t(i,d,g)}return o?new O(u?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function e(e,t,n,i,r){var a=h.create(P.prototype);return a._type=e,a._size=n,a._radius=i,a._initialize(h.getNamed(r),t),a}return{Circle:function(){var t=arguments,n=v.readNamed(t,"center"),i=h.readNamed(t,"radius");return e("circle",n,new w(2*i),i,t)},Rectangle:function(){var t=arguments,n=x.readNamed(t,"rectangle"),i=w.min(w.readNamed(t,"radius"),n.getSize(!0).divide(2));return e("rectangle",n.getCenter(!0),n.getSize(!0),i,t)},Ellipse:function(){var t=arguments,n=P._readEllipse(t),i=n.radius;return e("ellipse",n.center,i.multiply(2),i,t)},_readEllipse:function(e){var t,n;if(h.hasNamed(e,"radius"))t=v.readNamed(e,"center"),n=w.readNamed(e,"radius");else{var i=x.readNamed(e,"rectangle");t=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:t,radius:n}}}}}),M=j.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:!0,beans:!0,initialize:function(e,t){if(!this._initialize(e,t!==o&&v.read(arguments))){var n,i=typeof e,r="string"===i?u.getElementById(e):"object"===i?e:null;if(r&&r!==j.NO_INSERT)if(r.getContext||null!=r.naturalHeight)n=r;else if(r){var a=w.read(arguments);a.isZero()||(n=le.getCanvas(a))}n?this.setImage(n):this.setSource(e)}this._size||(this._size=new w,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var i=le.getCanvas(e._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new b(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(){var e=w.read(arguments);if(!e.equals(this._size))if(e.width>0&&e.height>0){var t=this.getElement();this._setImage(le.getCanvas(e)),t&&this.getContext(!0).drawImage(t,0,0,e.width,e.height)}else this._canvas&&le.release(this._canvas),this._size=e.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||0===e.width&&0===e.height},getResolution:function(){var e=this._matrix,t=new v(0,0).transform(e),n=new v(1,0).transform(e).subtract(t),i=new v(0,1).transform(e).subtract(t);return new w(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function n(e){var n=t.getView(),i=e&&e.type||"load";n&&t.responds(i)&&(de=n._scope,t.emit(i,new ee(e)))}this._setImage(e),this._loaded?setTimeout(n,0):e&&K.add(e,{load:function(i){t._setImage(e),n(i)},error:n})},_setImage:function(e){this._canvas&&le.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new w(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=le.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){le.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new s.Image,n=this._crossOrigin;n&&(t.crossOrigin=n),e&&(t.src=e),this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing=e,this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=x.read(arguments),t=le.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=x.read(arguments),t=new M(j.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=v.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof D?(n=e,t=e.getBounds()):"object"==typeof e&&("width"in e?t=new x(e):"x"in e&&(t=new x(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var i=Math.min(t.width,32),r=Math.min(t.height,32),a=M._sampleContext;a?a.clearRect(0,0,33,33):a=M._sampleContext=le.getContext(new w(32)),a.save();var s=(new C).scale(i/t.width,r/t.height).translate(-t.x,-t.y);s.applyToContext(a),n&&n.draw(a,new h({clip:!0,matrices:[s]})),this._matrix.applyToContext(a);var o=this.getElement(),l=this._size;o&&a.drawImage(o,-l.width/2,-l.height/2),a.restore();for(var u=a.getImageData(.5,.5,Math.ceil(i),Math.ceil(r)).data,c=[0,0,0],d=0,f=0,g=u.length;f<g;f+=4){var p=u[f+3];d+=p,p/=255,c[0]+=u[f]*p,c[1]+=u[f+1]*p,c[2]+=u[f+2]*p}for(f=0;f<3;f++)c[f]/=d;return d?W.read(c):null},getPixel:function(){var e=v.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new W("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=v.read(e),n=W.read(e),i=n._convert("rgb"),r=n._alpha,a=this.getContext(!0),s=a.createImageData(1,1),o=s.data;o[0]=255*i[0],o[1]=255*i[1],o[2]=255*i[2],o[3]=null!=r?255*r:255,a.putImageData(s,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=w.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=x.read(arguments);return e.isEmpty()&&(e=new x(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},setImageData:function(e){var t=v.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},_getBounds:function(e,t){var n=new x(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new O("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,n){var i=this.getElement();i&&i.width>0&&i.height>0&&(e.globalAlpha=this._opacity,this._setStyles(e,t,n),X.setPrefixed(e,"imageSmoothingEnabled",this._smoothing),e.drawImage(i,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),T=j.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,t){this._initialize(e,t!==o&&v.read(arguments,1))||this.setDefinition(e instanceof E?e:new E(e))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n){var i=t.extend({all:!1}),r=this._definition._item._hitTest(e,i,n);return r&&(r.item=this),r},_draw:function(e,t){this._definition._item.draw(e,t)}}),E=h.extend({_class:"SymbolDefinition",initialize:function(e,t){this._id=_.get(),this.project=de.project,e&&this.setItem(e,t)},_serialize:function(e,t){return t.add(this,(function(){return h.serialize([this._class,this._item],e,!1,t)}))},_changed:function(e){8&e&&j._clearBoundsCache(this),1&e&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new v),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new T(this,e)},clone:function(){return new E(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),O=h.extend({_class:"HitResult",initialize:function(e,t,n){this.type=e,this.item=t,n&&this.inject(n)},statics:{getOptions:function(e){var t=e&&h.read(e);return new h({type:null,tolerance:de.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),L=h.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(e,t,n,i,r,a){var s,l,u,h,c=arguments.length;c>0&&(null==e||"object"==typeof e?1===c&&e&&"point"in e?(s=e.point,l=e.handleIn,u=e.handleOut,h=e.selection):(s=e,l=t,u=n,h=i):(s=[e,t],l=n!==o?[n,i]:null,u=r!==o?[r,a]:null)),new N(s,this,"_point"),new N(l,this,"_handleIn"),new N(u,this,"_handleOut"),h&&this.setSelection(h)},_serialize:function(e,t){var n=this._point,i=this._selection,r=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&r.push(i),h.serialize(r,e,!0,t)},_changed:function(e){var t=this._path;if(t){var n,i=t._curves,r=this._index;i&&(e&&e!==this._point&&e!==this._handleIn||!(n=r>0?i[r-1]:t._closed?i[i.length-1]:null)||n._changed(),e&&e!==this._point&&e!==this._handleOut||!(n=i[r])||n._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(v.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(v.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(v.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(257))},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(7&this._selection)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==o?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new B(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,n){var i=e||{},r=i.type,a=i.factor,s=this.getPrevious(),l=this.getNext(),u=(s||this)._point,h=this._point,c=(l||this)._point,d=u.getDistance(h),f=h.getDistance(c);if(r&&"catmull-rom"!==r){if("geometric"!==r)throw new Error("Smoothing method '"+r+"' not supported.");if(s&&l){var g=u.subtract(c),p=a===o?.4:a,m=p*d/(d+f);t||this.setHandleIn(g.multiply(m)),n||this.setHandleOut(g.multiply(m-p))}}else{var _=a===o?.5:a,y=Math.pow(d,_),w=y*y,b=Math.pow(f,_),x=b*b;if(!t&&s){var k=2*x+3*b*y+w,C=3*b*(b+y);this.setHandleIn(0!==C?new v((x*u._x+k*h._x-w*c._x)/C-h._x,(x*u._y+k*h._y-w*c._y)/C-h._y):new v)}!n&&l&&(k=2*w+3*y*b+x,C=3*y*(y+b),this.setHandleOut(0!==C?new v((w*c._x+k*h._x-x*u._x)/C-h._x,(w*c._y+k*h._y-x*u._y)/C-h._y):new v))}},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e.clone();e.set(t),t.set(n)},reversed:function(){return new L(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new L(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,n){var i=1-n,r=n,a=e._point,s=t._point,o=e._handleIn,l=t._handleIn,u=t._handleOut,h=e._handleOut;this._point._set(i*a._x+r*s._x,i*a._y+r*s._y,!0),this._handleIn._set(i*o._x+r*l._x,i*o._y+r*l._y,!0),this._handleOut._set(i*h._x+r*u._x,i*h._y+r*u._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,s=i._x,o=i._y,l=2;return t[0]=s,t[1]=o,r&&(t[l++]=r._x+s,t[l++]=r._y+o),a&&(t[l++]=a._x+s,t[l++]=a._y+o),e&&(e._transformCoordinates(t,t,l/2),s=t[0],o=t[1],n?(i._x=s,i._y=o,l=2,r&&(r._x=t[l++]-s,r._y=t[l++]-o),a&&(a._x=t[l++]-s,a._y=t[l++]-o)):(r||(t[l++]=s,t[l++]=o),a||(t[l++]=s,t[l++]=o))),t}}),N=v.extend({initialize:function(e,t,n){var i,r,a;if(e)if((i=e[0])!==o)r=e[1];else{var s=e;(i=s.x)===o&&(i=(s=v.read(arguments)).x),r=s.y,a=s.selected}else i=r=0;this._x=i,this._y=r,this._owner=t,t[n]=this,a&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=m.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),R=h.extend({_class:"Curve",beans:!0,initialize:function(e,t,n,i,r,a,s,o){var l,u,h,c,d,f,g=arguments.length;3===g?(this._path=e,l=t,u=n):g?1===g?"segment1"in e?(l=new L(e.segment1),u=new L(e.segment2)):"point1"in e?(h=e.point1,d=e.handle1,f=e.handle2,c=e.point2):Array.isArray(e)&&(h=[e[0],e[1]],c=[e[6],e[7]],d=[e[2]-e[0],e[3]-e[1]],f=[e[4]-e[6],e[5]-e[7]]):2===g?(l=new L(e),u=new L(t)):4===g?(h=e,d=t,f=n,c=i):8===g&&(h=[e,t],c=[s,o],d=[n-e,i-t],f=[r-s,a-o]):(l=new L,u=new L),this._segment1=l||new L(h,null,d),this._segment2=u||new L(c,f,null)},_serialize:function(e,t){return h.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=o},clone:function(){return new R(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return R.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;(e=t.remove())&&this._segment1._handleOut.set(n)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(v.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(v.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(v.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(v.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return R.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;n<8;n+=2)t.push(new v(e[n],e[n+1]));return t}},{getLength:function(){return null==this._length&&(this._length=R.getLength(this.getValues(),0,1)),this._length},getArea:function(){return R.getArea(this.getValues())},getLine:function(){return new S(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new R(R.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return R.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var n=null;if(e>=1e-8&&e<=1-1e-8){var i=R.subdivide(this.getValues(),e),r=i[0],a=i[1],s=t||this.hasHandles(),o=this._segment1,l=this._segment2,u=this._path;s&&(o._handleOut._set(r[2]-r[0],r[3]-r[1]),l._handleIn._set(a[4]-a[6],a[5]-a[7]));var h=r[6],c=r[7],d=new L(new v(h,c),s&&new v(r[4]-h,r[5]-c),s&&new v(a[2]-h,a[3]-c));u?(u.insert(o._index+1,d),n=this.getNext()):(this._segment2=d,this._changed(),n=new R(d,l))}return n},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===o?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===o?.5:t?e:this.getTimeAt(e))},reversed:function(){return new R(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,n,i){var r=e._point,a=e._handleOut,s=t._handleIn,o=t._point,l=r.x,u=r.y,h=o.x,c=o.y,d=i?[l,u,l,u,h,c,h,c]:[l,u,l+a._x,u+a._y,h+s._x,c+s._y,h,c];return n&&n._transformCoordinates(d,d,4),d},subdivide:function(e,t){var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=e[6],h=e[7];t===o&&(t=.5);var c=1-t,d=c*n+t*r,f=c*i+t*a,g=c*r+t*s,p=c*a+t*l,m=c*s+t*u,_=c*l+t*h,v=c*d+t*g,y=c*f+t*p,w=c*g+t*m,b=c*p+t*_,x=c*v+t*w,k=c*y+t*b;return[[n,i,d,f,v,y,x,k],[x,k,w,b,m,_,u,h]]},getMonoCurves:function(e,t){var n=[],i=t?0:1,r=e[i+0],a=e[i+2],s=e[i+4],o=e[i+6];if(r>=a==a>=s&&a>=s==s>=o||R.isStraight(e))n.push(e);else{var l=3*(a-s)-r+o,u=2*(r+s)-4*a,h=a-r,c=[],d=m.solveQuadratic(l,u,h,c,1e-8,1-1e-8);if(d){c.sort();var f=c[0],g=R.subdivide(e,f);n.push(g[0]),d>1&&(f=(c[1]-f)/(1-f),g=R.subdivide(g[1],f),n.push(g[0])),n.push(g[1])}else n.push(e)}return n},solveCubic:function(e,t,n,i,r,a){var s=e[t],o=e[t+2],l=e[t+4],u=e[t+6],h=0;if(!(s<n&&u<n&&o<n&&l<n||s>n&&u>n&&o>n&&l>n)){var c=3*(o-s),d=3*(l-o)-c,f=u-s-c-d;h=m.solveCubic(f,d,c,s-n,i,r,a)}return h},getTimeOf:function(e,t){var n=new v(e[0],e[1]),i=new v(e[6],e[7]);if(null===(t.isClose(n,1e-12)?0:t.isClose(i,1e-12)?1:null))for(var r=[t.x,t.y],a=[],s=0;s<2;s++)for(var o=R.solveCubic(e,s,r[s],a,0,1),l=0;l<o;l++){var u=a[l];if(t.isClose(R.getPoint(e,u),1e-7))return u}return t.isClose(n,1e-7)?0:t.isClose(i,1e-7)?1:null},getNearestTime:function(e,t){if(R.isStraight(e)){var n=e[0],i=e[1],r=e[6]-n,a=e[7]-i,s=r*r+a*a;if(0===s)return 0;var o=((t.x-n)*r+(t.y-i)*a)/s;return o<1e-12?0:o>.999999999999?1:R.getTimeOf(e,new v(n+o*r,i+o*a))}var l=1/0,u=0;function h(n){if(n>=0&&n<=1){var i=t.getDistance(R.getPoint(e,n),!0);if(i<l)return l=i,u=n,!0}}for(var c=0;c<=100;c++)h(c/100);for(var d=.005;d>1e-8;)h(u-d)||h(u+d)||(d/=2);return u},getPart:function(e,t,n){var i=t>n;if(i){var r=t;t=n,n=r}return t>0&&(e=R.subdivide(e,t)[1]),n<1&&(e=R.subdivide(e,(n-t)/(1-t))[0]),i?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],h=3*r-2*n-l,c=3*a-2*i-u,d=3*s-2*l-n,f=3*o-2*u-i;return Math.max(h*h,d*d)+Math.max(c*c,f*f)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7];return 3*((l-n)*(i+a)-(o-t)*(r+s)+r*(t-a)-i*(n-s)+l*(a+t/3)-o*(s+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),i=[0,0],r=0;r<2;r++)R._addBounds(e[r],e[r+2],e[r+4],e[r+6],r,0,t,n,i);return new x(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,i,r,a,s,o,l){function u(e,t){var n=e-t,i=e+t;n<s[r]&&(s[r]=n),i>o[r]&&(o[r]=i)}a/=2;var h=s[r]-a,c=o[r]+a;if(e<h||t<h||n<h||i<h||e>c||t>c||n>c||i>c)if(t<e!=t<i&&n<e!=n<i)u(e,a),u(i,a);else{var d=3*(t-n)-e+i,f=2*(e+n)-4*t,g=t-e,p=m.solveQuadratic(d,f,g,l);u(i,0);for(var _=0;_<p;_++){var v=l[_],y=1-v;1e-8<=v&&v<=1-1e-8&&u(y*y*y*e+3*y*y*v*t+3*y*v*v*n+v*v*v*i,a)}}}}},h.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=F[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}}),{}),h.each({isStraight:function(e,t,n,i){if(t.isZero()&&n.isZero())return!0;var r=i.subtract(e);if(r.isZero())return!1;if(r.isCollinear(t)&&r.isCollinear(n)){var a=new S(e,i);if(a.getDistance(e.add(t))<1e-7&&a.getDistance(i.add(n))<1e-7){var s=r.dot(r),o=r.dot(t)/s,l=r.dot(n)/s;return o>=0&&o<=1&&l<=0&&l>=-1}}return!1},isLinear:function(e,t,n,i){var r=i.subtract(e).divide(3);return t.equals(r)&&n.negate().equals(r)}},(function(e,t){this[t]=function(t){var n=this._segment1,i=this._segment2;return e(n._point,n._handleOut,i._handleIn,i._point,t)},this.statics[t]=function(t,n){var i=t[0],r=t[1],a=t[6],s=t[7];return e(new v(i,r),new v(t[2]-i,t[3]-r),new v(t[4]-a,t[5]-s),new v(a,s),n)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return null!=e&&e>=0&&e<=1?new B(this,e):null},getTimeAt:function(e,t){return R.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=v.read(arguments);return e.isZero()?[]:R.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(v.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return R.getTimeOf(this.getValues(),v.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=v.read(arguments),t=this.getValues(),n=R.getNearestTime(t,e),i=R.getPoint(t,n);return new B(this,n,i,null,e.getDistance(i))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e?e.getPoint():e}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return h.each(e,(function(e){this[e+"At"]=function(t,n){var i=this.getValues();return R[e](i,n?t:R.getTimeAt(i,t))},this[e+"AtTime"]=function(t){return R[e](this.getValues(),t)}}),{statics:{_evaluateMethods:e}})},new function(){function e(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=9*(i-a)+3*(o-t),h=6*(t+a)-12*i,c=3*(i-t),d=9*(r-s)+3*(l-n),f=6*(n+s)-12*r,g=3*(r-n);return function(e){var t=(u*e+h)*e+c,n=(d*e+f)*e+g;return Math.sqrt(t*t+n*n)}}function t(e,t){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(t-e))))}function n(e,t,n,i){if(null==t||t<0||t>1)return null;var r=e[0],a=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],c=e[7],d=m.isZero;d(s-r)&&d(o-a)&&(s=r,o=a),d(l-h)&&d(u-c)&&(l=h,u=c);var f,g,p=3*(s-r),_=3*(l-s)-p,y=h-r-p-_,w=3*(o-a),b=3*(u-o)-w,x=c-a-w-b;if(0===n)f=0===t?r:1===t?h:((y*t+_)*t+p)*t+r,g=0===t?a:1===t?c:((x*t+b)*t+w)*t+a;else{if(t<1e-8?(f=p,g=w):t>1-1e-8?(f=3*(h-l),g=3*(c-u)):(f=(3*y*t+2*_)*t+p,g=(3*x*t+2*b)*t+w),i){0===f&&0===g&&(t<1e-8||t>1-1e-8)&&(f=l-s,g=u-o);var k=Math.sqrt(f*f+g*g);k&&(f/=k,g/=k)}if(3===n){l=6*y*t+2*_,u=6*x*t+2*b;var C=Math.pow(f*f+g*g,1.5);f=0!==C?(f*u-g*l)/C:0,g=0}}return 2===n?new v(g,-f):new v(f,g)}return{statics:{classify:function(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],l=e[6],u=e[7],h=i*(n-u)+r*(l-t)+t*u-n*l,c=3*(a*(r-n)+s*(t-i)+i*n-r*t),d=c-h,f=d-h+(t*(u-s)+n*(a-l)+l*s-u*a),g=Math.sqrt(f*f+d*d+c*c),p=0!==g?1/g:0,_=m.isZero;function v(e,t,n){var i=t!==o,r=i&&t>0&&t<1,a=i&&n>0&&n<1;return!i||(r||a)&&("loop"!==e||r&&a)||(e="arch",r=a=!1),{type:e,roots:r||a?r&&a?t<n?[t,n]:[n,t]:[r?t:n]:null}}if(d*=p,c*=p,_(f*=p))return _(d)?v(_(c)?"line":"quadratic"):v("serpentine",c/(3*d));var y=3*d*d-4*f*c;if(_(y))return v("cusp",d/(2*f));var w=y>0?Math.sqrt(y/3):Math.sqrt(-y),b=2*f;return v(y>0?"serpentine":"loop",(d+w)/b,(d-w)/b)},getLength:function(n,i,r,a){if(i===o&&(i=0),r===o&&(r=1),R.isStraight(n)){var s=n;r<1&&(s=R.subdivide(s,r)[0],i/=r),i>0&&(s=R.subdivide(s,i)[1]);var l=s[6]-s[0],u=s[7]-s[1];return Math.sqrt(l*l+u*u)}return m.integrate(a||e(n),i,r,t(i,r))},getTimeAt:function(n,i,r){if(r===o&&(r=i<0?1:0),0===i)return r;var a=Math.abs,s=i>0,l=s?r:0,u=s?1:r,h=e(n),c=R.getLength(n,l,u,h),d=a(i)-c;if(a(d)<1e-12)return s?u:l;if(d>1e-12)return null;var f=i/c,g=0;return m.findRoot((function(e){return g+=m.integrate(h,r,e,t(r,e)),r=e,g-i}),h,r+f,l,u,32,1e-12)},getPoint:function(e,t){return n(e,t,0,!1)},getTangent:function(e,t){return n(e,t,1,!0)},getWeightedTangent:function(e,t){return n(e,t,1,!1)},getNormal:function(e,t){return n(e,t,2,!0)},getWeightedNormal:function(e,t){return n(e,t,2,!1)},getCurvature:function(e,t){return n(e,t,3,!1).x},getPeaks:function(e){var t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=3*i-t-3*a+e[6],l=3*t-6*i+3*a,u=-3*t+3*i,h=3*r-n-3*s+e[7],c=3*n-6*r+3*s,d=-3*n+3*r,f=[];return m.solveCubic(9*(o*o+h*h),9*(o*l+c*h),2*(l*l+c*c)+3*(u*o+d*h),u*l+c*d,f,1e-8,1-1e-8),f.sort()}}}},new function(){function e(e,t,n,i,r,a,s){var o=!s&&n.getPrevious()===r,l=!s&&n!==r&&n.getNext()===r;if(null!==i&&i>=(o?1e-8:0)&&i<=(l?1-1e-8:1)&&null!==a&&a>=(l?1e-8:0)&&a<=(o?1-1e-8:1)){var u=new B(n,i,null,s),h=new B(r,a,null,s);u._intersection=h,h._intersection=u,t&&!t(u)||B.insert(e,u,!0)}}function t(i,r,a,s,o,l,u,h,c,d,f,g,p){if(++c>=4096||++h>=40)return c;var m,_,v=r[0],y=r[1],w=r[6],b=r[7],x=S.getSignedDistance,k=x(v,y,w,b,r[2],r[3]),C=x(v,y,w,b,r[4],r[5]),z=k*C>0?3/4:4/9,j=z*Math.min(0,k,C),I=z*Math.max(0,k,C),A=x(v,y,w,b,i[0],i[1]),P=x(v,y,w,b,i[2],i[3]),M=x(v,y,w,b,i[4],i[5]),T=x(v,y,w,b,i[6],i[7]),E=function(e,t,n,i){var r,a=[0,e],s=[1/3,t],o=[2/3,n],l=[1,i],u=t-(2*e+i)/3,h=n-(e+2*i)/3;if(u*h<0)r=[[a,s,l],[a,o,l]];else{var c=u/h;r=[c>=2?[a,s,l]:c<=.5?[a,o,l]:[a,s,o,l],[a,l]]}return(u||h)<0?r.reverse():r}(A,P,M,T),O=E[0],L=E[1];if(0===k&&0===C&&0===A&&0===P&&0===M&&0===T||null==(m=n(O,L,j,I))||null==(_=n(O.reverse(),L.reverse(),j,I)))return c;var N=d+(f-d)*m,B=d+(f-d)*_;if(Math.max(p-g,B-N)<1e-9){var D=(N+B)/2,F=(g+p)/2;e(o,l,u?s:a,u?F:D,u?a:s,u?D:F)}else{i=R.getPart(i,m,_);var q=p-g;if(_-m>.8)if(B-N>q)D=(N+B)/2,c=t(r,(V=R.subdivide(i,.5))[0],s,a,o,l,!u,h,c,g,p,N,D),c=t(r,V[1],s,a,o,l,!u,h,c,g,p,D,B);else{var V;F=(g+p)/2,c=t((V=R.subdivide(r,.5))[0],i,s,a,o,l,!u,h,c,g,F,N,B),c=t(V[1],i,s,a,o,l,!u,h,c,F,p,N,B)}else c=0===q||q>=1e-9?t(r,i,s,a,o,l,!u,h,c,g,p,N,B):t(i,r,a,s,o,l,u,h,c,N,B,g,p)}return c}function n(e,t,n,r){return e[0][1]<n?i(e,!0,n):t[0][1]>r?i(t,!1,r):e[0][0]}function i(e,t,n){for(var i=e[0][0],r=e[0][1],a=1,s=e.length;a<s;a++){var o=e[a][0],l=e[a][1];if(t?l>=n:l<=n)return l===n?o:i+(n-r)*(o-i)/(l-r);i=o,r=l}return null}function r(e,t,n,i,r){var a=m.isZero;if(a(i)&&a(r)){var s=R.getTimeOf(e,new v(t,n));return null===s?[]:[s]}for(var o=Math.atan2(-r,i),l=Math.sin(o),u=Math.cos(o),h=[],c=[],d=0;d<8;d+=2){var f=e[d]-t,g=e[d+1]-n;h.push(f*u-g*l,f*l+g*u)}return R.solveCubic(h,1,0,c,0,1),c}function a(t,n,i,a,s,o,l){for(var u=n[0],h=n[1],c=r(t,u,h,n[6]-u,n[7]-h),d=0,f=c.length;d<f;d++){var g=c[d],p=R.getPoint(t,g),m=R.getTimeOf(n,p);null!==m&&e(s,o,l?a:i,l?m:g,l?i:a,l?g:m)}}function s(t,n,i,r,a,s){var o=S.intersect(t[0],t[1],t[6],t[7],n[0],n[1],n[6],n[7]);o&&e(a,s,i,R.getTimeOf(t,o),r,R.getTimeOf(n,o))}function o(n,i,r,o,l,h){var c=Math.min,d=Math.max;if(d(n[0],n[2],n[4],n[6])+1e-12>c(i[0],i[2],i[4],i[6])&&c(n[0],n[2],n[4],n[6])-1e-12<d(i[0],i[2],i[4],i[6])&&d(n[1],n[3],n[5],n[7])+1e-12>c(i[1],i[3],i[5],i[7])&&c(n[1],n[3],n[5],n[7])-1e-12<d(i[1],i[3],i[5],i[7])){var f=u(n,i);if(f)for(var g=0;g<2;g++){var p=f[g];e(l,h,r,p[0],o,p[1],!0)}else{var m=R.isStraight(n),_=R.isStraight(i),y=m&&_,w=m&&!_,b=l.length;if((y?s:m||_?a:t)(w?i:n,w?n:i,w?o:r,w?r:o,l,h,w,0,0,0,1,0,1),!y||l.length===b)for(g=0;g<4;g++){var x=g>>1,k=1&g,C=6*x,S=6*k,z=new v(n[C],n[C+1]),j=new v(i[S],i[S+1]);z.isClose(j,1e-12)&&e(l,h,r,x,o,k)}}}return l}function l(t,n,i,r){var a=R.classify(t);if("loop"===a.type){var s=a.roots;e(i,r,n,s[0],n,s[1])}return i}function u(e,t){function n(e){var t=e[6]-e[0],n=e[7]-e[1];return t*t+n*n}var i=Math.abs,r=S.getDistance,a=R.isStraight(e),s=R.isStraight(t),o=a&&s,l=n(e)<n(t),u=l?t:e,h=l?e:t,c=u[0],d=u[1],f=u[6]-c,g=u[7]-d;if(r(c,d,f,g,h[0],h[1],!0)<1e-7&&r(c,d,f,g,h[6],h[7],!0)<1e-7)!o&&r(c,d,f,g,u[2],u[3],!0)<1e-7&&r(c,d,f,g,u[4],u[5],!0)<1e-7&&r(c,d,f,g,h[2],h[3],!0)<1e-7&&r(c,d,f,g,h[4],h[5],!0)<1e-7&&(a=s=o=!0);else if(o)return null;if(a^s)return null;for(var p=[e,t],m=[],_=0;_<4&&m.length<2;_++){var y=1&_,w=1^y,b=_>>1,x=R.getTimeOf(p[y],new v(p[w][b?6:0],p[w][b?7:1]));if(null!=x){var k=y?[b,x]:[x,b];(!m.length||i(k[0]-m[0][0])>1e-8&&i(k[1]-m[0][1])>1e-8)&&m.push(k)}if(_>2&&!m.length)break}if(2!==m.length)m=null;else if(!o){var C=R.getPart(e,m[0][0],m[1][0]),z=R.getPart(t,m[0][1],m[1][1]);(i(z[2]-C[2])>1e-7||i(z[3]-C[3])>1e-7||i(z[4]-C[4])>1e-7||i(z[5]-C[5])>1e-7)&&(m=null)}return m}return{getIntersections:function(e){var t=this.getValues(),n=e&&e!==this&&e.getValues();return n?o(t,n,this,e,[]):l(t,this,[])},statics:{getOverlaps:u,getIntersections:function(e,t,n,i,r,a){var s=!t;s&&(t=e);for(var u=e.length,h=t.length,c=new Array(u),d=s?c:new Array(h),f=[],p=0;p<u;p++)c[p]=e[p].getValues(i);if(!s)for(p=0;p<h;p++)d[p]=t[p].getValues(r);for(var m=g.findCurveBoundsCollisions(c,d,1e-7),_=0;_<u;_++){var v=e[_],y=c[_];s&&l(y,v,f,n);var w=m[_];if(w)for(var b=0;b<w.length;b++){if(a&&f.length)return f;var x=w[b];if(!s||x>_){var k=t[x];o(y,d[x],v,k,f,n)}}}return f},getCurveLineIntersections:r,getTimesWithTangent:function(e,t){var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],h=t.normalize(),c=h.x,d=h.y,f=3*l-9*s+9*r-3*n,g=3*u-9*o+9*a-3*i,p=6*s-12*r+6*n,_=6*o-12*a+6*i,v=3*r-3*n,y=3*a-3*i,w=2*f*d-2*g*c,b=[];if(Math.abs(w)<m.CURVETIME_EPSILON){if(0!=(w=f*_-g*p)){var x=-(f*y-g*v)/w;x>=0&&x<=1&&b.push(x)}}else{var k=(p*p-4*f*v)*d*d+(-2*p*_+4*g*v+4*f*y)*c*d+(_*_-4*g*y)*c*c,C=p*d-_*c;if(k>=0&&0!=w){var S=Math.sqrt(k),z=-(C+S)/w,j=(-C+S)/w;z>=0&&z<=1&&b.push(z),j>=0&&j<=1&&b.push(j)}}return b}}}}),B=h.extend({_class:"CurveLocation",initialize:function(e,t,n,i,r){if(t>=.99999999){var a=e.getNext();a&&(t=0,e=a)}this._setCurve(e),this._time=t,this._point=n||e.getPointAtTime(t),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),n=this.getTime();0===n?e=t._segment1:1===n?e=t._segment2:null!=n&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;function n(e){var n=e&&e.getCurve();if(n&&null!=(t._time=n.getTimeOf(t._point)))return t._setCurve(n),n}return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&null==t?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(null==e){e=0;var t=this.getPath(),n=this.getIndex();if(t&&null!=n)for(var i=t.getCurves(),r=0;r<n;r++)e+=i[r].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(null==e){var t=this.getCurve(),n=this.getTime();this._curveOffset=e=null!=n&&t&&t.getPartLength(0,n)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,n=e&&e.splitAtTime(this.getTime());return n&&this._setSegment(t.getLastSegment()),n},equals:function(e,t){var n=this===e;if(!n&&e instanceof B){var i=this.getCurve(),r=e.getCurve(),a=i._path;if(a===r._path){var s=Math.abs,o=s(this.getOffset()-e.getOffset()),l=!t&&this._intersection,u=!t&&e._intersection;n=(o<1e-7||a&&s(a.getLength()-o)<1e-7)&&(!l&&!u||l&&u&&l.equals(u,!0))}}return n},toString:function(){var e=[],t=this.getPoint(),n=p.instance;t&&e.push("point: "+t);var i=this.getIndex();null!=i&&e.push("index: "+i);var r=this.getTime();return null!=r&&e.push("time: "+n.number(r)),null!=this._distance&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),n=e.getTime(),i=t>=1e-8&&t<=1-1e-8,r=n>=1e-8&&n<=1-1e-8;if(i&&r)return!this.isTouching();var a=this.getCurve(),s=a&&t<1e-8?a.getPrevious():a,o=e.getCurve(),l=o&&n<1e-8?o.getPrevious():o;if(t>1-1e-8&&(a=a.getNext()),n>1-1e-8&&(o=o.getNext()),!(s&&a&&l&&o))return!1;var u=[];function h(e,t){var n=e.getValues(),i=R.classify(n).roots||R.getPeaks(n),r=i.length,a=R.getLength(n,t&&r?i[r-1]:0,!t&&r?i[0]:1);u.push(r?a:a/32)}function c(e,t,n){return t<n?e>t&&e<n:e>t||e<n}i||(h(s,!0),h(a,!1)),r||(h(l,!0),h(o,!1));var d=this.getPoint(),f=Math.min.apply(Math,u),g=i?a.getTangentAtTime(t):a.getPointAt(f).subtract(d),p=i?g.negate():s.getPointAt(-f).subtract(d),m=r?o.getTangentAtTime(n):o.getPointAt(f).subtract(d),_=r?m.negate():l.getPointAt(-f).subtract(d),v=p.getAngle(),y=g.getAngle(),w=_.getAngle(),b=m.getAngle();return!!(i?c(v,w,b)^c(y,w,b)&&c(v,b,w)^c(y,b,w):c(w,v,y)^c(b,v,y)&&c(w,y,v)^c(b,y,v))},hasOverlap:function(){return!!this._overlap}},h.each(R._evaluateMethods,(function(e){var t=e+"At";this[e]=function(){var e=this.getCurve(),n=this.getTime();return null!=n&&e&&e[t](n,!0)}}),{preserve:!0}),new function(){function e(e,t,n){var i=e.length,r=0,a=i-1;function s(n,r){for(var a=n+r;a>=-1&&a<=i;a+=r){var s=e[(a%i+i)%i];if(!t.getPoint().isClose(s.getPoint(),1e-7))break;if(t.equals(s))return s}return null}for(;r<=a;){var o,l=r+a>>>1,u=e[l];if(n&&(o=t.equals(u)?u:s(l,-1)||s(l,1)))return t._overlap&&(o._overlap=o._intersection._overlap=!0),o;var h=t.getPath(),c=u.getPath();(h!==c?h._id-c._id:t.getIndex()+t.getTime()-(u.getIndex()+u.getTime()))<0?a=l-1:r=l+1}return e.splice(r,0,t),t}return{statics:{insert:e,expand:function(t){for(var n=t.slice(),i=t.length-1;i>=0;i--)e(n,t[i]._intersection,!1);return n}}}}),D=j.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,n,i;if(h.isPlainObject(e)?(n=e.segments,t=e.pathData):Array.isArray(e)?n=e:"string"==typeof e&&(t=e),n){var r=n[0];i=r&&Array.isArray(r[0])}else t&&(i=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));return new(i?q:F)(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t,n,i,r=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,s=new v,o=new v;function l(e,n){var i=+t[e];return a&&(i+=s[n]),i}function u(e){return new v(l(e,"x"),l(e+1,"y"))}this.clear();for(var h=0,c=r&&r.length;h<c;h++){var d=r[h],f=d[0],g=f.toLowerCase(),p=(t=d.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&t.length;switch(a=f===g,"z"!==n||/[mz]/.test(g)||this.moveTo(s),g){case"m":case"l":for(var m="m"===g,_=0;_<p;_+=2)this[m?"moveTo":"lineTo"](s=u(_)),m&&(o=s,m=!1);i=s;break;case"h":case"v":var y="h"===g?"x":"y";for(s=s.clone(),_=0;_<p;_++)s[y]=l(_,y),this.lineTo(s);i=s;break;case"c":for(_=0;_<p;_+=6)this.cubicCurveTo(u(_),i=u(_+2),s=u(_+4));break;case"s":for(_=0;_<p;_+=4)this.cubicCurveTo(/[cs]/.test(n)?s.multiply(2).subtract(i):s,i=u(_),s=u(_+2)),n=g;break;case"q":for(_=0;_<p;_+=4)this.quadraticCurveTo(i=u(_),s=u(_+2));break;case"t":for(_=0;_<p;_+=2)this.quadraticCurveTo(i=/[qt]/.test(n)?s.multiply(2).subtract(i):s,s=u(_)),n=g;break;case"a":for(_=0;_<p;_+=7)this.arcTo(s=u(_+5),new w(+t[_],+t[_+1]),+t[_+2],+t[_+4],+t[_+3]);break;case"z":this.closePath(1e-12),s=o}n=g}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!("evenodd"===this.getFillRule()?1&t.windingL||1&t.windingR:t.winding)},getIntersections:function(e,t,n,i){var r=this===e||!e,a=this._matrix._orNullIfIdentity(),s=r?a:(n||e._matrix)._orNullIfIdentity();return r||this.getBounds(a).intersects(e.getBounds(s),1e-12)?R.getIntersections(this.getCurves(),!r&&e.getCurves(),t,a,s,i):[]},getCrossings:function(e){return this.getIntersections(e,(function(e){return e.isCrossing()}))},getNearestLocation:function(){for(var e=v.read(arguments),t=this.getCurves(),n=1/0,i=null,r=0,a=t.length;r<a;r++){var s=t[r].getNearestLocation(e);s._distance<n&&(n=s._distance,i=s)}return i},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e?e.getPoint():e},interpolate:function(e,t,n){var i=!this._children,r=i?"_segments":"_children",a=e[r],s=t[r],o=this[r];if(!a||!s||a.length!==s.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var l=o.length,u=s.length;if(l<u)for(var h=i?L:F,c=l;c<u;c++)this.add(new h);else l>u&&this[i?"removeSegments":"removeChildren"](u,l);for(c=0;c<u;c++)o[c].interpolate(a[c],s[c],n);i&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var n=this._children||[this],i=e._children?e._children.slice():[e],r=n.length,a=i.length,s=[],o=0;t=!0;for(var l=g.findItemBoundsCollisions(n,i,m.GEOMETRIC_EPSILON),u=r-1;u>=0&&t;u--){var h=n[u];t=!1;var c=l[u];if(c)for(var d=c.length-1;d>=0&&!t;d--)h.compare(i[c[d]])&&(s[c[d]]||(s[c[d]]=!0,o++),t=!0)}t=t&&o===a}return t}}),F=D.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var t=arguments,n=Array.isArray(e)?"object"==typeof e[0]?e:t:!e||e.size!==o||e.x===o&&e.point===o?null:t;n&&n.length>0?this.setSegments(n):(this._curves=o,this._segmentSelection=0,n||"string"!=typeof e||(this.setPathData(e),e=null)),this._initialize(!n&&e)},_equals:function(e){return this._closed===e._closed&&h.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),8&t){if(this._length=this._area=o,32&t)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else 64&t&&(this._bounds=o)},getStyle:function(){var e=this._parent;return(e instanceof q?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),n=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=o,n){var i=e[n-1];"boolean"==typeof i&&(this.setClosed(i),n--),this._add(L.readList(e,0,{},n))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var i=0;i<n;i++)e[i]=new R(this,t[i],t[i+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new R(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var n,i,r,a,s,o,l,u,h=this._segments,c=h.length,d=new p(t),f=new Array(6),g=!0,m=[];function _(t,h){if(t._transformCoordinates(e,f),n=f[0],i=f[1],g)m.push("M"+d.pair(n,i)),g=!1;else if(s=f[2],o=f[3],s===n&&o===i&&l===r&&u===a){if(!h){var c=n-r,p=i-a;m.push(0===c?"v"+d.number(p):0===p?"h"+d.number(c):"l"+d.pair(c,p))}}else m.push("c"+d.pair(l-r,u-a)+" "+d.pair(s-r,o-a)+" "+d.pair(n-r,i-a));r=n,a=i,l=f[4],u=f[5]}if(!c)return"";for(var v=0;v<c;v++)_(h[v]);return this._closed&&c>0&&(_(h[0],!0),m.push("z")),m.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,n=new Array(6),i=0,r=t.length;i<r;i++)t[i]._transformCoordinates(e,n,!0);return!0},_add:function(e,t){for(var n=this._segments,i=this._curves,r=e.length,a=null==t,s=(t=a?n.length:t,0);s<r;s++){var o=e[s];o._path&&(o=e[s]=o.clone()),o._path=this,o._index=t+s,o._selection&&this._updateSelection(o,0,o._selection)}if(a)h.push(n,e);else{n.splice.apply(n,[t,0].concat(e)),s=t+r;for(var l=n.length;s<l;s++)n[s]._index=s}if(i){var u=this._countCurves(),c=t>0&&t+r-1===u?t-1:t,d=c,f=Math.min(c+r,u);for(e._curves&&(i.splice.apply(i,[c,0].concat(e._curves)),d+=e._curves.length),s=d;s<f;s++)i.splice(s,0,new R(this,null,null));this._adjustCurves(c,f)}return this._changed(41),e},_adjustCurves:function(e,t){for(var n,i=this._segments,r=this._curves,a=e;a<t;a++)(n=r[a])._path=this,n._segment1=i[a],n._segment2=i[a+1]||i[0],n._changed();(n=r[this._closed&&!e?i.length-1:e-1])&&(n._segment2=i[e]||i[0],n._changed()),(n=r[t])&&(n._segment1=i[t],n._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&"number"!=typeof e?this._add(L.readList(t)):this._add([L.read(t)])[0]},insert:function(e,t){var n=arguments;return n.length>2&&"number"!=typeof t?this._add(L.readList(n,1),e):this._add([L.read(n,1)],e)[0]},addSegment:function(){return this._add([L.read(arguments)])[0]},insertSegment:function(e){return this._add([L.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(L.readList(e))},insertSegments:function(e,t){return this._add(L.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=h.pick(t,this._segments.length);var i=this._segments,r=this._curves,a=i.length,s=i.splice(e,t-e),o=s.length;if(!o)return s;for(var l=0;l<o;l++){var u=s[l];u._selection&&this._updateSelection(u,u._selection,0),u._index=u._path=null}l=e;for(var c=i.length;l<c;l++)i[l]._index=l;if(r){var d=e>0&&t===a+(this._closed?1:0)?e-1:e;for(l=(r=r.splice(d,o)).length-1;l>=0;l--)r[l]._path=null;n&&(s._curves=r.slice(1)),this._adjustCurves(d,d)}return this._changed(41),s},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(null==this._length){for(var e=this.getCurves(),t=0,n=0,i=e.length;n<i;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(null==e){var t=this._segments,n=this._closed;e=0;for(var i=0,r=t.length;i<r;i++){var a=i+1===r;e+=R.getArea(R.getValues(t[i],t[a?0:i+1],null,a&&!n))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===7*e},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){1&t||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,n=t.length,i=e?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)t[r]._selection=i},_updateSelection:function(e,t,n){e._selection=n,(this._segmentSelection+=n-t)>0&&this.setSelected(!0)},divideAt:function(e){var t,n=this.getLocationAt(e);return n&&(t=n.getCurve().divideAt(n.getCurveOffset()))?t._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),n=t&&t.index,i=t&&t.time;i>1-1e-8&&(n++,i=0);var r=this.getCurves();if(n>=0&&n<r.length){i>=1e-8&&r[n++].divideAtTime(i);var a,s=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),a=this):((a=new F(j.NO_INSERT)).insertAbove(this),a.copyAttributes(this)),a._add(s,0),this.addSegment(s[0]),a}return null},split:function(e,t){var n,i=t===o?e:(n=this.getCurves()[e])&&n.getLocationAtTime(t);return null!=i?this.splitAt(i):null},join:function(e,t){var n=t||0;if(e&&e!==this){var i=e._segments,r=this.getLastSegment(),a=e.getLastSegment();if(!a)return this;r&&r._point.isClose(a._point,n)&&e.reverse();var s=e.getFirstSegment();if(r&&r._point.isClose(s._point,n))r.setHandleOut(s._handleOut),this._add(i.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(s._point,n)&&e.reverse(),a=e.getLastSegment(),o&&o._point.isClose(a._point,n)?(o.setHandleIn(a._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}e._closed&&this._add([i[0]]),e.remove()}var l=this.getFirstSegment(),u=this.getLastSegment();return l!==u&&l._point.isClose(u._point,n)&&(l.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,i=n?1e-7:0,r=t.length-1;r>=0;r--){var a=t[r];!a.hasHandles()&&(!a.hasLength(i)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new V(this,e||.25,256,!0).parts,n=t.length,i=[],r=0;r<n;r++)i.push(new L(t[r].curve.slice(0,2)));!this._closed&&n>0&&i.push(new L(t[n-1].curve.slice(6))),this.setSegments(i)},simplify:function(e){var t=new U(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,n=e||{},i=n.type||"asymmetric",r=this._segments,a=r.length,s=this._closed;function l(e,n){var i=e&&e.index;if(null!=i){var r=e.path;if(r&&r!==t)throw new Error(e._class+" "+i+" of "+r+" is not part of "+t);n&&e instanceof R&&i++}else i="number"==typeof e?e:n;return Math.min(i<0&&s?i%a:i<0?i+a:i,a-1)}var u=s&&n.from===o&&n.to===o,h=l(n.from,0),c=l(n.to,a-1);if(h>c)if(s)h-=a;else{var d=h;h=c,c=d}if(/^(?:asymmetric|continuous)$/.test(i)){var f="asymmetric"===i,g=Math.min,p=c-h+1,m=p-1,_=u?g(p,4):1,v=_,y=_,w=[];if(s||(v=g(1,h),y=g(1,a-c-1)),(m+=v+y)<=1)return;for(var b=0,x=h-v;b<=m;b++,x++)w[b]=r[(x<0?x+a:x)%a]._point;var k=w[0]._x+2*w[1]._x,C=w[0]._y+2*w[1]._y,S=2,z=m-1,j=[k],I=[C],A=[S],P=[],M=[];for(b=1;b<m;b++){var T=b<z,E=T?4:f?2:7,O=T?4:f?3:8,L=T?2:f?0:1,N=(T||f?1:2)/S;S=A[b]=E-N,k=j[b]=O*w[b]._x+L*w[b+1]._x-N*k,C=I[b]=O*w[b]._y+L*w[b+1]._y-N*C}for(P[z]=j[z]/A[z],M[z]=I[z]/A[z],b=m-2;b>=0;b--)P[b]=(j[b]-P[b+1])/A[b],M[b]=(I[b]-M[b+1])/A[b];P[m]=(3*w[m]._x-P[z])/2,M[m]=(3*w[m]._y-M[z])/2,b=v;var B=m-y;for(x=h;b<=B;b++,x++){var D=r[x<0?x+a:x],F=D._point,q=P[b]-F._x,V=M[b]-F._y;(u||b<B)&&D.setHandleOut(q,V),(u||b>v)&&D.setHandleIn(-q,-V)}}else for(b=h;b<=c;b++)r[b<0?b+a:b].smooth(n,!u&&b===h,!u&&b===c)},toShape:function(e){if(!this._closed)return null;var t,n,i,r,a,s,l,u=this._segments;function h(e,t){var n=u[e],i=n.getNext(),r=u[t],a=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&a._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(a._point.subtract(r._point))}function c(e){var t=u[e],n=t.getNext(),i=t._handleOut,r=n._handleIn,a=.5522847498307936;if(i.isOrthogonal(r)){var s=t._point,o=n._point,l=new S(s,i,!0).intersect(new S(o,r,!0),!0);return l&&m.isZero(i.getLength()/l.subtract(s).getLength()-a)&&m.isZero(r.getLength()/l.subtract(o).getLength()-a)}return!1}function d(e,t){return u[e]._point.getDistance(u[t]._point)}if(!this.hasHandles()&&4===u.length&&h(0,2)&&h(1,3)&&(s=(a=u[1]).getPrevious(),l=a.getNext(),s._handleOut.isZero()&&a._handleIn.isZero()&&a._handleOut.isZero()&&l._handleIn.isZero()&&a._point.subtract(s._point).isOrthogonal(l._point.subtract(a._point)))?(t=P.Rectangle,n=new w(d(0,3),d(0,1)),r=u[1]._point.add(u[2]._point).divide(2)):8===u.length&&c(0)&&c(2)&&c(4)&&c(6)&&h(1,5)&&h(3,7)?(t=P.Rectangle,i=(n=new w(d(1,6),d(0,3))).subtract(new w(d(0,7),d(1,2))).divide(2),r=u[3]._point.add(u[4]._point).divide(2)):4===u.length&&c(0)&&c(1)&&c(2)&&c(3)&&(m.isZero(d(0,2)-d(1,3))?(t=P.Circle,i=d(0,2)/2):(t=P.Ellipse,i=new w(d(2,0)/2,d(3,1)/2)),r=u[1]._point),t){var f=this.getPosition(!0),g=new t({center:f,size:n,radius:i,insert:!1});return g.copyAttributes(this,!0),g._matrix.prepend(this._matrix),g.rotate(r.subtract(f).getAngle()+90),(e===o||e)&&g.insertAbove(this),g}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof q)return e.base.call(this,t);var n=this.getCurves(),i=t.getCurves(),r=n.length,a=i.length;if(!r||!a)return r==a;for(var s,o,l=n[0].getValues(),u=[],h=0,c=0,d=0;d<a;d++){var f=i[d].getValues();if(u.push(f),m=R.getOverlaps(l,f)){s=!d&&m[0][0]>0?a-1:d,o=m[0][1];break}}var g,p=Math.abs;for(f=u[s];l&&f;){var m;if((m=R.getOverlaps(l,f))&&p(m[0][0]-c)<1e-8){1===(c=m[1][0])&&(l=++h<r?n[h].getValues():null,c=0);var _=m[0][1];if(p(_-o)<1e-8){if(g||(g=[s,_]),1===(o=m[1][1])&&(++s>=a&&(s=0),f=u[s]||i[s].getValues(),o=0),!l)return g[0]===s&&g[1]===o;continue}}break}return!1},_hitTestSelf:function(e,t,n,i){var r,a,s,o,l,u,h=this,c=this.getStyle(),d=this._segments,f=d.length,g=this._closed,p=t._tolerancePadding,m=p,_=t.stroke&&c.hasStroke(),v=t.fill&&c.hasFill(),y=t.curves,w=_?c.getStrokeWidth()/2:v&&t.tolerance>0||y?0:null;function b(t,n){return e.subtract(t).divide(n).length<=1}function x(e,n,i){if(!t.selected||n.isSelected()){var r=e._point;if(n!==r&&(n=n.add(r)),b(n,m))return new O(i,h,{segment:e,point:n})}}function k(e,n){return(n||t.segments)&&x(e,e._point,"segment")||!n&&t.handles&&(x(e,e._handleIn,"handle-in")||x(e,e._handleOut,"handle-out"))}function C(e){o.add(e)}function S(t){var n,l=g||t._index>0&&t._index<f-1;return"round"===(l?r:a)?b(t._point,m):(o=new F({internal:!0,closed:!0}),l?t.isSmooth()||F._addBevelJoin(t,r,w,s,null,i,C,!0):"square"===a&&F._addSquareCap(t,a,w,null,i,C,!0),o.isEmpty()?void 0:o.contains(e)||(n=o.getNearestLocation(e))&&b(n.getPoint(),p))}if(null!==w&&(w>0?(r=c.getStrokeJoin(),a=c.getStrokeCap(),s=c.getMiterLimit(),m=m.add(F._getStrokePadding(w,i))):r=a="round"),!t.ends||t.segments||g){if(t.segments||t.handles)for(var z=0;z<f;z++)if(u=k(d[z]))return u}else if(u=k(d[0],!0)||k(d[f-1],!0))return u;if(null!==w){if(l=this.getNearestLocation(e)){var j=l.getTime();0===j||1===j&&f>1?S(l.getSegment())||(l=null):b(l.getPoint(),m)||(l=null)}if(!l&&"miter"===r&&f>1)for(z=0;z<f;z++){var I=d[z];if(e.getDistance(I._point)<=s*w&&S(I)){l=I.getLocation();break}}}return!l&&v&&this._contains(e)||l&&!_&&!y?new O("fill",this):l?new O(_?"stroke":"curve",this,{location:l,point:l.getPoint()}):null}},h.each(R._evaluateMethods,(function(e){this[e+"At"]=function(t){var n=this.getLocationAt(t);return n&&n[e]()}}),{beans:!1,getLocationOf:function(){for(var e=v.read(arguments),t=this.getCurves(),n=0,i=t.length;n<i;n++){var r=t[n].getLocationOf(e);if(r)return r}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if("number"==typeof e){for(var t=this.getCurves(),n=0,i=0,r=t.length;i<r;i++){var a=n,s=t[i];if((n+=s.getLength())>e)return s.getLocationAt(e-a)}if(t.length>0&&e<=this.getLength())return new B(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=v.read(arguments);if(e.isZero())return[];for(var t=[],n=0,i=this.getCurves(),r=0,a=i.length;r<a;r++){for(var s=i[r],o=s.getTimesWithTangent(e),l=0,u=o.length;l<u;l++){var h=n+s.getOffsetAtTime(o[l]);t.indexOf(h)<0&&t.push(h)}n+=s.length}return t}}),new function(){function e(e,t,n){var i,r,a,s,o,l,u,h,c=t._segments,d=c.length,f=new Array(6),g=!0;function p(t){if(n)t._transformCoordinates(n,f),i=f[0],r=f[1];else{var c=t._point;i=c._x,r=c._y}if(g)e.moveTo(i,r),g=!1;else{if(n)o=f[2],l=f[3];else{var d=t._handleIn;o=i+d._x,l=r+d._y}o===i&&l===r&&u===a&&h===s?e.lineTo(i,r):e.bezierCurveTo(u,h,o,l,i,r)}a=i,s=r,n?(u=f[4],h=f[5]):(d=t._handleOut,u=a+d._x,h=s+d._y)}for(var m=0;m<d;m++)p(c[m]);t._closed&&d>0&&p(c[0])}return{_draw:function(t,n,i,r){var a=n.dontStart,s=n.dontFinish||n.clip,o=this.getStyle(),l=o.hasFill(),u=o.hasStroke(),h=o.getDashArray(),c=!de.support.nativeDash&&u&&h&&h.length;function d(e){return h[(e%c+c)%c]}if(a||t.beginPath(),(l||u&&!c||s)&&(e(t,this,r),this._closed&&t.closePath()),!s&&(l||u)&&(this._setStyles(t,n,i),l&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),u)){if(c){a||t.beginPath();var f,g=new V(this,.25,32,!1,r),p=g.length,m=-o.getDashOffset(),_=0;for(m%=p;m>0;)m-=d(_--)+d(_--);for(;m<p;)f=m+d(_++),(m>0||f>0)&&g.drawPart(t,Math.max(m,0),Math.max(f,0)),m=f+d(_++)}t.stroke()}},_drawSelected:function(t,n){t.beginPath(),e(t,this,n),t.stroke(),function(e,t,n,i){if(!(i<=0))for(var r,a,s=i/2,o=i-2,l=s-1,u=new Array(6),h=0,c=t.length;h<c;h++){var d=t[h],f=d._selection;if(d._transformCoordinates(n,u),r=u[0],a=u[1],2&f&&p(2),4&f&&p(4),e.fillRect(r-s,a-s,i,i),o>0&&!(1&f)){var g=e.fillStyle;e.fillStyle="#ffffff",e.fillRect(r-l,a-l,o,o),e.fillStyle=g}}function p(t){var n=u[t],i=u[t+1];r==n&&a==i||(e.beginPath(),e.moveTo(r,a),e.lineTo(n,i),e.stroke(),e.beginPath(),e.arc(n,i,s,0,2*Math.PI,!0),e.fill())}}(t,this._segments,n,de.settings.handleSize)}}},new function(){function e(e){var t=e._segments;if(!t.length)throw new Error("Use a moveTo() command first");return t[t.length-1]}return{moveTo:function(){var e=this._segments;1===e.length&&this.removeSegment(0),e.length||this._add([new L(v.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new L(v.read(arguments))])},cubicCurveTo:function(){var t=arguments,n=v.read(t),i=v.read(t),r=v.read(t),a=e(this);a.setHandleOut(n.subtract(a._point)),this._add([new L(r,i.subtract(r))])},quadraticCurveTo:function(){var t=arguments,n=v.read(t),i=v.read(t),r=e(this)._point;this.cubicCurveTo(n.add(r.subtract(n).multiply(1/3)),n.add(i.subtract(n).multiply(1/3)),i)},curveTo:function(){var t=arguments,n=v.read(t),i=v.read(t),r=h.pick(h.read(t),.5),a=1-r,s=e(this)._point,o=n.subtract(s.multiply(a*a)).subtract(i.multiply(r*r)).divide(2*r*a);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);this.quadraticCurveTo(o,i)},arcTo:function(){var t,n,i,r,a=arguments,s=Math.abs,o=Math.sqrt,l=e(this),u=l._point,c=v.read(a),d=h.peek(a);if("boolean"==typeof(y=h.pick(d,!0)))var f=(x=u.add(c).divide(2)).add(x.subtract(u).rotate(y?-90:90));else if(h.remain(a)<=2)f=c,c=v.read(a);else if(!u.equals(c)){var g=w.read(a),p=m.isZero;if(p(g.width)||p(g.height))return this.lineTo(c);var _=h.read(a),y=!!h.read(a),b=!!h.read(a),x=u.add(c).divide(2),k=(J=u.subtract(x).rotate(-_)).x,z=J.y,j=s(g.width),I=s(g.height),A=j*j,P=I*I,M=k*k,T=z*z,E=o(M/A+T/P);if(E>1&&(A=(j*=E)*j,P=(I*=E)*I),s(E=(A*P-A*T-P*M)/(A*T+P*M))<1e-12&&(E=0),E<0)throw new Error("Cannot create an arc with the given arguments");t=new v(j*z/I,-I*k/j).multiply((b===y?-1:1)*o(E)).rotate(_).add(x),n=(i=(r=(new C).translate(t).rotate(_).scale(j,I))._inverseTransform(u)).getDirectedAngle(r._inverseTransform(c)),!y&&n>0?n-=360:y&&n<0&&(n+=360)}if(f){var O=new S(u.add(f).divide(2),f.subtract(u).rotate(90),!0),N=new S(f.add(c).divide(2),c.subtract(f).rotate(90),!0),R=new S(u,c),B=R.getSide(f);if(!(t=O.intersect(N,!0))){if(!B)return this.lineTo(c);throw new Error("Cannot create an arc with the given arguments")}n=(i=u.subtract(t)).getDirectedAngle(c.subtract(t));var D=R.getSide(t,!0);0===D?n=B*s(n):B===D&&(n+=n<0?360:-360)}if(n){for(var F=1e-7,q=s(n),V=q>=360?4:Math.ceil((q-F)/90),U=n/V,H=U*Math.PI/360,Z=4/3*Math.sin(H)/(1+Math.cos(H)),W=[],$=0;$<=V;$++){var J=c,G=null;if($<V&&(G=i.rotate(90).multiply(Z),r?(J=r._transformPoint(i),G=r._transformPoint(i.add(G)).subtract(J)):J=t.add(i)),$){var X=i.rotate(-90).multiply(Z);r&&(X=r._transformPoint(i.add(X)).subtract(J)),W.push(new L(J,X,G))}else l.setHandleOut(G);i=i.rotate(U)}this._add(W)}},lineBy:function(){var t=v.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=arguments,n=v.read(t),i=v.read(t),r=h.read(t),a=e(this)._point;this.curveTo(a.add(n),a.add(i),r)},cubicCurveBy:function(){var t=arguments,n=v.read(t),i=v.read(t),r=v.read(t),a=e(this)._point;this.cubicCurveTo(a.add(n),a.add(i),a.add(r))},quadraticCurveBy:function(){var t=arguments,n=v.read(t),i=v.read(t),r=e(this)._point;this.quadraticCurveTo(r.add(n),r.add(i))},arcBy:function(){var t=arguments,n=e(this)._point,i=n.add(v.read(t)),r=h.pick(h.peek(t),!0);"boolean"==typeof r?this.arcTo(i,r):this.arcTo(i,n.add(v.read(t)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(e,t){var n=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return F[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,i,r,a){var s=e[0];if(!s)return new x;var o=new Array(6),l=s._transformCoordinates(i,new Array(6)),u=l.slice(0,2),h=u.slice(),c=new Array(2);function d(e){e._transformCoordinates(i,o);for(var t=0;t<2;t++)R._addBounds(l[t],l[t+4],o[t+2],o[t],t,a?a[t]:0,u,h,c);var n=l;l=o,o=n}for(var f=1,g=e.length;f<g;f++)d(e[f]);return t&&d(s),new x(u[0],u[1],h[0]-u[0],h[1]-u[1])},getStrokeBounds:function(e,t,n,i,r){var a=n.getStyle(),s=a.hasStroke(),o=a.getStrokeWidth(),l=s&&n._getStrokeMatrix(i,r),u=s&&F._getStrokePadding(o,l),h=F.getBounds(e,t,n,i,r,u);if(!s)return h;var c=o/2,d=a.getStrokeJoin(),f=a.getStrokeCap(),g=a.getMiterLimit(),p=new x(new w(u));function m(e){h=h.include(e)}function _(e){h=h.unite(p.setCenter(e._point.transform(i)))}function v(e,t){"round"===t||e.isSmooth()?_(e):F._addBevelJoin(e,t,c,g,i,l,m)}function y(e,t){"round"===t?_(e):F._addSquareCap(e,t,c,i,l,m)}for(var b=e.length-(t?0:1),k=1;k<b;k++)v(e[k],d);return t?v(e[0],d):b>0&&(y(e[0],f),y(e[e.length-1],f)),h},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new v(e,0).transform(t),i=new v(0,e).transform(t),r=n.getAngleInRadians(),a=n.getLength(),s=i.getLength(),o=Math.sin(r),l=Math.cos(r),u=Math.tan(r),h=Math.atan2(s*u,a),c=Math.atan2(s,u*a);return[Math.abs(a*Math.cos(h)*l+s*Math.sin(h)*o),Math.abs(s*Math.sin(c)*l+a*Math.cos(c)*o)]},_addBevelJoin:function(e,t,n,i,r,a,s,o){var l=e.getCurve(),u=l.getPrevious(),h=l.getPoint1().transform(r),c=u.getNormalAtTime(1).multiply(n).transform(a),d=l.getNormalAtTime(0).multiply(n).transform(a),f=c.getDirectedAngle(d);if((f<0||f>=180)&&(c=c.negate(),d=d.negate()),o&&s(h),s(h.add(c)),"miter"===t){var g=new S(h.add(c),new v(-c.y,c.x),!0).intersect(new S(h.add(d),new v(-d.y,d.x),!0),!0);g&&h.getDistance(g)<=i*n&&s(g)}s(h.add(d))},_addSquareCap:function(e,t,n,i,r,a,s){var o=e._point.transform(i),l=e.getLocation(),u=l.getNormal().multiply(0===l.getTime()?n:-n).transform(r);"square"===t&&(s&&(a(o.subtract(u)),a(o.add(u))),o=o.add(u.rotate(-90))),a(o.add(u)),a(o.subtract(u))},getHandleBounds:function(e,t,n,i,r){var a,s,o=n.getStyle();if(r.stroke&&o.hasStroke()){var l=n._getStrokeMatrix(i,r),u=o.getStrokeWidth()/2,h=u;"miter"===o.getStrokeJoin()&&(h=u*o.getMiterLimit()),"square"===o.getStrokeCap()&&(h=Math.max(h,u*Math.SQRT2)),a=F._getStrokePadding(u,l),s=F._getStrokePadding(h,l)}for(var c=new Array(6),d=1/0,f=-d,g=d,p=f,m=0,_=e.length;m<_;m++){e[m]._transformCoordinates(i,c);for(var v=0;v<6;v+=2){var y=v?a:s,w=y?y[0]:0,b=y?y[1]:0,k=c[v],C=c[v+1],S=k-w,z=k+w,j=C-b,I=C+b;S<d&&(d=S),z>f&&(f=z),j<g&&(g=j),I>p&&(p=I)}}return new x(d,g,f-d,p-g)}}});F.inject({statics:new function(){var e=.5522847498307936,t=[new L([-1,0],[0,e],[0,-e]),new L([0,-1],[-e,0],[e,0]),new L([1,0],[0,-e],[0,e]),new L([0,1],[e,0],[-e,0])];function n(e,t,n){var i=h.getNamed(n),r=new F(i&&0==i.insert&&j.NO_INSERT);return r._add(e),r._closed=t,r.set(i,{insert:!0})}function i(e,i,r){for(var a=new Array(4),s=0;s<4;s++){var o=t[s];a[s]=new L(o._point.multiply(i).add(e),o._handleIn.multiply(i),o._handleOut.multiply(i))}return n(a,!0,r)}return{Line:function(){var e=arguments;return n([new L(v.readNamed(e,"from")),new L(v.readNamed(e,"to"))],!1,e)},Circle:function(){var e=arguments,t=v.readNamed(e,"center"),n=h.readNamed(e,"radius");return i(t,new w(n),e)},Rectangle:function(){var t,i=arguments,r=x.readNamed(i,"rectangle"),a=w.readNamed(i,"radius",0,{readNull:!0}),s=r.getBottomLeft(!0),o=r.getTopLeft(!0),l=r.getTopRight(!0),u=r.getBottomRight(!0);if(!a||a.isZero())t=[new L(s),new L(o),new L(l),new L(u)];else{var h=(a=w.min(a,r.getSize(!0).divide(2))).width,c=a.height,d=h*e,f=c*e;t=[new L(s.add(h,0),null,[-d,0]),new L(s.subtract(0,c),[0,f]),new L(o.add(0,c),null,[0,-f]),new L(o.add(h,0),[-d,0],null),new L(l.subtract(h,0),null,[d,0]),new L(l.add(0,c),[0,-f],null),new L(u.subtract(0,c),null,[0,f]),new L(u.subtract(h,0),[d,0])]}return n(t,!0,i)},RoundRectangle:"#Rectangle",Ellipse:function(){var e=arguments,t=P._readEllipse(e);return i(t.center,t.radius,e)},Oval:"#Ellipse",Arc:function(){var e=arguments,t=v.readNamed(e,"from"),n=v.readNamed(e,"through"),i=v.readNamed(e,"to"),r=h.getNamed(e),a=new F(r&&0==r.insert&&j.NO_INSERT);return a.moveTo(t),a.arcTo(n,i),a.set(r)},RegularPolygon:function(){for(var e=arguments,t=v.readNamed(e,"center"),i=h.readNamed(e,"sides"),r=h.readNamed(e,"radius"),a=360/i,s=i%3==0,o=new v(0,s?-r:r),l=s?-1:.5,u=new Array(i),c=0;c<i;c++)u[c]=new L(t.add(o.rotate((c+l)*a)));return n(u,!0,e)},Star:function(){for(var e=arguments,t=v.readNamed(e,"center"),i=2*h.readNamed(e,"points"),r=h.readNamed(e,"radius1"),a=h.readNamed(e,"radius2"),s=360/i,o=new v(0,-1),l=new Array(i),u=0;u<i;u++)l[u]=new L(t.add(o.rotate(s*u).multiply(u%2?a:r)));return n(l,!0,e)}}}});var q=D.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||("string"==typeof e?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function e(t,n){var i=n,r=i[0];r&&"number"==typeof r[0]&&(i=[i]);for(var a=n.length-1;a>=0;a--){var s=i[a];i!==n||s instanceof F||(i=h.slice(i)),Array.isArray(s)?i[a]=new F({segments:s,insert:!1}):s instanceof q&&(i.splice.apply(i,[a,1].concat(s.removeChildren())),s.remove())}return e.base.call(this,t,i)},reduce:function e(t){for(var n=this._children,i=n.length-1;i>=0;i--){var r;(r=n[i].reduce(t)).isEmpty()&&r.remove()}return n.length?e.base.call(this):((r=new F(j.NO_INSERT)).copyAttributes(this),r.insertAbove(this),this.remove(),r)},isClosed:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,n=0,i=t.length;n<i;n++)t[n].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,i=e.length;n<i;n++)h.push(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,n=0,i=e.length;n<i;n++)t+=e[n].getArea();return t},getLength:function(){for(var e=this._children,t=0,n=0,i=e.length;n<i;n++)t+=e[n].getLength();return t},getPathData:function(e,t){for(var n=this._children,i=[],r=0,a=n.length;r<a;r++){var s=n[r],o=s._matrix;i.push(s.getPathData(e&&!o.isIdentity()?e.appended(o):e,t))}return i.join("")},_hitTestChildren:function e(t,n,i){return e.base.call(this,t,n.class===F||"path"===n.type?n:h.set({},n,{fill:!1}),i)},_draw:function(e,t,n,i){var r=this._children;if(r.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var a=0,s=r.length;a<s;a++)r[a].draw(e,t,i);if(!t.clip){this._setStyles(e,t,n);var o=this._style;o.hasFill()&&(e.fill(o.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var i=this._children,r=0,a=i.length;r<a;r++){var s=i[r],o=s._matrix;n[s._id]||s._drawSelected(e,o.isIdentity()?t:t.appended(o))}}},new function(){function e(e,t){var n=e._children;if(t&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return h.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}}),{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new F(j.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),i=v.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(t){e(this,!0).closePath(t)}})},h.each(["reverse","flatten","simplify","smooth"],(function(e){this[e]=function(t){for(var n,i=this._children,r=0,a=i.length;r<a;r++)n=i[r][e](t)||n;return n}}),{}));D.inject(new function(){var e=Math.min,t=Math.max,n=Math.abs,i={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function r(e){return e._children||[e]}function a(e,t){var n=e.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(t){for(var i=r(n),a=0,s=i.length;a<s;a++)(e=i[a])._closed||e.isEmpty()||(e.closePath(1e-12),e.getFirstSegment().setHandleIn(0,0),e.getLastSegment().setHandleOut(0,0));n=n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0)}return n}function s(e,t,n,i,r){var a=new q(j.NO_INSERT);return a.addChildren(e,!0),a=a.reduce({simplify:t}),r&&0==r.insert||a.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),a.copyAttributes(n,!0),a}function l(e){return e.hasOverlap()||e.isCrossing()}function u(e,t,n,o){if(o&&(0==o.trace||o.stroke)&&/^(subtract|intersect)$/.test(n))return c(e,t,n);var u=a(e,!0),d=t&&e!==t&&a(t,!0),f=i[n];f[n]=!0,d&&(f.subtract||f.exclude)^d.isClockwise()^u.isClockwise()&&d.reverse();var m,v=_(B.expand(u.getIntersections(d,l))),b=r(u),x=d&&r(d),k=[],C=[];function S(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];h.push(k,i._segments),h.push(C,i.getCurves()),i._overlapsOnly=!0}}function z(e){for(var t=[],n=0,i=e&&e.length;n<i;n++)t.push(C[e[n]]);return t}if(v.length){S(b),x&&S(x);for(var j=new Array(C.length),I=0,A=C.length;I<A;I++)j[I]=C[I].getValues();var P=g.findCurveBoundsCollisions(j,j,0,!0),M={};for(I=0;I<C.length;I++){var T=C[I],E=T._path._id;(M[E]=M[E]||{})[T.getIndex()]={hor:z(P[I].hor),ver:z(P[I].ver)}}for(I=0,A=v.length;I<A;I++)y(v[I]._segment,u,d,M,f);for(I=0,A=k.length;I<A;I++){var O=k[I],L=O._intersection;O._winding||y(O,u,d,M,f),L&&L._overlap||(O._path._overlapsOnly=!1)}m=w(k,f)}else m=p(x?b.concat(x):b.slice(),(function(e){return!!f[e]}));return s(m,!0,e,t,o)}function c(e,t,n){var i=a(e),r=a(t),o=i.getIntersections(r,l),u="subtract"===n,h="divide"===n,c={},d=[];function f(e){if(!c[e._id]&&(h||r.contains(e.getPointAt(e.getLength()/2))^u))return d.unshift(e),c[e._id]=!0}for(var g=o.length-1;g>=0;g--){var p=o[g].split();p&&(f(p)&&p.getFirstSegment().setHandleIn(0,0),i.getLastSegment().setHandleOut(0,0))}return f(i),s(d,!1,e,t)}function d(e,t){for(var n=e;n;){if(n===t)return;n=n._previous}for(;e._next&&e._next!==t;)e=e._next;if(!e._next){for(;t._previous;)t=t._previous;e._next=t,t._previous=e}}function f(e){for(var t=e.length-1;t>=0;t--)e[t].clearHandles()}function p(e,t,i){var r=e&&e.length;if(r){var a=h.each(e,(function(e,t){this[e._id]={container:null,winding:e.isClockwise()?1:-1,index:t}}),{}),s=e.slice().sort((function(e,t){return n(t.getArea())-n(e.getArea())})),o=s[0],l=g.findItemBoundsCollisions(s,null,m.GEOMETRIC_EPSILON);null==i&&(i=o.isClockwise());for(var u=0;u<r;u++){var c=s[u],d=a[c._id],f=0,p=l[u];if(p)for(var _=null,v=p.length-1;v>=0;v--)if(p[v]<u){_=_||c.getInteriorPoint();var y=s[p[v]];if(y.contains(_)){var w=a[y._id];f=w.winding,d.winding+=f,d.container=w.exclude?w.container:y;break}}if(t(d.winding)===t(f))d.exclude=!0,e[d.index]=null;else{var b=d.container;c.setClockwise(b?!b.isClockwise():i)}}}return e}function _(e,t,n){var i,r,a,s=t&&[],o=!1,l=n||[],u=n&&{};function h(e){return e._path._id+"."+e._segment1._index}for(var c=(n&&n.length)-1;c>=0;c--)(g=n[c])._path&&(u[h(g)]=!0);for(c=e.length-1;c>=0;c--){var g,p,m=e[c],_=m._time,v=_,y=t&&!t(m);if((g=m._curve)&&(g!==r?(o=!g.hasHandles()||u&&u[h(g)],i=[],a=null,r=g):a>=1e-8&&(_/=a)),y)i&&i.push(m);else{if(t&&s.unshift(m),a=v,_<1e-8)p=g._segment1;else if(_>1-1e-8)p=g._segment2;else{var w=g.divideAtTime(_,!0);o&&l.push(g,w),p=w._segment1;for(var b=i.length-1;b>=0;b--){var x=i[b];x._time=(x._time-_)/(1-_)}}m._setSegment(p);var k=p._intersection,C=m._intersection;if(k){d(k,C);for(var S=k;S;)d(S._intersection,k),S=S._next}else p._intersection=C}}return n||f(l),s||e}function v(i,r,a,s,o){var l,u,h=Array.isArray(r)?r:r[a?"hor":"ver"],c=a?1:0,d=1^c,f=[i.x,i.y],g=f[c],p=f[d],m=g-1e-9,_=g+1e-9,y=0,w=0,b=0,x=0,k=!1,C=!1,S=1,z=[];function j(n){var u=n[d+0],h=n[d+6];if(!(p<e(u,h)||p>t(u,h))){var f=n[c+0],y=n[c+2],w=n[c+4],C=n[c+6];if(u!==h){var j=p===u?0:p===h||m>t(f,y,w,C)||_<e(f,y,w,C)?1:R.solveCubic(n,d,p,z,0,1)>0?z[0]:1,I=0===j?f:1===j?C:R.getPoint(n,j)[a?"y":"x"],A=u>h?1:-1,P=l[d]>l[d+6]?1:-1,M=l[c+6];return p!==u?(I<m?b+=A:I>_?x+=A:k=!0,I>g-1e-6&&I<g+1e-6&&(S/=2)):(A!==P?f<m?b+=A:f>_&&(x+=A):f!=M&&(M<_&&I>_?(x+=A,k=!0):M>m&&I<m&&(b+=A,k=!0)),S/=4),l=n,!o&&I>m&&I<_&&0===R.getTangent(n,j)[a?"x":"y"]&&v(i,r,!a,s,!0)}(f<_&&C>m||C<_&&f>m)&&(k=!0)}}function I(n){var i=n[d+0],r=n[d+2],s=n[d+4],o=n[d+6];if(p<=t(i,r,s,o)&&p>=e(i,r,s,o))for(var l,u=n[c+0],h=n[c+2],f=n[c+4],g=n[c+6],v=m>t(u,h,f,g)||_<e(u,h,f,g)?[n]:R.getMonoCurves(n,a),y=0,w=v.length;y<w;y++)if(l=j(v[y]))return l}for(var A=0,P=h.length;A<P;A++){var M,T=h[A],E=T._path,O=T.getValues();if(!(A&&h[A-1]._path===E||(l=null,E._closed||(u=R.getValues(E.getLastCurve().getSegment2(),T.getSegment1(),null,!s))[d]!==u[d+6]&&(l=u),l))){l=O;for(var L=E.getLastCurve();L&&L!==T;){var N=L.getValues();if(N[d]!==N[d+6]){l=N;break}L=L.getPrevious()}}if(M=I(O))return M;if(A+1===P||h[A+1]._path!==E){if(u&&(M=I(u)))return M;!k||b||x||(b=x=E.isClockwise(s)^a?1:-1),y+=b,w+=x,b=x=0,k&&(C=!0,k=!1),u=null}}return y=n(y),w=n(w),{winding:t(y,w),windingL:y,windingR:w,quality:S,onPath:C}}function y(e,t,i,r,a){var s=[],o=e,l=0;do{if(y=e.getCurve()){var u=y.getLength();s.push({segment:e,curve:y,length:u}),l+=u}e=e.getNext()}while(e&&!e._intersection&&e!==o);for(var h=[.5,.25,.75],c={winding:0,quality:-1},d=0;d<h.length&&c.quality<.5;d++){u=l*h[d];for(var f=0,g=s.length;f<g;f++){var p=s[f],_=p.length;if(u<=_){var y,w=(y=p.curve)._path,b=w._parent,x=b instanceof q?b:w,k=m.clamp(y.getTimeAt(u),.001,.999),C=y.getPointAtTime(k),S=n(y.getTangentAtTime(k).y)<Math.SQRT1_2,z=null;if(a.subtract&&i){var j=(x===t?i:t)._getWinding(C,S,!0);if(x===t&&j.winding||x===i&&!j.winding){if(j.quality<1)continue;z={winding:0,quality:1}}}(z=z||v(C,r[w._id][y.getIndex()],S,!0)).quality>c.quality&&(c=z);break}u-=_}}for(f=s.length-1;f>=0;f--)s[f].segment._winding=c}function w(e,t){var n,i=[];function r(e){var n;return!(!e||e._visited||t&&(!t[(n=e._winding||{}).winding]||t.unite&&2===n.winding&&n.windingL&&n.windingR))}function a(e){if(e)for(var t=0,i=n.length;t<i;t++)if(e===n[t])return!0;return!1}function s(e){for(var t=e._segments,n=0,i=t.length;n<i;n++)t[n]._visited=!0}function o(e,t){var i=e._intersection,s=i,o=[];function l(i,s){for(;i&&i!==s;){var l=i._segment,u=l&&l._path;if(u){var h=l.getNext()||u.getFirstSegment(),c=h._intersection;l!==e&&(a(l)||a(h)||h&&r(l)&&(r(h)||c&&r(c._segment)))&&o.push(l),t&&n.push(l)}i=i._next}}if(t&&(n=[e]),i){for(l(i);i&&i._previous;)i=i._previous;l(i,s)}return o}e.sort((function(e,t){var n=e._intersection,i=t._intersection,r=!(!n||!n._overlap),a=!(!i||!i._overlap),s=e._path,o=t._path;return r^a?r?1:-1:!n^!i?n?1:-1:s!==o?s._id-o._id:e._index-t._index}));for(var l=0,u=e.length;l<u;l++){var h,c,d,f=e[l],g=r(f),p=null,m=!1,_=!0,v=[];if(g&&f._path._overlapsOnly){var y=f._path,w=f._intersection._segment._path;y.compare(w)&&(y.getArea()&&i.push(y.clone(!1)),s(y),s(w),g=!1)}for(;g;){var b=!p,x=o(f,b),k=x.shift(),C=!(m=!b&&(a(f)||a(k)))&&k;if(b&&(p=new F(j.NO_INSERT),h=null),m){(f.isFirst()||f.isLast())&&(_=f._path._closed),f._visited=!0;break}if(C&&h&&(v.push(h),h=null),h||(C&&x.push(f),h={start:p._segments.length,crossings:x,visited:c=[],handleIn:d}),C&&(f=k),!r(f)){p.removeSegments(h.start);for(var S=0,z=c.length;S<z;S++)c[S]._visited=!1;c.length=0;do{(f=h&&h.crossings.shift())&&f._path||(f=null,(h=v.pop())&&(c=h.visited,d=h.handleIn))}while(h&&!r(f));if(!f)break}var I=f.getNext();p.add(new L(f._point,d,I&&f._handleOut)),f._visited=!0,c.push(f),f=I||f._path.getFirstSegment(),d=I&&I._handleIn}m&&(_&&(p.getFirstSegment().setHandleIn(d),p.setClosed(_)),0!==p.getArea()&&i.push(p))}return i}return{_getWinding:function(e,t,n){return v(e,this.getCurves(),t,n)},unite:function(e,t){return u(this,e,"unite",t)},intersect:function(e,t){return u(this,e,"intersect",t)},subtract:function(e,t){return u(this,e,"subtract",t)},exclude:function(e,t){return u(this,e,"exclude",t)},divide:function(e,t){return t&&(0==t.trace||t.stroke)?c(this,e,"divide"):s([this.subtract(e,t),this.intersect(e,t)],!0,this,e,t)},resolveCrossings:function(){var e=this._children,t=e||[this];function n(e,t){var n=e&&e._intersection;return n&&n._overlap&&n._path===t}var i=!1,r=!1,a=this.getIntersections(null,(function(e){return e.hasOverlap()&&(i=!0)||e.isCrossing()&&(r=!0)})),s=i&&r&&[];if(a=B.expand(a),i)for(var o=_(a,(function(e){return e.hasOverlap()}),s),l=o.length-1;l>=0;l--){var u=o[l],c=u._path,d=u._segment,g=d.getPrevious(),p=d.getNext();n(g,c)&&n(p,c)&&(d.remove(),g._handleOut._set(0,0),p._handleIn._set(0,0),g===d||g.getCurve().hasLength()||(p._handleIn.set(g._handleIn),g.remove()))}r&&(_(a,i&&function(e){var t=e.getCurve(),n=e.getSegment(),i=e._intersection,r=i._curve,a=i._segment;if(t&&r&&t._path&&r._path)return!0;n&&(n._intersection=null),a&&(a._intersection=null)},s),s&&f(s),t=w(h.each(t,(function(e){h.push(this,e._segments)}),[])));var m,v=t.length;return v>1&&e?(t!==e&&this.setChildren(t),m=this):1!==v||e||(t[0]!==this&&this.setSegments(t[0].removeSegments()),m=this),m||((m=new q(j.NO_INSERT)).addChildren(t),(m=m.reduce()).copyAttributes(this),this.replaceWith(m)),m},reorient:function(e,t){var n=this._children;return n&&n.length?this.setChildren(p(this.removeChildren(),(function(t){return!!(e?t:1&t)}),t)):t!==o&&this.setClockwise(t),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var i=this.getCurves(),r=n.y,a=[],s=[],o=0,l=i.length;o<l;o++){var u=i[o].getValues(),h=u[1],c=u[3],d=u[5],f=u[7];if(r>=e(h,c,d,f)&&r<=t(h,c,d,f))for(var g=R.getMonoCurves(u),p=0,m=g.length;p<m;p++){var _=g[p],v=_[1],y=_[7];if(v!==y&&(r>=v&&r<=y||r>=y&&r<=v)){var w=r===v?_[0]:r===y?_[6]:1===R.solveCubic(_,1,r,s,0,1)?R.getPoint(_,s[0]).x:(_[0]+_[6])/2;a.push(w)}}}a.length>1&&(a.sort((function(e,t){return e-t})),n.x=(a[0]+a[1])/2)}return n}}});var V=h.extend({_class:"PathFlattener",initialize:function(e,t,n,i,r){var a,s=[],o=[],l=0,u=1/(n||32),h=e._segments,c=h[0];function d(e,n){var a=R.getValues(e,n,r);s.push(a),function e(n,r,a,s){if(!(s-a>u)||i&&R.isStraight(n)||R.isFlatEnough(n,t||.25)){var h=n[6]-n[0],c=n[7]-n[1],d=Math.sqrt(h*h+c*c);d>0&&(l+=d,o.push({offset:l,curve:n,index:r,time:s}))}else{var f=R.subdivide(n,.5),g=(a+s)/2;e(f[0],r,a,g),e(f[1],r,g,s)}}(a,e._index,0,1)}for(var f=1,g=h.length;f<g;f++)d(c,a=h[f]),c=a;e._closed&&d(a||c,h[0]),this.curves=s,this.parts=o,this.length=l,this.index=0},_get:function(e){for(var t,n=this.parts,i=n.length,r=this.index;t=r,r&&!(n[--r].offset<e););for(;t<i;t++){var a=n[t];if(a.offset>=e){this.index=t;var s=n[t-1],o=s&&s.index===a.index?s.time:0,l=s?s.offset:0;return{index:a.index,time:o+(a.time-o)*(e-l)/(a.offset-l)}}}return{index:n[i-1].index,time:1}},drawPart:function(e,t,n){for(var i=this._get(t),r=this._get(n),a=i.index,s=r.index;a<=s;a++){var o=R.getPart(this.curves[a],a===i.index?i.time:0,a===r.index?r.time:1);a===i.index&&e.moveTo(o[0],o[1]),e.bezierCurveTo.apply(e,o.slice(2))}}},h.each(R._evaluateMethods,(function(e){this[e+"At"]=function(t){var n=this._get(t);return R[e](this.curves[n.index],n.time)}}),{})),U=h.extend({initialize:function(e){for(var t,n=this.points=[],i=e._segments,r=e._closed,a=0,s=i.length;a<s;a++){var o=i[a].point;t&&t.equals(o)||n.push(t=o.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(e){var t=this.points,n=t.length,i=null;return n>0&&(i=[new L(t[0])],n>1&&(this.fitCubic(i,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(e,t,n,i,r,a){var s=this.points;if(i-n!=1){for(var o,l=this.chordLengthParameterize(n,i),u=Math.max(t,t*t),h=!0,c=0;c<=4;c++){var d=this.generateBezier(n,i,l,r,a),f=this.findMaxError(n,i,d,l);if(f.error<t&&h)return void this.addCurve(e,d);if(o=f.index,f.error>=u)break;h=this.reparameterize(n,i,l,d),u=f.error}var g=s[o-1].subtract(s[o+1]);this.fitCubic(e,t,n,o,r,g),this.fitCubic(e,t,o,i,g.negate(),a)}else{var p=s[n],m=s[i],_=p.getDistance(m)/3;this.addCurve(e,[p,p.add(r.normalize(_)),m.add(a.normalize(_)),m])}},addCurve:function(e,t){e[e.length-1].setHandleOut(t[1].subtract(t[0])),e.push(new L(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,n,i,r){for(var a=Math.abs,s=this.points,o=s[e],l=s[t],u=[[0,0],[0,0]],h=[0,0],c=0,d=t-e+1;c<d;c++){var f=n[c],g=1-f,p=3*f*g,m=g*g*g,_=p*g,v=p*f,y=f*f*f,w=i.normalize(_),b=r.normalize(v),x=s[e+c].subtract(o.multiply(m+_)).subtract(l.multiply(v+y));u[0][0]+=w.dot(w),u[0][1]+=w.dot(b),u[1][0]=u[0][1],u[1][1]+=b.dot(b),h[0]+=w.dot(x),h[1]+=b.dot(x)}var k,C,S=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(a(S)>1e-12){var z=u[0][0]*h[1]-u[1][0]*h[0];k=(h[0]*u[1][1]-h[1]*u[0][1])/S,C=z/S}else{var j=u[0][0]+u[0][1],I=u[1][0]+u[1][1];k=C=a(j)>1e-12?h[0]/j:a(I)>1e-12?h[1]/I:0}var A,P,M=l.getDistance(o),T=1e-12*M;if(k<T||C<T)k=C=M/3;else{var E=l.subtract(o);A=i.normalize(k),P=r.normalize(C),A.dot(E)-P.dot(E)>M*M&&(k=C=M/3,A=P=null)}return[o,o.add(A||i.normalize(k)),l.add(P||r.normalize(C)),l]},reparameterize:function(e,t,n,i){for(var r=e;r<=t;r++)n[r-e]=this.findRoot(i,this.points[r],n[r-e]);r=1;for(var a=n.length;r<a;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(e,t,n){for(var i=[],r=[],a=0;a<=2;a++)i[a]=e[a+1].subtract(e[a]).multiply(3);for(a=0;a<=1;a++)r[a]=i[a+1].subtract(i[a]).multiply(2);var s=this.evaluate(3,e,n),o=this.evaluate(2,i,n),l=this.evaluate(1,r,n),u=s.subtract(t),h=o.dot(o)+u.dot(l);return m.isMachineZero(h)?n:n-u.dot(o)/h},evaluate:function(e,t,n){for(var i=t.slice(),r=1;r<=e;r++)for(var a=0;a<=e-r;a++)i[a]=i[a].multiply(1-n).add(i[a+1].multiply(n));return i[0]},chordLengthParameterize:function(e,t){for(var n=[0],i=e+1;i<=t;i++)n[i-e]=n[i-e-1]+this.points[i].getDistance(this.points[i-1]);i=1;for(var r=t-e;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(e,t,n,i){for(var r=Math.floor((t-e+1)/2),a=0,s=e+1;s<t;s++){var o=this.evaluate(3,n,i[s-e]).subtract(this.points[s]),l=o.x*o.x+o.y*o.y;l>=a&&(a=l,r=s)}return{error:a,index:r}}}),H=j.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content="",this._lines=[];var t=e&&h.isPlainObject(e)&&e.x===o&&e.y===o;this._initialize(t&&e,!t&&v.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Z=H.extend({_class:"PointText",initialize:function(){H.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new y(e.x,e.y,this,"setPoint")},setPoint:function(){var e=v.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(this._content){this._setStyles(e,t,n);var i=this._lines,r=this._style,a=r.hasFill(),s=r.hasStroke(),o=r.getLeading(),l=e.shadowColor;e.font=r.getFontStyle(),e.textAlign=r.getJustification();for(var u=0,h=i.length;u<h;u++){e.shadowColor=l;var c=i[u];a&&(e.fillText(c,0,0),e.shadowColor="rgba(0,0,0,0)"),s&&e.strokeText(c,0,0),e.translate(0,o)}}},_getBounds:function(e,t){var n=this._style,i=this._lines,r=i.length,a=n.getJustification(),s=n.getLeading(),o=this.getView().getTextWidth(n.getFontStyle(),i),l=0;"left"!==a&&(l-=o/("center"===a?2:1));var u=new x(l,r?-.75*s:0,o,r*s);return e?e._transformBounds(u,u):u}}),W=h.extend(new function(){var e,t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},i={transparent:[0,0,0,0]};function r(t){var n,r=t.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||t.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),a="rgb";if(r){var s=r[4]?4:3;n=new Array(s);for(var o=0;o<s;o++){var u=r[o+1];n[o]=parseInt(1==u.length?u+u:u,16)/255}}else if(r=t.match(/^(rgb|hsl)a?\((.*)\)$/)){a=r[1],n=r[2].trim().split(/[,\s]+/g);for(var h="hsl"===a,c=(o=0,Math.min(n.length,4));o<c;o++){var d=n[o];if(u=parseFloat(d),h)if(0===o){var f=d.match(/([a-z]*)$/)[1];u*={turn:360,rad:180/Math.PI,grad:.9}[f]||1}else o<3&&(u/=100);else o<3&&(u/=/%$/.test(d)?100:255);n[o]=u}}else{var g=i[t];if(!g)if(l){e||((e=le.getContext(1,1)).globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var p=e.getImageData(0,0,1,1).data;g=i[t]=[p[0]/255,p[1]/255,p[2]/255]}else g=[0,0,0];n=g.slice()}return[a,n]}var a=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],s={"rgb-hsb":function(e,t,n){var i=Math.max(e,t,n),r=i-Math.min(e,t,n);return[0===r?0:60*(i==e?(t-n)/r+(t<n?6:0):i==t?(n-e)/r+2:(e-t)/r+4),0===i?0:r/i,i]},"hsb-rgb":function(e,t,n){var i,r=(e=(e/60%6+6)%6)-(i=Math.floor(e)),s=[n,n*(1-t),n*(1-t*r),n*(1-t*(1-r))];return[s[(i=a[i])[0]],s[i[1]],s[i[2]]]},"rgb-hsl":function(e,t,n){var i=Math.max(e,t,n),r=Math.min(e,t,n),a=i-r,s=0===a,o=(i+r)/2;return[s?0:60*(i==e?(t-n)/a+(t<n?6:0):i==t?(n-e)/a+2:(e-t)/a+4),s?0:o<.5?a/(i+r):a/(2-i-r),o]},"hsl-rgb":function(e,t,n){if(0===t)return[n,n,n];for(var i=[(e=(e/360%1+1)%1)+1/3,e,e-1/3],r=n<.5?n*(1+t):n+t-n*t,a=2*n-r,s=[],o=0;o<3;o++){var l=i[o];l<0&&(l+=1),l>1&&(l-=1),s[o]=6*l<1?a+6*(r-a)*l:2*l<1?r:3*l<2?a+(r-a)*(2/3-l)*6:a}return s},"rgb-gray":function(e,t,n){return[.2989*e+.587*t+.114*n]},"gray-rgb":function(e){return[e,e,e]},"gray-hsb":function(e){return[0,0,e]},"gray-hsl":function(e){return[0,0,e]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return h.each(t,(function(e,i){n[i]=[],h.each(e,(function(e,r){var a=h.capitalize(e),s=/^(hue|saturation)$/.test(e),o=n[i][r]="gradient"===i?"gradient"===e?function(e){var t=this._components[0];return t!==(e=$.read(Array.isArray(e)?e:arguments,0,{readNull:!0}))&&(t&&t._removeOwner(this),e&&e._addOwner(this)),e}:function(){return v.read(arguments,0,{readNull:"highlight"===e,clone:!0})}:function(e){return null==e||isNaN(e)?0:+e};this["get"+a]=function(){return this._type===i||s&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(i)[r]},this["set"+a]=function(e){this._type===i||s&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(i),this._properties=t[i],this._type=i),this._components[r]=o.call(this,e),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function e(i){var a,s,o,l,u=arguments,c=this.__read,d=0;Array.isArray(i)&&(i=(u=i)[0]);var f=null!=i&&typeof i;if("string"===f&&i in t&&(a=i,i=u[1],Array.isArray(i)?(s=i,o=u[2]):(c&&(d=1),u=h.slice(u,1),f=typeof i)),!s){if(l="number"===f?u:"object"===f&&null!=i.length?i:null){a||(a=l.length>=3?"rgb":"gray");var g=t[a].length;o=l[g],c&&(d+=l===arguments?g+(null!=o?1:0):1),l.length>g&&(l=h.slice(l,0,g))}else if("string"===f){var p=r(i);a=p[0],4===(s=p[1]).length&&(o=s[3],s.length--)}else if("object"===f)if(i.constructor===e){if(a=i._type,s=i._components.slice(),o=i._alpha,"gradient"===a)for(var m=1,_=s.length;m<_;m++){var v=s[m];v&&(s[m]=v.clone())}}else if(i.constructor===$)a="gradient",l=u;else{var y=t[a="hue"in i?"lightness"in i?"hsl":"hsb":"gradient"in i||"stops"in i||"radial"in i?"gradient":"gray"in i?"gray":"rgb"],w=n[a];for(this._components=s=[],m=0,_=y.length;m<_;m++)null==(b=i[y[m]])&&!m&&"gradient"===a&&"stops"in i&&(b={stops:i.stops,radial:i.radial}),null!=(b=w[m].call(this,b))&&(s[m]=b);o=i.alpha}c&&a&&(d=1)}if(this._type=a||"rgb",!s)for(this._components=s=[],m=0,_=(w=n[this._type]).length;m<_;m++){var b;null!=(b=w[m].call(this,l&&l[m]))&&(s[m]=b)}return this._components=s,this._properties=t[this._type],this._alpha=o,c&&(this.__read=d),this},set:"#initialize",_serialize:function(e,t){var n=this.getComponents();return h.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),e,!0,t)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(e){var t;return this._type===e?this._components.slice():(t=s[this._type+"-"+e])?t.apply(this,this._components):s["rgb-"+e].apply(this,s[this._type+"-rgb"].apply(this,this._components))},convert:function(e){return new W(e,this._convert(e),this._alpha)},getType:function(){return this._type},setType:function(e){this._components=this._convert(e),this._properties=t[e],this._type=e},getComponents:function(){var e=this._components.slice();return null!=this._alpha&&e.push(this._alpha),e},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(e){this._alpha=null==e?null:Math.min(Math.max(e,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(e){var t=h.isPlainValue(e,!0)?W.read(arguments):e;return t===this||t&&this._class===t._class&&this._type===t._type&&this.getAlpha()===t.getAlpha()&&h.equals(this._components,t._components)||!1},toString:function(){for(var e=this._properties,t=[],n="gradient"===this._type,i=p.instance,r=0,a=e.length;r<a;r++){var s=this._components[r];null!=s&&t.push(e[r]+": "+(n?s:i.number(s)))}return null!=this._alpha&&t.push("alpha: "+i.number(this._alpha)),"{ "+t.join(", ")+" }"},toCSS:function(e){var t=this._convert("rgb"),n=e||null==this._alpha?1:this._alpha;function i(e){return Math.round(255*(e<0?0:e>1?1:e))}return t=[i(t[0]),i(t[1]),i(t[2])],n<1&&t.push(n<0?0:n),e?"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+t[2]).toString(16).slice(1):(4==t.length?"rgba(":"rgb(")+t.join(",")+")"},toCanvasStyle:function(e,t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,i=this._components,r=i[0],a=r._stops,s=i[1],o=i[2],l=i[3],u=t&&t.inverted();if(u&&(s=u._transformPoint(s),o=u._transformPoint(o),l&&(l=u._transformPoint(l))),r._radial){var h=o.getDistance(s);if(l){var c=l.subtract(s);c.getLength()>h&&(l=s.add(c.normalize(h-.1)))}var d=l||s;n=e.createRadialGradient(d.x,d.y,0,s.x,s.y,h)}else n=e.createLinearGradient(s.x,s.y,o.x,o.y);for(var f=0,g=a.length;f<g;f++){var p=a[f],m=p._offset;n.addColorStop(null==m?f/(g-1):m,p._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(e){if("gradient"===this._type){for(var t=this._components,n=1,i=t.length;n<i;n++){var r=t[n];e._transformPoint(r,r,!0)}this._changed()}},statics:{_types:t,random:function(){var e=Math.random;return new W(e(),e(),e())},_setOwner:function(e,t,n){return e&&(e._owner&&t&&e._owner!==t&&(e=e.clone()),!e._owner^!t&&(e._owner=t||null,e._setter=n||null)),e}}})},new function(){return h.each({add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t}},(function(e,t){this[t]=function(t){t=W.read(arguments);for(var n=this._type,i=this._components,r=t._convert(n),a=0,s=i.length;a<s;a++)r[a]=e(i[a],r[a]);return new W(n,r,null!=this._alpha?e(this._alpha,t.getAlpha()):null)}}),{})}),$=h.extend({_class:"Gradient",initialize:function(e,t){this._id=_.get(),e&&h.isPlainObject(e)&&(this.set(e),e=t=null),null==this._stops&&this.setStops(e||["white","black"]),null==this._radial&&this.setRadial("string"==typeof t&&"radial"===t||t||!1)},_serialize:function(e,t){return t.add(this,(function(){return h.serialize([this._stops,this._radial],e,!0,t)}))},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;-1!=t&&(this._owners.splice(t,1),this._owners.length||(this._owners=o))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new $(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var n=0,i=t.length;n<i;n++)t[n]._owner=o;for(n=0,i=(t=this._stops=J.readList(e,0,{clone:!0})).length;n<i;n++)t[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,i=t.length;if(i===n.length){for(var r=0;r<i;r++)if(!t[r].equals(n[r]))return!1;return!0}}return!1}}),J=h.extend({_class:"GradientStop",initialize:function(e,t){var n=e,i=t;"object"==typeof e&&t===o&&(Array.isArray(e)&&"number"!=typeof e[0]?(n=e[0],i=e[1]):("color"in e||"offset"in e||"rampPoint"in e)&&(n=e.color,i=e.offset||e.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new J(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,i=this._offset;return h.serialize(null==i?[n]:[n,i],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){W._setOwner(this._color,null),this._color=W._setOwner(W.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),G=h.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new v,selectedColor:null},t=h.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=h.set({},t,{fillColor:new W}),i={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},a={_class:"Style",beans:!0,initialize:function(i,r,a){this._values={},this._owner=r,this._project=r&&r._project||a||de.project,this._defaults=!r||r instanceof I?t:r instanceof H?n:e,i&&this.set(i)}};return h.each(t,(function(e,t){var n=/Color$/.test(t),s="shadowOffset"===t,l=h.capitalize(t),u=i[t],c="set"+l,d="get"+l;a[c]=function(e){var i=this._owner,r=i&&i._children,a=r&&r.length>0&&!(i instanceof q);if(a)for(var s=0,o=r.length;s<o;s++)r[s]._style[c](e);if(("selectedColor"===t||!a)&&t in this._defaults){var l=this._values[t];l!==e&&(n&&(l&&(W._setOwner(l,null),l._canvasStyle=null),e&&e.constructor===W&&(e=W._setOwner(e,i,a&&c))),this._values[t]=e,i&&i._changed(u||129))}},a[d]=function(e){var i=this._owner,r=i&&i._children,a=r&&r.length>0&&!(i instanceof q);if(a&&!e)for(var l=0,u=r.length;l<u;l++){var f=r[l]._style[d]();if(l){if(!h.equals(g,f))return o}else g=f}else if(t in this._defaults){var g;if((g=this._values[t])===o)(g=this._defaults[t])&&g.clone&&(g=g.clone());else{var p=n?W:s?v:null;!p||g&&g.constructor===p||(this._values[t]=g=p.read([g],0,{readNull:!0,clone:!0}))}}return g&&n&&(g=W._setOwner(g,i,a&&c)),g},r[d]=function(e){return this._style[d](e)},r[c]=function(e){this._style[c](e)}})),h.each({Font:"FontFamily",WindingRule:"FillRule"},(function(e,t){var n="get"+t,i="set"+t;a[n]=r[n]="#get"+e,a[i]=r[i]="#set"+e})),j.inject(r),a},{set:function(e){var t=e instanceof G,n=t?e._values:e;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&t&&r.clone?r.clone():r}},equals:function(e){function t(e,t,n){var i=e._values,r=t._values,a=t._defaults;for(var s in i){var l=i[s],u=r[s];if(!(n&&s in r||h.equals(l,u===o?a[s]:u)))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;(e=this.getFillColor())&&(e._canvasStyle=null),(e=this.getStrokeColor())&&(e._canvasStyle=null),(e=this.getShadowColor())&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=t?t:1.2*n}}),X=new function(){function e(e,t,n,i){for(var r=["","webkit","moz","Moz","ms","o"],a=t[0].toUpperCase()+t.substring(1),s=0;s<6;s++){var o=r[s],l=o?o+a:t;if(l in e){if(!n)return e[l];e[l]=i;break}}}return{getStyles:function(e){var t=e&&9!==e.nodeType?e.ownerDocument:e,n=t&&t.defaultView;return n&&n.getComputedStyle(e,"")},getBounds:function(e,t){var n,i=e.ownerDocument,r=i.body,a=i.documentElement;try{n=e.getBoundingClientRect()}catch(e){n={left:0,top:0,width:0,height:0}}var s=n.left-(a.clientLeft||r.clientLeft||0),o=n.top-(a.clientTop||r.clientTop||0);if(!t){var l=i.defaultView;s+=l.pageXOffset||a.scrollLeft||r.scrollLeft,o+=l.pageYOffset||a.scrollTop||r.scrollTop}return new x(s,o,n.width,n.height)},getViewportBounds:function(e){var t=e.ownerDocument,n=t.defaultView,i=t.documentElement;return new x(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(e,t){return X.getBounds(e,t).getPoint()},getSize:function(e){return X.getBounds(e,!0).getSize()},isInvisible:function(e){return X.getSize(e).equals(new w(0,0))},isInView:function(e){return!X.isInvisible(e)&&X.getViewportBounds(e).intersects(X.getBounds(e,!0))},isInserted:function(e){return u.body.contains(e)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,i){if("object"==typeof n)for(var r in n)e(t,r,!0,n[r]);else e(t,n,!0,i)}}},K={add:function(e,t){if(e)for(var n in t)for(var i=t[n],r=n.split(/[\s,]+/g),a=0,s=r.length;a<s;a++){var o=r[a],l=e===u&&("touchstart"===o||"touchmove"===o)&&{passive:!1};e.addEventListener(o,i,l)}},remove:function(e,t){if(e)for(var n in t)for(var i=t[n],r=n.split(/[\s,]+/g),a=0,s=r.length;a<s;a++)e.removeEventListener(r[a],i,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new v(t.pageX||t.clientX+u.documentElement.scrollLeft,t.pageY||t.clientY+u.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return K.getPoint(e).subtract(X.getOffset(t||K.getTarget(e)))}};K.requestAnimationFrame=new function(){var e,t=X.getPrefixed(l,"requestAnimationFrame"),n=!1,i=[];function r(){var e=i;i=[];for(var a=0,s=e.length;a<s;a++)e[a]();(n=t&&i.length)&&t(r)}return function(a){i.push(a),t?n||(t(r),n=!0):e||(e=setInterval(r,1e3/60))}};var Y=h.extend(c,{_class:"View",initialize:function e(t,n){function i(e){return n[e]||parseInt(n.getAttribute(e),10)}function r(){var e=X.getSize(n);return e.isNaN()||e.isZero()?new w(i("width"),i("height")):e}var a;if(l&&n){if(this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="view-"+e._id++),K.add(n,this._viewEvents),X.setPrefixed(n.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),d.hasAttribute(n,"resize")){var s=this;K.add(l,this._windowEvents={resize:function(){s.setViewSize(r())}})}if(a=r(),d.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var o=this._stats.domElement,h=o.style,c=X.getOffset(n);h.position="absolute",h.left=c.x+"px",h.top=c.y+"px",u.body.appendChild(o)}}else a=new w(n),n=null;this._project=t,this._scope=t._scope,this._element=n,this._pixelRatio||(this._pixelRatio=l&&l.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new C)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!de.agent.node,this._needsUpdate=!1,this._drawSelection=!0},remove:function(){if(!this._project)return!1;Y._focused===this&&(Y._focused=null),Y._views.splice(Y._views.indexOf(this),1),delete Y._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),K.remove(this._element,this._viewEvents),K.remove(l,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:h.each(j._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(e){this[e]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},getDrawSelection:function(){return this._drawSelection},setDrawSelection:function(e){this._drawSelection=e,this.requestUpdate()},markDirty:function(){this._needsUpdate=!0,this.draw()},update:function(){},rawDraw:function(e){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;K.requestAnimationFrame((function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;X.getPrefixed(u,"hidden")&&"true"!==d.getAttribute(t,"keepalive")||!X.isInView(t)||e._handleFrame()}e._autoUpdate&&e.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){de=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new h({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[e._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit("frame",new h(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=o,this.emit("changed",new h({}))},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var e=this._viewSize;return new b(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=w.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new x(new v,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return X.isInView(this._element)},isInserted:function(){return X.isInserted(this._element)},getPixelSize:function(e){var t,n=this._element;if(n){var i=n.parentNode,r=u.createElement("div");r.style.fontSize=e,i.appendChild(r),t=parseFloat(X.getStyles(r).fontSize),i.removeChild(r)}else t=parseFloat(t);return t},getTextWidth:function(e,t){return 0}},h.each(["rotate","scale","shear","skew"],(function(e){var t="rotate"===e;this[e]=function(){var n=arguments,i=(t?h:v).read(n),r=v.read(n,0,{readNull:!0});return this.transform((new C)[e](i,r||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new C;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=v.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform((new C).scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();null!=t&&null!=e&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new y(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=v.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.initialize.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(v.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(v.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(v.read(arguments))},getEventPoint:function(e){return this.viewToProject(K.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){return u&&"string"==typeof t&&(t=u.getElementById(t)),new(l?Q:Y)(e,t)}}},new function(){if(l){var e,t,n,i,r,a=!1,s=!1,o=l.navigator;o.pointerEnabled||o.msPointerEnabled?(n="pointerdown MSPointerDown",i="pointermove MSPointerMove",r="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",i="touchmove",r="touchend touchcancel","ontouchstart"in l&&o.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",i+=" mousemove",r+=" mouseup"));var h={},c={mouseout:function(e){var t=Y._focused,n=K.getRelatedTarget(e);if(t&&(!n||"HTML"===n.nodeName)){var i=K.getOffset(e,t._element),r=i.x,a=Math.abs,s=a(r),o=s-(1<<25);i.x=a(o)<s?o*(r<0?-1:1):r,j(t,e,t.viewToProject(i))}},scroll:z};h[n]=function(e){var t=Y._focused=S(e);a||(a=!0,t._handleMouseEvent("mousedown",e))},c[i]=function(n){var i=Y._focused;if(!s){var r=S(n);r?i!==r&&(i&&j(i,n),e||(e=i),i=Y._focused=t=r):t&&t===i&&(e&&!e.isInserted()&&(e=null),i=Y._focused=e,e=null,z())}i&&j(i,n)},c[n]=function(){s=!0},c[r]=function(e){var t=Y._focused;t&&a&&t._handleMouseEvent("mouseup",e),s=a=!1},K.add(u,c),K.add(l,{load:z});var d,f,g,p,m,_,v,y,w=!1,b=!1,x={doubleclick:"click",mousedrag:"mousemove"},k=!1,C={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:h,_handleMouseEvent:function(e,t,n){var i=this._itemEvents,r=i.native[e],s="mousemove"===e,o=this._scope.tool,l=this;function u(e){return i.virtual[e]||l.responds(e)||o&&o.responds(e)}s&&a&&u("mousedrag")&&(e="mousedrag"),n||(n=this.getEventPoint(t));var h=this.getBounds().contains(n),c=r&&h&&l._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),x=c&&c.item||null,C=!1,S={};if(S[e.substr(5)]=!0,r&&x!==p&&(p&&I(p,null,"mouseleave",t,n),x&&I(x,null,"mouseenter",t,n),p=x),k^h&&(I(this,null,h?"mouseenter":"mouseleave",t,n),C=!0),!h&&!S.drag||n.equals(f)||(A(this,x,s?e:"mousemove",t,n,f),C=!0),k=h,S.down&&h||S.up&&d){if(A(this,x,e,t,n,d),S.down){if(y=x===_&&Date.now()-v<300,g=_=x,!b&&x){for(var z=x;z&&!z.responds("mousedrag");)z=z._parent;z&&(m=x)}d=n}else S.up&&(b||x!==g||(v=Date.now(),A(this,x,y?"doubleclick":"click",t,n,d),y=!1),g=m=null);k=!1,C=!0}f=n,!b&&C&&o&&(w=o._handleMouseEvent(e,t,n,S)||w),!1!==t.cancelable&&(w&&!S.move||S.down&&u("mouseup"))&&t.preventDefault()},_handleKeyEvent:function(e,t,n,i){var r,a=this._scope,s=a.tool;function o(s){s.responds(e)&&(de=a,s.emit(e,r=r||new te(e,t,n,i)))}this.isVisible()&&(o(this),s&&s.responds(e)&&o(s))},_countItemEvent:function(e,t){var n=this._itemEvents,i=n.native,r=n.virtual;for(var a in C)i[a]=(i[a]||0)+(C[a][e]||0)*t;r[e]=(r[e]||0)+t},statics:{updateFocus:z,_resetState:function(){a=s=w=k=!1,e=t=d=f=g=p=m=_=v=y=null}}}}function S(e){var t=K.getTarget(e);return t.getAttribute&&Y._viewsById[t.getAttribute("id")]}function z(){var e=Y._focused;if(!e||!e.isVisible())for(var n=0,i=Y._views.length;n<i;n++)if((e=Y._views[n]).isVisible()){Y._focused=t=e;break}}function j(e,t,n){e._handleMouseEvent("mousemove",t,n)}function I(e,t,n,i,r,a,s){var o,l=!1;function u(e,n){if(e.responds(n)){if(o||(o=new ie(n,i,r,t||e,a?r.subtract(a):null)),e.emit(n,o)&&(w=!0,o.prevented&&(b=!0),o.stopped))return l=!0}else{var s=x[n];if(s)return u(e,s)}}for(;e&&e!==s&&!u(e,n);)e=e._parent;return l}function A(e,t,n,i,r,a){return e._project.removeOn(n),b=w=!1,m&&I(m,null,n,i,r,a)||t&&t!==m&&!t.isDescendant(m)&&I(t,null,"mousedrag"===n?"mousemove":n,i,r,a,m)||I(e,m||t||e,n,i,r,a)}}),Q=Y.extend({_class:"CanvasView",initialize:function(e,t){if(!(t instanceof l.HTMLCanvasElement)){var n=w.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+h.slice(arguments,1));t=le.getCanvas(n)}var i=this._context=t.getContext("2d");if(i.save(),this._pixelRatio=1,!/^off|false$/.test(d.getAttribute(t,"hidpi"))){var r=l.devicePixelRatio||1,a=X.getPrefixed(i,"backingStorePixelRatio")||1;this._pixelRatio=r/a}Y.call(this,e,t),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,n){var i=this._pixelRatio;if(e.base.call(this,t*i,n*i),1!==i){var r=this._element,a=this._context;if(!d.hasAttribute(r,"resize")){var s=r.style;s.width=t+"px",s.height=n+"px"}a.restore(),a.save(),a.scale(i,i)}},getContext:function(){return this._context},getPixelSize:function e(t){var n,i=de.agent;if(i&&i.firefox)n=e.base.call(this,t);else{var r=this._context,a=r.font;r.font=t+" serif",n=parseFloat(r.font),r.font=a}return n},getTextWidth:function(e,t){var n=this._context,i=n.font,r=0;n.font=e;for(var a=0,s=t.length;a<s;a++)r=Math.max(r,n.measureText(t[a]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio,this._drawSelection),this._needsUpdate=!1,this.emit("updated",new h({})),!0},rawDraw:function(e){e(this._context,this._matrix)}}),ee=h.extend({_class:"Event",initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return ne.modifiers}}),te=ee.extend({_class:"KeyEvent",initialize:function(e,t,n,i){this.type=e,this.event=t,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),ne=new function(){var e,t,n={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},i={tab:"\t",space:" ",enter:"\r"},r={},a={},s=new h({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var e=de&&de.agent;return e&&e.mac?this.meta:this.control}}});function c(e){var t=e.key||e.keyIdentifier;return t=/^U\+/.test(t)?String.fromCharCode(parseInt(t.substr(2),16)):/^Arrow[A-Z]/.test(t)?t.substr(5):"Unidentified"===t||t===o?String.fromCharCode(e.keyCode):t,n[t]||(t.length>1?h.hyphenate(t):t.toLowerCase())}function d(t,n,i,o){var l,u=Y._focused;if(r[n]=t,t?a[n]=i:delete a[n],n.length>1&&(l=h.camelize(n))in s){s[l]=t;var c=de&&de.agent;if("meta"===l&&c&&c.mac)if(t)e={};else{for(var f in e)f in a&&d(!1,f,e[f],o);e=null}}else t&&e&&(e[n]=i);u&&u._handleKeyEvent(t?"keydown":"keyup",o,n,i)}return K.add(u,{keydown:function(e){var n=c(e),r=de&&de.agent;n.length>1||r&&r.chrome&&(e.altKey||r.mac&&e.metaKey||!r.mac&&e.ctrlKey)?d(!0,n,i[n]||(n.length>1?"":n),e):t=n},keypress:function(e){if(t){var n=c(e),i=e.charCode,r=i>=32?String.fromCharCode(i):n.length>1?"":n;n!==t&&(n=r.toLowerCase()),d(!0,n,r,e),t=null}},keyup:function(e){var t=c(e);t in a&&d(!1,t,a[t],e)}}),K.add(l,{blur:function(e){for(var t in a)d(!1,t,a[t],e)}}),{modifiers:s,isDown:function(e){return!!r[e]}}},ie=ee.extend({_class:"MouseEvent",initialize:function(e,t,n,i,r){this.type=e,this.event=t,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),re=ee.extend({_class:"ToolEvent",_item:null,initialize:function(e,t,n){this.tool=e,this.type=t,this.event=n},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),ae=f.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(e){f.call(this),this._moveCount=-1,this._downCount=-1,this._name="",this.set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,null!=e&&null!=this._maxDistance&&e>this._maxDistance&&(this._maxDistance=e)},getName:function(){return this._name},setName:function(e){this._name=e},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,null!=this._minDistance&&null!=e&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,i){de=this._scope,i.drag&&!this.responds(e)&&(e="mousemove");var r=i.move||i.drag,a=this.responds(e),s=this.minDistance,o=this.maxDistance,l=!1,u=this;function h(e,t){var a=n,s=r?u._point:u._downPoint||a;if(r){if(u._moveCount>=0&&a.equals(s))return!1;if(s&&(null!=e||null!=t)){var o=a.subtract(s),l=o.getLength();if(l<(e||0))return!1;t&&(a=s.add(o.normalize(Math.min(l,t))))}u._moveCount++}return u._point=a,u._lastPoint=s||a,i.down&&(u._moveCount=-1,u._downPoint=a,u._downCount++),!0}function c(){a&&(l=u.emit(e,new re(u,e,t))||l)}if(i.down)h(),c();else if(i.up)h(null,o),c();else if(a)for(;h(s,o);)c();return l}}),se=h.extend(c,{_class:"Tween",statics:{easings:{linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:2*(2-e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}}},initialize:function e(t,n,i,r,a,s){this.object=t;var o=typeof a,l="function"===o;this.type=l?o:"string"===o?a:"linear",this.easing=l?a:e.easings[this.type],this.duration=r,this.running=!1,this._then=null,this._startTime=null;var u=n||i;this._keys=u?Object.keys(u):[],this._parsedKeys=this._parseKeys(this._keys),this._from=u&&this._getState(n),this._to=u&&this._getState(i),!1!==s&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>1&&(e=1,this.running=!1);for(var t=this.easing(e),n=this._keys,i=function(n){return"function"==typeof n?n(t,e):n},r=0,a=n&&n.length;r<a;r++){var s=n[r],o=i(this._from[s]),l=i(this._to[s]),u=o&&l&&o.__add&&l.__add?l.__subtract(o).__multiply(t).__add(o):(l-o)*t+o;this._setProperty(this._parsedKeys[s],u)}!this.running&&this._then&&this._then(this.object),this.responds("update")&&this.emit("update",new h({progress:e,factor:t}))}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,n=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(n)},_getState:function(e){for(var t=this._keys,n={},i=0,r=t.length;i<r;i++){var a,s=t[i],o=this._parsedKeys[s],l=this._getProperty(o);if(e){var u=this._resolveValue(l,e[s]);this._setProperty(o,u),a=(a=this._getProperty(o))&&a.clone?a.clone():a,this._setProperty(o,l)}else a=l&&l.clone?l.clone():l;n[s]=a}return n},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&2===t.length){var n=t[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(e,n[0],t[1]):t}if("string"==typeof t){var i=t.match(/^[+\-*/]=(.*)/);if(i){var r=JSON.parse(i[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],r)}}}return t},_calculate:function(e,t,n){return de.PaperScript.calculateBinary(e,t,n)},_parseKeys:function(e){for(var t={},n=0,i=e.length;n<i;n++){var r=e[n],a=r.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[r]=a.split("/")}return t},_getProperty:function(e,t){for(var n=this.object,i=0,r=e.length-(t||0);i<r&&n;i++)n=n[e[i]];return n},_setProperty:function(e,t){var n=this._getProperty(e,1);n&&(n[e[e.length-1]]=t)}}),oe=function(e){var t=new s.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,h.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var n=t.status;0===n||200===n?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var n=t.status,i='Could not load "'+e.url+'" (Status: '+n+")";if(!e.onError)throw new Error(i);e.onError(i,n)},t.send(null)},le={canvases:[],getCanvas:function(e,t){if(!l)return null;var n,i=!0;"object"==typeof e&&(t=e.height,e=e.width),this.canvases.length?n=this.canvases.pop():(n=u.createElement("canvas"),i=!1);var r=n.getContext("2d");if(!r)throw new Error("Canvas "+n+" is unable to provide a 2D context.");return n.width===e&&n.height===t?i&&r.clearRect(0,0,e+1,t+1):(n.width=e,n.height=t),r.save(),n},getContext:function(e,t){var n=this.getCanvas(e,t);return n?n.getContext("2d"):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},ue=new function(){var e,t,n,i,r,a,s,o,l,u,c,d=Math.min,f=Math.max,g=Math.abs;function p(e,t,n){return.2989*e+.587*t+.114*n}function m(e,t,n,i){var r=i-p(e,t,n),a=(i=p(l=e+r,u=t+r,c=n+r),d(l,u,c)),s=f(l,u,c);if(a<0){var o=i-a;l=i+(l-i)*i/o,u=i+(u-i)*i/o,c=i+(c-i)*i/o}if(s>255){var h=255-i,g=s-i;l=i+(l-i)*h/g,u=i+(u-i)*h/g,c=i+(c-i)*h/g}}function _(e,t,n){return f(e,t,n)-d(e,t,n)}function v(e,t,n,i){var r,a=[e,t,n],s=f(e,t,n),o=d(e,t,n);r=0===d(o=o===e?0:o===t?1:2,s=s===e?0:s===t?1:2)?1===f(o,s)?2:1:0,a[s]>a[o]?(a[r]=(a[r]-a[o])*i/(a[s]-a[o]),a[s]=i):a[r]=a[s]=0,a[o]=0,l=a[0],u=a[1],c=a[2]}var y={multiply:function(){l=r*e/255,u=a*t/255,c=s*n/255},screen:function(){l=r+e-r*e/255,u=a+t-a*t/255,c=s+n-s*n/255},overlay:function(){l=r<128?2*r*e/255:255-2*(255-r)*(255-e)/255,u=a<128?2*a*t/255:255-2*(255-a)*(255-t)/255,c=s<128?2*s*n/255:255-2*(255-s)*(255-n)/255},"soft-light":function(){var i=e*r/255;l=i+r*(255-(255-r)*(255-e)/255-i)/255,u=(i=t*a/255)+a*(255-(255-a)*(255-t)/255-i)/255,c=(i=n*s/255)+s*(255-(255-s)*(255-n)/255-i)/255},"hard-light":function(){l=e<128?2*e*r/255:255-2*(255-e)*(255-r)/255,u=t<128?2*t*a/255:255-2*(255-t)*(255-a)/255,c=n<128?2*n*s/255:255-2*(255-n)*(255-s)/255},"color-dodge":function(){l=0===r?0:255===e?255:d(255,255*r/(255-e)),u=0===a?0:255===t?255:d(255,255*a/(255-t)),c=0===s?0:255===n?255:d(255,255*s/(255-n))},"color-burn":function(){l=255===r?255:0===e?0:f(0,255-255*(255-r)/e),u=255===a?255:0===t?0:f(0,255-255*(255-a)/t),c=255===s?255:0===n?0:f(0,255-255*(255-s)/n)},darken:function(){l=r<e?r:e,u=a<t?a:t,c=s<n?s:n},lighten:function(){l=r>e?r:e,u=a>t?a:t,c=s>n?s:n},difference:function(){(l=r-e)<0&&(l=-l),(u=a-t)<0&&(u=-u),(c=s-n)<0&&(c=-c)},exclusion:function(){l=r+e*(255-r-r)/255,u=a+t*(255-a-a)/255,c=s+n*(255-s-s)/255},hue:function(){v(e,t,n,_(r,a,s)),m(l,u,c,p(r,a,s))},saturation:function(){v(r,a,s,_(e,t,n)),m(l,u,c,p(r,a,s))},luminosity:function(){m(r,a,s,p(e,t,n))},color:function(){m(e,t,n,p(r,a,s))},add:function(){l=d(r+e,255),u=d(a+t,255),c=d(s+n,255)},subtract:function(){l=f(r-e,0),u=f(a-t,0),c=f(s-n,0)},average:function(){l=(r+e)/2,u=(a+t)/2,c=(s+n)/2},negation:function(){l=255-g(255-e-r),u=255-g(255-t-a),c=255-g(255-n-s)}},w=this.nativeModes=h.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(e){this[e]=!0}),{}),b=le.getContext(1,1);b&&(h.each(y,(function(e,t){var n="darken"===t,i=!1;b.save();try{b.fillStyle=n?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=t,b.globalCompositeOperation===t&&(b.fillStyle=n?"#a00":"#300",b.fillRect(0,0,1,1),i=b.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(e){}b.restore(),w[t]=i})),le.release(b)),this.process=function(h,d,f,g,p){var m=d.canvas,_="normal"===h;if(_||w[h])f.save(),f.setTransform(1,0,0,1,0,0),f.globalAlpha=g,_||(f.globalCompositeOperation=h),f.drawImage(m,p.x,p.y),f.restore();else{var v=y[h];if(!v)return;for(var b=f.getImageData(p.x,p.y,m.width,m.height),x=b.data,k=d.getImageData(0,0,m.width,m.height).data,C=0,S=x.length;C<S;C+=4){e=k[C],r=x[C],t=k[C+1],a=x[C+1],n=k[C+2],s=x[C+2],i=k[C+3],o=x[C+3],v();var z=i*g/255,j=1-z;x[C]=z*l+j*r,x[C+1]=z*u+j*a,x[C+2]=z*c+j*s,x[C+3]=i*g+j*o}f.putImageData(b,p.x,p.y)}}},he=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",i={href:n,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function r(e,t,n){for(var r in t){var a=t[r],s=i[r];"number"==typeof a&&n&&(a=n.number(a)),s?e.setAttributeNS(s,r,a):e.setAttribute(r,a)}return e}return{svg:e,xmlns:t,xlink:n,create:function(t,n,i){return r(u.createElementNS(e,t),n,i)},get:function(e,t){var n=i[t],r=n?e.getAttributeNS(n,t):e.getAttribute(t);return"null"===r?null:r},set:r}},ce=h.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof D||e instanceof P||e instanceof H)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(e,t){var n=h.capitalize(t),i=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:i,fromSVG:i&&h.each(i,(function(e,t){this[e]=t}),{}),exportFilter:e[3],get:"get"+n,set:"set"+n}}),{});new function(){var e;function t(t,n,i){var r,a=new h,s=t.getTranslation();if(n&&(t.isInvertible()?(r=(t=t._shiftless())._inverseTransform(s),s=null):r=new v,a[i?"cx":"x"]=r.x,a[i?"cy":"y"]=r.y),!t.isIdentity()){var o=t.decompose();if(o){var l=[],u=o.rotation,c=o.scaling,d=o.skewing;s&&!s.isZero()&&l.push("translate("+e.point(s)+")"),u&&l.push("rotate("+e.number(u)+")"),m.isZero(c.x-1)&&m.isZero(c.y-1)||l.push("scale("+e.point(c)+")"),d.x&&l.push("skewX("+e.number(d.x)+")"),d.y&&l.push("skewY("+e.number(d.y)+")"),a.transform=l.join(" ")}else a.transform="matrix("+t.getValues().join(",")+")"}return a}function n(n,i){for(var r=t(n._matrix),a=n._children,s=he.create("g",r,e),o=0,l=a.length;o<l;o++){var h=a[o],c=d(h,i);if(c)if(h.isClipMask()){var f=he.create("clipPath");f.appendChild(c),u(h,f,"clip"),he.set(s,{"clip-path":"url(#"+f.id+")"})}else s.appendChild(c)}return s}function i(n){var i=n._type,r=n._radius,a=t(n._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var s=n._size,o=s.width,l=s.height;a.x-=o/2,a.y-=l/2,a.width=o,a.height=l,r.isZero()&&(r=null)}return r&&("circle"===i?a.r=r:(a.rx=r.width,a.ry=r.height)),he.create(i,a,e)}var r,a={Group:n,Layer:n,Raster:function(n,i){var r=t(n._matrix,!0),a=n.getSize(),s=n.getImage();return r.x-=a.width/2,r.y-=a.height/2,r.width=a.width,r.height=a.height,r.href=0==i.embedImages&&s&&s.src||n.toDataURL(),he.create("image",r,e)},Path:function(n,r){var a=r.matchShapes;if(a){var s=n.toShape(!1);if(s)return i(s)}var o,l=n._segments,u=l.length,h=t(n._matrix);if(a&&u>=2&&!n.hasHandles())if(u>2){o=n._closed?"polygon":"polyline";for(var c=[],d=0;d<u;d++)c.push(e.point(l[d]._point));h.points=c.join(" ")}else{o="line";var f=l[0]._point,g=l[1]._point;h.set({x1:f.x,y1:f.y,x2:g.x,y2:g.y})}else o="path",h.d=n.getPathData(null,r.precision);return he.create(o,h,e)},Shape:i,CompoundPath:function(n,i){var r=t(n._matrix),a=n.getPathData(null,i.precision);return a&&(r.d=a),he.create("path",r,e)},SymbolItem:function(n,i){var r=t(n._matrix,!0),a=n._definition,s=l(a,"symbol"),o=a._item,h=o.getStrokeBounds();return s||((s=he.create("symbol",{viewBox:e.rectangle(h)})).appendChild(d(o,i)),u(a,s,"symbol")),r.href="#"+s.id,r.x+=h.x,r.y+=h.y,r.width=h.width,r.height=h.height,r.overflow="visible",he.create("use",r,e)},PointText:function(n){var i=he.create("text",t(n._matrix,!0),e);return i.textContent=n._content,i}};function o(t,n,i){var r={},a=!i&&t.getParent(),s=[];return null!=t._name&&(r.id=t._name),h.each(ce,(function(n){var i=n.get,o=n.type,c=t[i]();if(n.exportFilter?n.exportFilter(t,c):!a||!h.equals(a[i](),c)){if("color"===o&&null!=c){var d=c.getAlpha();d<1&&(r[n.attribute+"-opacity"]=d)}"style"===o?s.push(n.attribute+": "+c):r[n.attribute]=null==c?"none":"color"===o?c.gradient?function(t){var n=l(t,"color");if(!n){var i,r=t.getGradient(),a=r._radial,s=t.getOrigin(),o=t.getDestination();if(a){i={cx:s.x,cy:s.y,r:s.getDistance(o)};var h=t.getHighlight();h&&(i.fx=h.x,i.fy=h.y)}else i={x1:s.x,y1:s.y,x2:o.x,y2:o.y};i.gradientUnits="userSpaceOnUse",n=he.create((a?"radial":"linear")+"Gradient",i,e);for(var c=r._stops,d=0,f=c.length;d<f;d++){var g=c[d],p=g._color,m=p.getAlpha(),_=g._offset;i={offset:null==_?d/(f-1):_},p&&(i["stop-color"]=p.toCSS(!0)),m<1&&(i["stop-opacity"]=m),n.appendChild(he.create("stop",i,e))}u(t,n,"color")}return"url(#"+n.id+")"}(c):c.toCSS(!0):"array"===o?c.join(","):"lookup"===o?n.toSVG[c]:c}})),s.length&&(r.style=s.join(";")),1===r.opacity&&delete r.opacity,t._visible||(r.visibility="hidden"),he.set(n,r,e)}function l(e,t){return r||(r={ids:{},svgs:{}}),e&&r.svgs[t+"-"+(e._id||e.__id||(e.__id=_.get("svg")))]}function u(e,t,n){r||l();var i=r.ids[n]=(r.ids[n]||0)+1;t.id=n+"-"+i,r.svgs[n+"-"+(e._id||e.__id)]=t}function c(e,t){var n=e,i=null;if(r){for(var a in n="svg"===e.nodeName.toLowerCase()&&e,r.svgs)i||(n||(n=he.create("svg")).appendChild(e),i=n.insertBefore(he.create("defs"),n.firstChild)),i.appendChild(r.svgs[a]);r=null}return t.asString?(new s.XMLSerializer).serializeToString(n):n}function d(e,t,n){var i=a[e._class],r=i&&i(e,t);if(r){var s=t.onExport;s&&(r=s(e,r,t)||r);var l=JSON.stringify(e._data);l&&"{}"!==l&&"null"!==l&&r.setAttribute("data-paper-data",l)}return r&&o(e,r,n)}function f(t){return t||(t={}),e=new p(t.precision),t}j.inject({exportSVG:function(e){return c(d(this,e=f(e),!0),e)}}),z.inject({exportSVG:function(n){n=f(n);var i=this._children,r=this.getView(),a=h.pick(n.bounds,"view"),s=n.matrix||"view"===a&&r._matrix,o=s&&C.read([s]),l="view"===a?new x([0,0],r.getViewSize()):"content"===a?j._getBounds(i,o,{stroke:!0}).rect:x.read([a],0,{readNull:!0}),u={version:"1.1",xmlns:he.svg,"xmlns:xlink":he.xlink};l&&(u.width=l.width,u.height=l.height,(l.x||0===l.x||l.y||0===l.y)&&(u.viewBox=e.rectangle(l)));var g=he.create("svg",u,e),p=g;o&&!o.isIdentity()&&(p=g.appendChild(he.create("g",t(o),e)));for(var m=0,_=i.length;m<_;m++)p.appendChild(d(i[m],n,!0));return c(g,n)}})},new function(){var e,t={};function n(t,n,i,r,a,s){var o=he.get(t,n)||s,l=null==o?r?null:i?"":0:i?o:parseFloat(o);return/%\s*$/.test(o)?l/100*(a?1:e[/x|^width/.test(n)?"width":"height"]):l}function i(e,t,i,r,a,s,o){return t=n(e,t||"x",!1,r,a,s),i=n(e,i||"y",!1,r,a,o),!r||null!=t&&null!=i?new v(t,i):null}function r(e,t,i,r,a){return t=n(e,t||"width",!1,r,a),i=n(e,i||"height",!1,r,a),!r||null!=t&&null!=i?new w(t,i):null}function a(e,t,n){return"none"===e?null:"number"===t?parseFloat(e):"array"===t?e?e.split(/[\s,]+/g).map(parseFloat):[]:"color"===t?k(e)||e:"lookup"===t?n[e]:e}function c(e,t,n,i){var r=e.childNodes,a="clippath"===t,s="defs"===t,o=new I,l=o._project,u=l._currentStyle,h=[];if(a||s||(o=b(o,e,i),l._currentStyle=o._style.clone()),i)for(var c=e.querySelectorAll("defs"),d=0,f=c.length;d<f;d++)S(c[d],n,!1);for(d=0,f=r.length;d<f;d++){var g,p=r[d];1!==p.nodeType||/^defs$/i.test(p.nodeName)||!(g=S(p,n,!1))||g instanceof E||h.push(g)}return o.addChildren(h),a&&(o=b(o.reduce(),e,i)),l._currentStyle=u,(a||s)&&(o.remove(),o=null),o}function d(e,t){for(var n=e.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,a=n.length;r<a;r+=2)i.push(new v(parseFloat(n[r]),parseFloat(n[r+1])));var s=new F(i);return"polygon"===t&&s.closePath(),s}function f(e,r){var a,s=(n(e,"href",!0)||"").substring(1),o="radialgradient"===r;if(s)(a=t[s].getGradient())._radial^o&&((a=a.clone())._radial=o);else{for(var l=e.childNodes,u=[],h=0,c=l.length;h<c;h++){var d=l[h];1===d.nodeType&&u.push(b(new J,d))}a=new $(u,o)}var f,g,p,m="userSpaceOnUse"!==n(e,"gradientUnits",!0);return o?(g=(f=i(e,"cx","cy",!1,m,"50%","50%")).add(n(e,"r",!1,!1,m,"50%"),0),p=i(e,"fx","fy",!0,m)):(f=i(e,"x1","y1",!1,m,"0%","0%"),g=i(e,"x2","y2",!1,m,"100%","0%")),b(new W(a,f,g,p),e)._scaleToBounds=m,null}var g={"#document":function(e,t,n,i){for(var r=e.childNodes,a=0,s=r.length;a<s;a++){var o=r[a];if(1===o.nodeType)return S(o,n,i)}},g:c,svg:c,clippath:c,polygon:d,polyline:d,path:function(e){return D.create(e.getAttribute("d"))},lineargradient:f,radialgradient:f,image:function(e){var t=new M(n(e,"href",!0));return t.on("load",(function(){var t=r(e);this.setSize(t);var n=i(e).add(t.divide(2));this._matrix.append((new C).translate(n))})),t},symbol:function(e,t,n,i){return new E(c(e,t,n,i),!0)},defs:c,use:function(e){var r=(n(e,"href",!0)||"").substring(1),a=t[r],s=i(e);return a?a instanceof E?a.place(s):a.clone().translate(s):null},circle:function(e){return new P.Circle(i(e,"cx","cy"),n(e,"r"))},ellipse:function(e){return new P.Ellipse({center:i(e,"cx","cy"),radius:r(e,"rx","ry")})},rect:function(e){return new P.Rectangle(new x(i(e),r(e)),r(e,"rx","ry"))},line:function(e){return new F.Line(i(e,"x1","y1"),i(e,"x2","y2"))},text:function(e){var t=new Z(i(e).add(i(e,"dx","dy")));return t.setContent(e.textContent.trim()||""),t},switch:c};function p(e,t,n,i){if(e.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),a=new C,s=0,o=r.length;s<o;s++){var l=r[s];if(!l)break;for(var u=l.split(/\(\s*/),h=u[0],c=u[1].split(/[\s,]+/g),d=0,f=c.length;d<f;d++)c[d]=parseFloat(c[d]);switch(h){case"matrix":a.append(new C(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":a.rotate(c[0],c[1]||0,c[2]||0);break;case"translate":a.translate(c[0],c[1]||0);break;case"scale":a.scale(c);break;case"skewX":a.skew(c[0],0);break;case"skewY":a.skew(0,c[0])}}e.transform(a)}}function m(e,t,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=e[i]&&e[i]();r&&r.setAlpha(parseFloat(t))}var _=h.set(h.each(ce,(function(e){this[e.attribute]=function(t,n){if(t[e.set]&&(t[e.set](a(n,e.type,e.fromSVG)),"color"===e.type)){var i=t[e.get]();if(i&&i._scaleToBounds){var r=t.getBounds();i.transform((new C).translate(r.getPoint()).scale(r.getSize()))}}}}),{}),{id:function(e,n){t[n]=e,e.setName&&e.setName(n)},"clip-path":function(e,t){var n=k(t);if(n){if((n=n.clone()).setClipMask(!0),!(e instanceof I))return new I(n,e);e.insertChild(0,n)}},gradientTransform:p,transform:p,"fill-opacity":m,"stroke-opacity":m,visibility:function(e,t){e.setVisible&&e.setVisible("visible"===t)},display:function(e,t){e.setVisible&&e.setVisible(null!==t)},"stop-color":function(e,t){e.setColor&&e.setColor(t)},"stop-opacity":function(e,t){e._color&&e._color.setAlpha(parseFloat(t))},offset:function(e,t){if(e.setOffset){var n=t.match(/(.*)%$/);e.setOffset(n?n[1]/100:parseFloat(t))}},viewBox:function(e,t,n,i,s){var o,l=new x(a(t,"array")),u=r(i,null,null,!0);if(e instanceof I){var h=u?u.divide(l.getSize()):1,c=(new C).scale(h).translate(l.getPoint().negate());o=e}else e instanceof E&&(u&&l.setSize(u),o=e._item);if(o){if("visible"!==y(i,"overflow",s)){var d=new P.Rectangle(l);d.setClipMask(!0),o.addChild(d)}c&&o.transform(c)}}});function y(e,t,n){var i=e.attributes[t],r=i&&i.value;if(!r&&e.style){var a=h.camelize(t);(r=e.style[a])||n.node[a]===n.parent[a]||(r=n.node[a])}return r?"none"===r?null:r:o}function b(e,t,n){var i=t.parentNode,r={node:X.getStyles(t)||{},parent:!n&&!/^defs$/i.test(i.tagName)&&X.getStyles(i)||{}};return h.each(_,(function(n,i){var a=y(t,i,r);e=a!==o&&n(e,a,i,t,r)||e})),e}function k(e){var n=e&&e.match(/\((?:["'#]*)([^"')]+)/),i=n&&n[1],r=i&&t[l?i.replace(l.location.href.split("#")[0]+"#",""):i];return r&&r._scaleToBounds&&((r=r.clone())._scaleToBounds=!0),r}function S(n,i,a){var s,o,l,c=n.nodeName.toLowerCase(),d="#document"!==c,f=u.body;a&&d&&(e=de.getView().getSize(),e=r(n,null,null,!0)||e,s=he.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),o=n.parentNode,l=n.nextSibling,s.appendChild(n),f.appendChild(s));var p=de.settings,m=p.applyMatrix,_=p.insertItems;p.applyMatrix=!1,p.insertItems=!1;var v=g[c],y=v&&v(n,c,i,a)||null;if(p.insertItems=_,p.applyMatrix=m,y){!d||y instanceof I||(y=b(y,n,a));var w=i.onImport,x=d&&n.getAttribute("data-paper-data");w&&(y=w(n,y,i)||y),i.expandShapes&&y instanceof P&&(y.remove(),y=y.toPath()),x&&(y._data=JSON.parse(x))}return s&&(f.removeChild(s),o&&(l?o.insertBefore(n,l):o.appendChild(n))),a&&(t={},y&&h.pick(i.applyMatrix,m)&&y.matrix.apply(!0,!0)),y}function A(e,t,n){if(!e)return null;t="function"==typeof t?{onLoad:t}:t||{};var i=de,r=null;function a(a){try{var u="object"==typeof a?a:(new s.DOMParser).parseFromString(a,"image/svg+xml");if(!u.nodeName)throw u=null,new Error("Unsupported SVG source: "+e);de=i,r=S(u,t,!0),t&&!1===t.insert||n._insertItem(o,r);var h=t.onLoad;h&&h(r,a)}catch(e){l(e)}}function l(e,n){var i=t.onError;if(!i)throw new Error(e);i(e,n)}if("string"!=typeof e||/^.*</.test(e)){if("undefined"!=typeof File&&e instanceof File){var h=new FileReader;return h.onload=function(){a(h.result)},h.onerror=function(){l(h.error)},h.readAsText(e)}a(e)}else{var c=u.getElementById(e);c?a(c):oe({url:e,async:!0,onLoad:a,onError:l})}return r}j.inject({importSVG:function(e,t){return A(e,t,this)}}),z.inject({importSVG:function(e,t){return this.activate(),A(e,t,this)}})},h.exports.PaperScript=function(){var e,t,c,f=this,g=f.acorn;if(!g)try{g=n(2)}catch(e){}function p(e,t){return(f.acorn||g).parse(e,t)}g||(g=e=t={},c=function(e){"use strict";var t,n,i,r;e.version="0.5.0",e.parse=function(e,r){return n=String(e),i=n.length,s(r),We(),function(e){_=v=o,t.locations&&(y=new Ze),w=x=null,b=[],Ke();var n=e||ut(),i=!0;for(e||(n.body=[]);d!==P;){var r=bt();n.body.push(r),i&&dt(r)&&st(!0),i=!1}return ct(n,"Program")}(t.program)};var a=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function s(e){for(var n in t=e||{},a)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=a[n]);r=t.sourceFile||null}var o,l,u,h,c,d,f,g,p,m,_,v,y,w,b,x,k=e.getLineInfo=function(e,t){for(var n=1,i=0;;){Ve.lastIndex=i;var r=Ve.exec(e);if(!(r&&r.index<t))break;++n,i=r.index+r[0].length}return{line:n,column:t-i}};function C(e,t){var i=k(n,e);t+=" ("+i.line+":"+i.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=i,r.raisedAt=o,r}e.tokenize=function(e,r){n=String(e),i=n.length,s(r),We();var a={};function _(e){return v=u,Ke(e),a.start=l,a.end=u,a.startLoc=h,a.endLoc=c,a.type=d,a.value=f,a}return _.jumpTo=function(e,i){var r;if(o=e,t.locations)for(p=1,m=Ve.lastIndex=0;(r=Ve.exec(n))&&r.index<e;)++p,m=r.index+r[0].length;g=i,Xe()},_};var S=[],z={type:"num"},j={type:"regexp"},I={type:"string"},A={type:"name"},P={type:"eof"},M={keyword:"break"},T={keyword:"case",beforeExpr:!0},E={keyword:"catch"},O={keyword:"continue"},L={keyword:"debugger"},N={keyword:"default"},R={keyword:"do",isLoop:!0},B={keyword:"else",beforeExpr:!0},D={keyword:"finally"},F={keyword:"for",isLoop:!0},q={keyword:"function"},V={keyword:"if"},U={keyword:"return",beforeExpr:!0},H={keyword:"switch"},Z={keyword:"throw",beforeExpr:!0},W={keyword:"try"},$={keyword:"var"},J={keyword:"while",isLoop:!0},G={keyword:"with"},X={keyword:"new",beforeExpr:!0},K={keyword:"this"},Y={keyword:"null",atomValue:null},Q={keyword:"true",atomValue:!0},ee={keyword:"false",atomValue:!1},te={keyword:"in",binop:7,beforeExpr:!0},ne={break:M,case:T,catch:E,continue:O,debugger:L,default:N,do:R,else:B,finally:D,for:F,function:q,if:V,return:U,switch:H,throw:Z,try:W,var:$,while:J,with:G,null:Y,true:Q,false:ee,new:X,in:te,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:K,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ie={type:"[",beforeExpr:!0},re={type:"]"},ae={type:"{",beforeExpr:!0},se={type:"}"},oe={type:"(",beforeExpr:!0},le={type:")"},ue={type:",",beforeExpr:!0},he={type:";",beforeExpr:!0},ce={type:":",beforeExpr:!0},de={type:"."},fe={type:"?",beforeExpr:!0},ge={binop:10,beforeExpr:!0},pe={isAssign:!0,beforeExpr:!0},me={isAssign:!0,beforeExpr:!0},_e={postfix:!0,prefix:!0,isUpdate:!0},ve={prefix:!0,beforeExpr:!0},ye={binop:1,beforeExpr:!0},we={binop:2,beforeExpr:!0},be={binop:3,beforeExpr:!0},xe={binop:4,beforeExpr:!0},ke={binop:5,beforeExpr:!0},Ce={binop:6,beforeExpr:!0},Se={binop:7,beforeExpr:!0},ze={binop:8,beforeExpr:!0},je={binop:9,prefix:!0,beforeExpr:!0},Ie={binop:10,beforeExpr:!0};for(var Ae in e.tokTypes={bracketL:ie,bracketR:re,braceL:ae,braceR:se,parenL:oe,parenR:le,comma:ue,semi:he,colon:ce,dot:de,question:fe,slash:ge,eq:pe,name:A,eof:P,num:z,regexp:j,string:I},ne)e.tokTypes["_"+Ae]=ne[Ae];function Pe(e){e=e.split(" ");var t="",n=[];e:for(var i=0;i<e.length;++i){for(var r=0;r<n.length;++r)if(n[r][0].length==e[i].length){n[r].push(e[i]);continue e}n.push([e[i]])}function a(e){if(1==e.length)return t+="return str === "+JSON.stringify(e[0])+";";t+="switch(str){";for(var n=0;n<e.length;++n)t+="case "+JSON.stringify(e[n])+":";t+="return true}return false;"}if(n.length>3){for(n.sort((function(e,t){return t.length-e.length})),t+="switch(str.length){",i=0;i<n.length;++i){var s=n[i];t+="case "+s[0].length+":",a(s)}t+="}"}else a(e);return new Function("str",t)}var Me,Te=Pe("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ee=Pe("class enum extends super const export import"),Oe=Pe("implements interface let package private protected public static yield"),Le=Pe("eval arguments"),Ne=Pe("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Re=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Be="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",De=new RegExp("["+Be+"]"),Fe=new RegExp("["+Be+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),qe=/[\n\r\u2028\u2029]/,Ve=/\r\n|[\n\r\u2028\u2029]/g,Ue=e.isIdentifierStart=function(e){return e<65?36===e:e<91||(e<97?95===e:e<123||e>=170&&De.test(String.fromCharCode(e)))},He=e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&Fe.test(String.fromCharCode(e))))};function Ze(){this.line=p,this.column=o-m}function We(){p=1,o=m=0,g=!0,Xe()}function $e(e,n){u=o,t.locations&&(c=new Ze),d=e,Xe(),f=n,g=e.beforeExpr}function Je(){var e,i=t.onComment&&t.locations&&new Ze,r=o,a=n.indexOf("*/",o+=2);if(-1===a&&C(o-2,"Unterminated comment"),o=a+2,t.locations)for(Ve.lastIndex=r;(e=Ve.exec(n))&&e.index<o;)++p,m=e.index+e[0].length;t.onComment&&t.onComment(!0,n.slice(r+2,a),r,o,i,t.locations&&new Ze)}function Ge(){for(var e=o,r=t.onComment&&t.locations&&new Ze,a=n.charCodeAt(o+=2);o<i&&10!==a&&13!==a&&8232!==a&&8233!==a;)++o,a=n.charCodeAt(o);t.onComment&&t.onComment(!1,n.slice(e+2,o),e,o,r,t.locations&&new Ze)}function Xe(){for(;o<i;){var e=n.charCodeAt(o);if(32===e)++o;else if(13===e)++o,10===(r=n.charCodeAt(o))&&++o,t.locations&&(++p,m=o);else if(10===e||8232===e||8233===e)++o,t.locations&&(++p,m=o);else if(e>8&&e<14)++o;else if(47===e){var r;if(42===(r=n.charCodeAt(o+1)))Je();else{if(47!==r)break;Ge()}}else if(160===e)++o;else{if(!(e>=5760&&Re.test(String.fromCharCode(e))))break;++o}}}function Ke(e){if(e?o=l+1:l=o,t.locations&&(h=new Ze),e)return Qe();if(o>=i)return $e(P);var r=n.charCodeAt(o);if(Ue(r)||92===r)return rt();var a=function(e){switch(e){case 46:return function(){var e=n.charCodeAt(o+1);return e>=48&&e<=57?tt(!0):(++o,$e(de))}();case 40:return++o,$e(oe);case 41:return++o,$e(le);case 59:return++o,$e(he);case 44:return++o,$e(ue);case 91:return++o,$e(ie);case 93:return++o,$e(re);case 123:return++o,$e(ae);case 125:return++o,$e(se);case 58:return++o,$e(ce);case 63:return++o,$e(fe);case 48:var r=n.charCodeAt(o+1);if(120===r||88===r)return function(){o+=2;var e=et(16);return null==e&&C(l+2,"Expected hexadecimal number"),Ue(n.charCodeAt(o))&&C(o,"Identifier directly after number"),$e(z,e)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return tt(!1);case 34:case 39:return function(e){o++;for(var r="";;){o>=i&&C(l,"Unterminated string constant");var a=n.charCodeAt(o);if(a===e)return++o,$e(I,r);if(92===a){a=n.charCodeAt(++o);var s=/^[0-7]+/.exec(n.slice(o,o+3));for(s&&(s=s[0]);s&&parseInt(s,8)>255;)s=s.slice(0,-1);if("0"===s&&(s=null),++o,s)x&&C(o-2,"Octal literal in strict mode"),r+=String.fromCharCode(parseInt(s,8)),o+=s.length-1;else switch(a){case 110:r+="\n";break;case 114:r+="\r";break;case 120:r+=String.fromCharCode(nt(2));break;case 117:r+=String.fromCharCode(nt(4));break;case 85:r+=String.fromCharCode(nt(8));break;case 116:r+="\t";break;case 98:r+="\b";break;case 118:r+="\v";break;case 102:r+="\f";break;case 48:r+="\0";break;case 13:10===n.charCodeAt(o)&&++o;case 10:t.locations&&(m=o,++p);break;default:r+=String.fromCharCode(a)}}else 13!==a&&10!==a&&8232!==a&&8233!==a||C(l,"Unterminated string constant"),r+=String.fromCharCode(a),++o}}(e);case 47:return function(){var e=n.charCodeAt(o+1);return g?(++o,Qe()):61===e?Ye(me,2):Ye(ge,1)}();case 37:case 42:return 61===n.charCodeAt(o+1)?Ye(me,2):Ye(Ie,1);case 124:case 38:return function(e){var t=n.charCodeAt(o+1);return t===e?Ye(124===e?ye:we,2):61===t?Ye(me,2):Ye(124===e?be:ke,1)}(e);case 94:return 61===n.charCodeAt(o+1)?Ye(me,2):Ye(xe,1);case 43:case 45:return function(e){var t=n.charCodeAt(o+1);return t===e?45==t&&62==n.charCodeAt(o+2)&&qe.test(n.slice(v,o))?(o+=3,Ge(),Xe(),Ke()):Ye(_e,2):61===t?Ye(me,2):Ye(je,1)}(e);case 60:case 62:return function(e){var t=n.charCodeAt(o+1),i=1;return t===e?(i=62===e&&62===n.charCodeAt(o+2)?3:2,61===n.charCodeAt(o+i)?Ye(me,i+1):Ye(ze,i)):33==t&&60==e&&45==n.charCodeAt(o+2)&&45==n.charCodeAt(o+3)?(o+=4,Ge(),Xe(),Ke()):(61===t&&(i=61===n.charCodeAt(o+2)?3:2),Ye(Se,i))}(e);case 61:case 33:return function(e){return 61===n.charCodeAt(o+1)?Ye(Ce,61===n.charCodeAt(o+2)?3:2):Ye(61===e?pe:ve,1)}(e);case 126:return Ye(ve,1)}return!1}(r);if(!1===a){var s=String.fromCharCode(r);if("\\"===s||De.test(s))return rt();C(o,"Unexpected character '"+s+"'")}return a}function Ye(e,t){var i=n.slice(o,o+t);o+=t,$e(e,i)}function Qe(){for(var e,t,r=o;;){o>=i&&C(r,"Unterminated regular expression");var a=n.charAt(o);if(qe.test(a)&&C(r,"Unterminated regular expression"),e)e=!1;else{if("["===a)t=!0;else if("]"===a&&t)t=!1;else if("/"===a&&!t)break;e="\\"===a}++o}var s=n.slice(r,o);++o;var l=it();l&&!/^[gmsiy]*$/.test(l)&&C(r,"Invalid regexp flag");try{var u=new RegExp(s,l)}catch(e){e instanceof SyntaxError&&C(r,e.message),C(e)}return $e(j,u)}function et(e,t){for(var i=o,r=0,a=0,s=null==t?1/0:t;a<s;++a){var l,u=n.charCodeAt(o);if((l=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=e)break;++o,r=r*e+l}return o===i||null!=t&&o-i!==t?null:r}function tt(e){var t=o,i=!1,r=48===n.charCodeAt(o);e||null!==et(10)||C(t,"Invalid number"),46===n.charCodeAt(o)&&(++o,et(10),i=!0);var a=n.charCodeAt(o);69!==a&&101!==a||(43!==(a=n.charCodeAt(++o))&&45!==a||++o,null===et(10)&&C(t,"Invalid number"),i=!0),Ue(n.charCodeAt(o))&&C(o,"Identifier directly after number");var s,l=n.slice(t,o);return i?s=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||x?C(t,"Invalid number"):s=parseInt(l,8):s=parseInt(l,10),$e(z,s)}function nt(e){var t=et(16,e);return null===t&&C(l,"Bad character escape sequence"),t}function it(){Me=!1;for(var e,t=!0,i=o;;){var r=n.charCodeAt(o);if(He(r))Me&&(e+=n.charAt(o)),++o;else{if(92!==r)break;Me||(e=n.slice(i,o)),Me=!0,117!=n.charCodeAt(++o)&&C(o,"Expecting Unicode escape sequence \\uXXXX"),++o;var a=nt(4),s=String.fromCharCode(a);s||C(o-1,"Invalid Unicode escape"),(t?Ue(a):He(a))||C(o-4,"Invalid Unicode escape"),e+=s}t=!1}return Me?e:n.slice(i,o)}function rt(){var e=it(),t=A;return!Me&&Ne(e)&&(t=ne[e]),$e(t,e)}function at(){_=l,v=u,y=c,Ke()}function st(e){if(x=e,o=l,t.locations)for(;o<m;)m=n.lastIndexOf("\n",m-2)+1,--p;Xe(),Ke()}function ot(){this.type=null,this.start=l,this.end=null}function lt(){this.start=h,this.end=null,null!==r&&(this.source=r)}function ut(){var e=new ot;return t.locations&&(e.loc=new lt),t.directSourceFile&&(e.sourceFile=t.directSourceFile),t.ranges&&(e.range=[l,0]),e}function ht(e){var n=new ot;return n.start=e.start,t.locations&&(n.loc=new lt,n.loc.start=e.loc.start),t.ranges&&(n.range=[e.range[0],0]),n}function ct(e,n){return e.type=n,e.end=v,t.locations&&(e.loc.end=y),t.ranges&&(e.range[1]=v),e}function dt(e){return t.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value}function ft(e){if(d===e)return at(),!0}function gt(){return!t.strictSemicolons&&(d===P||d===se||qe.test(n.slice(v,l)))}function pt(){ft(he)||gt()||_t()}function mt(e){d===e?at():_t()}function _t(){C(l,"Unexpected token")}function vt(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&C(e.start,"Assigning to rvalue"),x&&"Identifier"===e.type&&Le(e.name)&&C(e.start,"Assigning to "+e.name+" in strict mode")}var yt={kind:"loop"},wt={kind:"switch"};function bt(){(d===ge||d===me&&"/="==f)&&Ke(!0);var e=d,i=ut();switch(e){case M:case O:at();var r=e===M;ft(he)||gt()?i.label=null:d!==A?_t():(i.label=Lt(),pt());for(var a=0;a<b.length;++a){var s=b[a];if(null==i.label||s.name===i.label.name){if(null!=s.kind&&(r||"loop"===s.kind))break;if(i.label&&r)break}}return a===b.length&&C(i.start,"Unsyntactic "+e.keyword),ct(i,r?"BreakStatement":"ContinueStatement");case L:return at(),pt(),ct(i,"DebuggerStatement");case R:return at(),b.push(yt),i.body=bt(),b.pop(),mt(J),i.test=xt(),pt(),ct(i,"DoWhileStatement");case F:if(at(),b.push(yt),mt(oe),d===he)return Ct(i,null);if(d===$){var o=ut();return at(),zt(o,!0),ct(o,"VariableDeclaration"),1===o.declarations.length&&ft(te)?St(i,o):Ct(i,o)}return o=jt(!1,!0),ft(te)?(vt(o),St(i,o)):Ct(i,o);case q:return at(),Et(i,!0);case V:return at(),i.test=xt(),i.consequent=bt(),i.alternate=ft(B)?bt():null,ct(i,"IfStatement");case U:return w||t.allowReturnOutsideFunction||C(l,"'return' outside of function"),at(),ft(he)||gt()?i.argument=null:(i.argument=jt(),pt()),ct(i,"ReturnStatement");case H:at(),i.discriminant=xt(),i.cases=[],mt(ae),b.push(wt);for(var u,h;d!=se;)if(d===T||d===N){var c=d===T;u&&ct(u,"SwitchCase"),i.cases.push(u=ut()),u.consequent=[],at(),c?u.test=jt():(h&&C(_,"Multiple default clauses"),h=!0,u.test=null),mt(ce)}else u||_t(),u.consequent.push(bt());return u&&ct(u,"SwitchCase"),at(),b.pop(),ct(i,"SwitchStatement");case Z:return at(),qe.test(n.slice(v,l))&&C(v,"Illegal newline after throw"),i.argument=jt(),pt(),ct(i,"ThrowStatement");case W:if(at(),i.block=kt(),i.handler=null,d===E){var g=ut();at(),mt(oe),g.param=Lt(),x&&Le(g.param.name)&&C(g.param.start,"Binding "+g.param.name+" in strict mode"),mt(le),g.guard=null,g.body=kt(),i.handler=ct(g,"CatchClause")}return i.guardedHandlers=S,i.finalizer=ft(D)?kt():null,i.handler||i.finalizer||C(i.start,"Missing catch or finally clause"),ct(i,"TryStatement");case $:return at(),zt(i),pt(),ct(i,"VariableDeclaration");case J:return at(),i.test=xt(),b.push(yt),i.body=bt(),b.pop(),ct(i,"WhileStatement");case G:return x&&C(l,"'with' in strict mode"),at(),i.object=xt(),i.body=bt(),ct(i,"WithStatement");case ae:return kt();case he:return at(),ct(i,"EmptyStatement");default:var p=f,m=jt();if(e===A&&"Identifier"===m.type&&ft(ce)){for(a=0;a<b.length;++a)b[a].name===p&&C(m.start,"Label '"+p+"' is already declared");var y=d.isLoop?"loop":d===H?"switch":null;return b.push({name:p,kind:y}),i.body=bt(),b.pop(),i.label=m,ct(i,"LabeledStatement")}return i.expression=m,pt(),ct(i,"ExpressionStatement")}}function xt(){mt(oe);var e=jt();return mt(le),e}function kt(e){var t,n=ut(),i=!0,r=!1;for(n.body=[],mt(ae);!ft(se);){var a=bt();n.body.push(a),i&&e&&dt(a)&&(t=r,st(r=!0)),i=!1}return r&&!t&&st(!1),ct(n,"BlockStatement")}function Ct(e,t){return e.init=t,mt(he),e.test=d===he?null:jt(),mt(he),e.update=d===le?null:jt(),mt(le),e.body=bt(),b.pop(),ct(e,"ForStatement")}function St(e,t){return e.left=t,e.right=jt(),mt(le),e.body=bt(),b.pop(),ct(e,"ForInStatement")}function zt(e,t){for(e.declarations=[],e.kind="var";;){var n=ut();if(n.id=Lt(),x&&Le(n.id.name)&&C(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=ft(pe)?jt(!0,t):null,e.declarations.push(ct(n,"VariableDeclarator")),!ft(ue))break}return e}function jt(e,t){var n=It(t);if(!e&&d===ue){var i=ht(n);for(i.expressions=[n];ft(ue);)i.expressions.push(It(t));return ct(i,"SequenceExpression")}return n}function It(e){var t=function(e){var t=function(e){return function e(t,n,i){var r=d.binop;if(null!=r&&(!i||d!==te)&&r>n){var a=ht(t);a.left=t,a.operator=f;var s=d;return at(),a.right=e(At(),r,i),e(ct(a,s===ye||s===we?"LogicalExpression":"BinaryExpression"),n,i)}return t}(At(),-1,e)}(e);if(ft(fe)){var n=ht(t);return n.test=t,n.consequent=jt(!0),mt(ce),n.alternate=jt(!0,e),ct(n,"ConditionalExpression")}return t}(e);if(d.isAssign){var n=ht(t);return n.operator=f,n.left=t,at(),n.right=It(e),vt(t),ct(n,"AssignmentExpression")}return t}function At(){if(d.prefix){var e=ut(),t=d.isUpdate;return e.operator=f,e.prefix=!0,g=!0,at(),e.argument=At(),t?vt(e.argument):x&&"delete"===e.operator&&"Identifier"===e.argument.type&&C(e.start,"Deleting local variable in strict mode"),ct(e,t?"UpdateExpression":"UnaryExpression")}for(var n=Pt(Mt());d.postfix&&!gt();)(e=ht(n)).operator=f,e.prefix=!1,e.argument=n,vt(n),at(),n=ct(e,"UpdateExpression");return n}function Pt(e,t){var n;return ft(de)?((n=ht(e)).object=e,n.property=Lt(!0),n.computed=!1,Pt(ct(n,"MemberExpression"),t)):ft(ie)?((n=ht(e)).object=e,n.property=jt(),n.computed=!0,mt(re),Pt(ct(n,"MemberExpression"),t)):!t&&ft(oe)?((n=ht(e)).callee=e,n.arguments=Ot(le,!1),Pt(ct(n,"CallExpression"),t)):e}function Mt(){switch(d){case K:var e=ut();return at(),ct(e,"ThisExpression");case A:return Lt();case z:case I:case j:return(e=ut()).value=f,e.raw=n.slice(l,u),at(),ct(e,"Literal");case Y:case Q:case ee:return(e=ut()).value=d.atomValue,e.raw=d.keyword,at(),ct(e,"Literal");case oe:var i=h,r=l;at();var a=jt();return a.start=r,a.end=u,t.locations&&(a.loc.start=i,a.loc.end=c),t.ranges&&(a.range=[r,u]),mt(le),a;case ie:return e=ut(),at(),e.elements=Ot(re,!0,!0),ct(e,"ArrayExpression");case ae:return function(){var e=ut(),n=!0,i=!1;for(e.properties=[],at();!ft(se);){if(n)n=!1;else if(mt(ue),t.allowTrailingCommas&&ft(se))break;var r,a={key:Tt()},s=!1;if(ft(ce)?(a.value=jt(!0),r=a.kind="init"):t.ecmaVersion>=5&&"Identifier"===a.key.type&&("get"===a.key.name||"set"===a.key.name)?(s=i=!0,r=a.kind=a.key.name,a.key=Tt(),d!==oe&&_t(),a.value=Et(ut(),!1)):_t(),"Identifier"===a.key.type&&(x||i))for(var o=0;o<e.properties.length;++o){var l=e.properties[o];if(l.key.name===a.key.name){var u=r==l.kind||s&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);u&&!x&&"init"===r&&"init"===l.kind&&(u=!1),u&&C(a.key.start,"Redefinition of property")}}e.properties.push(a)}return ct(e,"ObjectExpression")}();case q:return e=ut(),at(),Et(e,!1);case X:return function(){var e=ut();return at(),e.callee=Pt(Mt(),!0),ft(oe)?e.arguments=Ot(le,!1):e.arguments=S,ct(e,"NewExpression")}();default:_t()}}function Tt(){return d===z||d===I?Mt():Lt(!0)}function Et(e,t){d===A?e.id=Lt():t?_t():e.id=null,e.params=[];var n=!0;for(mt(oe);!ft(le);)n?n=!1:mt(ue),e.params.push(Lt());var i=w,r=b;if(w=!0,b=[],e.body=kt(!0),w=i,b=r,x||e.body.body.length&&dt(e.body.body[0]))for(var a=e.id?-1:0;a<e.params.length;++a){var s=a<0?e.id:e.params[a];if((Oe(s.name)||Le(s.name))&&C(s.start,"Defining '"+s.name+"' in strict mode"),a>=0)for(var o=0;o<a;++o)s.name===e.params[o].name&&C(s.start,"Argument name clash in strict mode")}return ct(e,t?"FunctionDeclaration":"FunctionExpression")}function Ot(e,n,i){for(var r=[],a=!0;!ft(e);){if(a)a=!1;else if(mt(ue),n&&t.allowTrailingCommas&&ft(e))break;i&&d===ue?r.push(null):r.push(jt(!0))}return r}function Lt(e){var i=ut();return e&&"everywhere"==t.forbidReserved&&(e=!1),d===A?(!e&&(t.forbidReserved&&(3===t.ecmaVersion?Te:Ee)(f)||x&&Oe(f))&&-1==n.slice(l,u).indexOf("\\")&&C(l,"The keyword '"+f+"' is reserved"),i.name=f):e&&d.keyword?i.name=d.keyword:_t(),g=!1,at(),ct(i,"Identifier")}},"object"==typeof e&&"object"==typeof t?c(e):(i=[e],(a="function"==typeof(r=c)?r.apply(e,i):r)===o||(t.exports=a)),g.version||(g=null));var m={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},_={"-":"__negate","+":"__self"},y=h.each(["add","subtract","multiply","divide","modulo","equals","negate"],(function(e){this["__"+e]="#"+e}),{__self:function(){return this}});function b(e,t,n){var i=m[t];if(e&&e[i]){var r=e[i](n);return"!="===t?!r:r}switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;case"==":return e==n;case"!=":return e!=n}}function x(e,t){var n=_[e];if(t&&t[n])return t[n]();switch(e){case"+":return+t;case"-":return-t}}function k(e,t){if(!e)return"";var n=[];function i(e){for(var t=0,i=n.length;t<i;t++){var r=n[t];if(r[0]>=e)break;e+=r[1]}return e}function r(t){return e.substring(i(t.range[0]),i(t.range[1]))}function a(t,r){for(var a=i(t.range[0]),s=i(t.range[1]),o=0,l=n.length-1;l>=0;l--)if(a>n[l][0]){o=l+1;break}n.splice(o,0,[a,r.length-s+a]),e=e.substring(0,a)+r+e.substring(s)}var o,h=(t=t||{}).url||"",c=de.agent,d=c.versionNumber,f=!1,g=t.sourceMaps,v=t.source||e,y=/\r\n|\n|\r/gm,w=t.offset||0;if(g&&(c.chrome&&d>=30||c.webkit&&d>=537.76||c.firefox&&d>=23||c.node)){if(c.node)w-=2;else if(l&&h&&!l.location.href.indexOf(h)){var b=u.getElementsByTagName("html")[0].innerHTML;w=b.substr(0,b.indexOf(e)+1).match(y).length+1}var x=["AA"+function(e){var t="";for(e=(Math.abs(e)<<1)+(e<0?1:0);e||!t;){var n=31&e;(e>>=5)&&(n|=32),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return t}((f=w>0&&!(c.chrome&&d>=36||c.safari&&d>=600||c.firefox&&d>=40||c.node))?0:w)+"A"];x.length=(e.match(y)||[]).length+1+(f?w:0),o={version:3,file:h,names:[],mappings:x.join(";AACA"),sourceRoot:"",sources:[h],sourcesContent:[v]}}return function t(n,s){if(n){for(var o in n)if("range"!==o&&"loc"!==o){var l=n[o];if(Array.isArray(l))for(var u=0,h=l.length;u<h;u++)t(l[u],n);else l&&"object"==typeof l&&t(l,n)}switch(n.type){case"UnaryExpression":if(n.operator in _&&"Literal"!==n.argument.type){var c=r(n.argument);a(n,'$__("'+n.operator+'", '+c+")")}break;case"BinaryExpression":if(n.operator in m&&"Literal"!==n.left.type){var d=r(n.left),f=r(n.right),g=function(t,n){return e.substring(i(t.range[1]),i(n.range[0]))}(n.left,n.right),p=n.operator;a(n,"__$__("+d+","+g.replace(new RegExp("\\"+p),'"'+p+'"')+", "+f+")")}break;case"UpdateExpression":case"AssignmentExpression":var v=s&&s.type;if(!("ForStatement"===v||"BinaryExpression"===v&&/^[=!<>]/.test(s.operator)||"MemberExpression"===v&&s.computed))if("UpdateExpression"===n.type){var y=(c=r(n.argument))+" = "+(w="__$__("+c+', "'+n.operator[0]+'", 1)');n.prefix?y="("+y+")":"AssignmentExpression"!==v&&"VariableDeclarator"!==v&&"BinaryExpression"!==v||(r(s.left||s.id)===c&&(y=w),y=c+"; "+y),a(n,y)}else if(/^.=$/.test(n.operator)&&"Literal"!==n.left.type){d=r(n.left),f=r(n.right);var w=d+" = __$__("+d+', "'+n.operator[0]+'", '+f+")";a(n,/^\(.*\)$/.test(r(n))?"("+w+")":w)}break;case"ExportDefaultDeclaration":a({range:[n.start,n.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var b=n.declaration,x=n.specifiers;if(b){var k=b.declarations;k&&(k.forEach((function(e){a(e,"module.exports."+r(e))})),a({range:[n.start,b.start+b.kind.length]},""))}else if(x){var C=x.map((function(e){var t=r(e);return"module.exports."+t+" = "+t+"; "})).join("");C&&a(n,C)}}}}(p(e,{ranges:!0,preserveParens:!0,sourceType:"module"})),o&&(f&&(e=new Array(w+1).join("\n")+e),/^(inline|both)$/.test(g)&&(e+="\n//# sourceMappingURL=data:application/json;base64,"+s.btoa(unescape(encodeURIComponent(JSON.stringify(o))))),e+="\n//# sourceURL="+(h||"paperscript")),{url:h,source:v,code:e,map:o}}function C(e,t,n){de=t;var i,r=t.getView(),a=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(e)&&!/\bnew\s+Tool\b/.test(e)?new ae:null,s=a?a._events:[],o=["onFrame","onResize"].concat(s),l=[],c=[],d="object"==typeof e?e:k(e,n);function f(t,n){for(var i in t)!n&&/^_/.test(i)||!new RegExp("([\\b\\s\\W]|^)"+i.replace(/\$/g,"\\$")+"\\b").test(e)||(l.push(i),c.push(t[i]))}e=d.code,f({__$__:b,$__:x,paper:t,tool:a},!0),f(t),e="var module = { exports: {} }; "+e,(_=h.each(o,(function(t){new RegExp("\\s+"+t+"\\b").test(e)&&(l.push(t),this.push("module.exports."+t+" = "+t+";"))}),[]).join("\n"))&&(e+="\n"+_),e+="\nreturn module.exports;";var g=de.agent;if(u&&(g.chrome||g.firefox&&g.versionNumber<40)){var p=u.createElement("script"),m=u.head||u.getElementsByTagName("head")[0];g.firefox&&(e="\n"+e),p.appendChild(u.createTextNode("document.__paperscript__ = function("+l+") {"+e+"\n}")),m.appendChild(p),i=u.__paperscript__,delete u.__paperscript__,m.removeChild(p)}else i=Function(l,e);var _,y=(_=i&&i.apply(t,c))||{};return h.each(s,(function(e){var t=y[e];t&&(a[e]=t)})),r&&(y.onResize&&r.setOnResize(y.onResize),r.emit("resize",{size:r.size,delta:new v}),y.onFrame&&r.setOnFrame(y.onFrame),r.requestUpdate()),_}function S(e){if(/^text\/(?:x-|)paperscript$/.test(e.type)&&"true"!==d.getAttribute(e,"ignore")){var t=d.getAttribute(e,"canvas"),n=u.getElementById(t),i=e.src||e.getAttribute("data-src"),r=d.hasAttribute(e,"async");if(!n)throw new Error('Unable to find canvas with id "'+t+'"');var a=d.get(n.getAttribute("data-paper-scope"))||(new d).setup(n);return n.setAttribute("data-paper-scope",a._id),i?oe({url:i,async:r,mimeType:"text/plain",onLoad:function(e){C(e,a,i)}}):C(e.innerHTML,a,e.baseURI),e.setAttribute("data-paper-ignore","true"),a}}function z(){h.each(u&&u.getElementsByTagName("script"),S)}return v.inject(y),w.inject(y),W.inject(y),l&&("complete"===u.readyState?setTimeout(z):K.add(l,{load:z})),{compile:k,execute:C,load:function(e){return e?S(e):z()},parse:p,calculateBinary:b,calculateUnary:x}}.call(this);var de=new(d.inject(h.exports,{Base:h,Numerical:m,Key:ne,DomEvent:K,DomElement:X,document:u,window:l,Symbol:E,PlacedSymbol:T}));return de.agent.node&&n(3)(de),(a="function"==typeof(r=de)?r.call(t,n,t,e):r)===o||(e.exports=a),de}).call(this,"object"==typeof self?self:null)},function(e,t){},function(e,t,n){!function(e){"use strict";var t,n,i,r;e.version="0.5.0",e.parse=function(e,r){return n=String(e),i=n.length,s(r),We(),function(e){_=v=o,t.locations&&(y=new Ze),w=x=null,b=[],Ke();var n=e||ut(),i=!0;for(e||(n.body=[]);d!==P;){var r=bt();n.body.push(r),i&&dt(r)&&st(!0),i=!1}return ct(n,"Program")}(t.program)};var a=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function s(e){for(var n in t=e||{},a)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=a[n]);r=t.sourceFile||null}var o,l,u,h,c,d,f,g,p,m,_,v,y,w,b,x,k=e.getLineInfo=function(e,t){for(var n=1,i=0;;){Ve.lastIndex=i;var r=Ve.exec(e);if(!(r&&r.index<t))break;++n,i=r.index+r[0].length}return{line:n,column:t-i}};function C(e,t){var i=k(n,e);t+=" ("+i.line+":"+i.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=i,r.raisedAt=o,r}e.tokenize=function(e,r){n=String(e),i=n.length,s(r),We();var a={};function _(e){return v=u,Ke(e),a.start=l,a.end=u,a.startLoc=h,a.endLoc=c,a.type=d,a.value=f,a}return _.jumpTo=function(e,i){var r;if(o=e,t.locations)for(p=1,m=Ve.lastIndex=0;(r=Ve.exec(n))&&r.index<e;)++p,m=r.index+r[0].length;g=i,Xe()},_};var S=[],z={type:"num"},j={type:"regexp"},I={type:"string"},A={type:"name"},P={type:"eof"},M={keyword:"break"},T={keyword:"case",beforeExpr:!0},E={keyword:"catch"},O={keyword:"continue"},L={keyword:"debugger"},N={keyword:"default"},R={keyword:"do",isLoop:!0},B={keyword:"else",beforeExpr:!0},D={keyword:"finally"},F={keyword:"for",isLoop:!0},q={keyword:"function"},V={keyword:"if"},U={keyword:"return",beforeExpr:!0},H={keyword:"switch"},Z={keyword:"throw",beforeExpr:!0},W={keyword:"try"},$={keyword:"var"},J={keyword:"while",isLoop:!0},G={keyword:"with"},X={keyword:"new",beforeExpr:!0},K={keyword:"this"},Y={keyword:"null",atomValue:null},Q={keyword:"true",atomValue:!0},ee={keyword:"false",atomValue:!1},te={keyword:"in",binop:7,beforeExpr:!0},ne={break:M,case:T,catch:E,continue:O,debugger:L,default:N,do:R,else:B,finally:D,for:F,function:q,if:V,return:U,switch:H,throw:Z,try:W,var:$,while:J,with:G,null:Y,true:Q,false:ee,new:X,in:te,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:K,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ie={type:"[",beforeExpr:!0},re={type:"]"},ae={type:"{",beforeExpr:!0},se={type:"}"},oe={type:"(",beforeExpr:!0},le={type:")"},ue={type:",",beforeExpr:!0},he={type:";",beforeExpr:!0},ce={type:":",beforeExpr:!0},de={type:"."},fe={type:"?",beforeExpr:!0},ge={binop:10,beforeExpr:!0},pe={isAssign:!0,beforeExpr:!0},me={isAssign:!0,beforeExpr:!0},_e={postfix:!0,prefix:!0,isUpdate:!0},ve={prefix:!0,beforeExpr:!0},ye={binop:1,beforeExpr:!0},we={binop:2,beforeExpr:!0},be={binop:3,beforeExpr:!0},xe={binop:4,beforeExpr:!0},ke={binop:5,beforeExpr:!0},Ce={binop:6,beforeExpr:!0},Se={binop:7,beforeExpr:!0},ze={binop:8,beforeExpr:!0},je={binop:9,prefix:!0,beforeExpr:!0},Ie={binop:10,beforeExpr:!0};for(var Ae in e.tokTypes={bracketL:ie,bracketR:re,braceL:ae,braceR:se,parenL:oe,parenR:le,comma:ue,semi:he,colon:ce,dot:de,question:fe,slash:ge,eq:pe,name:A,eof:P,num:z,regexp:j,string:I},ne)e.tokTypes["_"+Ae]=ne[Ae];function Pe(e){e=e.split(" ");var t="",n=[];e:for(var i=0;i<e.length;++i){for(var r=0;r<n.length;++r)if(n[r][0].length==e[i].length){n[r].push(e[i]);continue e}n.push([e[i]])}function a(e){if(1==e.length)return t+="return str === "+JSON.stringify(e[0])+";";t+="switch(str){";for(var n=0;n<e.length;++n)t+="case "+JSON.stringify(e[n])+":";t+="return true}return false;"}if(n.length>3){for(n.sort((function(e,t){return t.length-e.length})),t+="switch(str.length){",i=0;i<n.length;++i){var s=n[i];t+="case "+s[0].length+":",a(s)}t+="}"}else a(e);return new Function("str",t)}var Me,Te=Pe("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ee=Pe("class enum extends super const export import"),Oe=Pe("implements interface let package private protected public static yield"),Le=Pe("eval arguments"),Ne=Pe("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Re=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Be="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",De=new RegExp("["+Be+"]"),Fe=new RegExp("["+Be+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),qe=/[\n\r\u2028\u2029]/,Ve=/\r\n|[\n\r\u2028\u2029]/g,Ue=e.isIdentifierStart=function(e){return e<65?36===e:e<91||(e<97?95===e:e<123||e>=170&&De.test(String.fromCharCode(e)))},He=e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&Fe.test(String.fromCharCode(e))))};function Ze(){this.line=p,this.column=o-m}function We(){p=1,o=m=0,g=!0,Xe()}function $e(e,n){u=o,t.locations&&(c=new Ze),d=e,Xe(),f=n,g=e.beforeExpr}function Je(){var e,i=t.onComment&&t.locations&&new Ze,r=o,a=n.indexOf("*/",o+=2);if(-1===a&&C(o-2,"Unterminated comment"),o=a+2,t.locations)for(Ve.lastIndex=r;(e=Ve.exec(n))&&e.index<o;)++p,m=e.index+e[0].length;t.onComment&&t.onComment(!0,n.slice(r+2,a),r,o,i,t.locations&&new Ze)}function Ge(){for(var e=o,r=t.onComment&&t.locations&&new Ze,a=n.charCodeAt(o+=2);o<i&&10!==a&&13!==a&&8232!==a&&8233!==a;)++o,a=n.charCodeAt(o);t.onComment&&t.onComment(!1,n.slice(e+2,o),e,o,r,t.locations&&new Ze)}function Xe(){for(;o<i;){var e=n.charCodeAt(o);if(32===e)++o;else if(13===e)++o,10===(r=n.charCodeAt(o))&&++o,t.locations&&(++p,m=o);else if(10===e||8232===e||8233===e)++o,t.locations&&(++p,m=o);else if(e>8&&e<14)++o;else if(47===e){var r;if(42===(r=n.charCodeAt(o+1)))Je();else{if(47!==r)break;Ge()}}else if(160===e)++o;else{if(!(e>=5760&&Re.test(String.fromCharCode(e))))break;++o}}}function Ke(e){if(e?o=l+1:l=o,t.locations&&(h=new Ze),e)return Qe();if(o>=i)return $e(P);var r=n.charCodeAt(o);if(Ue(r)||92===r)return rt();var a=function(e){switch(e){case 46:return function(){var e=n.charCodeAt(o+1);return e>=48&&e<=57?tt(!0):(++o,$e(de))}();case 40:return++o,$e(oe);case 41:return++o,$e(le);case 59:return++o,$e(he);case 44:return++o,$e(ue);case 91:return++o,$e(ie);case 93:return++o,$e(re);case 123:return++o,$e(ae);case 125:return++o,$e(se);case 58:return++o,$e(ce);case 63:return++o,$e(fe);case 48:var r=n.charCodeAt(o+1);if(120===r||88===r)return function(){o+=2;var e=et(16);return null==e&&C(l+2,"Expected hexadecimal number"),Ue(n.charCodeAt(o))&&C(o,"Identifier directly after number"),$e(z,e)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return tt(!1);case 34:case 39:return function(e){o++;for(var r="";;){o>=i&&C(l,"Unterminated string constant");var a=n.charCodeAt(o);if(a===e)return++o,$e(I,r);if(92===a){a=n.charCodeAt(++o);var s=/^[0-7]+/.exec(n.slice(o,o+3));for(s&&(s=s[0]);s&&parseInt(s,8)>255;)s=s.slice(0,-1);if("0"===s&&(s=null),++o,s)x&&C(o-2,"Octal literal in strict mode"),r+=String.fromCharCode(parseInt(s,8)),o+=s.length-1;else switch(a){case 110:r+="\n";break;case 114:r+="\r";break;case 120:r+=String.fromCharCode(nt(2));break;case 117:r+=String.fromCharCode(nt(4));break;case 85:r+=String.fromCharCode(nt(8));break;case 116:r+="\t";break;case 98:r+="\b";break;case 118:r+="\v";break;case 102:r+="\f";break;case 48:r+="\0";break;case 13:10===n.charCodeAt(o)&&++o;case 10:t.locations&&(m=o,++p);break;default:r+=String.fromCharCode(a)}}else 13!==a&&10!==a&&8232!==a&&8233!==a||C(l,"Unterminated string constant"),r+=String.fromCharCode(a),++o}}(e);case 47:return function(){var e=n.charCodeAt(o+1);return g?(++o,Qe()):61===e?Ye(me,2):Ye(ge,1)}();case 37:case 42:return 61===n.charCodeAt(o+1)?Ye(me,2):Ye(Ie,1);case 124:case 38:return function(e){var t=n.charCodeAt(o+1);return t===e?Ye(124===e?ye:we,2):61===t?Ye(me,2):Ye(124===e?be:ke,1)}(e);case 94:return 61===n.charCodeAt(o+1)?Ye(me,2):Ye(xe,1);case 43:case 45:return function(e){var t=n.charCodeAt(o+1);return t===e?45==t&&62==n.charCodeAt(o+2)&&qe.test(n.slice(v,o))?(o+=3,Ge(),Xe(),Ke()):Ye(_e,2):61===t?Ye(me,2):Ye(je,1)}(e);case 60:case 62:return function(e){var t=n.charCodeAt(o+1),i=1;return t===e?(i=62===e&&62===n.charCodeAt(o+2)?3:2,61===n.charCodeAt(o+i)?Ye(me,i+1):Ye(ze,i)):33==t&&60==e&&45==n.charCodeAt(o+2)&&45==n.charCodeAt(o+3)?(o+=4,Ge(),Xe(),Ke()):(61===t&&(i=61===n.charCodeAt(o+2)?3:2),Ye(Se,i))}(e);case 61:case 33:return function(e){return 61===n.charCodeAt(o+1)?Ye(Ce,61===n.charCodeAt(o+2)?3:2):Ye(61===e?pe:ve,1)}(e);case 126:return Ye(ve,1)}return!1}(r);if(!1===a){var s=String.fromCharCode(r);if("\\"===s||De.test(s))return rt();C(o,"Unexpected character '"+s+"'")}return a}function Ye(e,t){var i=n.slice(o,o+t);o+=t,$e(e,i)}function Qe(){for(var e,t,r=o;;){o>=i&&C(r,"Unterminated regular expression");var a=n.charAt(o);if(qe.test(a)&&C(r,"Unterminated regular expression"),e)e=!1;else{if("["===a)t=!0;else if("]"===a&&t)t=!1;else if("/"===a&&!t)break;e="\\"===a}++o}var s=n.slice(r,o);++o;var l=it();l&&!/^[gmsiy]*$/.test(l)&&C(r,"Invalid regexp flag");try{var u=new RegExp(s,l)}catch(e){e instanceof SyntaxError&&C(r,e.message),C(e)}return $e(j,u)}function et(e,t){for(var i=o,r=0,a=0,s=null==t?1/0:t;a<s;++a){var l,u=n.charCodeAt(o);if((l=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=e)break;++o,r=r*e+l}return o===i||null!=t&&o-i!==t?null:r}function tt(e){var t=o,i=!1,r=48===n.charCodeAt(o);e||null!==et(10)||C(t,"Invalid number"),46===n.charCodeAt(o)&&(++o,et(10),i=!0);var a=n.charCodeAt(o);69!==a&&101!==a||(43!==(a=n.charCodeAt(++o))&&45!==a||++o,null===et(10)&&C(t,"Invalid number"),i=!0),Ue(n.charCodeAt(o))&&C(o,"Identifier directly after number");var s,l=n.slice(t,o);return i?s=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||x?C(t,"Invalid number"):s=parseInt(l,8):s=parseInt(l,10),$e(z,s)}function nt(e){var t=et(16,e);return null===t&&C(l,"Bad character escape sequence"),t}function it(){Me=!1;for(var e,t=!0,i=o;;){var r=n.charCodeAt(o);if(He(r))Me&&(e+=n.charAt(o)),++o;else{if(92!==r)break;Me||(e=n.slice(i,o)),Me=!0,117!=n.charCodeAt(++o)&&C(o,"Expecting Unicode escape sequence \\uXXXX"),++o;var a=nt(4),s=String.fromCharCode(a);s||C(o-1,"Invalid Unicode escape"),(t?Ue(a):He(a))||C(o-4,"Invalid Unicode escape"),e+=s}t=!1}return Me?e:n.slice(i,o)}function rt(){var e=it(),t=A;return!Me&&Ne(e)&&(t=ne[e]),$e(t,e)}function at(){_=l,v=u,y=c,Ke()}function st(e){if(x=e,o=l,t.locations)for(;o<m;)m=n.lastIndexOf("\n",m-2)+1,--p;Xe(),Ke()}function ot(){this.type=null,this.start=l,this.end=null}function lt(){this.start=h,this.end=null,null!==r&&(this.source=r)}function ut(){var e=new ot;return t.locations&&(e.loc=new lt),t.directSourceFile&&(e.sourceFile=t.directSourceFile),t.ranges&&(e.range=[l,0]),e}function ht(e){var n=new ot;return n.start=e.start,t.locations&&(n.loc=new lt,n.loc.start=e.loc.start),t.ranges&&(n.range=[e.range[0],0]),n}function ct(e,n){return e.type=n,e.end=v,t.locations&&(e.loc.end=y),t.ranges&&(e.range[1]=v),e}function dt(e){return t.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value}function ft(e){if(d===e)return at(),!0}function gt(){return!t.strictSemicolons&&(d===P||d===se||qe.test(n.slice(v,l)))}function pt(){ft(he)||gt()||_t()}function mt(e){d===e?at():_t()}function _t(){C(l,"Unexpected token")}function vt(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&C(e.start,"Assigning to rvalue"),x&&"Identifier"===e.type&&Le(e.name)&&C(e.start,"Assigning to "+e.name+" in strict mode")}var yt={kind:"loop"},wt={kind:"switch"};function bt(){(d===ge||d===me&&"/="==f)&&Ke(!0);var e=d,i=ut();switch(e){case M:case O:at();var r=e===M;ft(he)||gt()?i.label=null:d!==A?_t():(i.label=Lt(),pt());for(var a=0;a<b.length;++a){var s=b[a];if(null==i.label||s.name===i.label.name){if(null!=s.kind&&(r||"loop"===s.kind))break;if(i.label&&r)break}}return a===b.length&&C(i.start,"Unsyntactic "+e.keyword),ct(i,r?"BreakStatement":"ContinueStatement");case L:return at(),pt(),ct(i,"DebuggerStatement");case R:return at(),b.push(yt),i.body=bt(),b.pop(),mt(J),i.test=xt(),pt(),ct(i,"DoWhileStatement");case F:if(at(),b.push(yt),mt(oe),d===he)return Ct(i,null);if(d===$){var o=ut();return at(),zt(o,!0),ct(o,"VariableDeclaration"),1===o.declarations.length&&ft(te)?St(i,o):Ct(i,o)}return o=jt(!1,!0),ft(te)?(vt(o),St(i,o)):Ct(i,o);case q:return at(),Et(i,!0);case V:return at(),i.test=xt(),i.consequent=bt(),i.alternate=ft(B)?bt():null,ct(i,"IfStatement");case U:return w||t.allowReturnOutsideFunction||C(l,"'return' outside of function"),at(),ft(he)||gt()?i.argument=null:(i.argument=jt(),pt()),ct(i,"ReturnStatement");case H:at(),i.discriminant=xt(),i.cases=[],mt(ae),b.push(wt);for(var u,h;d!=se;)if(d===T||d===N){var c=d===T;u&&ct(u,"SwitchCase"),i.cases.push(u=ut()),u.consequent=[],at(),c?u.test=jt():(h&&C(_,"Multiple default clauses"),h=!0,u.test=null),mt(ce)}else u||_t(),u.consequent.push(bt());return u&&ct(u,"SwitchCase"),at(),b.pop(),ct(i,"SwitchStatement");case Z:return at(),qe.test(n.slice(v,l))&&C(v,"Illegal newline after throw"),i.argument=jt(),pt(),ct(i,"ThrowStatement");case W:if(at(),i.block=kt(),i.handler=null,d===E){var g=ut();at(),mt(oe),g.param=Lt(),x&&Le(g.param.name)&&C(g.param.start,"Binding "+g.param.name+" in strict mode"),mt(le),g.guard=null,g.body=kt(),i.handler=ct(g,"CatchClause")}return i.guardedHandlers=S,i.finalizer=ft(D)?kt():null,i.handler||i.finalizer||C(i.start,"Missing catch or finally clause"),ct(i,"TryStatement");case $:return at(),zt(i),pt(),ct(i,"VariableDeclaration");case J:return at(),i.test=xt(),b.push(yt),i.body=bt(),b.pop(),ct(i,"WhileStatement");case G:return x&&C(l,"'with' in strict mode"),at(),i.object=xt(),i.body=bt(),ct(i,"WithStatement");case ae:return kt();case he:return at(),ct(i,"EmptyStatement");default:var p=f,m=jt();if(e===A&&"Identifier"===m.type&&ft(ce)){for(a=0;a<b.length;++a)b[a].name===p&&C(m.start,"Label '"+p+"' is already declared");var y=d.isLoop?"loop":d===H?"switch":null;return b.push({name:p,kind:y}),i.body=bt(),b.pop(),i.label=m,ct(i,"LabeledStatement")}return i.expression=m,pt(),ct(i,"ExpressionStatement")}}function xt(){mt(oe);var e=jt();return mt(le),e}function kt(e){var t,n=ut(),i=!0,r=!1;for(n.body=[],mt(ae);!ft(se);){var a=bt();n.body.push(a),i&&e&&dt(a)&&(t=r,st(r=!0)),i=!1}return r&&!t&&st(!1),ct(n,"BlockStatement")}function Ct(e,t){return e.init=t,mt(he),e.test=d===he?null:jt(),mt(he),e.update=d===le?null:jt(),mt(le),e.body=bt(),b.pop(),ct(e,"ForStatement")}function St(e,t){return e.left=t,e.right=jt(),mt(le),e.body=bt(),b.pop(),ct(e,"ForInStatement")}function zt(e,t){for(e.declarations=[],e.kind="var";;){var n=ut();if(n.id=Lt(),x&&Le(n.id.name)&&C(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=ft(pe)?jt(!0,t):null,e.declarations.push(ct(n,"VariableDeclarator")),!ft(ue))break}return e}function jt(e,t){var n=It(t);if(!e&&d===ue){var i=ht(n);for(i.expressions=[n];ft(ue);)i.expressions.push(It(t));return ct(i,"SequenceExpression")}return n}function It(e){var t=function(e){var t=function(e){return function e(t,n,i){var r=d.binop;if(null!=r&&(!i||d!==te)&&r>n){var a=ht(t);a.left=t,a.operator=f;var s=d;return at(),a.right=e(At(),r,i),e(ct(a,s===ye||s===we?"LogicalExpression":"BinaryExpression"),n,i)}return t}(At(),-1,e)}(e);if(ft(fe)){var n=ht(t);return n.test=t,n.consequent=jt(!0),mt(ce),n.alternate=jt(!0,e),ct(n,"ConditionalExpression")}return t}(e);if(d.isAssign){var n=ht(t);return n.operator=f,n.left=t,at(),n.right=It(e),vt(t),ct(n,"AssignmentExpression")}return t}function At(){if(d.prefix){var e=ut(),t=d.isUpdate;return e.operator=f,e.prefix=!0,g=!0,at(),e.argument=At(),t?vt(e.argument):x&&"delete"===e.operator&&"Identifier"===e.argument.type&&C(e.start,"Deleting local variable in strict mode"),ct(e,t?"UpdateExpression":"UnaryExpression")}for(var n=Pt(Mt());d.postfix&&!gt();)(e=ht(n)).operator=f,e.prefix=!1,e.argument=n,vt(n),at(),n=ct(e,"UpdateExpression");return n}function Pt(e,t){var n;return ft(de)?((n=ht(e)).object=e,n.property=Lt(!0),n.computed=!1,Pt(ct(n,"MemberExpression"),t)):ft(ie)?((n=ht(e)).object=e,n.property=jt(),n.computed=!0,mt(re),Pt(ct(n,"MemberExpression"),t)):!t&&ft(oe)?((n=ht(e)).callee=e,n.arguments=Ot(le,!1),Pt(ct(n,"CallExpression"),t)):e}function Mt(){switch(d){case K:var e=ut();return at(),ct(e,"ThisExpression");case A:return Lt();case z:case I:case j:return(e=ut()).value=f,e.raw=n.slice(l,u),at(),ct(e,"Literal");case Y:case Q:case ee:return(e=ut()).value=d.atomValue,e.raw=d.keyword,at(),ct(e,"Literal");case oe:var i=h,r=l;at();var a=jt();return a.start=r,a.end=u,t.locations&&(a.loc.start=i,a.loc.end=c),t.ranges&&(a.range=[r,u]),mt(le),a;case ie:return e=ut(),at(),e.elements=Ot(re,!0,!0),ct(e,"ArrayExpression");case ae:return function(){var e=ut(),n=!0,i=!1;for(e.properties=[],at();!ft(se);){if(n)n=!1;else if(mt(ue),t.allowTrailingCommas&&ft(se))break;var r,a={key:Tt()},s=!1;if(ft(ce)?(a.value=jt(!0),r=a.kind="init"):t.ecmaVersion>=5&&"Identifier"===a.key.type&&("get"===a.key.name||"set"===a.key.name)?(s=i=!0,r=a.kind=a.key.name,a.key=Tt(),d!==oe&&_t(),a.value=Et(ut(),!1)):_t(),"Identifier"===a.key.type&&(x||i))for(var o=0;o<e.properties.length;++o){var l=e.properties[o];if(l.key.name===a.key.name){var u=r==l.kind||s&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);u&&!x&&"init"===r&&"init"===l.kind&&(u=!1),u&&C(a.key.start,"Redefinition of property")}}e.properties.push(a)}return ct(e,"ObjectExpression")}();case q:return e=ut(),at(),Et(e,!1);case X:return function(){var e=ut();return at(),e.callee=Pt(Mt(),!0),ft(oe)?e.arguments=Ot(le,!1):e.arguments=S,ct(e,"NewExpression")}();default:_t()}}function Tt(){return d===z||d===I?Mt():Lt(!0)}function Et(e,t){d===A?e.id=Lt():t?_t():e.id=null,e.params=[];var n=!0;for(mt(oe);!ft(le);)n?n=!1:mt(ue),e.params.push(Lt());var i=w,r=b;if(w=!0,b=[],e.body=kt(!0),w=i,b=r,x||e.body.body.length&&dt(e.body.body[0]))for(var a=e.id?-1:0;a<e.params.length;++a){var s=a<0?e.id:e.params[a];if((Oe(s.name)||Le(s.name))&&C(s.start,"Defining '"+s.name+"' in strict mode"),a>=0)for(var o=0;o<a;++o)s.name===e.params[o].name&&C(s.start,"Argument name clash in strict mode")}return ct(e,t?"FunctionDeclaration":"FunctionExpression")}function Ot(e,n,i){for(var r=[],a=!0;!ft(e);){if(a)a=!1;else if(mt(ue),n&&t.allowTrailingCommas&&ft(e))break;i&&d===ue?r.push(null):r.push(jt(!0))}return r}function Lt(e){var i=ut();return e&&"everywhere"==t.forbidReserved&&(e=!1),d===A?(!e&&(t.forbidReserved&&(3===t.ecmaVersion?Te:Ee)(f)||x&&Oe(f))&&-1==n.slice(l,u).indexOf("\\")&&C(l,"The keyword '"+f+"' is reserved"),i.name=f):e&&d.keyword?i.name=d.keyword:_t(),g=!1,at(),ct(i,"Identifier")}}(t)},function(e,t){},function(e,t,n){"use strict";n.r(t);var i=n(0);function r(e){return document.createTextNode(e)}function a(e,t,n={}){const i=document.createElement("select");return f(i,e,t,n),i}function s(e,t){const n=document.createElement("option");return f(n,e,t),n}function o(e,t,n={}){const i=document.createElement("div");return f(i,e,t,n),i}function l(e,t={}){const n=document.createElement("canvas");return f(n,e,[],t),n}function u(e,t,n={}){const i=document.createElement("button");return f(i,e,t,n),i.style.width="100%",i.style.height="100%",i.style.padding="0px",i}function h(e,t={}){const n=document.createElement("input");return n.setAttribute("type","checkbox"),f(n,e,[],t),n}function c(e,t={}){const n=document.createElement("input");return n.setAttribute("type","range"),f(n,e,[],t),n}function d(e,t={}){const n=document.createElement("input");return n.setAttribute("type","color"),f(n,e,[],t),n.style.width="100%",n.style.height="100%",n.style.padding="0px",n.style.border="none",n}function f(e,t,n,i={}){Object.entries(t).forEach(([t,n])=>{n&&e.setAttribute(t,n)}),Object.entries(i).forEach(([t,n])=>e.addEventListener(t,n));for(let t=0;t<n.length;t++)e.appendChild(n[t])}function g(e,t){t||(t=document);let n=t.querySelector(e);if(!n)throw"No element for query selector "+e;return n}const p=["aal","aam","aani","aaru","aba","abac","abas","abb","abba","abby","abe","abed","abel","abet","abey","abie","abir","able","ably","abo","abox","absi","abu","abut","aby","acca","ace","acer","ach","ache","achy","acid","acis","acle","acme","acne","acor","acre","act","acta","acts","actu","acyl","ada","adad","adai","adam","adar","adat","adaw","aday","add","adda","addu","addy","ade","adet","adib","adin","adit","admi","ado","adry","ady","adz","adze","aeon","aer","aero","aery","aes","afar","affa","affy","aft","aga","agag","agal","agao","agar","agau","agaz","age","aged","agee","agen","ager","agha","agib","agio","agla","ago","agog","agon","agra","agre","agua","ague","agy","aha","ahem","ahet","ahey","ahir","aho","ahom","ahoy","aht","ahu","ahum","aias","aid","aide","aiel","ail","aile","aim","aint","ainu","aion","air","aira","aire","airt","airy","ait","aix","ajar","ajog","aka","akal","akan","ake","akee","akey","akha","akia","akim","akin","akka","ako","akov","akra","aku","ala","alan","alar","alas","alb","alba","albe","albi","alca","alco","ale","alea","alec","alee","alef","alem","alen","alex","alf","alfa","alga","algy","alif","alin","alit","alix","alk","alky","all","alle","ally","alma","alme","alms","aln","alo","alod","aloe","alop","alow","alp","also","alt","alto","alum","alur","aly","alya","ama","amah","amar","amba","ambo","ame","amen","amex","ami","amia","amic","amid","amil","amin","amir","amla","amli","amma","ammi","ammo","ammu","amok","amor","amos","amoy","amra","amt","amy","amyl","ana","anal","anam","anan","anas","anat","anax","anay","anba","and","anda","ande","andi","andy","anes","anew","ango","ani","anil","anis","ankh","ann","anna","anne","anoa","anon","ansa","ansu","ant","anta","ante","anti","antu","anus","any","aoul","apa","apar","ape","aper","apex","apii","apio","apis","apod","apse","apt","apus","aqua","aquo","ara","arab","arad","arar","arba","arc","arca","arch","ardu","are","area","ared","argo","aria","arid","aril","ark","arm","arms","army","arn","arna","arne","arni","aro","arow","arry","arse","art","arty","aru","arui","arum","arx","ary","arya","aryl","asa","asak","asci","ase","asem","ash","asha","ashy","ask","askr","asok","asop","asor","asp","ass","asse","assi","ast","asta","ata","atap","ate","atef","aten","ates","ati","atik","atip","atis","atka","atle","atma","atmo","atom","atop","atry","atta","atwo","aube","auca","auge","augh","auh","auk","aula","auld","aulu","aum","aune","aunt","aura","aus","ausu","aute","auto","ava","aval","avar","ave","aver","aves","avid","avis","avo","avow","awa","awag","awan","awat","away","awd","awe","awee","awfu","awin","awl","awn","awny","awol","awry","axal","axe","axed","axel","axes","axil","axis","axle","axon","ayah","aye","ayin","ayu","azha","azo","azon","azox","baa","baal","baar","bab","baba","babe","babi","babs","babu","baby","bac","bach","back","bad","bade","bae","baff","baft","bag","baga","bago","bah","baho","baht","bail","bain","bais","bait","baka","bake","baku","bal","bala","bald","bale","bali","balk","ball","balm","balt","balu","bam","ban","bana","banc","band","bane","bang","bani","bank","bant","bap","bar","bara","barb","bard","bare","bari","bark","barm","barn","bart","baru","bas","base","bash","bask","bass","bast","bat","bate","bath","bats","batt","batz","baud","baul","baun","baw","bawd","bawl","bawn","bay","baya","baze","bea","bead","beak","beal","beam","bean","bear","beat","beau","beck","bed","bee","beef","beek","been","beer","bees","beet","beg","bego","behn","beid","beja","bel","bela","beld","bell","belt","bely","bema","ben","bena","bend","bene","beng","beni","benj","benn","beno","bent","benu","ber","bere","berg","beri","berm","bern","bert","bes","besa","bess","best","bet","beta","beth","bevy","bey","bhar","bhat","bhil","bhoy","bhut","bias","bib","bibb","bibi","bice","bick","bid","bide","bien","bier","biff","big","biga","bigg","bija","bike","bikh","bile","bilk","bill","bilo","bim","bin","bind","bine","bing","binh","bini","bink","bino","bint","biod","bion","bios","bird","biri","birk","birl","birn","birr","bis","bit","bite","biti","bito","bitt","biwa","bixa","biz","bizz","blab","blad","blae","blah","blan","blas","blat","blaw","blay","bleb","blee","bleo","blet","blip","blo","blob","bloc","blot","blow","blub","blue","blup","blur","boa","boar","boat","bob","boba","bobo","boce","bock","bod","bode","bodo","body","boer","bog","boga","bogo","bogy","boho","boid","boii","boil","bois","bojo","boke","bola","bold","bole","bolk","boll","bolo","bolt","bom","boma","bomb","bon","bond","bone","bong","boni","bonk","bony","boo","boob","bood","boof","book","bool","boom","boon","boor","boot","bop","bor","bora","bord","bore","borg","borh","born","boro","bort","bos","bosc","bose","bosh","bosk","bosn","boss","bot","bota","bote","both","bott","boud","bouk","boun","bout","bouw","bow","bowk","bowl","boxy","boy","boyd","boza","bozo","bra","brab","brad","brae","brag","bram","bran","brat","braw","bray","bred","bree","brei","bret","brew","brey","brig","brim","brin","brit","brob","brod","brog","broo","brot","brow","brut","bual","bub","buba","bube","bubo","buck","bud","buda","budh","buff","bufo","bug","bugi","buhl","buhr","bukh","bulb","bulk","bull","bult","bum","bump","bun","buna","bund","bung","bunk","bunt","buoy","bur","burd","bure","burg","buri","burl","burn","buro","burp","burr","burt","bury","bus","bush","busk","buss","bust","busy","but","bute","butt","buy","buzz","bye","byee","bygo","byon","byre","byth","caam","cab","caba","caca","cack","cad","cade","cadi","cafh","cag","cage","cagn","caid","cain","cake","caky","cal","calf","calk","call","calm","calp","calx","cam","camb","came","camp","can","cana","cand","cane","cank","cant","cany","cap","cape","caph","car","cara","card","care","cark","carl","caro","carp","carr","cart","cary","case","cash","cask","cass","cast","cat","cate","cauk","caul","caum","caup","cava","cave","cavy","caw","cawk","cay","caza","cede","cee","ceil","cell","celt","cent","cep","cepa","cepe","ceps","cere","cern","cero","cess","cest","cete","ceti","ceyx","cha","chaa","chab","chac","chad","chai","chal","cham","chao","chap","char","chat","chaw","chay","che","chee","chef","chen","chet","chew","chi","chia","chic","chid","chih","chil","chin","chip","chit","cho","chob","chol","chop","chou","chow","chub","chud","chug","chum","chun","chut","cid","cig","cine","cion","cipo","cise","cist","cit","cite","city","cive","cixo","clad","clag","clam","clan","clap","clat","claw","clay","cled","clee","clef","cleg","clem","clep","clew","clio","clip","clit","clod","clog","clop","clot","clow","cloy","club","clue","cly","coak","coal","coan","coat","coax","cob","coca","cock","coco","cod","coda","code","codo","coe","coed","coff","coft","cog","coho","coif","coil","coin","coir","coix","coke","coky","col","cola","cold","cole","coli","colk","coll","colp","colt","coly","coma","comb","come","con","cond","cone","conk","conn","cony","coo","coof","cook","cool","coom","coon","coop","coos","coot","cop","copa","cope","copr","copt","copy","cor","cora","cord","core","corf","cork","corm","corn","corp","cory","cos","cosh","coss","cost","cosy","cot","cote","coth","coto","coue","coul","coup","cove","cow","cowl","cowy","cox","coxa","coxy","coy","coyo","coz","coze","cozy","crab","crag","cram","cran","crap","craw","crax","crea","cree","crew","crex","crib","cric","crig","crin","cris","cro","croc","crom","crop","crow","croy","crum","crus","crux","cry","cub","cuba","cube","cubi","cuck","cud","cue","cuff","cuir","cuke","cull","culm","cult","cum","cump","cuna","cuon","cup","cur","curb","curd","cure","curl","curn","curr","curt","cush","cusk","cusp","cuss","cut","cute","cuvy","cuya","cwm","cyan","cyke","cyma","cyme","cyp","cyst","czar","dab","dabb","dace","dad","dada","dade","dado","dadu","dae","daer","daff","daft","dag","dago","dags","dah","dail","dain","dais","dak","dal","dale","dali","dalk","dalt","dam","dama","dame","damn","damp","dan","dana","dand","dane","dang","dani","dank","dao","dap","dar","dard","dare","darg","dari","dark","darn","darr","dart","das","dash","dasi","data","date","daub","daud","daur","daut","dauw","dave","davy","daw","dawn","day","days","daza","daze","dazy","dead","deaf","deal","dean","dear","deb","debi","debt","deck","dedo","dee","deed","deem","deep","deer","deft","defy","deg","degu","del","dele","delf","dell","deme","demi","demy","den","dene","dent","deny","depa","dere","derm","dern","desi","desk","dess","deul","dev","deva","dew","dewy","dey","dha","dhai","dhak","dhan","dhaw","dhow","dhu","dial","dian","diau","dib","dibs","dice","dich","dick","did","dido","die","dieb","diem","dier","diet","dig","digs","dika","dike","dill","dilo","dim","dime","din","dine","ding","dink","dint","diol","dion","dip","dird","dire","dirk","dirl","dirt","dis","disa","disc","dish","disk","diss","dit","dita","dite","div","diva","dive","dixy","doab","doat","dob","dobe","doby","doc","dock","dod","dodd","dode","dodo","doe","doeg","doer","does","doff","dog","doge","dogs","dogy","doit","doke","doko","dol","dola","dole","doli","doll","dolt","dom","dome","domn","domy","don","done","dong","donn","dont","doob","dook","dool","doom","doon","door","dop","dopa","dope","dor","dora","dori","dorm","dorn","dorp","dory","dos","dosa","dose","doss","dot","dote","doto","doty","douc","doug","doum","doup","dour","dout","dove","dow","dowd","dowf","dowl","down","dowp","doxa","doxy","doze","dozy","drab","drag","dram","drat","draw","dray","dree","dreg","drew","drib","drip","drop","drow","drub","drug","drum","dry","duad","dual","dub","dubb","dubs","duck","duco","duct","dud","dude","due","duel","duer","duet","duff","dug","duhr","duim","duit","duke","dull","dult","duly","dum","duma","dumb","dump","dun","dune","dung","dunk","duns","dunt","duny","duo","dup","dupe","dura","dure","durn","duro","dush","dusk","dust","duty","dux","dyad","dyak","dyas","dyce","dye","dyer","dyke","dyne","each","ean","ear","earl","earn","ease","east","easy","eat","eats","eave","ebb","eben","eboe","ebon","ecad","ecca","eche","echo","ecru","edda","eddo","eddy","edea","eden","edge","edgy","edh","edit","edna","edo","eel","eely","eer","efik","eft","egad","egba","egbo","egg","eggy","egma","ego","egol","eheu","ejam","ejoo","eke","eker","ekka","ekoi","elb","eld","elf","eli","elia","elk","ell","ella","elle","elm","elmy","elod","elon","els","elsa","else","elt","eme","emil","emim","emir","emit","emm","emma","empt","emu","emyd","emys","enam","end","enid","enif","enki","enol","enos","enow","ens","ense","envy","eoan","eon","epee","epha","epic","epos","eppy","era","eral","erd","ere","erg","eria","eric","erie","erik","erma","erne","eros","err","ers","erse","erth","eruc","eryx","esca","esne","esox","espy","ess","esth","eta","etch","etna","etta","etua","etui","etym","euge","eva","evan","eve","evea","even","ever","evil","evoe","ewe","ewer","ewry","exam","exes","exit","exon","eyah","eyas","eye","eyed","eyen","eyer","eyey","eyn","eyne","eyot","eyra","eyre","ezba","ezra","faba","face","fack","fact","facy","fad","fade","fady","fae","faff","fag","fage","fail","fain","fair","fake","faky","fall","falx","fam","fama","fame","fan","fana","fand","fang","fant","fany","faon","far","fare","farl","farm","faro","fash","fass","fast","fat","fate","faun","favn","fawn","fay","faze","feak","feal","fear","feat","feck","fed","fee","feed","feel","feer","fei","feif","feil","feis","fell","fels","felt","feme","fen","fend","fent","feod","ferk","fern","feru","fess","fest","fet","feu","feud","few","fey","fez","fiar","fiat","fib","fice","fico","fid","fide","fido","fie","fife","fifo","fig","fiji","fike","file","fill","film","filo","fils","fin","find","fine","fink","finn","fiot","fip","fir","fire","firk","firm","firn","fisc","fise","fish","fist","fit","five","fix","fizz","flag","flak","flam","flan","flap","flat","flaw","flax","flay","flea","fled","flee","flem","flet","flew","flex","fley","flip","flit","flix","flo","flob","floc","floe","flog","flop","flot","flow","flu","flub","flue","flux","fly","foal","foam","fob","foci","fod","foe","fog","fogo","fogy","foil","fold","fole","folk","fon","fono","fons","font","foo","food","fool","foot","fop","for","fora","forb","ford","fore","fork","form","fort","fosh","fot","fou","foud","foul","foun","four","fow","fowk","fowl","fox","foxy","foy","fozy","fra","frab","frae","fram","frap","frat","fray","fred","free","fret","frib","frig","frim","frit","friz","fro","froe","frog","from","frot","frow","fry","fub","fuci","fud","fuel","fuff","fugu","fuji","fulk","full","fum","fume","fumy","fun","fund","funk","funt","fur","furl","fury","fusc","fuse","fuss","fust","fut","fute","fuye","fuze","fuzz","fyke","fyrd","gab","gabe","gabi","gaby","gad","gade","gael","gaen","gaet","gaff","gag","gage","gaia","gail","gain","gair","gait","gaj","gal","gala","gale","gali","gall","galp","galt","gam","gamb","game","gamp","gamy","gan","gane","gang","gant","gaol","gaon","gap","gapa","gape","gapo","gapy","gar","gara","garb","gare","garn","garo","gary","gas","gash","gasp","gast","gat","gata","gate","gau","gaub","gaud","gaul","gaum","gaun","gaup","gaur","gaus","gaut","gave","gaw","gawk","gawm","gawn","gay","gaz","gaze","gazi","gazy","geal","gean","gear","geat","geck","ged","gee","geek","geet","geez","gegg","gein","gel","geld","gell","gelt","gem","gen","gena","gene","gens","gent","genu","geo","geon","ger","gerb","germ","gers","ges","gest","get","geta","geum","gey","gez","ghan","ghat","ghee","gheg","ghuz","gib","gibe","gid","gie","gied","gien","gif","gift","gig","gigi","gil","gila","gild","gill","gilo","gilt","gim","gimp","gin","ging","gink","gio","gip","gird","girl","girn","giro","girr","girt","gish","gist","git","gith","give","gizz","glad","glam","glar","glee","gleg","glen","glia","glib","glis","glom","glop","glor","glow","gloy","glub","glue","glug","glum","glut","gnar","gnat","gnaw","gnu","goa","goad","goaf","goal","goan","goat","gob","gobi","gobo","goby","god","gode","goel","goer","goes","goff","gog","gogo","goi","gol","gola","gold","golf","goli","goll","golo","goma","gon","gona","gond","gone","gong","gony","goo","good","goof","gook","gool","goon","goop","gor","gora","gorb","gore","gory","gos","gosh","got","gote","goth","goup","gout","gove","gowf","gowk","gowl","gown","goy","gra","grab","grad","gram","grat","gray","gree","greg","grew","grey","grid","grig","grim","grin","grip","gris","grit","grog","gros","grot","grow","grr","grub","grue","grum","grun","grus","guan","guao","guar","gud","gude","gue","gufa","guff","gugu","guha","guhr","guib","gul","gula","gule","gulf","gull","gulo","gulp","gum","gump","gun","guna","gunj","gunk","gunl","gunz","gup","gur","gurk","gurl","gurr","gurt","guru","gus","gush","guss","gust","gut","guti","gutt","guy","guz","guze","gwag","gwen","gyle","gym","gyn","gyne","gyp","gype","gyps","gyre","gyri","gyro","gyte","gyve","haab","haaf","habe","habu","hack","had","hade","hadj","haec","haem","haet","haff","haft","hag","hagi","hah","haik","hail","hain","hair","haje","hak","hake","hako","haku","hal","hala","hale","half","hall","halo","hals","halt","ham","hame","hami","han","hand","hank","hano","hans","hant","hao","hap","hapi","hapu","harb","hard","hare","hark","harl","harm","harn","harp","harr","hart","harv","hash","hask","hasp","hat","hate","hath","hati","hatt","hau","haul","have","haw","hawk","hawm","hay","haya","hayz","haze","hazy","head","heaf","heal","heap","hear","heat","hech","heck","heed","heel","heer","heft","hehe","hei","heii","hein","heir","hele","hell","helm","help","hem","heme","heml","hemp","hen","hend","hent","hep","her","herb","herd","here","herl","hern","hero","hers","hest","het","hevi","hew","hewn","hewt","hex","hexa","hey","hia","hic","hick","hide","hie","high","hike","hill","hilt","him","hima","himp","hin","hind","hing","hint","hip","hipe","hire","hiro","his","hish","hisn","hiss","hist","hit","hive","hizz","hler","hoar","hoax","hob","hobo","hock","hod","hoe","hoer","hog","hoga","hohe","hohn","hoi","hoin","hoit","hoju","hold","hole","holl","holm","holt","holy","home","homo","homy","hon","hone","hong","honk","hood","hoof","hook","hoon","hoop","hoot","hop","hope","hopi","hora","horn","hory","hose","host","hot","hoti","hour","hova","hove","how","howe","howk","howl","hox","hoy","hoya","hsi","hub","hubb","huck","hud","hue","hued","huer","huey","huff","hug","huge","hugh","hugo","huh","hui","huia","huk","huke","hula","hulk","hull","hulu","hum","huma","hume","hump","hun","hung","hunh","hunk","hunt","hup","hupa","hura","hure","hurf","hurl","hurr","hurt","huse","hush","husk","huso","huss","hut","huzz","hwa","hyke","hyla","hyle","hymn","hyne","hyp","hypo","iamb","ian","iao","iba","ibad","iban","ibex","ibid","ibis","ibo","ice","iced","ich","icho","ichu","icon","icy","ida","ide","idea","ides","idic","idle","idly","ido","idol","idyl","ife","iffy","ihi","iiwi","ijma","ijo","ikat","ike","ikey","ikra","ila","ilex","ilia","ilk","ilka","ill","illy","ilot","ilya","ima","imam","imbe","imer","imi","immi","imp","impi","impy","imu","inbe","inby","inca","inch","ind","inde","indy","inez","ing","inga","inia","ink","inks","inky","inly","inn","ino","inro","into","iodo","ion","ione","ioni","iota","iowa","ipid","ipil","ira","iran","iraq","ire","irid","iris","irk","irma","irok","iron","isba","isis","isle","ism","ismy","iso","ist","ita","itch","itea","item","iten","iter","itmo","ito","its","itys","itza","iva","ivan","ivin","ivy","iwa","iwis","ixia","ixil","iyo","izar","izle","izzy","jab","jack","jacu","jade","jady","jag","jaga","jail","jain","jake","jako","jam","jama","jamb","jami","jan","jane","jank","jann","jaob","jap","jape","jar","jara","jarg","jarl","jass","jat","jati","jato","jauk","jaun","jaup","java","jaw","jawy","jay","jazz","jean","jed","jeel","jeep","jeer","jef","jeff","jehu","jell","jem","jerk","jerl","jerm","jert","jess","jest","jesu","jet","jete","jew","jewy","jhow","jib","jibe","jibi","jiff","jig","jill","jilt","jim","jimp","jin","jina","jing","jink","jinn","jinx","jiri","jiti","jiva","jive","joan","job","jobo","joch","jock","jocu","jodo","joe","joel","joey","jog","john","join","joke","joky","joll","jolt","jon","jong","joni","joom","joon","jos","jose","josh","joss","jot","jota","joug","jouk","jova","jove","jow","jowl","joy","jozy","juan","juba","jube","juck","jud","jude","judo","judy","jug","juga","juha","juju","juke","jule","july","jump","jun","june","junk","juno","junt","jupe","jur","jura","jure","juri","jury","just","jut","jute","juza","jynx","kadu","kaf","kafa","kago","kagu","kaha","kahu","kai","kaid","kaik","kail","kaj","kaka","kaki","kala","kale","kali","kalo","kame","kan","kana","kang","kans","kapa","kapp","kari","karl","karo","kasa","kasm","kat","kate","kath","katy","kava","kavi","kaw","kay","kayo","kazi","kea","keb","keck","ked","kee","keek","keel","keen","keep","kees","keet","kef","keg","keid","keld","kele","kelk","kell","kelp","kelt","kemb","kemp","ken","kend","kenn","keno","kent","kep","kepi","kept","ker","kerf","kern","ket","keta","keto","ketu","keup","kex","kexy","key","kha","khan","khar","khat","khet","khir","khot","khu","kibe","kiby","kick","kids","kiel","kier","kiho","kike","kiki","kiku","kil","kill","kiln","kilo","kilp","kilt","kim","kin","kina","kind","king","kink","kino","kip","kipe","kiri","kirk","kirn","kish","kiss","kist","kit","kite","kith","kiva","kivu","kiwi","kiyi","klam","klan","klip","klom","klop","kmet","knab","knag","knap","knar","knee","knet","knew","knez","knit","knob","knop","knot","know","knub","knur","knut","koa","koae","kob","kobi","kobu","koch","koda","koel","koff","koft","kohl","koi","koil","koko","koku","kol","kola","koli","kolo","kome","komi","kon","kona","kop","koph","kopi","kor","kora","kore","kori","kory","kos","koso","kota","koto","kou","kozo","kra","krag","kral","kran","kras","kris","kroo","kru","kua","kuan","kuar","kuba","kudu","kuei","kuge","kui","kuki","kuku","kula","kuli","kulm","kung","kunk","kurd","kuri","kurt","kusa","kwan","kyah","kyar","kyat","kyl","kyle","kylo","kyte","kyu","lab","lac","lace","lack","lacy","lad","lade","lady","laet","lag","lai","laic","laid","lain","lair","lak","lake","laky","lall","lalo","lam","lama","lamb","lame","lamp","lan","lana","land","lane","lank","lant","lanx","lao","lap","lapp","lar","lard","lari","lark","lars","las","lasa","lash","lasi","lask","lass","last","lat","lata","late","lath","laud","laun","laur","lava","lave","law","lawk","lawn","lax","lay","laz","laze","lazy","lea","lead","leaf","leah","leak","leal","leam","lean","leap","lear","leat","lech","leck","led","leda","lede","lee","leed","leek","leep","leer","lees","leet","left","leg","lehi","lehr","lei","leif","lek","len","lena","lend","lene","leno","lens","lent","leo","leon","lepa","ler","lerp","les","less","lest","let","lete","leto","lett","leu","leud","leuk","lev","levi","levo","levy","lew","lewd","lex","ley","liar","lias","lich","lick","lid","lida","lide","lie","lied","lief","lien","lier","lieu","lif","life","lifo","lift","liin","lija","like","lila","lile","lill","lilt","lily","lim","lima","limb","lime","limn","limp","limu","limy","lin","lina","line","ling","link","linn","lino","lint","liny","lion","lip","lipa","lira","lire","lis","lisa","lise","lish","lisk","lisp","liss","list","lit","lite","lith","litz","liv","live","liz","liza","lleu","llew","llyn","loa","load","loaf","loam","loan","lob","lobe","lobo","loca","loch","loci","lock","loco","lod","lode","lof","loft","log","loge","logy","loin","loir","lois","loka","loke","lola","loll","lolo","loma","lone","long","lonk","loo","lood","loof","look","loom","loon","loop","loot","lop","lope","lora","lord","lore","lori","lorn","loro","lors","lory","lose","losh","loss","lost","lot","lota","lote","lots","lou","loud","louk","loup","lour","lout","love","low","lowa","lown","lowy","lox","loy","loyd","luba","lube","luc","luce","luck","lucy","ludo","lue","lues","luff","lug","luge","lui","luis","luke","lula","lull","lulu","lum","lump","luna","lune","lung","lunn","lunt","luo","lupe","lur","lura","lure","lurg","luri","lurk","lush","lusk","lust","lut","lute","lux","luxe","lwo","lyam","lyas","lye","lynn","lynx","lyon","lyra","lyre","lys","lyse","maam","mab","maba","mabi","mac","mace","mack","maco","mad","made","madi","mado","mae","mag","maga","mage","magh","magi","mah","maha","mahi","maia","maid","mail","maim","main","maja","majo","make","maki","mako","maku","mal","mala","male","mali","mall","malm","malo","malt","mam","mamo","man","mana","mand","mane","mang","mani","mank","mann","mano","mans","mant","manx","many","mao","map","mapo","mar","mara","marc","mare","mari","mark","marl","marm","maro","mars","mart","maru","mary","mas","masa","mash","mask","mass","mast","masu","mat","mate","math","mats","matt","maty","mau","maud","maul","maun","maux","maw","mawk","mawp","max","may","maya","mayo","maza","maze","mazy","mead","meak","meal","mean","meat","mede","meed","meek","meet","meg","mein","meio","mel","mela","meld","mele","mell","melt","mem","memo","men","mend","meng","ment","menu","meny","meo","mer","mere","merk","merl","mero","mes","mesa","mese","mesh","meso","mess","met","meta","mete","meum","mev","mew","mewl","mho","mian","miao","mias","mib","mica","mice","mick","mico","mid","mide","mids","miek","mien","miff","mig","mijl","mike","miki","mil","mila","mild","mile","milk","mill","milo","milt","mim","mima","mime","mimi","mimp","min","mina","mind","mine","ming","mink","mino","mint","minx","miny","mir","mira","mird","mire","mirk","miro","miry","mise","miss","mist","mite","mitt","mitu","mity","mix","mixe","mixy","moan","moat","mob","mock","mod","mode","moe","moed","moff","mog","mogo","moha","moho","mohr","moi","moil","moio","moit","mojo","moke","moki","moko","moky","mola","mold","mole","moll","molt","moly","mome","momo","mon","mona","mone","mong","monk","mono","mont","moo","mood","mool","moon","moop","moor","moot","mop","mope","moph","mor","mora","more","morg","morn","moro","mort","mose","moss","most","mot","mote","moth","mott","mou","moud","moul","moup","mout","move","mow","mown","mowt","moxa","moxo","moy","moyo","mrs","mru","much","muck","mud","mudd","muff","mug","muga","mugg","muid","muir","mule","mulk","mull","mult","mum","mump","mun","mund","mung","munj","munt","mura","mure","murk","mus","musa","muse","mush","musk","muss","must","muta","mute","muth","mutt","mux","muzo","muzz","mwa","mya","myal","myna","myra","myst","myth","myxa","myxo","naa","naam","nab","nabk","nabs","nabu","nace","nach","nae","nael","nag","naga","naid","naif","naig","naik","nail","naim","nain","naio","nair","nais","naja","nak","nake","nako","nam","nama","name","nan","nana","nane","nant","naos","nap","napa","nape","napu","nar","nard","nark","narr","nary","nash","nasi","nast","nat","nate","natr","natt","naut","nave","navy","naw","nawt","nay","naze","nazi","nea","neal","neap","neat","neb","neck","ned","nee","need","neem","neep","neer","neet","nef","nei","neif","neil","nejd","nell","nema","neo","neon","nep","nepa","neri","nese","nesh","ness","nest","net","nete","neth","neti","neve","nevo","new","news","newt","next","ngai","nhan","nias","nib","nibs","nice","nici","nick","nid","nide","nidi","nife","nig","nigh","nil","nile","nils","nim","nimb","nina","nine","ning","niog","nip","nipa","nit","nito","niue","nix","nizy","noa","noah","noam","nob","nobs","nock","nod","node","nodi","noel","nog","noil","noir","noll","nolo","noma","nome","non","nona","none","nook","noon","noop","nope","nor","nora","nori","norm","norn","nose","nosu","nosy","not","note","nou","noun","noup","nous","nova","novo","now","nowt","nowy","noxa","noy","nozi","nth","nub","nuba","nuda","nudd","nude","nuke","nul","null","numa","numb","nun","nupe","nut","nye","oaf","oak","oaky","oam","oar","oary","oast","oat","oath","oaty","oban","obe","obex","obey","obi","obit","oboe","obol","och","ocht","ock","oda","odal","odax","odd","odds","ode","odel","odic","odin","odor","ods","odso","odum","odyl","odz","oer","oes","ofer","off","ofo","oft","ogam","ogee","ogle","ogor","ogpu","ogre","ogum","ohia","ohio","ohm","oho","ohoy","oii","oil","oily","oime","oint","oka","okee","oket","oki","okia","okie","okra","olaf","olam","olax","old","ole","olea","oleg","oleo","olga","olid","olio","olla","olm","olof","olor","olpe","oman","omao","omar","omen","omer","omit","ona","onan","onca","once","ondy","one","oner","only","ons","onto","onus","onym","onyx","onza","oofy","ooid","oons","oont","oord","ooze","oozy","opah","opal","ope","open","opsy","opt","opus","ora","orad","oral","orb","orby","orc","orca","ordu","ore","orf","orgy","orle","orlo","orna","ort","ory","oryx","osc","ose","osse","otic","otis","oto","otto","otus","ouch","ouf","ough","our","ours","oust","out","ova","oval","oven","over","ovey","ovis","ovum","owd","owe","owen","ower","owk","owl","owly","own","owse","oxan","oxea","oxen","oxer","oxy","oxyl","oyer","ozan","paal","paar","paba","pac","paca","pace","pack","paco","pact","pad","paga","page","pah","paha","pahi","paho","paik","pail","pain","paip","pair","pais","pal","pala","pale","pali","pall","palm","palp","palt","paly","pam","pan","pand","pane","pang","pani","pank","pant","paon","pap","papa","pape","par","para","pard","pare","pari","park","parr","part","pash","pasi","pass","past","pat","pata","pate","path","pato","patu","paty","pau","paul","paup","paut","pave","pavo","pavy","paw","pawk","pawl","pawn","pax","pay","pea","peag","peai","peak","peal","pean","pear","peat","peba","pech","peck","ped","peda","pee","peed","peek","peel","peen","peep","peer","peg","pega","peho","pele","pelf","pell","pelt","pelu","pen","pend","penk","pent","peon","pep","pepo","per","peri","perk","perm","pern","pert","peru","pes","pesa","peso","pess","pest","pet","pete","peto","petr","peul","pew","pewy","pfui","phew","phi","phil","phit","phiz","pho","phoh","phon","phoo","phos","phot","phu","phut","pia","pial","pian","pic","pica","pice","pici","pick","pico","pict","pie","pied","pien","pier","piet","piff","pig","pik","pika","pike","piki","piky","pile","pili","pill","pilm","pily","pim","pima","pimp","pin","pina","pind","pine","ping","pink","pino","pint","piny","pip","pipa","pipe","pipi","pipy","pir","pirl","pirn","piro","pirr","pise","pish","pisk","piso","piss","pist","pit","pita","pith","pity","pix","pixy","pize","plak","plan","plap","plat","play","plea","pleb","pled","plew","plex","plim","plod","plop","plot","plow","ploy","plud","plug","plum","plup","plus","ply","poa","pob","pobs","pock","poco","pod","poe","poem","poet","pogo","pogy","poh","poha","poi","poil","poke","poky","pol","pole","polk","poll","polo","polt","poly","pom","pome","pomo","pomp","pon","pond","pone","pong","pont","pony","pooa","poof","pooh","pook","pool","poon","poop","poor","poot","pop","pope","pore","pork","porr","port","pory","pose","posh","poss","post","posy","pot","pote","pott","pouf","pour","pout","pow","pox","poxy","poy","prad","pram","prat","prau","pray","prep","prey","pria","prig","prim","pro","proa","prob","prod","prof","prog","proo","prop","prow","prue","pruh","prut","pry","psha","psi","pst","pua","puan","pub","puce","puck","pud","pudu","puff","pug","pugh","puja","puka","puke","puku","puky","pul","pule","puli","pulk","pull","pulp","pulu","puly","puma","pume","pump","pun","puna","pung","punk","puno","punt","puny","pup","pupa","pur","pure","purl","purr","puru","pus","push","puss","put","putt","puxy","puya","pya","pyal","pyic","pyin","pyke","pyla","pyr","pyre","pyro","pyx","qere","qeri","qoph","qua","quab","quad","quag","quan","quar","quat","quaw","quay","quei","quet","quey","quib","quid","quin","quip","quis","quit","quiz","qung","quo","quod","quop","quot","raad","rab","rabi","race","rach","rack","racy","rad","rada","rafe","raff","raft","rag","raga","rage","rah","raia","raid","raif","rail","rain","rais","raj","raja","rake","rakh","raki","raku","ralf","ram","rama","rame","rami","ramp","ran","rana","rand","rane","rang","rani","rank","rann","rant","rap","rape","rapt","rare","ras","rasa","rase","rash","rasp","rat","rata","rate","rath","rauk","raul","raun","rave","ravi","raw","rax","ray","raya","raze","razz","rea","read","reak","real","ream","reap","rear","reb","reck","rect","red","redd","rede","redo","ree","reed","reef","reek","reel","reem","reen","rees","reet","ref","reft","reg","reh","reid","reif","reim","rein","reis","reit","reki","rel","rely","remi","rend","renk","rent","renu","rep","repp","reps","resh","resp","rest","ret","reub","rev","reve","rex","rhe","rhea","rho","rhus","ria","rial","rib","ribe","ric","rice","rich","rick","rid","ride","rie","riem","rier","rife","riff","rifi","rift","rig","rik","rikk","rile","rill","rim","rima","rime","rimu","rimy","rind","rine","ring","rink","rio","riot","rip","ripa","ripe","rise","risk","risp","riss","rist","rit","rita","rite","riva","rive","rix","rixy","road","roam","roan","roar","rob","robe","roc","rock","rod","rodd","rode","roe","roed","roer","roey","rog","roi","roid","roil","roit","rok","roka","roke","roky","role","rolf","roll","rome","romp","ron","rond","rone","rong","rood","roof","rook","rool","room","roon","root","rope","ropp","ropy","rori","rory","rosa","rose","ross","rosy","rot","rota","rote","roto","roub","roud","roue","roun","roup","rout","rove","row","rowy","rox","roxy","roy","royt","rua","rub","rube","ruby","ruck","rud","rudd","rude","rudy","rue","ruen","ruer","ruff","rug","ruga","ruin","rukh","rule","rull","rum","rump","run","rune","rung","runt","rupa","ruru","rus","rusa","ruse","rush","rusk","russ","rust","rut","ruta","ruth","rux","ryal","rye","ryen","ryme","rynd","rynt","ryot","rype","saa","saad","saan","sab","saba","sabe","sac","sack","saco","sad","sade","sadh","sado","sadr","safe","safi","saft","sag","saga","sage","sago","sagy","sah","sahh","saho","sai","saic","said","sail","saim","sain","saip","sair","saj","sak","saka","sake","saki","sal","sale","salm","salp","salt","sam","same","samh","samp","san","sand","sane","sang","sank","sans","sant","sao","sap","sapa","sapo","sar","sara","sard","sare","sari","sark","sart","sasa","sash","sat","sate","sauf","saul","saum","saur","saut","save","saw","sawn","sawt","sax","saxe","say","saya","scab","scad","scam","scan","scap","scar","scat","scaw","scho","scob","scog","scot","scow","scry","scud","scug","scum","scun","scup","scur","scut","scye","scyt","sea","seah","seak","seal","seam","sean","sear","seat","seax","seba","sec","sech","seck","sect","see","seed","seek","seel","seem","seen","seep","seer","seg","sego","seid","seit","sele","self","sell","selt","seme","semi","sen","send","sent","seps","sept","ser","sera","serb","sere","serf","seri","sero","sert","sess","set","seta","seth","sett","sew","sewn","sex","sext","sexy","sey","sgad","sha","shab","shad","shag","shah","shai","sham","shan","shap","shat","shaw","shay","she","shea","shed","shee","shel","shen","sher","shi","shih","shik","shim","shin","ship","shiv","shlu","sho","shoa","shod","shoe","shog","shoo","shop","shoq","shor","shot","shou","show","shu","shug","shul","shun","shut","shy","sia","siak","sial","siam","sib","sic","sice","sick","sid","sida","side","sidi","sidy","sie","sier","sife","sift","sig","sigh","sign","sika","sike","sikh","sil","sile","silk","sill","silo","silt","sim","sima","sime","simp","sin","sina","sind","sine","sing","sinh","sink","siol","sion","sip","sipe","sir","sire","sis","sise","sish","sisi","siss","sist","sit","sita","site","sith","sium","siva","six","size","sizy","sizz","skag","skal","skat","skaw","skee","skef","skeg","skel","sken","skeo","skep","sker","skew","skey","ski","skid","skil","skim","skin","skip","skit","skiv","skoo","skua","skun","sky","skye","sla","slab","slad","slae","slag","slam","slap","slat","slav","slaw","slay","sleb","sled","slee","slew","sley","slid","slim","slip","slit","slob","slod","sloe","slog","slon","sloo","slop","slot","slow","slub","slud","slue","slug","slum","slur","slut","sly","sma","smee","smew","smit","smog","smug","smur","smut","snab","snag","snap","snaw","sneb","sned","snee","snew","snib","snig","snip","snob","snod","snog","snop","snot","snow","snub","snug","snum","snup","snur","sny","soak","soam","soap","soar","sob","soc","soce","sock","soco","sod","soda","sody","soe","sofa","soft","sog","soga","soh","soho","soil","soja","sok","soka","soke","sol","sola","sold","sole","soli","solo","soma","some","son","sond","song","sonk","sons","sook","sool","soon","soot","sop","sope","soph","sora","sorb","sore","sori","sorn","sort","sory","sosh","soso","soss","sot","sots","sou","soud","soul","soum","soup","sour","sov","sow","sowl","sown","sowt","soy","soya","spa","spad","spae","spak","span","spar","spat","spay","spec","sped","spet","spew","spex","spig","spin","spit","spiv","spor","spot","spry","spud","spug","spun","spur","sput","spy","sri","ssi","ssu","stab","stag","stam","stan","stap","star","staw","stay","steg","stem","sten","step","stet","stew","stey","stib","stid","stim","stir","stoa","stob","stod","stof","stog","stop","stot","stow","stra","stre","stu","stub","stud","stue","stug","stum","stun","stut","sty","styx","sub","such","suck","sud","sudd","suds","sue","suer","suet","suff","sufi","sugh","sugi","sui","suid","suit","suji","suk","suku","sula","suld","sulk","sull","sulu","sum","sumo","sump","sun","sune","sung","sunk","sunn","sunt","sup","supa","supe","sur","sura","surd","sure","surf","sus","susi","susu","suto","sutu","suu","suum","suwe","suz","suzy","svan","swa","swab","swad","swag","swam","swan","swap","swat","sway","swep","swig","swim","swiz","swob","swom","swot","swow","swum","syce","syd","sye","syed","sync","syne","syre","syrt","syun","taa","taal","taar","tab","tabu","tach","tack","tact","tad","tade","tae","tael","taen","taft","tag","taha","tahr","tai","tail","tain","tait","taj","take","takt","taku","taky","tal","tala","talc","tald","tale","tali","talk","tall","tam","tama","tame","tamp","tan","tana","tane","tang","tanh","tank","tano","tao","taos","tap","tapa","tape","taps","tapu","tar","tara","tare","tari","tarn","taro","tarp","tarr","tars","tart","tash","task","tass","tasu","tat","tate","tath","tatu","tau","taum","taun","taur","taut","tav","tave","tavy","taw","tawa","tawn","taws","tax","taxi","taxy","tay","tch","tche","tchi","tchu","tck","tea","tead","teak","teal","team","tean","teap","tear","teat","tebu","tec","teca","tech","teck","teco","ted","teda","tee","teel","teem","teen","teer","teet","teff","teg","teil","teju","tele","teli","tell","telt","tema","temp","ten","tend","teng","tent","tera","teri","term","tern","terp","tess","test","tete","teth","teuk","tew","tewa","text","tez","tha","thad","thai","than","thar","that","thaw","the","thea","theb","thee","them","then","theo","thew","they","thig","thin","thio","thir","this","tho","thob","thof","thon","thoo","thos","thou","thow","thro","thud","thug","thus","thy","tiam","tiao","tiar","tib","tic","tice","tick","tid","tide","tidy","tie","tied","tien","tier","tiff","tift","tig","tige","tiki","til","tile","till","tilt","tim","time","timo","tin","tina","tind","tine","ting","tink","tino","tint","tiny","tiou","tip","tipe","tire","tirl","tirr","tit","tite","titi","tivy","tiza","tji","toa","toad","toag","toat","toba","tobe","toby","tock","toco","tod","toda","todd","tode","tody","toe","toed","toff","toft","tofu","tog","toga","togs","togt","toho","toi","toil","toit","toke","toko","tol","told","tole","toll","tolt","tolu","tom","toma","tomb","tome","ton","tone","tong","tonk","tony","too","took","tool","toom","toon","toop","toot","top","tope","toph","topi","topo","tops","tor","tora","torc","tore","torn","toro","tort","toru","tory","tosh","tosk","toss","tost","tosy","tot","tote","toto","toty","tou","toug","toup","tour","tout","tow","towd","town","towy","tox","toxa","toy","toze","tra","trag","trah","tram","tran","trap","tray","tree","tref","trek","tret","trey","tri","trig","trim","trin","trio","trip","trix","trod","trog","tron","trot","trow","troy","trub","true","trug","trun","try","tryp","tryt","tsar","tshi","tsia","tst","tsun","tua","tuan","tub","tuba","tube","tuck","tue","tufa","tuff","tuft","tug","tui","tuik","tuke","tula","tule","tulu","tum","tume","tump","tun","tuna","tund","tune","tung","tunk","tuno","tunu","tuny","tup","tupi","tur","turb","turd","turf","turi","turk","turm","turn","turp","turr","tush","tusk","tut","tute","tuth","tuts","tutu","tuwi","tux","tuza","twa","twae","twal","twas","twat","tway","twee","twi","twig","twin","twit","two","tye","tyee","tyg","tyke","tymp","tynd","type","typo","typp","typy","tyre","tyro","tyrr","tyt","tyto","uang","ubi","ubii","uca","ucal","udal","udi","udic","udo","uds","ugh","ugly","uily","uji","uke","ula","ule","ulex","ull","ulla","ulmo","ulna","ulu","ulua","ulva","umbo","ume","ump","umph","umu","una","unal","unau","unbe","unca","unci","unco","unde","undo","undy","unie","unio","unit","unto","untz","unze","upas","updo","upgo","upla","upo","upon","ura","ural","uran","urao","urd","urde","urdu","ure","urea","urf","urge","uri","uria","uric","urn","urna","uro","urs","ursa","uru","urus","urva","usar","use","used","usee","user","ush","ust","usun","uta","utah","utai","utas","utch","ute","utu","utum","uva","uval","uvea","uvic","uvid","uzan","vade","vady","vag","vage","vai","vail","vain","vair","val","vale","vali","vall","vamp","van","vane","vang","vara","vare","vari","vary","vas","vasa","vase","vast","vasu","vat","vau","vayu","veal","veda","vee","veen","veep","veer","vega","vei","veil","vein","vela","vell","velo","vend","vent","veps","vera","verb","verd","veri","vern","vert","very","vest","vet","veta","veto","vex","vext","via","vial","vic","vice","vick","vie","vier","view","viga","vila","vile","vili","vill","vim","vina","vine","vino","vint","viny","viol","vip","vira","vire","virl","vis","visa","vise","vita","viti","viva","vive","vlei","voar","vod","voe","voet","vog","void","vol","vole","volt","vota","vote","vow","vug","vuln","vum","waac","waag","waar","wab","wabe","wabi","wac","wace","wack","waco","wad","wade","wadi","wae","waeg","waer","waf","wafd","waff","waft","wag","wage","wah","waif","waik","wail","wain","wait","waka","wake","wakf","waky","wale","wali","walk","wall","walt","wame","wamp","wan","wand","wane","wang","want","wany","wap","wapp","war","ward","ware","warf","wark","warl","warm","warn","warp","wart","wary","was","wase","wash","wasp","wast","wat","wath","watt","wauf","waul","waup","waur","wave","wavy","waw","wawa","wax","waxy","way","ways","wea","weak","weal","weam","wean","wear","web","wed","wede","wee","weed","week","weel","ween","weep","weet","weft","wega","wei","weir","weka","weki","weld","welf","welk","well","wels","welt","wem","wen","wend","wene","went","wept","wer","were","werf","weri","wert","wes","wese","west","wet","weta","weve","wey","wezn","wha","wham","whan","whap","whar","what","whau","whee","when","whet","whew","whey","whid","whig","whim","whin","whip","whir","whit","whiz","who","whoa","whom","whoo","whop","whud","whun","whup","whuz","why","whyo","wice","wick","wid","wide","widu","wife","wig","wild","wile","wilk","will","wilt","wily","wim","wime","win","wind","wine","wing","wink","wint","winy","wipe","wips","wir","wird","wire","wirl","wirr","wiry","wis","wise","wish","wisp","wiss","wist","wit","wite","with","wive","wiz","woad","woak","woan","wob","wod","wode","woe","woft","wog","woke","wold","wolf","womb","won","wone","wong","wont","woo","wood","woof","wool","woom","woon","wop","wops","word","wore","work","worm","worn","wort","wot","wote","wots","wouf","wove","wow","wowt","woy","wraf","wran","wrap","wraw","wren","wrig","writ","wro","wrox","wry","wud","wudu","wugg","wulk","wull","wun","wup","wur","wush","wusp","wuss","wust","wut","wuzu","wyde","wye","wyke","wyle","wyn","wynd","wyne","wynn","wype","wyss","wyve","xema","xina","xipe","xmas","xosa","xyla","xyst","yaba","yabu","yad","yade","yaff","yagi","yah","yair","yaje","yak","yaka","yalb","yale","yali","yam","yamp","yan","yana","yang","yank","yao","yap","yapa","yapp","yar","yarb","yard","yare","yark","yarl","yarm","yarn","yarr","yaru","yas","yat","yate","yati","yaud","yava","yaw","yawl","yawn","yawp","yaws","yawy","yaya","ycie","yday","yea","yeah","yean","year","yeat","yed","yede","yee","yeel","yees","yegg","yeld","yelk","yell","yelm","yelp","yelt","yen","yeni","yeo","yep","yer","yerb","yerd","yere","yerk","yern","yes","yese","yeso","yest","yet","yeta","yeth","yeuk","yew","yex","yez","yid","yigh","yill","yilt","yin","yip","yird","yirk","yirm","yirn","yirr","yis","yite","yobi","yock","yodh","yoe","yoga","yogh","yogi","yoi","yok","yoke","yoky","yolk","yom","yon","yond","yont","yook","yoop","yor","yore","york","yot","yote","you","youd","youl","youp","your","yow","yowl","yowt","yox","yoy","yuan","yuca","yuck","yuft","yuga","yuh","yuit","yuki","yule","yuma","yun","yurt","yus","yutu","zac","zach","zad","zag","zain","zak","zan","zant","zany","zar","zarf","zarp","zat","zati","zax","zea","zeal","zebu","zed","zee","zeed","zein","zeke","zel","zemi","zen","zend","zenu","zep","zer","zero","zest","zeta","zeus","zig","zimb","zinc","zing","zink","zion","zip","zipa","zips","zira","zizz","zoa","zobo","zoea","zogo","zoic","zoid","zoll","zone","zoo","zoom","zoon","zulu","zuni","zuza","zyga","zyme"];var m="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),_=new Uint8Array(16);function v(){if(!m)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(_)}for(var y=[],w=0;w<256;++w)y[w]=(w+256).toString(16).substr(1);var b=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||v)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var a=0;a<16;++a)t[i+a]=r[a];return t||function(e,t){var n=t||0,i=y;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}(r)};let x=new Map;function k(e){if(!e)return;const t=e.getAttribute("data-paneer-id");return t?x.get(t):void 0}class C{constructor(e){this._type="DOM",this._element=document.createElement("div"),this._id=b(),this._element.setAttribute("data-paneer-id",this._id),x.set(this._id,this),this._sizing=e}get element(){return this._element}get parent(){return this._element.parentElement?k(this._element.parentElement):void 0}get sizing(){return this._sizing}set sizing(e){this._sizing=e,window.requestAnimationFrame(()=>{var e;return null===(e=this.parent)||void 0===e?void 0:e.resize()})}delete(){const e=this.parent;e&&e.remove(this),x.delete(this._id)}resize(){}}class S extends C{constructor(e,t="1fr",n=!0,i){super(t),this._type="Node",this._direction=e,this._resizable=n,i&&this.appendAll(i)}get children(){const e=[];for(let t=0;t<this.element.children.length;t++){const n=this.element.children[t].getAttribute("data-paneer-id");if(n){const t=x.get(n);t&&e.push(t)}}return e}get direction(){return this._direction}set direction(e){this._direction=e,this.resize()}append(e){this.appendAll([e])}appendAll(e){if(this._resizable)for(let t=1;t<e.length;t+=2)e.splice(t,0,new j);e.forEach(e=>{this.element.appendChild(e.element)}),this.resize()}remove(e){this.element.removeChild(e.element),this.resize()}resize(){this.element.style.display="grid",this.element.style.height="100%";const e=this.children.map((e,t)=>`[line${t}] ${e.sizing}`).concat([`[line${this.children.length}]`]).join(" ");"Horizontal"==this.direction?(this.element.style.gridTemplateColumns=e,this.element.style.gridTemplateRows="[start] 100% [end]"):(this.element.style.gridTemplateRows=e,this.element.style.gridTemplateColumns="[start] 100% [end]"),this.children.forEach((e,t)=>{"Horizontal"==this.direction?(e.element.style.gridColumnStart=`line${t}`,e.element.style.gridColumnEnd=`line${t+1}`,e.element.style.gridRowStart="start",e.element.style.gridRowEnd="end"):(e.element.style.gridRowStart=`line${t}`,e.element.style.gridRowEnd=`line${t+1}`,e.element.style.gridColumnStart="start",e.element.style.gridColumnEnd="end")}),this.children.forEach(e=>{e.resize()})}}class z extends C{constructor(e,t="1fr"){super(t),this._type="Leaf",this.pane=e,this.element.appendChild(e.element)}resize(){this.element.style.height="100%",this.element.style.overflow="hidden",this.element.style.border="2px inset black",this.pane.resize&&this.pane.resize(this)}}class j extends z{constructor(){super({element:document.createElement("div")},"4px"),this._type="Handle",this.mouseover=!1,this.dragState={state:"null"},this.element.addEventListener("mouseenter",()=>{this.mouseover=!0,this.setStyles()}),this.element.addEventListener("mouseleave",()=>{this.mouseover=!1,this.setStyles()}),this.element.addEventListener("mousedown",e=>{var t;null===(t=this.parent)||void 0===t||t.children.forEach(e=>{var t;const n=e.element.getBoundingClientRect(),i="Horizontal"==(null===(t=this.parent)||void 0===t?void 0:t.direction)?n.width:n.height;"Handle"!=e._type&&(e.sizing=`${i}fr`)}),this.dragState={state:"dragging",startPoint:new i.Point(e.screenX,e.screenY),lastPoint:new i.Point(e.screenX,e.screenY)}}),this.element.addEventListener("mousemove",e=>{var t;if("null"==this.dragState.state)return;const n=k(this.element.previousElementSibling),r=k(this.element.nextElementSibling);if(!n||!r)return;const a=new i.Point(e.screenX,e.screenY),s=a.subtract(this.dragState.lastPoint),o=n.element.getBoundingClientRect(),l=r.element.getBoundingClientRect();if("Horizontal"==(null===(t=this.parent)||void 0===t?void 0:t.direction)){const e=o.width+s.x,t=l.width-s.x;n.sizing=`${e}fr`,r.sizing=`${t}fr`}else{const e=o.height+s.y,t=l.height-s.y;n.sizing=`${e}fr`,r.sizing=`${t}fr`}this.dragState=Object.assign(Object.assign({},this.dragState),{lastPoint:a})}),this.element.addEventListener("mouseup",()=>{this.dragState={state:"null"}})}setStyles(){var e;this.element.style.height="100%",this.element.style.overflow="hidden",this.mouseover?(this.element.style.border="2px solid #0099ff","Horizontal"==(null===(e=this.parent)||void 0===e?void 0:e.direction)?this.element.style.cursor="col-resize":this.element.style.cursor="row-resize"):this.element.style.border="2px inset black"}}const I=["red","green","blue","pink","yellowgreen","cyan"];class A extends S{constructor(){super("Vertical","1fr",!1),this.layersView=new S("Vertical","10fr",!1),this.appendAll([new S("Horizontal","1fr",!1,[new z({element:u({},[r("add")],{click:e=>this.addLayer()})}),new z({element:u({},[r("back")],{click:e=>this.moveBack()})}),new z({element:u({},[r("forward")],{click:e=>this.moveForward()})})]),this.layersView]),this.refreshLayers()}refreshLayers(){this.layersView.children.forEach(e=>e.delete());const e=i.project;for(let t=0;t<e.layers.length;t++)this.layersView.append(this.viewItem(e.layers[t],0))}viewItem(e,t){if(e.children){const n=new S("Vertical","min-content",!1,[this.label(e,t)]);return n.appendAll(e.children.map(e=>this.viewItem(e,t+1))),n}return this.label(e,t)}label(e,t){e.name||(e.name=e.className+" "+p[Math.floor(Math.random()*p.length)]);const n=I[t%I.length],a=e.id==e.project.activeLayer.id||"Layer"!=e.className&&e.selected?"bold":"regular",s=o({},[r(e.name)],{click:t=>{"Layer"==e.className?(e.activate(),this.refreshLayers()):e.selected&&t.shiftKey?e.selected=!1:(t.shiftKey||i.project.deselectAll(),e.selected=!0)}});return s.style.backgroundColor=n,s.style.fontWeight=a,s.style.cursor="default",s.style.userSelect="none",new S("Horizontal","min-content",!1,[new z({element:o({},[])},`${8*t}px`),new z({element:s},"auto")])}moveForward(){if(0==i.project.selectedItems.length){const e=i.project.activeLayer,t=Math.min(i.project.activeLayer.index+1,i.project.layers.length);return i.project.insertLayer(t,i.project.activeLayer),void e.activate()}i.project.selectedItems.forEach(e=>{const t=e.parent.children.indexOf(e);t<e.parent.children.length-1&&e.parent.insertChild(t+1,e)})}moveBack(){if(0==i.project.selectedItems.length){const e=i.project.activeLayer,t=Math.max(i.project.activeLayer.index-1,0);return i.project.insertLayer(t,i.project.activeLayer),void e.activate()}i.project.selectedItems.forEach(e=>{const t=e.parent.children.indexOf(e);t>0&&e.parent.insertChild(t-1,e)})}addLayer(){new i.Layer,this.refreshLayers()}}function P(e){const t=new i.Tool;let n;return t.name="select",t.onMouseDown=function(e){var t=i.project.hitTest(e.point,{tolerance:5,fill:!0,stroke:!0});t?(e.modifiers.shift?t.item.selected?t.item.selected=!1:t.item.selected=!0:(t.item.selected||i.project.deselectAll(),t.item.selected=!0),e.modifiers.alt&&i.project.selectedItems.forEach(e=>{e.clone().selected=!1})):(e.modifiers.shift||i.project.deselectAll(),n=new i.Shape.Rectangle(e.point,new i.Size(0,0)),n.removeOnUp(),n.strokeColor=new i.Color("red"),n.strokeWidth=1,n.fillColor=null)},t.onMouseDrag=function(e){n?(n.size=new i.Size(e.downPoint.subtract(e.point)),n.position=e.downPoint.subtract(e.downPoint.subtract(e.point).divide(2))):i.project.selectedItems.forEach(t=>{t.translate(e.delta)})},t.onMouseUp=function(t){n?(i.project.activeLayer.getItems({inside:n.bounds}).forEach(e=>e.selected=!0),n=void 0):i.project.selectedItems.length>0&&t.downPoint.getDistance(t.point)&&e.commit()},t}function M(e){const t=new i.Tool;let n,r,a;t.name="point";let s=0;return t.onMouseDown=function(e){s+=1;let t=i.project.hitTest(e.point,{tolerance:5,segments:!0,handles:!0,match:e=>"segment"==e.type||e.segment.selected});if(t&&("handle-in"==t.type||"handle-out"==t.type||"segment"==t.type))return r=t.type,a=t.segment,void(a.selected=!0);t=i.project.hitTest(e.point,{tolerance:5,fill:!0,stroke:!0}),t?e.modifiers.shift?t.item.selected?t.item.selected=!1:t.item.selected=!0:(t.item.selected||i.project.deselectAll(),t.item.selected=!0):(e.modifiers.shift||i.project.deselectAll(),n=new i.Shape.Rectangle(e.point,new i.Size(0,0)),n.removeOnUp(),n.strokeColor=new i.Color("red"))},t.onMouseDrag=function(e){if(n)n.size=new i.Size(e.downPoint.subtract(e.point)),n.position=e.downPoint.subtract(e.downPoint.subtract(e.point).divide(2));else if(a&&r)if(s=0,"handle-in"==r){const t=a.handleIn.length,n=a.handleIn.angle;a.handleIn=a.handleIn.add(e.delta);const i=a.handleIn.length,r=a.handleIn.angle;a.handleOut.length*=i/t,a.handleOut.angle+=r-n}else if("handle-out"==r){const t=a.handleOut.length,n=a.handleOut.angle;a.handleOut=a.handleOut.add(e.delta);const i=a.handleOut.length,r=a.handleOut.angle;a.handleIn.length*=i/t,a.handleIn.angle+=r-n}else a.point=a.point.add(e.delta)},t.onMouseUp=function(t){n?(i.project.activeLayer.getItems({inside:n.bounds}).forEach(e=>e.selected=!0),n=void 0):a&&r&&(2==s&&("segment"==r?a.remove():"handle-in"==r?a.handleIn=new i.Point(0,0):a.handleOut=new i.Point(0,0),s=0),a=void 0,r=void 0,e.commit())},t.onMouseMove=function(){s=0},t}function T(e){const t=new i.Tool;let n,r;return t.name="pen",t.minDistance=1,t.onMouseDown=function(e){n?n.lastSegment.point.isClose(e.point,6)?n=void 0:n.firstSegment.point.isClose(e.point,6)?(n.closePath(),r=n.firstSegment,n=void 0):(n.add(e.point),r=n.lastSegment):(i.project.deselectAll(),n=new i.Path([e.downPoint]),r=n.firstSegment,n.selected=!0)},t.onMouseDrag=function(e){r&&(r.selected=!0,r.handleIn=e.downPoint.subtract(e.point),r.handleOut=r.handleIn.multiply(-1))},t.onMouseUp=function(t){e.commit()},t}function E(e){const t=new i.Tool;let n;return t.name="freehand",t.minDistance=1,t.onMouseDown=function(e){i.project.deselectAll(),n=new i.Path([e.downPoint]),n.selected=!0},t.onMouseDrag=function(e){n&&(n.add(e.point),e.modifiers.shift?n.closed=!0:(n.closed=!1,n.fillColor=null))},t.onMouseUp=function(t){n&&(n.simplify(),n=void 0,e.commit())},t}function O(e){const t=new i.Tool;let n;return t.name="elipse",t.onMouseDown=function(e){i.project.deselectAll()},t.onMouseDrag=function(e){n&&n.remove(),n=e.modifiers.shift?new i.Path.Circle({center:e.downPoint,radius:e.downPoint.getDistance(e.point)}):new i.Path.Ellipse({center:e.downPoint,radius:e.downPoint.subtract(e.point)}),n.style=i.project.currentStyle},t.onMouseUp=function(t){n&&(n.selected=!0),n=void 0,e.commit()},t}function L(e){const t=new i.Tool;let n;return t.name="rectangle",t.onMouseDown=function(e){i.project.deselectAll()},t.onMouseDrag=function(e){if(n&&n.remove(),e.modifiers.shift){let r=e.downPoint.getDistance(e.point)*Math.sqrt(2)/2;var t=e.point.subtract(e.downPoint).normalize().round();0==Math.abs(t.x)&&(t.x=1),0==Math.abs(t.y)&&(t.y=1),t=t.multiply(r).add(e.downPoint),n=new i.Path.Rectangle({from:e.downPoint,to:t})}else n=new i.Path.Rectangle(e.downPoint,e.point)},t.onMouseUp=function(t){n&&(n.selected=!0),n=void 0,e.commit()},t}class N{constructor(e,t){this.element=u({},[r(t.name)],{click:()=>{t.activate(),e.refresh()}}),this.tool=t}refresh(){i.tool==this.tool?(this.element.style.fontWeight="bold",this.element.style.backgroundColor="#AAAAAA"):(this.element.style.fontWeight="",this.element.style.backgroundColor="")}}class R extends S{constructor(e,t){super("Vertical","1fr",!1),this.tools=[new N(this,P(e)),new N(this,M(e)),new N(this,T(e)),new N(this,E(e)),new N(this,O(e)),new N(this,L(e))],this.tools.forEach(e=>{this.append(new z(e,"1fr"))}),this.tools[0].tool.activate(),this.refresh()}refresh(){this.tools.forEach(e=>e.refresh())}}class B extends S{constructor(e){super("Vertical","1fr",!1),this.appendAll([new z({element:c({value:"1",min:"0",max:"50",step:".01"},{input:e=>{i.project.currentStyle.strokeWidth=e.target.value,i.project.selectedItems.forEach(e=>{e.strokeWidth=i.project.currentStyle.strokeWidth}),i.project.view.requestUpdate()},change:t=>e.commit()}),resize:e=>{e.pane.element.style.width="100%",e.pane.element.style.height="100%",e.pane.element.style.margin="0px",e.pane.element.style.padding="0px"}},"1fr"),new S("Horizontal","1fr",!1,[new z({element:d({value:"#000000"},{input:e=>{i.project.currentStyle.strokeColor=e.target.value,i.project.selectedItems.forEach(e=>{e.strokeColor=i.project.currentStyle.strokeColor}),i.project.view.requestUpdate()},change:t=>e.commit()})}),new z({element:d({value:"#FFFFFF"},{input:e=>{i.project.currentStyle.fillColor=e.target.value,i.project.selectedItems.forEach(e=>{e.fillColor=i.project.currentStyle.fillColor}),i.project.view.requestUpdate()},change:t=>e.commit()})})]),new z({element:o({},[])},"3fr")])}}class D{constructor(e){e.addEventListener("keydown",this.keydown.bind(this)),e.addEventListener("keyup",this.keyup.bind(this)),this.pressedKeys=new Set,this.downShortcuts={},this.upShortcuts={}}addShortcut(e,t,n="keydown"){const i=new Set(e.split("+")),r={fn:t,keys:i},a="keydown"==n?this.downShortcuts:this.upShortcuts;i.forEach(e=>{a[e]||(a[e]=[]),a[e].push(r)})}removeShortcut(e,t,n="keydown"){const i=new Set(e.split("+")),r={fn:t,keys:i},a="keydown"==n?this.downShortcuts:this.upShortcuts;i.forEach(e=>{a[e]&&(a[e]=a[e].filter(e=>r!=e))})}keydown(e){const t=e.key.toLowerCase();this.pressedKeys.add(t);const n=this.downShortcuts[t];if(n)for(let t=n.length-1;t>=0;t--){let i=n[t];if(new Set([...i.keys].filter(e=>this.pressedKeys.has(e))).size==i.keys.size){i.fn(e);break}}}keyup(e){const t=e.key.toLowerCase(),n=this.upShortcuts[t];if(n)for(let t=n.length-1;t>=0;t++){const i=n[t];if(new Set([...i.keys].filter(e=>this.pressedKeys.has(e))).size==i.keys.size){i.fn(e);break}}this.pressedKeys.delete(t)}}class F{constructor(e){this.project=e,this.history=[],this.present=0}commit(){this.history=[...this.history.slice(0,this.present+1)],this.history.push(this.project.exportJSON({asString:!0})),this.present=this.history.length-1}undo(){this.present<0||(this.present=this.present-1,this.project.deselectAll(),this.project.clear(),this.project.importJSON(this.history[this.present]),this.reselect())}redo(){this.present>=this.history.length-1||(this.present=this.present+1,this.project.deselectAll(),this.project.clear(),this.project.importJSON(this.history[this.present]),this.reselect())}reselect(){const e=[...this.project.selectedItems];e.filter(e=>"Layer"==e.className).forEach(e=>e.selected=!1),e.filter(e=>"Layer"!=e.className).forEach(e=>e.selected=!0)}}class q{constructor(e,t,n){this.element=l({}),this.view=new i.CanvasView(e,this.element),this.page=n,this.project=e,this.view.drawSelection=!1,this.viewport=t,this.view.on("updated",this.onViewUpdated.bind(this)),this.viewport.on("updated",()=>{this.view.markDirty()}),this.view.on("mousedown",this.moveviewport.bind(this)),this.view.on("mousedrag",this.moveviewport.bind(this)),this.view.on("mouseup",this.moveviewport.bind(this))}onViewUpdated(){this.view.rawDraw((e,t)=>{e.save(),e.lineWidth=1;let n=t.transform(this.page.bounds.topLeft),i=t.transform(this.page.bounds.bottomRight);e.fillStyle="#999999";let r=new Path2D;r.rect(n.x,n.y,i.x-n.x,i.y-n.y),r.rect(0,0,this.element.width,this.element.height),e.clip(r,"evenodd"),e.fillRect(0,0,this.element.width,this.element.height),e.restore(),e.save(),n=t.transform(this.project.view.bounds.topLeft),i=t.transform(this.project.view.bounds.bottomRight),e.strokeStyle="#009dec",e.strokeRect(n.x,n.y,i.x-n.x,i.y-n.y),e.restore()})}resize(){window.requestAnimationFrame(()=>{var e,t=null===(e=this.element.parentElement)||void 0===e?void 0:e.getBoundingClientRect();if(!t)return;this.view.viewSize=new i.Size(t.width,t.height);const n=this.page.bounds.topLeft.x,r=this.page.bounds.topLeft.y,a=this.page.bounds.bottomRight.x,s=this.page.bounds.bottomRight.y;this.view.center=new i.Point(n+(a-n)/2,r+(s-r)/2);var o=t.width/(2*Math.max(this.view.center.x-n,a-this.view.center.x)*1.2),l=t.height/(2*Math.max(this.view.center.y-r,s-this.view.center.y)*1.2);const u=Math.min(o,l);this.view.scaling=new i.Point(u,u)})}moveviewport(e){this.page.bounds.contains(e.point),this.viewport.center=e.point,e.stop()}}class V{constructor(){this.mainCanvas=l({}),this.backgroundCanvas=l({}),this.element=o({},[this.backgroundCanvas,this.mainCanvas]),this.element.style.pointerEvents="all",this.element.style.position="relative",this.element.style.height="100%",this.mainCanvas.style.position="absolute",this.mainCanvas.style.top="0px",this.mainCanvas.style.left="0px",i.setup(this.mainCanvas),new i.Layer,this.view=i.project.view;const e=l({id:"canvaspage"});this.page=new i.CanvasView(i.project,e),this.page.viewSize=new i.Size(600,400),this.page.drawSelection=!1,this.page.on("changed",()=>this.centerPage()),this.view.on("updated",this.onViewUpdated.bind(this)),window.addEventListener("wheel",this.onScroll.bind(this)),window.onresize=()=>this.resize()}onViewUpdated(){this.view.rawDraw((e,t)=>{e.save();const n=t.transform(this.page.bounds.topLeft),i=t.transform(this.page.bounds.bottomRight);e.fillStyle="#99999999";let r=new Path2D;r.rect(n.x,n.y,i.x-n.x,i.y-n.y),r.rect(0,0,this.view.element.width,this.view.element.height),e.clip(r,"evenodd"),e.fillRect(0,0,this.view.element.width,this.view.element.height),e.restore()})}resize(){window.requestAnimationFrame(()=>{var e,t=null===(e=this.view.element.parentElement)||void 0===e?void 0:e.getBoundingClientRect();if(!t)return;this.view.viewSize=new i.Size(t.width,t.height);const n=this.backgroundCanvas.getContext("2d");if(!n)return;const r=this.makeBgPattern(n);if(this.backgroundCanvas.width=t.width,this.backgroundCanvas.height=t.height,!n)throw"No background context";n.fillStyle=r||"white",n.fillRect(0,0,t.width,t.height)})}makeBgPattern(e){const t=document.createElement("canvas"),n=t.getContext("2d");return n?(t.width=10,t.height=10,n.fillStyle="#aaa",n.fillRect(0,0,t.width/2,t.height/2),n.fillRect(t.width/2,t.height/2,t.width,t.height),e.createPattern(t,"repeat")):null}centerPage(){window.requestAnimationFrame(()=>{this.view.bounds.width<this.view.bounds.height?this.view.zoom=this.view.bounds.height/(1.1*this.page.bounds.height):this.view.zoom=this.view.bounds.width/(1.1*this.page.bounds.width),this.view.center=new i.Point(this.page.bounds.width/2,this.page.bounds.height/2)})}onScroll(e){let t,n;e.stopPropagation(),e.preventDefault(),this.view.bounds.width>this.view.bounds.height?(t=this.view.viewSize.height/(2*this.page.viewSize.height),n=this.view.viewSize.height/(.2*this.page.viewSize.height)):(t=this.view.viewSize.width/(2*this.page.viewSize.width),n=this.view.viewSize.width/(.2*this.page.viewSize.width));let r=Math.min(Math.max(t,this.view.zoom+.1*e.deltaY),n),a=this.view.element.getBoundingClientRect(),s=new i.Point(e.x-a.x,e.y-a.y),o=this.view.viewToProject(s);this.view.zoom=r;let l=this.view.viewToProject(s),u=this.view.center.add(o.subtract(l));this.view.center=u}}class U extends S{constructor(e){super("Vertical","1fr",!1),this.fileUpload=this.fileUpload.bind(this),this.page=e,this.appendAll([new S("Horizontal","1fr",!1,[new S("Vertical","1fr",!1,[new z({element:u({},[r("save")],{click:()=>this.save()})}),new z({element:a({id:"savemodeselector"},[s({value:"png",selected:"true"},[r("png")]),s({value:"svg"},[r("svg")]),s({value:"json"},[r("json")]),s({value:"local"},[r("local")])]),resize:e=>{e.pane.element.style.width="100%"}})]),new S("Vertical","1fr",!1,[new z({element:u({},[r("load")],{click:()=>this.load()})}),new z({element:u({},[r("load local")],{click:()=>this.loadlocal()})})])]),new z({element:o({},[h({id:"loadclear",checked:"true"},{}),r("Clear on load")])})])}save(){let e;switch(g("#savemodeselector").value){case"png":this.page.markDirty(),this.page.on("updated",function e(){let t=this.page.element.toDataURL();this.page.off("updated",e),fetch(t).then(e=>e.blob()).then(e=>H(e,"image.png"))}.bind(this));break;case"svg":let t=i.project.exportSVG({asString:!0,bounds:this.page.bounds});e=new Blob([t],{type:"image/svg"}),H(e,"image.svg");break;case"json":e=new Blob([i.project.exportJSON({asString:!0})],{type:"text/json"}),H(e,"image.json");break;case"local":const n=i.project.exportJSON({asString:!0});window.localStorage.setItem("saved",n)}}load(){var e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});g("#fileInput").addEventListener("change",this.fileUpload),g("#fileInput").dispatchEvent(e)}fileUpload(){const e=g("#fileInput");e.removeEventListener("change",this.fileUpload);const t=e.files;if(t&&0!==t.length){g("#loadclear").checked&&i.project.clear();for(var n=0;n<t.length;n++){const e=t[n];"image/svg+xml"==e.type?i.project.importSVG(URL.createObjectURL(e),e=>{this.page.viewSize=e.bounds.size.clone()}):"image/png"==e.type||"image/jpeg"==e.type?new i.Raster(URL.createObjectURL(e)).smoothing=!1:console.log(e.type)}}}loadlocal(){const e=window.localStorage.getItem("saved");e&&(g("#loadclear").checked&&i.project.clear(),i.project.importJSON(e),i.project.deselectAll())}}function H(e,t){const n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=t||"download";const r=()=>{setTimeout(()=>{URL.revokeObjectURL(n),this.removeEventListener("click",r)},150)};return i.addEventListener("click",r,!1),i.click(),i}window.onload=function(){const e=g("#menus"),t=new V,n=new q(i.project,t.view,t.page);t.view.on("changed",()=>n.resize()),i.project.currentStyle.strokeWidth=1,i.project.currentStyle.strokeColor=new i.Color("black"),i.project.currentStyle.strokeCap="round",i.project.currentStyle.strokeJoin="round",i.settings.handleSize=6;const r=new F(i.project),a=new D(window),s=new R(r,a);a.addShortcut("backspace",e=>{e.preventDefault(),i.project.selectedItems.forEach(e=>e.remove()),r.commit()}),a.addShortcut("control+z",e=>{e.preventDefault(),r.undo()}),a.addShortcut("control+shift+z",e=>{e.preventDefault(),r.redo()});const o=new A;t.view.on("updated",()=>o.refreshLayers());const l=new S("Horizontal","auto",!0,[new S("Vertical","10%",!0,[new z(n,"1fr"),new z(s,"3fr"),new z(new B(r),"1fr")]),new z(t,"auto"),new S("Vertical","10%",!0,[new z(o,"2fr"),new z(new U(t.page),"1fr")])]);e.appendChild(l.element),t.resize(),t.centerPage(),n.resize()}}]);