/*! For license information please see bundle.js.LICENSE.txt */
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t,n){var i,r,o;(function(s,a){var l=(s=s||n(4)).window,u=s.document,c=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],n=t.slice,i=Object.create,r=Object.getOwnPropertyDescriptor,o=Object.defineProperty,s=t.forEach||function(e,t){for(var n=0,i=this.length;n<i;n++)e.call(t,this[n],n,this)},l=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)},u=Object.assign||function(e){for(var t=1,n=arguments.length;t<n;t++){var i=arguments[t];for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e},c=function(e,t,n){if(e){var i=r(e,"length");(i&&"number"==typeof i.value?s:l).call(e,t,n=n||e)}return n};function h(t,n,i,s,a){var l={};function u(e,u){"string"==typeof(u=u||(u=r(n,e))&&(u.get?u:u.value))&&"#"===u[0]&&(u=t[u.substring(1)]||u);var c,h="function"==typeof u,f=u,p=a||h&&!u.base?u&&u.get?e in t:t[e]:null;a&&p||(h&&p&&(u.base=p),h&&!1!==s&&(c=e.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),f&&!h&&f.get&&"function"==typeof f.get&&d.isPlainObject(f)||(f={value:f,writable:!0}),(r(t,e)||{configurable:!0}).configurable&&(f.configurable=!0,f.enumerable=null!=i?i:!c),o(t,e,f))}if(n){for(var c in n)n.hasOwnProperty(c)&&!e.test(c)&&u(c);for(var c in l){var h=l[c],f=t["set"+h],p=t["get"+h]||f&&t["is"+h];!p||!0!==s&&0!==p.length||u(c,{get:p,set:f})}}return t}function d(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];n&&u(this,n)}return this}return h(d,{inject:function(e){if(e){var t=!0===e.statics?e:e.statics,n=e.beans,i=e.preserve;t!==e&&h(this.prototype,e,e.enumerable,n,i),h(this,t,null,n,i)}for(var r=1,o=arguments.length;r<o;r++)this.inject(arguments[r]);return this},extend:function(){for(var e,t,n,r=this,s=0,a=arguments.length;s<a&&(!e||!t);s++)n=arguments[s],e=e||n.initialize,t=t||n.prototype;return t=(e=e||function(){r.apply(this,arguments)}).prototype=t||i(this.prototype),o(t,"constructor",{value:e,writable:!0,configurable:!0}),h(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=r,e}}).inject({enumerable:!1,initialize:d,set:d,inject:function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e];n&&h(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var e=i(this);return e.inject.apply(e,arguments)},each:function(e,t){return c(this,e,t)},clone:function(){return new this.constructor(this)},statics:{set:u,each:c,create:i,define:o,describe:r,clone:function(e){return u(new e.constructor,e)},isPlainObject:function(e){var t=null!=e&&e.constructor;return t&&(t===Object||t===d||"Object"===t.name)},pick:function(e,t){return e!==a?e:t},slice:function(e,t,i){return n.call(e,t,i)}}})};e.exports=c,c.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+c.each(this,(function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+("number"===n?g.instance.number(e):"string"===n?"'"+e+"'":e))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return c.importJSON(e,this)},exportJSON:function(e){return c.exportJSON(this,e)},toJSON:function(){return c.serialize(this)},set:function(e,t){return e&&c.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!c.exports[n]&&(c.exports[n]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)&&Array.isArray(t)){if((n=e.length)!==t.length)return!1;for(;n--;)if(!c.equals(e[n],t[n]))return!1}else{var n,i=Object.keys(e);if((n=i.length)!==Object.keys(t).length)return!1;for(;n--;){var r=i[n];if(!t.hasOwnProperty(r)||!c.equals(e[r],t[r]))return!1}}return!0}return!1},read:function(e,t,n,i){if(this===c){var r=this.peek(e,t);return e.__index++,r}var o=this.prototype,s=o._readIndex,l=t||s&&e.__index||0,u=e.length,h=e[l];if(i=i||u-l,h instanceof this||n&&n.readNull&&null==h&&i<=1)return s&&(e.__index=l+1),h&&n&&n.clone?h.clone():h;if(h=c.create(o),s&&(h.__read=!0),h=h.initialize.apply(h,l>0||l+i<u?c.slice(e,l,l+i):e)||h,s){e.__index=l+h.__read;var d=h.__filtered;d&&(e.__filtered=d,h.__filtered=a),h.__read=a}return h},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,n,i){for(var r,o=[],s=t||0,a=i?s+i:e.length,l=s;l<a;l++)o.push(Array.isArray(r=e[l])?this.read(r,0,n):this.read(e,l,n,1));return o},readNamed:function(e,t,n,i,r){var o=this.getNamed(e,t),s=o!==a;if(s){var l=e.__filtered;if(!l){var u=this.getSource(e);(l=e.__filtered=c.create(u)).__unfiltered=u}l[t]=a}return this.read(s?[o]:e,n,i,r)},readSupported:function(e,t){var n=this.getSource(e),i=this,r=!1;return n&&Object.keys(n).forEach((function(n){if(n in t){var o=i.readNamed(e,n);o!==a&&(t[n]=o),r=!0}})),r},getSource:function(e){var t=e.__source;if(t===a){var n=1===e.length&&e[0];t=e.__source=n&&c.isPlainObject(n)?n:null}return t},getNamed:function(e,t){var n=this.getSource(e);if(n)return t?n[t]:e.__filtered||n},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,n,i){var r;function o(i){if(!(n&&i in n||r&&i in r)){var o=t[i];o!==a&&(e[i]=o)}}if(i){for(var s,l={},u=0,c=i.length;u<c;u++)(s=i[u])in t&&(o(s),l[s]=!0);r=l}return Object.keys(t.__unfiltered||t).forEach(o),e},isPlainValue:function(e,t){return c.isPlainObject(e)||Array.isArray(e)||t&&"string"==typeof e},serialize:function(e,t,n,i){t=t||{};var r,o=!i;if(o&&(t.formatter=new g(t.precision),i={length:0,definitions:{},references:{},add:function(e,t){var n="#"+e._id,i=this.references[n];if(!i){this.length++;var r=t.call(e),o=e._class;o&&r[0]!==o&&r.unshift(o),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),e&&e._serialize){r=e._serialize(t,i);var s=e._class;!s||e._compactSerialize||!o&&n||r[0]===s||r.unshift(s)}else if(Array.isArray(e)){r=[];for(var a=0,l=e.length;a<l;a++)r[a]=c.serialize(e[a],t,n,i)}else if(c.isPlainObject(e)){r={};var u=Object.keys(e);for(a=0,l=u.length;a<l;a++){var h=u[a];r[h]=c.serialize(e[h],t,n,i)}}else r="number"==typeof e?t.formatter.number(e,t.precision):e;return o&&i.length>0?[["dictionary",i.definitions],r]:r},deserialize:function(e,t,n,i,r){var o=e,s=!n,a=s&&e&&e.length&&"dictionary"===e[0][0];if(n=n||{},Array.isArray(e)){var l=e[0],u="dictionary"===l;if(1==e.length&&/^#/.test(l))return n.dictionary[l];o=[];for(var h=(l=c.exports[l])?1:0,d=e.length;h<d;h++)o.push(c.deserialize(e[h],t,n,u,a));if(l){var f=o;o=t?t(l,f,s||r):new l(f)}}else if(c.isPlainObject(e))for(var p in o={},i&&(n.dictionary=o),e)o[p]=c.deserialize(e[p],t,n);return a?o[1]:o},exportJSON:function(e,t){var n=c.serialize(e,t);return t&&0==t.asString?n:JSON.stringify(n)},importJSON:function(e,t){return c.deserialize("string"==typeof e?JSON.parse(e):e,(function(e,n,i){var r=i&&t&&t.constructor===e,o=r?t:c.create(e.prototype);if(1===n.length&&o instanceof T&&(r||!(o instanceof L))){var s=n[0];c.isPlainObject(s)&&(s.insert=!1,r&&(n=n.concat([{insert:!0}])))}return(r?o.set:e).apply(o,n),r&&(t=null),o}))},push:function(e,t){var n=t.length;if(n<4096)e.push.apply(e,t);else{var i=e.length;e.length+=n;for(var r=0;r<n;r++)e[i+r]=t[r]}return e},splice:function(e,t,n,i){var r=t&&t.length,o=n===a;(n=o?e.length:n)>e.length&&(n=e.length);for(var s=0;s<r;s++)t[s]._index=n+s;if(o)return c.push(e,t),[];var l=[n,i];t&&c.push(l,t);for(var u=e.splice.apply(e,l),h=(s=0,u.length);s<h;s++)u[s]._index=a;for(s=n+r,h=e.length;s<h;s++)e[s]._index=s;return u},capitalize:function(e){return e.replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}))},camelize:function(e){return e.replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var h={on:function(e,t){if("string"!=typeof e)c.each(e,(function(e,t){this.on(t,e)}),this);else{var n=this._eventTypes,i=n&&n[e],r=this._callbacks=this._callbacks||{};-1===(r=r[e]=r[e]||[]).indexOf(t)&&(r.push(t),i&&i.install&&1===r.length&&i.install.call(this,e))}return this},off:function(e,t){if("string"==typeof e){var n,i=this._eventTypes,r=i&&i[e],o=this._callbacks&&this._callbacks[e];return o&&(!t||-1!==(n=o.indexOf(t))&&1===o.length?(r&&r.uninstall&&r.uninstall.call(this,e),delete this._callbacks[e]):-1!==n&&o.splice(n,1)),this}c.each(e,(function(e,t){this.off(t,e)}),this)},once:function(e,t){return this.on(e,(function n(){t.apply(this,arguments),this.off(e,n)}))},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var i=c.slice(arguments,1),r=t&&t.target&&!t.currentTarget;n=n.slice(),r&&(t.currentTarget=this);for(var o=0,s=n.length;o<s;o++)if(0==n[o].apply(this,i)){t&&t.stop&&t.stop();break}return r&&delete t.currentTarget,!0},responds:function(e){return!(!this._callbacks||!this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,i=e?"install":"uninstall";if(t)for(var r in n)if(n[r].length>0){var o=t[r],s=o&&o[i];s&&s.call(this,r)}},statics:{inject:function e(t){var n=t._events;if(n){var i={};c.each(n,(function(e,n){var r="string"==typeof e,o=r?e:n,s=c.capitalize(o),a=o.substring(2).toLowerCase();i[a]=r?{}:e,o="_"+o,t["get"+s]=function(){return this[o]},t["set"+s]=function(e){var t=this[o];t&&this.off(a,t),e&&this.on(a,e),this[o]=e}})),t._eventTypes=i}return e.base.apply(this,arguments)}}},d=c.extend({_class:"PaperScope",initialize:function e(){de=this,this.settings=new c({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var n=le.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:ue.nativeModes},le.release(n)}if(!this.agent){var i=s.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(i)||[])[0],o="darwin"===r?"mac":r,a=t.agent=t.browser={platform:o};o&&(a[o]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(e,t,n,i,r){if(!a.chrome){var o="opera"===t?i:/^(node|trident)$/.test(t)?r:n;a.version=o,a.versionNumber=parseFloat(o),t={trident:"msie",jsdom:"node"}[t]||t,a.name=t,a[t]=!0}})),a.chrome&&delete a.webkit,a.atom&&delete a.chrome}},version:"0.12.4-grafte",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var n=de.PaperScript.execute(e,this,t);return J.updateFocus(),n},install:function(e){var t=this;for(var n in c.each(["project","view","tool"],(function(n){c.define(e,n,{configurable:!0,get:function(){return t[n]}})})),this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return de=this,this.project=new M(e),this},createCanvas:function(e,t){return le.getCanvas(e,t)},activate:function(){de=this},clear:function(){for(var e=this.projects,t=this.tools,n=e.length-1;n>=0;n--)e[n].remove();for(n=t.length-1;n>=0;n--)t[n].remove()},remove:function(){this.clear(),delete d._scopes[this._id]},statics:new function(){function e(e){return e+="Attribute",function(t,n){return t[e](n)||t[e]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),f=c.extend(h,{initialize:function(e){this._scope=de,this._index=this._scope[this._list].push(this)-1,!e&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(c.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),p={findItemBoundsCollisions:function(e,t,n){function i(e){for(var t=new Array(e.length),n=0;n<e.length;n++){var i=e[n].getBounds();t[n]=[i.left,i.top,i.right,i.bottom]}return t}var r=i(e),o=t&&t!==e?i(t):r;return this.findBoundsCollisions(r,o,n||0)},findCurveBoundsCollisions:function(e,t,n,i){function r(e){for(var t=Math.min,n=Math.max,i=new Array(e.length),r=0;r<e.length;r++){var o=e[r];i[r]=[t(o[0],o[2],o[4],o[6]),t(o[1],o[3],o[5],o[7]),n(o[0],o[2],o[4],o[6]),n(o[1],o[3],o[5],o[7])]}return i}var o=r(e),s=t&&t!==e?r(t):o;if(i){for(var a=this.findBoundsCollisions(o,s,n||0,!1,!0),l=this.findBoundsCollisions(o,s,n||0,!0,!0),u=[],c=0,h=a.length;c<h;c++)u[c]={hor:a[c],ver:l[c]};return u}return this.findBoundsCollisions(o,s,n||0)},findBoundsCollisions:function(e,t,n,i,r){var o=!t||e===t,s=o?e:e.concat(t),a=e.length,l=s.length;function u(e,t,n){for(var i=0,r=e.length;i<r;){var o=r+i>>>1;s[e[o]][t]<n?i=o+1:r=o}return i-1}for(var c=i?1:0,h=c+2,d=i?0:1,f=d+2,p=new Array(l),g=0;g<l;g++)p[g]=g;p.sort((function(e,t){return s[e][c]-s[t][c]}));var m=[],v=new Array(a);for(g=0;g<l;g++){var y=p[g],w=s[y],b=o?y:y-a,_=y<a,x=o||!_,k=_?[]:null;if(m.length){var C=u(m,h,w[c]-n)+1;if(m.splice(0,C),o&&r){k=k.concat(m);for(var S=0;S<m.length;S++)v[z=m[S]].push(b)}else{var M=w[f],T=w[d];for(S=0;S<m.length;S++){var z=m[S],L=s[z],A=z<a,O=o||z>=a;(r||(_&&O||x&&A)&&M>=L[d]-n&&T<=L[f]+n)&&(_&&O&&k.push(o?z:z-a),x&&A&&v[z].push(b))}}}if(_&&(e===t&&k.push(y),v[y]=k),m.length){var P=u(m,h,w[h]);m.splice(P+1,0,y)}else m.push(y)}for(g=0;g<v.length;g++){var I=v[g];I&&I.sort((function(e,t){return e-t}))}return v}},g=c.extend({initialize:function(e){this.precision=c.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});g.instance=new g;var m=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow,o=Math.log2||function(e){return Math.log(e)*Math.LOG2E};function s(e,t,n){return e<t?t:e>n?n:e}function a(e,t,i){function r(e){var t=134217729*e,n=e-t+t;return[n,e-n]}var o=t*t-e*i,s=t*t+e*i;if(3*n(o)<s){var a=r(e),l=r(t),u=r(i),c=t*t,h=e*i;o=c-h+(l[0]*l[0]-c+2*l[0]*l[1]+l[1]*l[1]-(a[0]*u[0]-h+a[0]*u[1]+a[1]*u[0]+a[1]*u[1]))}return o}function l(){var e=Math.max.apply(Math,arguments);return e&&(e<1e-8||e>1e8)?r(2,-Math.round(o(e))):0}return{EPSILON:1e-12,MACHINE_EPSILON:112e-18,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(i(2)-1)/3,isZero:function(e){return e>=-1e-12&&e<=1e-12},isMachineZero:function(e){return e>=-112e-18&&e<=112e-18},clamp:s,integrate:function(n,i,r,o){for(var s=e[o-2],a=t[o-2],l=.5*(r-i),u=l+i,c=0,h=o+1>>1,d=1&o?a[c++]*n(u):0;c<h;){var f=l*s[c];d+=a[c++]*(n(u+f)+n(u-f))}return l*d},findRoot:function(e,t,i,r,o,a,l){for(var u=0;u<a;u++){var c=e(i),h=c/t(i),d=i-h;if(n(h)<l){i=d;break}c>0?(o=i,i=d<=r?.5*(r+o):d):(r=i,i=d>=o?.5*(r+o):d)}return s(i,r,o)},solveQuadratic:function(e,t,r,o,u,c){var h,d=1/0;if(n(e)<1e-12){if(n(t)<1e-12)return n(r)<1e-12?-1:0;h=-r/t}else{var f=a(e,t*=-.5,r);if(f&&n(f)<112e-18){var p=l(n(e),n(t),n(r));p&&(f=a(e*=p,t*=p,r*=p))}if(f>=-112e-18){var g=f<0?0:i(f),m=t+(t<0?-g:g);0===m?d=-(h=r/e):(h=m/e,d=r/m)}}var v=0,y=null==u,w=u-1e-12,b=c+1e-12;return isFinite(h)&&(y||h>w&&h<b)&&(o[v++]=y?h:s(h,u,c)),d!==h&&isFinite(d)&&(y||d>w&&d<b)&&(o[v++]=y?d:s(d,u,c)),v},solveCubic:function(e,t,o,a,u,c,h){var d,f,p,g,v,y=l(n(e),n(t),n(o),n(a));function w(n){var i=e*(d=n);g=(i+(f=i+t))*d+(p=f*d+o),v=p*d+a}if(y&&(e*=y,t*=y,o*=y,a*=y),n(e)<1e-12)e=t,f=o,p=a,d=1/0;else if(n(a)<1e-12)f=t,p=o,d=0;else{w(-t/e/3);var b=v/e,_=r(n(b),1/3),x=b<0?-1:1,k=-g/e,C=k>0?1.324717957244746*Math.max(_,i(k)):_,S=d-x*C;if(S!==d){do{w(S),S=0===g?d:d-v/g/(1+112e-18)}while(x*S>x*d);n(e)*d*d>n(a/d)&&(f=((p=-a/d)-o)/d)}}var M=m.solveQuadratic(e,f,p,u,c,h),T=null==c;return isFinite(d)&&(0===M||M>0&&d!==u[0]&&d!==u[1])&&(T||d>c-1e-12&&d<h+1e-12)&&(u[M++]=T?d:s(d,c,h)),M}}},v={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}return this._id++}},y=c.extend({_class:"Point",_readIndex:!0,initialize:function(e,t){var n=typeof e,i=this.__read,r=0;if("number"===n){var o="number"==typeof t;this._set(e,o?t:e),i&&(r=o?2:1)}else if("undefined"===n||null===e)this._set(0,0),i&&(r=null===e?1:0);else{var s="string"===n?e.split(/[\s,]+/)||[]:e;r=1,Array.isArray(s)?this._set(+s[0],+(s.length>1?s[1]:s[0])):"x"in s?this._set(s.x||0,s.y||0):"width"in s?this._set(s.width||0,s.height||0):"angle"in s?(this._set(s.length||0,0),this.setAngle(s.angle||0)):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new y(this.x,this.y)},toString:function(){var e=g.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();m.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=y.read(arguments),t=this.getLength()*e.getLength();if(m.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=y.read(arguments);return 180*Math.atan2(this.cross(e),this.dot(e))/Math.PI},getDistance:function(){var e=arguments,t=y.read(e),n=t.x-this.x,i=t.y-this.y,r=n*n+i*i,o=c.read(e);return o?r:Math.sqrt(r)},normalize:function(e){e===a&&(e=1);var t=this.getLength(),n=0!==t?e/t:0,i=new y(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(e,t){if(0===e)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,i=Math.sin(e),r=Math.cos(e);return n=new y(n.x*r-n.y*i,n.x*i+n.y*r),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=y.read(arguments);return new y(this.x+e.x,this.y+e.y)},subtract:function(){var e=y.read(arguments);return new y(this.x-e.x,this.y-e.y)},multiply:function(){var e=y.read(arguments);return new y(this.x*e.x,this.y*e.y)},divide:function(){var e=y.read(arguments);return new y(this.x/e.x,this.y/e.y)},modulo:function(){var e=y.read(arguments);return new y(this.x%e.x,this.y%e.y)},negate:function(){return new y(-this.x,-this.y)},isInside:function(){return x.read(arguments).contains(this)},isClose:function(){var e=arguments,t=y.read(e),n=c.read(e);return this.getDistance(t)<=n},isCollinear:function(){var e=y.read(arguments);return y.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=y.read(arguments);return y.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=m.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=y.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=y.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=y.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new y(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=y.read(e),n=y.read(e);return new y(Math.min(t.x,n.x),Math.min(t.y,n.y))},max:function(){var e=arguments,t=y.read(e),n=y.read(e);return new y(Math.max(t.x,n.x),Math.max(t.y,n.y))},random:function(){return new y(Math.random(),Math.random())},isCollinear:function(e,t,n,i){return Math.abs(e*i-t*n)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+i*i))},isOrthogonal:function(e,t,n,i){return Math.abs(e*n+t*i)<=1e-8*Math.sqrt((e*e+t*t)*(n*n+i*i))}}},c.each(["round","ceil","floor","abs"],(function(e){var t=Math[e];this[e]=function(){return new y(t(this.x),t(this.y))}}),{})),w=y.extend({initialize:function(e,t,n,i){this._x=e,this._y=t,this._owner=n,this._setter=i},_set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),b=c.extend({_class:"Size",_readIndex:!0,initialize:function(e,t){var n=typeof e,i=this.__read,r=0;if("number"===n){var o="number"==typeof t;this._set(e,o?t:e),i&&(r=o?2:1)}else if("undefined"===n||null===e)this._set(0,0),i&&(r=null===e?1:0);else{var s="string"===n?e.split(/[\s,]+/)||[]:e;r=1,Array.isArray(s)?this._set(+s[0],+(s.length>1?s[1]:s[0])):"width"in s?this._set(s.width||0,s.height||0):"x"in s?this._set(s.x||0,s.y||0):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new b(this.width,this.height)},toString:function(){var e=g.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=b.read(arguments);return new b(this.width+e.width,this.height+e.height)},subtract:function(){var e=b.read(arguments);return new b(this.width-e.width,this.height-e.height)},multiply:function(){var e=b.read(arguments);return new b(this.width*e.width,this.height*e.height)},divide:function(){var e=b.read(arguments);return new b(this.width/e.width,this.height/e.height)},modulo:function(){var e=b.read(arguments);return new b(this.width%e.width,this.height%e.height)},negate:function(){return new b(-this.width,-this.height)},isZero:function(){var e=m.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new b(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new b(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new b(Math.random(),Math.random())}}},c.each(["round","ceil","floor","abs"],(function(e){var t=Math[e];this[e]=function(){return new b(t(this.width),t(this.height))}}),{})),_=b.extend({initialize:function(e,t,n,i){this._width=e,this._height=t,this._owner=n,this._setter=i},_set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),x=c.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(e,t,n,i){var r,o=arguments,s=typeof e;if("number"===s?(this._set(e,t,n,i),r=4):"undefined"===s||null===e?(this._set(0,0,0,0),r=null===e?1:0):1===o.length&&(Array.isArray(e)?(this._set.apply(this,e),r=1):e.x!==a||e.width!==a?(this._set(e.x||0,e.y||0,e.width||0,e.height||0),r=1):e.from===a&&e.to===a&&(this._set(0,0,0,0),c.readSupported(o,this)&&(r=1))),r===a){var l,u,h=y.readNamed(o,"from"),d=c.peek(o),f=h.x,p=h.y;if(d&&d.x!==a||c.hasNamed(o,"to")){var g=y.readNamed(o,"to");l=g.x-f,u=g.y-p,l<0&&(f=g.x,l=-l),u<0&&(p=g.y,u=-u)}else{var m=b.read(o);l=m.width,u=m.height}this._set(f,p,l,u),r=o.__index}var v=o.__filtered;return v&&(this.__filtered=v),this.__read&&(this.__read=r),this},set:"#initialize",_set:function(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this},clone:function(){return new x(this.x,this.y,this.width,this.height)},equals:function(e){var t=c.isPlainValue(e)?x.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=g.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){return new(e?y:w)(this.x,this.y,this,"setPoint")},setPoint:function(){var e=y.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){return new(e?b:_)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=b.read(arguments),t=this._sx,n=this._sy,i=e.width,r=e.height;t&&(this.x+=(this.width-i)*t),n&&(this.y+=(this.height-r)*n),this.width=i,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=.5===this._sx?2*t:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=.5===this._sy?2*t:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=.5===this._sx?2*t:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=.5===this._sy?2*t:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||.5===this._sx?this.x=e-this.width/2:(this._sx&&(this.x+=2*(e-this.x)*this._sx),this.width=2*(e-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||.5===this._sy?this.y=e-this.height/2:(this._sy&&(this.y+=2*(e-this.y)*this._sy),this.height=2*(e-this.y)),this._sy=.5,this._fh=0},getCenter:function(e){return new(e?y:w)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=y.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(e){return e&&e.width!==a||4===(Array.isArray(e)?e:arguments).length?this._containsRectangle(x.read(arguments)):this._containsPoint(y.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=x.read(arguments),t=c.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=x.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),i=Math.min(this.x+this.width,e.x+e.width),r=Math.min(this.y+this.height,e.y+e.height);return new x(t,n,i-t,r-n)},unite:function(){var e=x.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x+e.width),r=Math.max(this.y+this.height,e.y+e.height);return new x(t,n,i-t,r-n)},include:function(){var e=y.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x),r=Math.max(this.y+this.height,e.y);return new x(t,n,i-t,r-n)},expand:function(){var e=b.read(arguments),t=e.width,n=e.height;return new x(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===a?e:t)-this.height)}},c.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(e,t){var n=e.join(""),i=/^[RL]/.test(n);t>=4&&(e[1]+=i?"Y":"X");var r=e[i?0:1],o=e[i?1:0],s="get"+r,a="get"+o,l="set"+r,u="set"+o,c="set"+n;this["get"+n]=function(e){return new(e?y:w)(this[s](),this[a](),this,c)},this[c]=function(){var e=y.read(arguments);this[l](e.x),this[u](e.y)}}),{beans:!0})),k=x.extend({initialize:function(e,t,n,i,r,o){this._set(e,t,n,i,!0),this._owner=r,this._setter=o},_set:function(e,t,n,i,r){return this._x=e,this._y=t,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var e=x.prototype;return c.each(["x","y","width","height"],(function(e){var t=c.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._dontNotify||this._owner[this._setter](this)}}),c.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(e){var t=this._owner;t._changeSelection&&t._changeSelection(2,e)}}))}),C=c.extend({_class:"Matrix",initialize:function e(t,n){var i=arguments,r=i.length,o=!0;if(r>=6?this._set.apply(this,i):1===r||2===r?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,n):Array.isArray(t)?this._set.apply(this,n?t.concat([n]):t):o=!1:r?o=!1:this.reset(),!o)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,n,i,r,o,s){return this._a=e,this._b=t,this._c=n,this._d=i,this._tx=r,this._ty=o,s||this._changed(),this},_serialize:function(e,t){return c.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new C(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=g.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return!!n&&(n.transform(null,c.pick(e,!0),t),this.isIdentity())},translate:function(){var e=y.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=arguments,t=y.read(e),n=y.read(e,0,{readNull:!0});return n&&this.translate(n),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=y.read(arguments,1),n=t.x,i=t.y,r=Math.cos(e),o=Math.sin(e),s=n-n*r+i*o,a=i-n*o-i*r,l=this._a,u=this._b,c=this._c,h=this._d;return this._a=r*l+o*c,this._b=r*u+o*h,this._c=-o*l+r*c,this._d=-o*u+r*h,this._tx+=s*l+a*c,this._ty+=s*u+a*h,this._changed(),this},shear:function(){var e=arguments,t=y.read(e),n=y.read(e,0,{readNull:!0});n&&this.translate(n);var i=this._a,r=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*i,this._d+=t.x*r,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var e=arguments,t=y.read(e),n=y.read(e,0,{readNull:!0}),i=Math.PI/180,r=new y(Math.tan(t.x*i),Math.tan(t.y*i));return this.shear(r,n)},append:function(e,t){if(e){var n=this._a,i=this._b,r=this._c,o=this._d,s=e._a,a=e._c,l=e._b,u=e._d,c=e._tx,h=e._ty;this._a=s*n+l*r,this._c=a*n+u*r,this._b=s*i+l*o,this._d=a*i+u*o,this._tx+=c*n+h*r,this._ty+=c*i+h*o,t||this._changed()}return this},prepend:function(e,t){if(e){var n=this._a,i=this._b,r=this._c,o=this._d,s=this._tx,a=this._ty,l=e._a,u=e._c,c=e._b,h=e._d,d=e._tx,f=e._ty;this._a=l*n+u*i,this._c=l*r+u*o,this._b=c*n+h*i,this._d=c*r+h*o,this._tx=l*s+u*a+d,this._ty=c*s+h*a+f,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,i=this._d,r=this._tx,o=this._ty,s=e*i-t*n,a=null;return s&&!isNaN(s)&&isFinite(r)&&isFinite(o)&&(this._a=i/s,this._b=-t/s,this._c=-n/s,this._d=e/s,this._tx=(n*o-i*r)/s,this._ty=(t*r-e*o)/s,a=this),a},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new C(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return arguments.length<3?this._transformPoint(y.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var i=e.x,r=e.y;return t||(t=new y),t._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var i=0,r=2*n;i<r;i+=2){var o=e[i],s=e[i+1];t[i]=o*this._a+s*this._c+this._tx,t[i+1]=o*this._b+s*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,i=t+e.width,r=n+e.height,o=[t,n,i,n,i,r,t,r];return this._transformCoordinates(o,o,4)},_transformBounds:function(e,t,n){for(var i=this._transformCorners(e),r=i.slice(0,2),o=r.slice(),s=2;s<8;s++){var a=i[s],l=1&s;a<r[l]?r[l]=a:a>o[l]&&(o[l]=a)}return t||(t=new x),t._set(r[0],r[1],o[0]-r[0],o[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(y.read(arguments))},_inverseTransform:function(e,t,n){var i=this._a,r=this._b,o=this._c,s=this._d,a=this._tx,l=this._ty,u=i*s-r*o,c=null;if(u&&!isNaN(u)&&isFinite(a)&&isFinite(l)){var h=e.x-this._tx,d=e.y-this._ty;t||(t=new y),c=t._set((h*s-d*o)/u,(d*i-h*r)/u,n)}return c},decompose:function(){var e,t,n,i=this._a,r=this._b,o=this._c,s=this._d,a=i*s-r*o,l=Math.sqrt,u=Math.atan2,c=180/Math.PI;if(0!==i||0!==r){var h=l(i*i+r*r);e=Math.acos(i/h)*(r>0?1:-1),t=[h,a/h],n=[u(i*o+r*s,h*h),0]}else if(0!==o||0!==s){var d=l(o*o+s*s);e=Math.asin(o/d)*(s>0?1:-1),t=[a/d,d],n=[0,u(i*o+r*s,d*d)]}else e=0,n=t=[0,0];return{translation:this.getTranslation(),rotation:e*c,scaling:new y(t),skewing:new y(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new y(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},c.each(["a","b","c","d","tx","ty"],(function(e){var t=c.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._changed()}}),{})),S=c.extend({_class:"Line",initialize:function(e,t,n,i,r){var o=!1;arguments.length>=4?(this._px=e,this._py=t,this._vx=n,this._vy=i,o=r):(this._px=e.x,this._py=e.y,this._vx=t.x,this._vy=t.y,o=n),o||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new y(this._px,this._py)},getVector:function(){return new y(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return S.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return S.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return S.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return y.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return y.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,i,r,o,s,a,l,u){l||(n-=e,i-=t,s-=r,a-=o);var c=n*a-i*s;if(!m.isMachineZero(c)){var h=e-r,d=t-o,f=(s*d-a*h)/c,p=(n*d-i*h)/c;if(u||-1e-12<f&&f<1+1e-12&&-1e-12<p&&p<1+1e-12)return u||(f=f<=0?0:f>=1?1:f),new y(e+f*n,t+f*i)}},getSide:function(e,t,n,i,r,o,s,a){s||(n-=e,i-=t);var l=r-e,u=l*i-(o-t)*n;return!a&&m.isMachineZero(u)&&(u=(l*n+l*n)/(n*n+i*i))>=0&&u<=1&&(u=0),u<0?-1:u>0?1:0},getSignedDistance:function(e,t,n,i,r,o,s){return s||(n-=e,i-=t),0===n?i>0?r-e:e-r:0===i?n<0?o-t:t-o:((r-e)*i-(o-t)*n)/(i>n?i*Math.sqrt(1+n*n/(i*i)):n*Math.sqrt(1+i*i/(n*n)))},getDistance:function(e,t,n,i,r,o,s){return Math.abs(S.getSignedDistance(e,t,n,i,r,o,s))}}}),M=f.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(e){f.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Z(null,null,this),this._view=J.create(this,e||le.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return c.serialize(this._children,e,!0,t)},_changed:function(e,t){if(1&e){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}this.emit("changed",new c({flags:e,item:t}));var i=this._changes;if(i&&t){var r=this._changesById,o=t._id,s=r[o];s?s.flags|=e:i.push(r[o]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return!!e.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new L({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:P,match:function(n){var i=n._definition,r=i._id;return t[r]||(t[r]=!0,e.push(i)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var i=e[n],r=i._selection;1&r&&i.isInserted()?t.push(i):r||this._updateSelection(i)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(a,e)},insertLayer:function(e,t){if(t instanceof L){t._remove(!1,!0),c.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,n){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(a,new L(T.NO_INSERT),!0)).insertChild(e,t),n&&t.activate&&t.activate(),t},getItems:function(e){return T._getItems(this,e)},getItem:function(e){return T._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return c.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){"mouseup"===e&&(t.mousedrag=null);var n=t[e];if(n){for(var i in n){var r=n[i];for(var o in t){var s=t[o];s&&s!=n&&delete s[r._id]}r.remove()}t[e]=null}}},draw:function(e,t,n,i){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,o=new c({offset:new y(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new C],updateMatrix:!0}),s=0,a=r.length;s<a;s++)r[s].draw(e,o);if(e.restore(),this._selectionCount>0&&i){e.save(),e.strokeWidth=1;var l=this._selectionItems,u=this._scope.settings.handleSize,h=this._updateVersion;for(var d in l)l[d]._drawSelection(e,t,u,l,h);e.restore()}}}),T=c.extend(h,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=c.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new C,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return c.each(e,(function(e){this._events[e]={install:function(e){this.getView()._countItemEvent(e,1)},uninstall:function(e){this.getView()._countItemEvent(e,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var n=e&&c.isPlainObject(e),i=n&&!0===e.internal,r=this._matrix=new C,o=n&&e.project||de.project,s=de.settings;return this._id=i?null:v.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&s.applyMatrix,t&&r.translate(t),r._owner=this,this._style=new Z(o._currentStyle,this,o),i||n&&0==e.insert||!s.insertItems&&(!n||!0!==e.insert)?this._setProject(o):(n&&e.parent||o)._insertItem(a,this,!0),n&&e!==T.NO_INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(e,t){var n={},i=this;function r(r,o){for(var s in r){var a=i[s];!o&&c.equals(a,"leading"===s?1.2*r.fontSize:r[s])||(n[s]=c.serialize(a,e,"data"!==s,t))}}return r(this._serializeFields),this instanceof z||r(this._style._defaults,!0),[this._class,n]},_changed:function(e){var t=this._symbol,n=this._parent||t,i=this._project;8&e&&(this._bounds=this._position=this._decomposed=a),16&e&&(this._globalMatrix=a),n&&72&e&&T._clearBoundsCache(n),2&e&&T._clearBoundsCache(this),i&&i._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var n=t._children,i=t._namedChildren;(i[e]=i[e]||[]).push(this),e in n||(n[e]=this)}this._name=e||a,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},c.each(["locked","visible","blendMode","opacity","guide"],(function(e){var t=c.capitalize(e),n="_"+e,i={locked:256,visible:265};this["get"+t]=function(){return this[n]},this["set"+t]=function(t){t!=this[n]&&(this[n]=t,this._changed(i[e]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren)for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0;return!!(1&this._selection)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,i=t.length;n<i;n++)t[n].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(1&this._selection);if(e&&t){for(var n=0,i=e.length;n<i;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,i=t.length;n<i;n++)t[n].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?y:w,n=this._position||(this._position=this._getPositionFromBounds());return new t(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(y.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new w(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=y.read(arguments,0,{clone:!0,readNull:!0}),this._position=a}},c.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(e,t){this[t]=function(t){return this.getBounds(t,e)}}),{beans:!0,getBounds:function(e,t){var n=t||e instanceof C,i=c.set({},n?t:e,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var r=this._getCachedBounds(n&&e,i).rect;return arguments.length?r:new k(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var e=x.read(arguments),t=this.getBounds(),n=this._matrix,i=new C,r=e.getCenter();i.translate(r),e.width==t.width&&e.height==t.height||(n.isInvertible()||(n.set(n._backup||(new C).translate(n.getTranslation())),t=this.getBounds()),i.scale(0!==t.width?e.width/t.width:0,0!==t.height?e.height/t.height:0)),r=t.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(e,t){var n=this._children;return n&&n.length?(T._updateBoundsCache(this,t.cacheItem),T._getBounds(n,e,t)):new x},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,n){e=e&&e._orNullIfIdentity();var i=t.internal&&!n,r=t.cacheItem,o=i?null:this._matrix._orNullIfIdentity(),s=r&&(!e||e.equals(o))&&this._getBoundsCacheKey(t,i),a=this._bounds;if(T._updateBoundsCache(this._parent||this._symbol,r),s&&a&&s in a)return{rect:(d=a[s]).rect.clone(),nonscaling:d.nonscaling};var l=this._getBounds(e||o,t),u=l.rect||l,c=this._style,h=l.nonscaling||c.hasStroke()&&!c.getStrokeScaling();if(s){a||(this._bounds=a={});var d=a[s]={rect:u.clone(),nonscaling:h,internal:i}}return{rect:u,nonscaling:h}},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():e;return i&&i._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,i=e._boundsCache=e._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(t),i.ids[n]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=a;for(var n=0,i=t.list,r=i.length;n<r;n++){var o=i[n];o!==e&&(o._bounds=o._position=a,o._boundsCache&&T._clearBoundsCache(o))}}},_getBounds:function(e,t,n){var i=1/0,r=-i,o=i,s=r,a=!1;n=n||{};for(var l=0,u=e.length;l<u;l++){var c=e[l];if(c._visible&&!c.isEmpty(!0)){var h=c._getCachedBounds(t&&t.appended(c._matrix),n,!0),d=h.rect;i=Math.min(d.x,i),o=Math.min(d.y,o),r=Math.max(d.x+d.width,r),s=Math.max(d.y+d.height,s),h.nonscaling&&(a=!0)}}return{rect:isFinite(i)?new x(i,o,r-i,s-o):new x,nonscaling:a}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(null!=t&&null!=e){var n=this._decomposed;this.rotate(e-t),n&&(n.rotation=e,this._decomposed=n)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new w(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=y.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var n=this.getRotation(),i=this._decomposed,r=new C,o=this.getPosition(!0);r.translate(o),n&&r.rotate(n),r.scale(t.x/e.x,t.y/e.y),n&&r.rotate(-n),r.translate(o.negate()),this.transform(r),i&&(i.scaling=t,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.initialize.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var n=this._parent,i=[];n;){if(!n._globalMatrix){t=null;for(var r=0,o=i.length;r<o;r++)i[r]._globalMatrix=null;break}i.push(n),n=n._parent}return t||(t=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&t.prepend(n.getGlobalMatrix(!0))),e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof L)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return c.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(T.NO_INSERT),n=this._children,i=c.pick(e?e.insert:a,e===a||!0===e),r=c.pick(e?e.deep:a,!0);n&&t.copyAttributes(this),n&&!r||t.copyContent(this),n||t.copyAttributes(this),i&&t.insertAbove(this);var o=this._name,s=this._parent;if(o&&s){n=s._children;for(var l=o,u=1;n[o];)o=l+" "+u++;o!==l&&t.setName(o)}return t},copyContent:function(e){for(var t=e._children,n=0,i=t&&t.length;n<i;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,r=n.length;i<r;i++){var o=n[i];e.hasOwnProperty(o)&&(this[o]=e[o])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var s=e._data,a=e._name;this._data=s?c.clone(s):null,a&&this.setName(a)},rasterize:function(e,t){var n=this.getStrokeBounds(),i=(e||this.getView().getResolution())/72,r=n.getTopLeft().floor(),o=n.getBottomRight().ceil(),s=new b(o.subtract(r)),l=new O(T.NO_INSERT);if(!s.isZero()){var u=le.getCanvas(s.multiply(i)),h=u.getContext("2d"),d=(new C).scale(i).translate(r.negate());h.save(),d.applyToContext(h),this.draw(h,new c({matrices:[d]})),h.restore(),l.setCanvas(u)}return l.transform((new C).translate(r.add(s.divide(2))).scale(1/i)),(t===a||t)&&l.insertAbove(this),l},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(y.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return x.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new B.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof T&&this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0}},new function(){function e(){var e=arguments;return this._hitTest(y.read(e),E.getOptions(e))}function t(){var e=arguments,t=y.read(e),n=E.getOptions(e),i=[];return this._hitTest(t,new c({all:i},n)),i}function n(e,t,n,i){var r=this._children;if(r)for(var o=r.length-1;o>=0;o--){var s=r[o],a=s!==i&&s._hitTest(e,t,n);if(a&&!t.all)return a}return null}return M.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var i=this._matrix,r=n?n.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),o=Math.max(t.tolerance,1e-12),s=t._tolerancePadding=new b(B._getStrokePadding(o,i._shiftless().invert()));if(!(e=i._inverseTransform(e))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(s.multiply(2))._containsPoint(e))return null;var a,l,u=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==c.hyphenate(this._class)||t.class&&!(this instanceof t.class)),h=t.match,d=this;function f(e){return e&&h&&!h(e)&&(e=null),e&&t.all&&t.all.push(e),e}function p(t,n){var i=n?a["get"+n]():d.getPosition();if(e.subtract(i).divide(s).length<=1)return new E(t,d,{name:n?c.hyphenate(n):t,point:i})}var g=t.position,m=t.center,v=t.bounds;if(u&&this._parent&&(g||m||v)){if((m||v)&&(a=this.getInternalBounds()),!(l=g&&p("position")||m&&p("center","Center"))&&v)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],w=0;w<8&&!l;w++)l=p("bounds",y[w]);l=f(l)}return l||(l=this._hitTestChildren(e,t,r)||u&&f(this._hitTestSelf(e,t,r,this.getStrokeScaling()?null:r._shiftless().invert()))||null),l&&l.point&&(l.point=i.transform(l.point)),l},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new E("fill",this)},matches:function(e,t){var n=typeof e;if("object"===n){for(var i in e)if(e.hasOwnProperty(i)&&!this.matches(i,e[i]))return!1;return!0}if("function"===n)return e(this);if("match"===e)return t(this);var r=/^(empty|editable)$/.test(e)?this["is"+c.capitalize(e)]():"type"===e?c.hyphenate(this._class):this[e];if("class"===e){if("function"==typeof t)return this instanceof t;r=this._class}if("function"==typeof t)return!!t(r);if(t){if(t.test)return t.test(r);if(c.isPlainObject(t))return function e(t,n){for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],o=n[i];if(c.isPlainObject(r)&&c.isPlainObject(o)){if(!e(r,o))return!1}else if(!c.equals(r,o))return!1}return!0}(t,r)}return c.equals(r,t)},getItems:function(e){return T._getItems(this,e,this._matrix)},getItem:function(e){return T._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,n,i,r,o){if(!r){var s="object"==typeof n&&n,a=s&&s.overlapping,l=s&&s.inside,u=(y=a||l)&&x.read([y]);r={items:[],recursive:s&&!1!==s.recursive,inside:!!l,overlapping:!!a,rect:u,path:a&&new B.Rectangle({rectangle:u,insert:!1})},s&&(n=c.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var h=t._children,d=r.items;i=(u=r.rect)&&(i||new C);for(var f=0,p=h&&h.length;f<p;f++){var g=h[f],m=i&&i.appended(g._matrix),v=!0;if(u){var y=g.getBounds(m);if(!u.intersects(y))continue;u.contains(y)||r.overlapping&&(y.contains(u)||r.path.intersects(g,m))||(v=!1)}if(v&&g.matches(n)&&(d.push(g),o))break;if(!1!==r.recursive&&e(g,n,m,r,o),o&&d.length>0)break}return d}}},{importJSON:function(e){var t=c.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(a,e)},insertChild:function(e,t){var n=t?this.insertChildren(e,[t]):null;return n&&n[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var n=this._children;if(n&&t&&t.length>0){for(var i={},r=(t=c.slice(t)).length-1;r>=0;r--){var o=(u=t[r])&&u._id;!u||i[o]?t.splice(r,1):(u._remove(!1,!0),i[o]=!0)}c.splice(n,t,e,0);for(var s=this._project,a=s._changes,l=(r=0,t.length);r<l;r++){var u,h=(u=t[r])._name;u._parent=this,u._setProject(s,!0),h&&u.setName(h),a&&u._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var n=e&&e._getOwner(),i=e!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(e._index+t,i)),i},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(a,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(a,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&1===t.length){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,i=this._name,r=n[i],o=r?r.indexOf(this):-1;-1!==o&&(t[i]==this&&delete t[i],r.splice(o,1),r.length?t[i]=r[0]:delete n[i])}},_remove:function(e,t){var n=this._getOwner(),i=this._project,r=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=r&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),c.splice(n._children,null,r,1)),this._installEvents(!1),e&&i._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=c.pick(t,this._children.length);for(var n=c.splice(this._children,null,e,t-e),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,n=t?t.length:0;if(e){for(var i=0;i<n;i++)if(!t[i].isEmpty(e))return!1;return!0}return!n},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(e){var t=[];do{t.unshift(e)}while(e=e._parent);return t}for(var n=t(this),i=t(e),r=0,o=Math.min(n.length,i.length);r<o;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(e){return-1===this._getOrder(e)},isBelow:function(e){return 1===this._getOrder(e)},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return!!e&&e.isDescendant(this)},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},c.each(["rotate","scale","shear","skew"],(function(e){var t="rotate"===e;this[e]=function(){var n=arguments,i=(t?c:y).read(n),r=y.read(n,0,{readNull:!0});return this.transform((new C)[e](i,r||this.getPosition(!0)))}}),{translate:function(){var e=new C;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n){var i=this._matrix,r=e&&!e.isIdentity(),o=n&&this._canApplyMatrix||this._applyMatrix&&(r||!i.isIdentity()||t&&this._children);if(!r&&!o)return this;if(r){!e.isInvertible()&&i.isInvertible()&&(i._backup=i.getValues()),i.prepend(e,!0);var s=this._style,a=s.getFillColor(!0),l=s.getStrokeColor(!0);a&&a.transform(e),l&&l.transform(e)}if(o&&(o=this._transformContent(i,t,n))){var u=this._pivot;u&&i._transformPoint(u,u,!0),i.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,h=this._position;(r||o)&&this._changed(25);var d=r&&c&&e.decompose();if(d&&d.skewing.isZero()&&d.rotation%90==0){for(var f in c){var p=c[f];if(p.nonscaling)delete c[f];else if(o||!p.internal){var g=p.rect;e._transformBounds(g,g)}}this._bounds=c;var m=c[this._getBoundsCacheKey(this._boundsOptions||{})];m&&(this._position=this._getPositionFromBounds(m.rect))}else r&&h&&this._pivot&&(this._position=e._transformPoint(h,h));return this},_transformContent:function(e,t,n){var i=this._children;if(i){for(var r=0,o=i.length;r<o;r++)i[r].transform(e,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(y.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(y.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(y.read(arguments))},localToParent:function(){return this._matrix._transformPoint(y.read(arguments))},fitBounds:function(e,t){e=x.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=e.height/e.width,o=(t?i>r:i<r)?e.width/n.width:e.height/n.height,s=new x(new y,new b(n.width*o,n.height*o));s.setCenter(e.getCenter()),this.setBounds(s)}}),{_setStyles:function(e,t,n){var i=this._style,r=this._matrix;if(i.hasFill()&&(e.fillStyle=i.getFillColor().toCanvasStyle(e,r)),i.hasStroke()){e.strokeStyle=i.getStrokeColor().toCanvasStyle(e,r),e.lineWidth=i.getStrokeWidth();var o=i.getStrokeJoin(),s=i.getStrokeCap(),a=i.getMiterLimit();if(o&&(e.lineJoin=o),s&&(e.lineCap=s),a&&(e.miterLimit=a),de.support.nativeDash){var l=i.getDashArray(),u=i.getDashOffset();l&&l.length&&("setLineDash"in e?(e.setLineDash(l),e.lineDashOffset=u):(e.mozDash=l,e.mozDashOffset=u))}}if(i.hasShadow()){var c=t.pixelRatio||1,h=n._shiftless().prepend((new C).scale(c,c)),d=h.transform(new y(i.getShadowBlur(),0)),f=h.transform(this.getShadowOffset());e.shadowColor=i.getShadowColor().toCanvasStyle(e),e.shadowBlur=d.getLength(),e.shadowOffsetX=f.x,e.shadowOffsetY=f.y}},draw:function(e,t,n){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var i=t.matrices,r=t.viewMatrix,o=this._matrix,s=i[i.length-1].appended(o);if(s.isInvertible()){r=r?r.appended(s):s,i.push(s),t.updateMatrix&&(this._globalMatrix=s);var a,l,u,c=this._blendMode,h=this._opacity,d="normal"===c,f=ue.nativeModes[c],p=d&&1===h||t.dontStart||t.clip||(f||d&&h<1)&&this._canComposite(),g=t.pixelRatio||1;if(!p){var m=this.getStrokeBounds(r);if(!m.width||!m.height)return void i.pop();u=t.offset,l=t.offset=m.getTopLeft().floor(),a=e,e=le.getContext(m.getSize().ceil().add(1).multiply(g)),1!==g&&e.scale(g,g)}e.save();var v=n?n.appended(o):this._canScaleStroke&&!this.getStrokeScaling(!0)&&r,y=!p&&t.clipItem,w=!v||y;if(p?(e.globalAlpha=h,f&&(e.globalCompositeOperation=c)):w&&e.translate(-l.x,-l.y),w&&(p?o:r).applyToContext(e),y&&t.clipItem.draw(e,t.extend({clip:!0})),v){e.setTransform(g,0,0,g,0,0);var b=t.offset;b&&e.translate(-b.x,-b.y)}this._draw(e,t,r,v),e.restore(),i.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),p||(ue.process(c,e,a,h,l.subtract(u).multiply(g)),le.release(e),t.offset=u)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof H)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,i,r){var o=this._selection,s=1&o,a=2&o||s&&this._selectBounds,l=4&o;if(this._drawSelected||(s=!1),(s||a||l)&&this._isUpdated(r)){var u,c=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),h=t.appended(this.getGlobalMatrix(!0)),d=n/2;if(e.strokeStyle=e.fillStyle=c?c.toCanvasStyle(e):"#009dec",s&&this._drawSelected(e,h,i),l){var f=this.getPosition(!0),p=this._parent,g=p?p.localToGlobal(f):f,m=g.x,v=g.y;e.beginPath(),e.arc(m,v,d,0,2*Math.PI,!0),e.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],w=d,b=n+1,_=0;_<4;_++){var x=y[_],k=x[0],C=x[1];e.moveTo(m+k*w,v+C*w),e.lineTo(m+k*b,v+C*b),e.stroke()}}if(a){var S=h._transformCorners(this.getInternalBounds());for(e.beginPath(),_=0;_<8;_++)e[_?"lineTo":"moveTo"](S[_],S[++_]);for(e.closePath(),e.stroke(),_=0;_<8;_++)e.fillRect(S[_]-d,S[++_]-d,n,n)}}},_canComposite:function(){return!1}},c.each(["down","drag","up","move"],(function(e){this["removeOn"+c.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}}),{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}}),{tween:function(e,t,n){n||(n=t,t=e,e=null,n||(n=t,t=null));var i=n&&n.easing,r=n&&n.start,o=null!=n&&("number"==typeof n?n:n.duration),s=new se(this,e,t,o,i,r);return o&&this.on("frame",(function e(t){s._handleFrame(1e3*t.time),s.running||this.off("frame",e)})),s},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),z=T.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function e(t){e.base.call(this,t),2050&t&&(this._clipItem=a)},_getClipItem:function(){var e=this._clipItem;if(e===a){e=null;for(var t=this._children,n=0,i=t.length;n<i;n++)if(t[n]._clipMask){e=t[n];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,n){var i=this._getClipItem();return i?i._getCachedBounds(i._matrix.prepended(t),c.set({},n,{stroke:!1})):e.base.call(this,t,n)},_hitTestChildren:function e(t,n,i){var r=this._getClipItem();return(!r||r.contains(t))&&e.base.call(this,t,n,i,r)},_draw:function(e,t){var n=t.clip,i=!n&&this._getClipItem();t=t.extend({clipItem:i,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):i&&i.draw(e,t.extend({clip:!0}));for(var r=this._children,o=0,s=r.length;o<s;o++){var a=r[o];a!==i&&a.draw(e,t)}}}),L=z.extend({_class:"Layer",initialize:function(){z.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function e(){return this._parent?e.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),A=T.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e,t){this._initialize(e,t)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&c.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new _(e.width,e.height,this,"setSize")},setSize:function(){var e=b.read(arguments);if(this._size){if(!this._size.equals(e)){var t=this._type,n=e.width,i=e.height;"rectangle"===t?this._radius.set(b.min(this._radius,e.divide(2).abs())):"circle"===t?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===t&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=e.clone()},getRadius:function(){var e=this._radius;return"circle"===this._type?e:new _(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if("circle"===t){if(e===this._radius)return;var n=2*e;this._radius=e,this._size._set(n,n)}else if(e=b.read(arguments),this._radius){if(this._radius.equals(e))return;this._radius.set(e),"rectangle"===t?(n=b.max(this._size,e.multiply(2)),this._size.set(n)):"ellipse"===t&&this._size._set(2*e.width,2*e.height)}else this._radius=e.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new(B[c.capitalize(this._type)])({center:new y,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),de.settings.applyMatrix&&t.setApplyMatrix(!0),(e===a||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,n,i){var r=this._style,o=r.hasFill(),s=r.hasStroke(),a=t.dontFinish||t.clip,l=!i;if(o||s||a){var u=this._type,c=this._radius,h="circle"===u;if(t.dontStart||e.beginPath(),l&&h)e.arc(0,0,c,0,2*Math.PI,!0);else{var d=h?c:c.width,f=h?c:c.height,p=this._size,g=p.width,m=p.height;if(l&&"rectangle"===u&&0===d&&0===f)e.rect(-g/2,-m/2,g,m);else{var v=g/2,y=m/2,w=.44771525016920644,b=d*w,_=f*w,x=[-v,-y+f,-v,-y+_,-v+b,-y,-v+d,-y,v-d,-y,v-b,-y,v,-y+_,v,-y+f,v,y-f,v,y-_,v-b,y,v-d,y,-v+d,y,-v+b,y,-v,y-_,-v,y-f];i&&i.transform(x,x,32),e.moveTo(x[0],x[1]),e.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]),v!==d&&e.lineTo(x[8],x[9]),e.bezierCurveTo(x[10],x[11],x[12],x[13],x[14],x[15]),y!==f&&e.lineTo(x[16],x[17]),e.bezierCurveTo(x[18],x[19],x[20],x[21],x[22],x[23]),v!==d&&e.lineTo(x[24],x[25]),e.bezierCurveTo(x[26],x[27],x[28],x[29],x[30],x[31])}}e.closePath()}a||!o&&!s||(this._setStyles(e,t,n),o&&(e.fill(r.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),s&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new x(this._size).setCenter(0,0),i=this._style,r=t.stroke&&i.hasStroke()&&i.getStrokeWidth();return e&&(n=e._transformBounds(n)),r?n.expand(B._getStrokePadding(r,this._getStrokeMatrix(e,t))):n}},new function(){function e(e,t,n){var i=e._radius;if(!i.isZero())for(var r=e._size.divide(2),o=1;o<=4;o++){var s=new y(o>1&&o<4?-1:1,o>2?-1:1),a=s.multiply(r),l=a.subtract(s.multiply(i));if(new x(n?a.add(s.multiply(n)):a,l).contains(t))return{point:l,quadrant:o}}}function t(e,t,n,i){var r=e.divide(t);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(t).divide(n).length<=1}return{_contains:function t(n){if("rectangle"===this._type){var i=e(this,n);return i?n.subtract(i.point).divide(this._radius).getLength()<=1:t.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r,o,s){var a=!1,l=this._style,u=r.stroke&&l.hasStroke(),c=r.fill&&l.hasFill();if(u||c){var h=this._type,d=this._radius,f=u?l.getStrokeWidth()/2:0,p=r._tolerancePadding.add(B._getStrokePadding(f,!l.getStrokeScaling()&&s));if("rectangle"===h){var g=p.multiply(2),m=e(this,i,g);if(m)a=t(i.subtract(m.point),d,p,m.quadrant);else{var v=new x(this._size).setCenter(0,0),y=v.expand(g),w=v.expand(g.negate());a=y._containsPoint(i)&&!w._containsPoint(i)}}else a=t(i,d,p)}return a?new E(u?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function e(e,t,n,i,r){var o=c.create(A.prototype);return o._type=e,o._size=n,o._radius=i,o._initialize(c.getNamed(r),t),o}return{Circle:function(){var t=arguments,n=y.readNamed(t,"center"),i=c.readNamed(t,"radius");return e("circle",n,new b(2*i),i,t)},Rectangle:function(){var t=arguments,n=x.readNamed(t,"rectangle"),i=b.min(b.readNamed(t,"radius"),n.getSize(!0).divide(2));return e("rectangle",n.getCenter(!0),n.getSize(!0),i,t)},Ellipse:function(){var t=arguments,n=A._readEllipse(t),i=n.radius;return e("ellipse",n.center,i.multiply(2),i,t)},_readEllipse:function(e){var t,n;if(c.hasNamed(e,"radius"))t=y.readNamed(e,"center"),n=b.readNamed(e,"radius");else{var i=x.readNamed(e,"rectangle");t=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:t,radius:n}}}}}),O=T.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:!0,beans:!0,initialize:function(e,t){if(!this._initialize(e,t!==a&&y.read(arguments))){var n,i=typeof e,r="string"===i?u.getElementById(e):"object"===i?e:null;if(r&&r!==T.NO_INSERT)if(r.getContext||null!=r.naturalHeight)n=r;else if(r){var o=b.read(arguments);o.isZero()||(n=le.getCanvas(o))}n?this.setImage(n):this.setSource(e)}this._size||(this._size=new b,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var i=le.getCanvas(e._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new _(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(){var e=b.read(arguments);if(!e.equals(this._size))if(e.width>0&&e.height>0){var t=this.getElement();this._setImage(le.getCanvas(e)),t&&this.getContext(!0).drawImage(t,0,0,e.width,e.height)}else this._canvas&&le.release(this._canvas),this._size=e.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||0===e.width&&0===e.height},getResolution:function(){var e=this._matrix,t=new y(0,0).transform(e),n=new y(1,0).transform(e).subtract(t),i=new y(0,1).transform(e).subtract(t);return new b(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function n(e){var n=t.getView(),i=e&&e.type||"load";n&&t.responds(i)&&(de=n._scope,t.emit(i,new ee(e)))}this._setImage(e),this._loaded?setTimeout(n,0):e&&Y.add(e,{load:function(i){t._setImage(e),n(i)},error:n})},_setImage:function(e){this._canvas&&le.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new b(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=le.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){le.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new s.Image,n=this._crossOrigin;n&&(t.crossOrigin=n),e&&(t.src=e),this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing=e,this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=x.read(arguments),t=le.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=x.read(arguments),t=new O(T.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=y.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof F?(n=e,t=e.getBounds()):"object"==typeof e&&("width"in e?t=new x(e):"x"in e&&(t=new x(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var i=Math.min(t.width,32),r=Math.min(t.height,32),o=O._sampleContext;o?o.clearRect(0,0,33,33):o=O._sampleContext=le.getContext(new b(32)),o.save();var s=(new C).scale(i/t.width,r/t.height).translate(-t.x,-t.y);s.applyToContext(o),n&&n.draw(o,new c({clip:!0,matrices:[s]})),this._matrix.applyToContext(o);var a=this.getElement(),l=this._size;a&&o.drawImage(a,-l.width/2,-l.height/2),o.restore();for(var u=o.getImageData(.5,.5,Math.ceil(i),Math.ceil(r)).data,h=[0,0,0],d=0,f=0,p=u.length;f<p;f+=4){var g=u[f+3];d+=g,g/=255,h[0]+=u[f]*g,h[1]+=u[f+1]*g,h[2]+=u[f+2]*g}for(f=0;f<3;f++)h[f]/=d;return d?G.read(h):null},getPixel:function(){var e=y.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new G("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=y.read(e),n=G.read(e),i=n._convert("rgb"),r=n._alpha,o=this.getContext(!0),s=o.createImageData(1,1),a=s.data;a[0]=255*i[0],a[1]=255*i[1],a[2]=255*i[2],a[3]=null!=r?255*r:255,o.putImageData(s,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=b.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=x.read(arguments);return e.isEmpty()&&(e=new x(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},setImageData:function(e){var t=y.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},_getBounds:function(e,t){var n=new x(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new E("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,n){var i=this.getElement();i&&i.width>0&&i.height>0&&(e.globalAlpha=this._opacity,this._setStyles(e,t,n),X.setPrefixed(e,"imageSmoothingEnabled",this._smoothing),e.drawImage(i,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),P=T.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,t){this._initialize(e,t!==a&&y.read(arguments,1))||this.setDefinition(e instanceof I?e:new I(e))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n){var i=t.extend({all:!1}),r=this._definition._item._hitTest(e,i,n);return r&&(r.item=this),r},_draw:function(e,t){this._definition._item.draw(e,t)}}),I=c.extend({_class:"SymbolDefinition",initialize:function(e,t){this._id=v.get(),this.project=de.project,e&&this.setItem(e,t)},_serialize:function(e,t){return t.add(this,(function(){return c.serialize([this._class,this._item],e,!1,t)}))},_changed:function(e){8&e&&T._clearBoundsCache(this),1&e&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new y),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new P(this,e)},clone:function(){return new I(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),E=c.extend({_class:"HitResult",initialize:function(e,t,n){this.type=e,this.item=t,n&&this.inject(n)},statics:{getOptions:function(e){var t=e&&c.read(e);return new c({type:null,tolerance:de.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),j=c.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(e,t,n,i,r,o){var s,l,u,c,h=arguments.length;h>0&&(null==e||"object"==typeof e?1===h&&e&&"point"in e?(s=e.point,l=e.handleIn,u=e.handleOut,c=e.selection):(s=e,l=t,u=n,c=i):(s=[e,t],l=n!==a?[n,i]:null,u=r!==a?[r,o]:null)),new N(s,this,"_point"),new N(l,this,"_handleIn"),new N(u,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(e,t){var n=this._point,i=this._selection,r=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&r.push(i),c.serialize(r,e,!0,t)},_changed:function(e){var t=this._path;if(t){var n,i=t._curves,r=this._index;i&&(e&&e!==this._point&&e!==this._handleIn||!(n=r>0?i[r-1]:t._closed?i[i.length-1]:null)||n._changed(),e&&e!==this._point&&e!==this._handleOut||!(n=i[r])||n._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(y.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(y.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(y.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(257))},_changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(7&this._selection)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==a?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new R(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,n){var i=e||{},r=i.type,o=i.factor,s=this.getPrevious(),l=this.getNext(),u=(s||this)._point,c=this._point,h=(l||this)._point,d=u.getDistance(c),f=c.getDistance(h);if(r&&"catmull-rom"!==r){if("geometric"!==r)throw new Error("Smoothing method '"+r+"' not supported.");if(s&&l){var p=u.subtract(h),g=o===a?.4:o,m=g*d/(d+f);t||this.setHandleIn(p.multiply(m)),n||this.setHandleOut(p.multiply(m-g))}}else{var v=o===a?.5:o,w=Math.pow(d,v),b=w*w,_=Math.pow(f,v),x=_*_;if(!t&&s){var k=2*x+3*_*w+b,C=3*_*(_+w);this.setHandleIn(0!==C?new y((x*u._x+k*c._x-b*h._x)/C-c._x,(x*u._y+k*c._y-b*h._y)/C-c._y):new y)}!n&&l&&(k=2*b+3*w*_+x,C=3*w*(w+_),this.setHandleOut(0!==C?new y((b*h._x+k*c._x-x*u._x)/C-c._x,(b*h._y+k*c._y-x*u._y)/C-c._y):new y))}},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e.clone();e.set(t),t.set(n)},reversed:function(){return new j(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new j(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,n){var i=1-n,r=n,o=e._point,s=t._point,a=e._handleIn,l=t._handleIn,u=t._handleOut,c=e._handleOut;this._point._set(i*o._x+r*s._x,i*o._y+r*s._y,!0),this._handleIn._set(i*a._x+r*l._x,i*a._y+r*l._y,!0),this._handleOut._set(i*c._x+r*u._x,i*c._y+r*u._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,o=n&&this._handleOut.isZero()?null:this._handleOut,s=i._x,a=i._y,l=2;return t[0]=s,t[1]=a,r&&(t[l++]=r._x+s,t[l++]=r._y+a),o&&(t[l++]=o._x+s,t[l++]=o._y+a),e&&(e._transformCoordinates(t,t,l/2),s=t[0],a=t[1],n?(i._x=s,i._y=a,l=2,r&&(r._x=t[l++]-s,r._y=t[l++]-a),o&&(o._x=t[l++]-s,o._y=t[l++]-a)):(r||(t[l++]=s,t[l++]=a),o||(t[l++]=s,t[l++]=a))),t}}),N=y.extend({initialize:function(e,t,n){var i,r,o;if(e)if((i=e[0])!==a)r=e[1];else{var s=e;(i=s.x)===a&&(i=(s=y.read(arguments)).x),r=s.y,o=s.selected}else i=r=0;this._x=i,this._y=r,this._owner=t,t[n]=this,o&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=m.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),D=c.extend({_class:"Curve",beans:!0,initialize:function(e,t,n,i,r,o,s,a){var l,u,c,h,d,f,p=arguments.length;3===p?(this._path=e,l=t,u=n):p?1===p?"segment1"in e?(l=new j(e.segment1),u=new j(e.segment2)):"point1"in e?(c=e.point1,d=e.handle1,f=e.handle2,h=e.point2):Array.isArray(e)&&(c=[e[0],e[1]],h=[e[6],e[7]],d=[e[2]-e[0],e[3]-e[1]],f=[e[4]-e[6],e[5]-e[7]]):2===p?(l=new j(e),u=new j(t)):4===p?(c=e,d=t,f=n,h=i):8===p&&(c=[e,t],h=[s,a],d=[n-e,i-t],f=[r-s,o-a]):(l=new j,u=new j),this._segment1=l||new j(c,null,d),this._segment2=u||new j(h,f,null)},_serialize:function(e,t){return c.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=a},clone:function(){return new D(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return D.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;(e=t.remove())&&this._segment1._handleOut.set(n)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(y.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(y.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(y.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(y.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return D.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;n<8;n+=2)t.push(new y(e[n],e[n+1]));return t}},{getLength:function(){return null==this._length&&(this._length=D.getLength(this.getValues(),0,1)),this._length},getArea:function(){return D.getArea(this.getValues())},getLine:function(){return new S(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new D(D.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return D.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var n=null;if(e>=1e-8&&e<=1-1e-8){var i=D.subdivide(this.getValues(),e),r=i[0],o=i[1],s=t||this.hasHandles(),a=this._segment1,l=this._segment2,u=this._path;s&&(a._handleOut._set(r[2]-r[0],r[3]-r[1]),l._handleIn._set(o[4]-o[6],o[5]-o[7]));var c=r[6],h=r[7],d=new j(new y(c,h),s&&new y(r[4]-c,r[5]-h),s&&new y(o[2]-c,o[3]-h));u?(u.insert(a._index+1,d),n=this.getNext()):(this._segment2=d,this._changed(),n=new D(d,l))}return n},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===a?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===a?.5:t?e:this.getTimeAt(e))},reversed:function(){return new D(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,n,i){var r=e._point,o=e._handleOut,s=t._handleIn,a=t._point,l=r.x,u=r.y,c=a.x,h=a.y,d=i?[l,u,l,u,c,h,c,h]:[l,u,l+o._x,u+o._y,c+s._x,h+s._y,c,h];return n&&n._transformCoordinates(d,d,4),d},subdivide:function(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7];t===a&&(t=.5);var h=1-t,d=h*n+t*r,f=h*i+t*o,p=h*r+t*s,g=h*o+t*l,m=h*s+t*u,v=h*l+t*c,y=h*d+t*p,w=h*f+t*g,b=h*p+t*m,_=h*g+t*v,x=h*y+t*b,k=h*w+t*_;return[[n,i,d,f,y,w,x,k],[x,k,b,_,m,v,u,c]]},getMonoCurves:function(e,t){var n=[],i=t?0:1,r=e[i+0],o=e[i+2],s=e[i+4],a=e[i+6];if(r>=o==o>=s&&o>=s==s>=a||D.isStraight(e))n.push(e);else{var l=3*(o-s)-r+a,u=2*(r+s)-4*o,c=o-r,h=[],d=m.solveQuadratic(l,u,c,h,1e-8,1-1e-8);if(d){h.sort();var f=h[0],p=D.subdivide(e,f);n.push(p[0]),d>1&&(f=(h[1]-f)/(1-f),p=D.subdivide(p[1],f),n.push(p[0])),n.push(p[1])}else n.push(e)}return n},solveCubic:function(e,t,n,i,r,o){var s=e[t],a=e[t+2],l=e[t+4],u=e[t+6],c=0;if(!(s<n&&u<n&&a<n&&l<n||s>n&&u>n&&a>n&&l>n)){var h=3*(a-s),d=3*(l-a)-h,f=u-s-h-d;c=m.solveCubic(f,d,h,s-n,i,r,o)}return c},getTimeOf:function(e,t){var n=new y(e[0],e[1]),i=new y(e[6],e[7]);if(null===(t.isClose(n,1e-12)?0:t.isClose(i,1e-12)?1:null))for(var r=[t.x,t.y],o=[],s=0;s<2;s++)for(var a=D.solveCubic(e,s,r[s],o,0,1),l=0;l<a;l++){var u=o[l];if(t.isClose(D.getPoint(e,u),1e-7))return u}return t.isClose(n,1e-7)?0:t.isClose(i,1e-7)?1:null},getNearestTime:function(e,t){if(D.isStraight(e)){var n=e[0],i=e[1],r=e[6]-n,o=e[7]-i,s=r*r+o*o;if(0===s)return 0;var a=((t.x-n)*r+(t.y-i)*o)/s;return a<1e-12?0:a>.999999999999?1:D.getTimeOf(e,new y(n+a*r,i+a*o))}var l=1/0,u=0;function c(n){if(n>=0&&n<=1){var i=t.getDistance(D.getPoint(e,n),!0);if(i<l)return l=i,u=n,!0}}for(var h=0;h<=100;h++)c(h/100);for(var d=.005;d>1e-8;)c(u-d)||c(u+d)||(d/=2);return u},getPart:function(e,t,n){var i=t>n;if(i){var r=t;t=n,n=r}return t>0&&(e=D.subdivide(e,t)[1]),n<1&&(e=D.subdivide(e,(n-t)/(1-t))[0]),i?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=3*r-2*n-l,h=3*o-2*i-u,d=3*s-2*l-n,f=3*a-2*u-i;return Math.max(c*c,d*d)+Math.max(h*h,f*f)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7];return 3*((l-n)*(i+o)-(a-t)*(r+s)+r*(t-o)-i*(n-s)+l*(o+t/3)-a*(s+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),i=[0,0],r=0;r<2;r++)D._addBounds(e[r],e[r+2],e[r+4],e[r+6],r,0,t,n,i);return new x(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,i,r,o,s,a,l){function u(e,t){var n=e-t,i=e+t;n<s[r]&&(s[r]=n),i>a[r]&&(a[r]=i)}o/=2;var c=s[r]-o,h=a[r]+o;if(e<c||t<c||n<c||i<c||e>h||t>h||n>h||i>h)if(t<e!=t<i&&n<e!=n<i)u(e,o),u(i,o);else{var d=3*(t-n)-e+i,f=2*(e+n)-4*t,p=t-e,g=m.solveQuadratic(d,f,p,l);u(i,0);for(var v=0;v<g;v++){var y=l[v],w=1-y;1e-8<=y&&y<=1-1e-8&&u(w*w*w*e+3*w*w*y*t+3*w*y*y*n+y*y*y*i,o)}}}}},c.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=B[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}}),{}),c.each({isStraight:function(e,t,n,i){if(t.isZero()&&n.isZero())return!0;var r=i.subtract(e);if(r.isZero())return!1;if(r.isCollinear(t)&&r.isCollinear(n)){var o=new S(e,i);if(o.getDistance(e.add(t))<1e-7&&o.getDistance(i.add(n))<1e-7){var s=r.dot(r),a=r.dot(t)/s,l=r.dot(n)/s;return a>=0&&a<=1&&l<=0&&l>=-1}}return!1},isLinear:function(e,t,n,i){var r=i.subtract(e).divide(3);return t.equals(r)&&n.negate().equals(r)}},(function(e,t){this[t]=function(t){var n=this._segment1,i=this._segment2;return e(n._point,n._handleOut,i._handleIn,i._point,t)},this.statics[t]=function(t,n){var i=t[0],r=t[1],o=t[6],s=t[7];return e(new y(i,r),new y(t[2]-i,t[3]-r),new y(t[4]-o,t[5]-s),new y(o,s),n)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return null!=e&&e>=0&&e<=1?new R(this,e):null},getTimeAt:function(e,t){return D.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=y.read(arguments);return e.isZero()?[]:D.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(y.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return D.getTimeOf(this.getValues(),y.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=y.read(arguments),t=this.getValues(),n=D.getNearestTime(t,e),i=D.getPoint(t,n);return new R(this,n,i,null,e.getDistance(i))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e?e.getPoint():e}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return c.each(e,(function(e){this[e+"At"]=function(t,n){var i=this.getValues();return D[e](i,n?t:D.getTimeAt(i,t))},this[e+"AtTime"]=function(t){return D[e](this.getValues(),t)}}),{statics:{_evaluateMethods:e}})},new function(){function e(e){var t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],u=9*(i-o)+3*(a-t),c=6*(t+o)-12*i,h=3*(i-t),d=9*(r-s)+3*(l-n),f=6*(n+s)-12*r,p=3*(r-n);return function(e){var t=(u*e+c)*e+h,n=(d*e+f)*e+p;return Math.sqrt(t*t+n*n)}}function t(e,t){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(t-e))))}function n(e,t,n,i){if(null==t||t<0||t>1)return null;var r=e[0],o=e[1],s=e[2],a=e[3],l=e[4],u=e[5],c=e[6],h=e[7],d=m.isZero;d(s-r)&&d(a-o)&&(s=r,a=o),d(l-c)&&d(u-h)&&(l=c,u=h);var f,p,g=3*(s-r),v=3*(l-s)-g,w=c-r-g-v,b=3*(a-o),_=3*(u-a)-b,x=h-o-b-_;if(0===n)f=0===t?r:1===t?c:((w*t+v)*t+g)*t+r,p=0===t?o:1===t?h:((x*t+_)*t+b)*t+o;else{if(t<1e-8?(f=g,p=b):t>1-1e-8?(f=3*(c-l),p=3*(h-u)):(f=(3*w*t+2*v)*t+g,p=(3*x*t+2*_)*t+b),i){0===f&&0===p&&(t<1e-8||t>1-1e-8)&&(f=l-s,p=u-a);var k=Math.sqrt(f*f+p*p);k&&(f/=k,p/=k)}if(3===n){l=6*w*t+2*v,u=6*x*t+2*_;var C=Math.pow(f*f+p*p,1.5);f=0!==C?(f*u-p*l)/C:0,p=0}}return 2===n?new y(p,-f):new y(f,p)}return{statics:{classify:function(e){var t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=i*(n-u)+r*(l-t)+t*u-n*l,h=3*(o*(r-n)+s*(t-i)+i*n-r*t),d=h-c,f=d-c+(t*(u-s)+n*(o-l)+l*s-u*o),p=Math.sqrt(f*f+d*d+h*h),g=0!==p?1/p:0,v=m.isZero;function y(e,t,n){var i=t!==a,r=i&&t>0&&t<1,o=i&&n>0&&n<1;return!i||(r||o)&&("loop"!==e||r&&o)||(e="arch",r=o=!1),{type:e,roots:r||o?r&&o?t<n?[t,n]:[n,t]:[r?t:n]:null}}if(d*=g,h*=g,v(f*=g))return v(d)?y(v(h)?"line":"quadratic"):y("serpentine",h/(3*d));var w=3*d*d-4*f*h;if(v(w))return y("cusp",d/(2*f));var b=w>0?Math.sqrt(w/3):Math.sqrt(-w),_=2*f;return y(w>0?"serpentine":"loop",(d+b)/_,(d-b)/_)},getLength:function(n,i,r,o){if(i===a&&(i=0),r===a&&(r=1),D.isStraight(n)){var s=n;r<1&&(s=D.subdivide(s,r)[0],i/=r),i>0&&(s=D.subdivide(s,i)[1]);var l=s[6]-s[0],u=s[7]-s[1];return Math.sqrt(l*l+u*u)}return m.integrate(o||e(n),i,r,t(i,r))},getTimeAt:function(n,i,r){if(r===a&&(r=i<0?1:0),0===i)return r;var o=Math.abs,s=i>0,l=s?r:0,u=s?1:r,c=e(n),h=D.getLength(n,l,u,c),d=o(i)-h;if(o(d)<1e-12)return s?u:l;if(d>1e-12)return null;var f=i/h,p=0;return m.findRoot((function(e){return p+=m.integrate(c,r,e,t(r,e)),r=e,p-i}),c,r+f,l,u,32,1e-12)},getPoint:function(e,t){return n(e,t,0,!1)},getTangent:function(e,t){return n(e,t,1,!0)},getWeightedTangent:function(e,t){return n(e,t,1,!1)},getNormal:function(e,t){return n(e,t,2,!0)},getWeightedNormal:function(e,t){return n(e,t,2,!1)},getCurvature:function(e,t){return n(e,t,3,!1).x},getPeaks:function(e){var t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=3*i-t-3*o+e[6],l=3*t-6*i+3*o,u=-3*t+3*i,c=3*r-n-3*s+e[7],h=3*n-6*r+3*s,d=-3*n+3*r,f=[];return m.solveCubic(9*(a*a+c*c),9*(a*l+h*c),2*(l*l+h*h)+3*(u*a+d*c),u*l+h*d,f,1e-8,1-1e-8),f.sort()}}}},new function(){function e(e,t,n,i,r,o,s){var a=!s&&n.getPrevious()===r,l=!s&&n!==r&&n.getNext()===r;if(null!==i&&i>=(a?1e-8:0)&&i<=(l?1-1e-8:1)&&null!==o&&o>=(l?1e-8:0)&&o<=(a?1-1e-8:1)){var u=new R(n,i,null,s),c=new R(r,o,null,s);u._intersection=c,c._intersection=u,t&&!t(u)||R.insert(e,u,!0)}}function t(i,r,o,s,a,l,u,c,h,d,f,p,g){if(++h>=4096||++c>=40)return h;var m,v,y=r[0],w=r[1],b=r[6],_=r[7],x=S.getSignedDistance,k=x(y,w,b,_,r[2],r[3]),C=x(y,w,b,_,r[4],r[5]),M=k*C>0?3/4:4/9,T=M*Math.min(0,k,C),z=M*Math.max(0,k,C),L=x(y,w,b,_,i[0],i[1]),A=x(y,w,b,_,i[2],i[3]),O=x(y,w,b,_,i[4],i[5]),P=x(y,w,b,_,i[6],i[7]),I=function(e,t,n,i){var r,o=[0,e],s=[1/3,t],a=[2/3,n],l=[1,i],u=t-(2*e+i)/3,c=n-(e+2*i)/3;if(u*c<0)r=[[o,s,l],[o,a,l]];else{var h=u/c;r=[h>=2?[o,s,l]:h<=.5?[o,a,l]:[o,s,a,l],[o,l]]}return(u||c)<0?r.reverse():r}(L,A,O,P),E=I[0],j=I[1];if(0===k&&0===C&&0===L&&0===A&&0===O&&0===P||null==(m=n(E,j,T,z))||null==(v=n(E.reverse(),j.reverse(),T,z)))return h;var N=d+(f-d)*m,R=d+(f-d)*v;if(Math.max(g-p,R-N)<1e-9){var F=(N+R)/2,B=(p+g)/2;e(a,l,u?s:o,u?B:F,u?o:s,u?F:B)}else{i=D.getPart(i,m,v);var H=g-p;if(v-m>.8)if(R-N>H)F=(N+R)/2,h=t(r,(W=D.subdivide(i,.5))[0],s,o,a,l,!u,c,h,p,g,N,F),h=t(r,W[1],s,o,a,l,!u,c,h,p,g,F,R);else{var W;B=(p+g)/2,h=t((W=D.subdivide(r,.5))[0],i,s,o,a,l,!u,c,h,p,B,N,R),h=t(W[1],i,s,o,a,l,!u,c,h,B,g,N,R)}else h=0===H||H>=1e-9?t(r,i,s,o,a,l,!u,c,h,p,g,N,R):t(i,r,o,s,a,l,u,c,h,N,R,p,g)}return h}function n(e,t,n,r){return e[0][1]<n?i(e,!0,n):t[0][1]>r?i(t,!1,r):e[0][0]}function i(e,t,n){for(var i=e[0][0],r=e[0][1],o=1,s=e.length;o<s;o++){var a=e[o][0],l=e[o][1];if(t?l>=n:l<=n)return l===n?a:i+(n-r)*(a-i)/(l-r);i=a,r=l}return null}function r(e,t,n,i,r){var o=m.isZero;if(o(i)&&o(r)){var s=D.getTimeOf(e,new y(t,n));return null===s?[]:[s]}for(var a=Math.atan2(-r,i),l=Math.sin(a),u=Math.cos(a),c=[],h=[],d=0;d<8;d+=2){var f=e[d]-t,p=e[d+1]-n;c.push(f*u-p*l,f*l+p*u)}return D.solveCubic(c,1,0,h,0,1),h}function o(t,n,i,o,s,a,l){for(var u=n[0],c=n[1],h=r(t,u,c,n[6]-u,n[7]-c),d=0,f=h.length;d<f;d++){var p=h[d],g=D.getPoint(t,p),m=D.getTimeOf(n,g);null!==m&&e(s,a,l?o:i,l?m:p,l?i:o,l?p:m)}}function s(t,n,i,r,o,s){var a=S.intersect(t[0],t[1],t[6],t[7],n[0],n[1],n[6],n[7]);a&&e(o,s,i,D.getTimeOf(t,a),r,D.getTimeOf(n,a))}function a(n,i,r,a,l,c){var h=Math.min,d=Math.max;if(d(n[0],n[2],n[4],n[6])+1e-12>h(i[0],i[2],i[4],i[6])&&h(n[0],n[2],n[4],n[6])-1e-12<d(i[0],i[2],i[4],i[6])&&d(n[1],n[3],n[5],n[7])+1e-12>h(i[1],i[3],i[5],i[7])&&h(n[1],n[3],n[5],n[7])-1e-12<d(i[1],i[3],i[5],i[7])){var f=u(n,i);if(f)for(var p=0;p<2;p++){var g=f[p];e(l,c,r,g[0],a,g[1],!0)}else{var m=D.isStraight(n),v=D.isStraight(i),w=m&&v,b=m&&!v,_=l.length;if((w?s:m||v?o:t)(b?i:n,b?n:i,b?a:r,b?r:a,l,c,b,0,0,0,1,0,1),!w||l.length===_)for(p=0;p<4;p++){var x=p>>1,k=1&p,C=6*x,S=6*k,M=new y(n[C],n[C+1]),T=new y(i[S],i[S+1]);M.isClose(T,1e-12)&&e(l,c,r,x,a,k)}}}return l}function l(t,n,i,r){var o=D.classify(t);if("loop"===o.type){var s=o.roots;e(i,r,n,s[0],n,s[1])}return i}function u(e,t){function n(e){var t=e[6]-e[0],n=e[7]-e[1];return t*t+n*n}var i=Math.abs,r=S.getDistance,o=D.isStraight(e),s=D.isStraight(t),a=o&&s,l=n(e)<n(t),u=l?t:e,c=l?e:t,h=u[0],d=u[1],f=u[6]-h,p=u[7]-d;if(r(h,d,f,p,c[0],c[1],!0)<1e-7&&r(h,d,f,p,c[6],c[7],!0)<1e-7)!a&&r(h,d,f,p,u[2],u[3],!0)<1e-7&&r(h,d,f,p,u[4],u[5],!0)<1e-7&&r(h,d,f,p,c[2],c[3],!0)<1e-7&&r(h,d,f,p,c[4],c[5],!0)<1e-7&&(o=s=a=!0);else if(a)return null;if(o^s)return null;for(var g=[e,t],m=[],v=0;v<4&&m.length<2;v++){var w=1&v,b=1^w,_=v>>1,x=D.getTimeOf(g[w],new y(g[b][_?6:0],g[b][_?7:1]));if(null!=x){var k=w?[_,x]:[x,_];(!m.length||i(k[0]-m[0][0])>1e-8&&i(k[1]-m[0][1])>1e-8)&&m.push(k)}if(v>2&&!m.length)break}if(2!==m.length)m=null;else if(!a){var C=D.getPart(e,m[0][0],m[1][0]),M=D.getPart(t,m[0][1],m[1][1]);(i(M[2]-C[2])>1e-7||i(M[3]-C[3])>1e-7||i(M[4]-C[4])>1e-7||i(M[5]-C[5])>1e-7)&&(m=null)}return m}return{getIntersections:function(e){var t=this.getValues(),n=e&&e!==this&&e.getValues();return n?a(t,n,this,e,[]):l(t,this,[])},statics:{getOverlaps:u,getIntersections:function(e,t,n,i,r,o){var s=!t;s&&(t=e);for(var u=e.length,c=t.length,h=new Array(u),d=s?h:new Array(c),f=[],g=0;g<u;g++)h[g]=e[g].getValues(i);if(!s)for(g=0;g<c;g++)d[g]=t[g].getValues(r);for(var m=p.findCurveBoundsCollisions(h,d,1e-7),v=0;v<u;v++){var y=e[v],w=h[v];s&&l(w,y,f,n);var b=m[v];if(b)for(var _=0;_<b.length;_++){if(o&&f.length)return f;var x=b[_];if(!s||x>v){var k=t[x];a(w,d[x],y,k,f,n)}}}return f},getCurveLineIntersections:r,getTimesWithTangent:function(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=t.normalize(),h=c.x,d=c.y,f=3*l-9*s+9*r-3*n,p=3*u-9*a+9*o-3*i,g=6*s-12*r+6*n,v=6*a-12*o+6*i,y=3*r-3*n,w=3*o-3*i,b=2*f*d-2*p*h,_=[];if(Math.abs(b)<m.CURVETIME_EPSILON){if(0!=(b=f*v-p*g)){var x=-(f*w-p*y)/b;x>=0&&x<=1&&_.push(x)}}else{var k=(g*g-4*f*y)*d*d+(-2*g*v+4*p*y+4*f*w)*h*d+(v*v-4*p*w)*h*h,C=g*d-v*h;if(k>=0&&0!=b){var S=Math.sqrt(k),M=-(C+S)/b,T=(-C+S)/b;M>=0&&M<=1&&_.push(M),T>=0&&T<=1&&_.push(T)}}return _}}}}),R=c.extend({_class:"CurveLocation",initialize:function(e,t,n,i,r){if(t>=.99999999){var o=e.getNext();o&&(t=0,e=o)}this._setCurve(e),this._time=t,this._point=n||e.getPointAtTime(t),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),n=this.getTime();0===n?e=t._segment1:1===n?e=t._segment2:null!=n&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;function n(e){var n=e&&e.getCurve();if(n&&null!=(t._time=n.getTimeOf(t._point)))return t._setCurve(n),n}return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&null==t?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(null==e){e=0;var t=this.getPath(),n=this.getIndex();if(t&&null!=n)for(var i=t.getCurves(),r=0;r<n;r++)e+=i[r].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(null==e){var t=this.getCurve(),n=this.getTime();this._curveOffset=e=null!=n&&t&&t.getPartLength(0,n)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,n=e&&e.splitAtTime(this.getTime());return n&&this._setSegment(t.getLastSegment()),n},equals:function(e,t){var n=this===e;if(!n&&e instanceof R){var i=this.getCurve(),r=e.getCurve(),o=i._path;if(o===r._path){var s=Math.abs,a=s(this.getOffset()-e.getOffset()),l=!t&&this._intersection,u=!t&&e._intersection;n=(a<1e-7||o&&s(o.getLength()-a)<1e-7)&&(!l&&!u||l&&u&&l.equals(u,!0))}}return n},toString:function(){var e=[],t=this.getPoint(),n=g.instance;t&&e.push("point: "+t);var i=this.getIndex();null!=i&&e.push("index: "+i);var r=this.getTime();return null!=r&&e.push("time: "+n.number(r)),null!=this._distance&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),n=e.getTime(),i=t>=1e-8&&t<=1-1e-8,r=n>=1e-8&&n<=1-1e-8;if(i&&r)return!this.isTouching();var o=this.getCurve(),s=o&&t<1e-8?o.getPrevious():o,a=e.getCurve(),l=a&&n<1e-8?a.getPrevious():a;if(t>1-1e-8&&(o=o.getNext()),n>1-1e-8&&(a=a.getNext()),!(s&&o&&l&&a))return!1;var u=[];function c(e,t){var n=e.getValues(),i=D.classify(n).roots||D.getPeaks(n),r=i.length,o=D.getLength(n,t&&r?i[r-1]:0,!t&&r?i[0]:1);u.push(r?o:o/32)}function h(e,t,n){return t<n?e>t&&e<n:e>t||e<n}i||(c(s,!0),c(o,!1)),r||(c(l,!0),c(a,!1));var d=this.getPoint(),f=Math.min.apply(Math,u),p=i?o.getTangentAtTime(t):o.getPointAt(f).subtract(d),g=i?p.negate():s.getPointAt(-f).subtract(d),m=r?a.getTangentAtTime(n):a.getPointAt(f).subtract(d),v=r?m.negate():l.getPointAt(-f).subtract(d),y=g.getAngle(),w=p.getAngle(),b=v.getAngle(),_=m.getAngle();return!!(i?h(y,b,_)^h(w,b,_)&&h(y,_,b)^h(w,_,b):h(b,y,w)^h(_,y,w)&&h(b,w,y)^h(_,w,y))},hasOverlap:function(){return!!this._overlap}},c.each(D._evaluateMethods,(function(e){var t=e+"At";this[e]=function(){var e=this.getCurve(),n=this.getTime();return null!=n&&e&&e[t](n,!0)}}),{preserve:!0}),new function(){function e(e,t,n){var i=e.length,r=0,o=i-1;function s(n,r){for(var o=n+r;o>=-1&&o<=i;o+=r){var s=e[(o%i+i)%i];if(!t.getPoint().isClose(s.getPoint(),1e-7))break;if(t.equals(s))return s}return null}for(;r<=o;){var a,l=r+o>>>1,u=e[l];if(n&&(a=t.equals(u)?u:s(l,-1)||s(l,1)))return t._overlap&&(a._overlap=a._intersection._overlap=!0),a;var c=t.getPath(),h=u.getPath();(c!==h?c._id-h._id:t.getIndex()+t.getTime()-(u.getIndex()+u.getTime()))<0?o=l-1:r=l+1}return e.splice(r,0,t),t}return{statics:{insert:e,expand:function(t){for(var n=t.slice(),i=t.length-1;i>=0;i--)e(n,t[i]._intersection,!1);return n}}}}),F=T.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,n,i;if(c.isPlainObject(e)?(n=e.segments,t=e.pathData):Array.isArray(e)?n=e:"string"==typeof e&&(t=e),n){var r=n[0];i=r&&Array.isArray(r[0])}else t&&(i=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));return new(i?H:B)(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t,n,i,r=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),o=!1,s=new y,a=new y;function l(e,n){var i=+t[e];return o&&(i+=s[n]),i}function u(e){return new y(l(e,"x"),l(e+1,"y"))}this.clear();for(var c=0,h=r&&r.length;c<h;c++){var d=r[c],f=d[0],p=f.toLowerCase(),g=(t=d.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&t.length;switch(o=f===p,"z"!==n||/[mz]/.test(p)||this.moveTo(s),p){case"m":case"l":for(var m="m"===p,v=0;v<g;v+=2)this[m?"moveTo":"lineTo"](s=u(v)),m&&(a=s,m=!1);i=s;break;case"h":case"v":var w="h"===p?"x":"y";for(s=s.clone(),v=0;v<g;v++)s[w]=l(v,w),this.lineTo(s);i=s;break;case"c":for(v=0;v<g;v+=6)this.cubicCurveTo(u(v),i=u(v+2),s=u(v+4));break;case"s":for(v=0;v<g;v+=4)this.cubicCurveTo(/[cs]/.test(n)?s.multiply(2).subtract(i):s,i=u(v),s=u(v+2)),n=p;break;case"q":for(v=0;v<g;v+=4)this.quadraticCurveTo(i=u(v),s=u(v+2));break;case"t":for(v=0;v<g;v+=2)this.quadraticCurveTo(i=/[qt]/.test(n)?s.multiply(2).subtract(i):s,s=u(v)),n=p;break;case"a":for(v=0;v<g;v+=7)this.arcTo(s=u(v+5),new b(+t[v],+t[v+1]),+t[v+2],+t[v+4],+t[v+3]);break;case"z":this.closePath(1e-12),s=a}n=p}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!("evenodd"===this.getFillRule()?1&t.windingL||1&t.windingR:t.winding)},getIntersections:function(e,t,n,i){var r=this===e||!e,o=this._matrix._orNullIfIdentity(),s=r?o:(n||e._matrix)._orNullIfIdentity();return r||this.getBounds(o).intersects(e.getBounds(s),1e-12)?D.getIntersections(this.getCurves(),!r&&e.getCurves(),t,o,s,i):[]},getCrossings:function(e){return this.getIntersections(e,(function(e){return e.isCrossing()}))},getNearestLocation:function(){for(var e=y.read(arguments),t=this.getCurves(),n=1/0,i=null,r=0,o=t.length;r<o;r++){var s=t[r].getNearestLocation(e);s._distance<n&&(n=s._distance,i=s)}return i},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e?e.getPoint():e},interpolate:function(e,t,n){var i=!this._children,r=i?"_segments":"_children",o=e[r],s=t[r],a=this[r];if(!o||!s||o.length!==s.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var l=a.length,u=s.length;if(l<u)for(var c=i?j:B,h=l;h<u;h++)this.add(new c);else l>u&&this[i?"removeSegments":"removeChildren"](u,l);for(h=0;h<u;h++)a[h].interpolate(o[h],s[h],n);i&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var n=this._children||[this],i=e._children?e._children.slice():[e],r=n.length,o=i.length,s=[],a=0;t=!0;for(var l=p.findItemBoundsCollisions(n,i,m.GEOMETRIC_EPSILON),u=r-1;u>=0&&t;u--){var c=n[u];t=!1;var h=l[u];if(h)for(var d=h.length-1;d>=0&&!t;d--)c.compare(i[h[d]])&&(s[h[d]]||(s[h[d]]=!0,a++),t=!0)}t=t&&a===o}return t}}),B=F.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var t=arguments,n=Array.isArray(e)?"object"==typeof e[0]?e:t:!e||e.size!==a||e.x===a&&e.point===a?null:t;n&&n.length>0?this.setSegments(n):(this._curves=a,this._segmentSelection=0,n||"string"!=typeof e||(this.setPathData(e),e=null)),this._initialize(!n&&e)},_equals:function(e){return this._closed===e._closed&&c.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),8&t){if(this._length=this._area=a,32&t)this._version++;else if(this._curves)for(var n=0,i=this._curves.length;n<i;n++)this._curves[n]._changed()}else 64&t&&(this._bounds=a)},getStyle:function(){var e=this._parent;return(e instanceof H?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),n=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=a,n){var i=e[n-1];"boolean"==typeof i&&(this.setClosed(i),n--),this._add(j.readList(e,0,{},n))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var i=0;i<n;i++)e[i]=new D(this,t[i],t[i+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new D(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var n,i,r,o,s,a,l,u,c=this._segments,h=c.length,d=new g(t),f=new Array(6),p=!0,m=[];function v(t,c){if(t._transformCoordinates(e,f),n=f[0],i=f[1],p)m.push("M"+d.pair(n,i)),p=!1;else if(s=f[2],a=f[3],s===n&&a===i&&l===r&&u===o){if(!c){var h=n-r,g=i-o;m.push(0===h?"v"+d.number(g):0===g?"h"+d.number(h):"l"+d.pair(h,g))}}else m.push("c"+d.pair(l-r,u-o)+" "+d.pair(s-r,a-o)+" "+d.pair(n-r,i-o));r=n,o=i,l=f[4],u=f[5]}if(!h)return"";for(var y=0;y<h;y++)v(c[y]);return this._closed&&h>0&&(v(c[0],!0),m.push("z")),m.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,n=new Array(6),i=0,r=t.length;i<r;i++)t[i]._transformCoordinates(e,n,!0);return!0},_add:function(e,t){for(var n=this._segments,i=this._curves,r=e.length,o=null==t,s=(t=o?n.length:t,0);s<r;s++){var a=e[s];a._path&&(a=e[s]=a.clone()),a._path=this,a._index=t+s,a._selection&&this._updateSelection(a,0,a._selection)}if(o)c.push(n,e);else{n.splice.apply(n,[t,0].concat(e)),s=t+r;for(var l=n.length;s<l;s++)n[s]._index=s}if(i){var u=this._countCurves(),h=t>0&&t+r-1===u?t-1:t,d=h,f=Math.min(h+r,u);for(e._curves&&(i.splice.apply(i,[h,0].concat(e._curves)),d+=e._curves.length),s=d;s<f;s++)i.splice(s,0,new D(this,null,null));this._adjustCurves(h,f)}return this._changed(41),e},_adjustCurves:function(e,t){for(var n,i=this._segments,r=this._curves,o=e;o<t;o++)(n=r[o])._path=this,n._segment1=i[o],n._segment2=i[o+1]||i[0],n._changed();(n=r[this._closed&&!e?i.length-1:e-1])&&(n._segment2=i[e]||i[0],n._changed()),(n=r[t])&&(n._segment1=i[t],n._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&"number"!=typeof e?this._add(j.readList(t)):this._add([j.read(t)])[0]},insert:function(e,t){var n=arguments;return n.length>2&&"number"!=typeof t?this._add(j.readList(n,1),e):this._add([j.read(n,1)],e)[0]},addSegment:function(){return this._add([j.read(arguments)])[0]},insertSegment:function(e){return this._add([j.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(j.readList(e))},insertSegments:function(e,t){return this._add(j.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=c.pick(t,this._segments.length);var i=this._segments,r=this._curves,o=i.length,s=i.splice(e,t-e),a=s.length;if(!a)return s;for(var l=0;l<a;l++){var u=s[l];u._selection&&this._updateSelection(u,u._selection,0),u._index=u._path=null}l=e;for(var h=i.length;l<h;l++)i[l]._index=l;if(r){var d=e>0&&t===o+(this._closed?1:0)?e-1:e;for(l=(r=r.splice(d,a)).length-1;l>=0;l--)r[l]._path=null;n&&(s._curves=r.slice(1)),this._adjustCurves(d,d)}return this._changed(41),s},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(null==this._length){for(var e=this.getCurves(),t=0,n=0,i=e.length;n<i;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(null==e){var t=this._segments,n=this._closed;e=0;for(var i=0,r=t.length;i<r;i++){var o=i+1===r;e+=D.getArea(D.getValues(t[i],t[o?0:i+1],null,o&&!n))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===7*e},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){1&t||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,n=t.length,i=e?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)t[r]._selection=i},_updateSelection:function(e,t,n){e._selection=n,(this._segmentSelection+=n-t)>0&&this.setSelected(!0)},divideAt:function(e){var t,n=this.getLocationAt(e);return n&&(t=n.getCurve().divideAt(n.getCurveOffset()))?t._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),n=t&&t.index,i=t&&t.time;i>1-1e-8&&(n++,i=0);var r=this.getCurves();if(n>=0&&n<r.length){i>=1e-8&&r[n++].divideAtTime(i);var o,s=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),o=this):((o=new B(T.NO_INSERT)).insertAbove(this),o.copyAttributes(this)),o._add(s,0),this.addSegment(s[0]),o}return null},split:function(e,t){var n,i=t===a?e:(n=this.getCurves()[e])&&n.getLocationAtTime(t);return null!=i?this.splitAt(i):null},join:function(e,t){var n=t||0;if(e&&e!==this){var i=e._segments,r=this.getLastSegment(),o=e.getLastSegment();if(!o)return this;r&&r._point.isClose(o._point,n)&&e.reverse();var s=e.getFirstSegment();if(r&&r._point.isClose(s._point,n))r.setHandleOut(s._handleOut),this._add(i.slice(1));else{var a=this.getFirstSegment();a&&a._point.isClose(s._point,n)&&e.reverse(),o=e.getLastSegment(),a&&a._point.isClose(o._point,n)?(a.setHandleIn(o._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}e._closed&&this._add([i[0]]),e.remove()}var l=this.getFirstSegment(),u=this.getLastSegment();return l!==u&&l._point.isClose(u._point,n)&&(l.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,i=n?1e-7:0,r=t.length-1;r>=0;r--){var o=t[r];!o.hasHandles()&&(!o.hasLength(i)||n&&o.isCollinear(o.getNext()))&&o.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new W(this,e||.25,256,!0).parts,n=t.length,i=[],r=0;r<n;r++)i.push(new j(t[r].curve.slice(0,2)));!this._closed&&n>0&&i.push(new j(t[n-1].curve.slice(6))),this.setSegments(i)},simplify:function(e){var t=new V(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,n=e||{},i=n.type||"asymmetric",r=this._segments,o=r.length,s=this._closed;function l(e,n){var i=e&&e.index;if(null!=i){var r=e.path;if(r&&r!==t)throw new Error(e._class+" "+i+" of "+r+" is not part of "+t);n&&e instanceof D&&i++}else i="number"==typeof e?e:n;return Math.min(i<0&&s?i%o:i<0?i+o:i,o-1)}var u=s&&n.from===a&&n.to===a,c=l(n.from,0),h=l(n.to,o-1);if(c>h)if(s)c-=o;else{var d=c;c=h,h=d}if(/^(?:asymmetric|continuous)$/.test(i)){var f="asymmetric"===i,p=Math.min,g=h-c+1,m=g-1,v=u?p(g,4):1,y=v,w=v,b=[];if(s||(y=p(1,c),w=p(1,o-h-1)),(m+=y+w)<=1)return;for(var _=0,x=c-y;_<=m;_++,x++)b[_]=r[(x<0?x+o:x)%o]._point;var k=b[0]._x+2*b[1]._x,C=b[0]._y+2*b[1]._y,S=2,M=m-1,T=[k],z=[C],L=[S],A=[],O=[];for(_=1;_<m;_++){var P=_<M,I=P?4:f?2:7,E=P?4:f?3:8,j=P?2:f?0:1,N=(P||f?1:2)/S;S=L[_]=I-N,k=T[_]=E*b[_]._x+j*b[_+1]._x-N*k,C=z[_]=E*b[_]._y+j*b[_+1]._y-N*C}for(A[M]=T[M]/L[M],O[M]=z[M]/L[M],_=m-2;_>=0;_--)A[_]=(T[_]-A[_+1])/L[_],O[_]=(z[_]-O[_+1])/L[_];A[m]=(3*b[m]._x-A[M])/2,O[m]=(3*b[m]._y-O[M])/2,_=y;var R=m-w;for(x=c;_<=R;_++,x++){var F=r[x<0?x+o:x],B=F._point,H=A[_]-B._x,W=O[_]-B._y;(u||_<R)&&F.setHandleOut(H,W),(u||_>y)&&F.setHandleIn(-H,-W)}}else for(_=c;_<=h;_++)r[_<0?_+o:_].smooth(n,!u&&_===c,!u&&_===h)},toShape:function(e){if(!this._closed)return null;var t,n,i,r,o,s,l,u=this._segments;function c(e,t){var n=u[e],i=n.getNext(),r=u[t],o=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&o._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(o._point.subtract(r._point))}function h(e){var t=u[e],n=t.getNext(),i=t._handleOut,r=n._handleIn,o=.5522847498307936;if(i.isOrthogonal(r)){var s=t._point,a=n._point,l=new S(s,i,!0).intersect(new S(a,r,!0),!0);return l&&m.isZero(i.getLength()/l.subtract(s).getLength()-o)&&m.isZero(r.getLength()/l.subtract(a).getLength()-o)}return!1}function d(e,t){return u[e]._point.getDistance(u[t]._point)}if(!this.hasHandles()&&4===u.length&&c(0,2)&&c(1,3)&&(s=(o=u[1]).getPrevious(),l=o.getNext(),s._handleOut.isZero()&&o._handleIn.isZero()&&o._handleOut.isZero()&&l._handleIn.isZero()&&o._point.subtract(s._point).isOrthogonal(l._point.subtract(o._point)))?(t=A.Rectangle,n=new b(d(0,3),d(0,1)),r=u[1]._point.add(u[2]._point).divide(2)):8===u.length&&h(0)&&h(2)&&h(4)&&h(6)&&c(1,5)&&c(3,7)?(t=A.Rectangle,i=(n=new b(d(1,6),d(0,3))).subtract(new b(d(0,7),d(1,2))).divide(2),r=u[3]._point.add(u[4]._point).divide(2)):4===u.length&&h(0)&&h(1)&&h(2)&&h(3)&&(m.isZero(d(0,2)-d(1,3))?(t=A.Circle,i=d(0,2)/2):(t=A.Ellipse,i=new b(d(2,0)/2,d(3,1)/2)),r=u[1]._point),t){var f=this.getPosition(!0),p=new t({center:f,size:n,radius:i,insert:!1});return p.copyAttributes(this,!0),p._matrix.prepend(this._matrix),p.rotate(r.subtract(f).getAngle()+90),(e===a||e)&&p.insertAbove(this),p}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof H)return e.base.call(this,t);var n=this.getCurves(),i=t.getCurves(),r=n.length,o=i.length;if(!r||!o)return r==o;for(var s,a,l=n[0].getValues(),u=[],c=0,h=0,d=0;d<o;d++){var f=i[d].getValues();if(u.push(f),m=D.getOverlaps(l,f)){s=!d&&m[0][0]>0?o-1:d,a=m[0][1];break}}var p,g=Math.abs;for(f=u[s];l&&f;){var m;if((m=D.getOverlaps(l,f))&&g(m[0][0]-h)<1e-8){1===(h=m[1][0])&&(l=++c<r?n[c].getValues():null,h=0);var v=m[0][1];if(g(v-a)<1e-8){if(p||(p=[s,v]),1===(a=m[1][1])&&(++s>=o&&(s=0),f=u[s]||i[s].getValues(),a=0),!l)return p[0]===s&&p[1]===a;continue}}break}return!1},_hitTestSelf:function(e,t,n,i){var r,o,s,a,l,u,c=this,h=this.getStyle(),d=this._segments,f=d.length,p=this._closed,g=t._tolerancePadding,m=g,v=t.stroke&&h.hasStroke(),y=t.fill&&h.hasFill(),w=t.curves,b=v?h.getStrokeWidth()/2:y&&t.tolerance>0||w?0:null;function _(t,n){return e.subtract(t).divide(n).length<=1}function x(e,n,i){if(!t.selected||n.isSelected()){var r=e._point;if(n!==r&&(n=n.add(r)),_(n,m))return new E(i,c,{segment:e,point:n})}}function k(e,n){return(n||t.segments)&&x(e,e._point,"segment")||!n&&t.handles&&(x(e,e._handleIn,"handle-in")||x(e,e._handleOut,"handle-out"))}function C(e){a.add(e)}function S(t){var n,l=p||t._index>0&&t._index<f-1;return"round"===(l?r:o)?_(t._point,m):(a=new B({internal:!0,closed:!0}),l?t.isSmooth()||B._addBevelJoin(t,r,b,s,null,i,C,!0):"square"===o&&B._addSquareCap(t,o,b,null,i,C,!0),a.isEmpty()?void 0:a.contains(e)||(n=a.getNearestLocation(e))&&_(n.getPoint(),g))}if(null!==b&&(b>0?(r=h.getStrokeJoin(),o=h.getStrokeCap(),s=h.getMiterLimit(),m=m.add(B._getStrokePadding(b,i))):r=o="round"),!t.ends||t.segments||p){if(t.segments||t.handles){for(var M=0;M<f;M++){var T=k(d[M]);T&&(!u||T.point.getDistance(e)<u.point.getDistance(e))&&(u=T)}if(u)return u}}else if(u=k(d[0],!0)||k(d[f-1],!0))return u;if(null!==b){if(l=this.getNearestLocation(e)){var z=l.getTime();0===z||1===z&&f>1?S(l.getSegment())||(l=null):_(l.getPoint(),m)||(l=null)}if(!l&&"miter"===r&&f>1)for(M=0;M<f;M++){var L=d[M];if(e.getDistance(L._point)<=s*b&&S(L)){l=L.getLocation();break}}}return!l&&y&&this._contains(e)||l&&!v&&!w?new E("fill",this):l?new E(v?"stroke":"curve",this,{location:l,point:l.getPoint()}):null}},c.each(D._evaluateMethods,(function(e){this[e+"At"]=function(t){var n=this.getLocationAt(t);return n&&n[e]()}}),{beans:!1,getLocationOf:function(){for(var e=y.read(arguments),t=this.getCurves(),n=0,i=t.length;n<i;n++){var r=t[n].getLocationOf(e);if(r)return r}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if("number"==typeof e){for(var t=this.getCurves(),n=0,i=0,r=t.length;i<r;i++){var o=n,s=t[i];if((n+=s.getLength())>e)return s.getLocationAt(e-o)}if(t.length>0&&e<=this.getLength())return new R(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=y.read(arguments);if(e.isZero())return[];for(var t=[],n=0,i=this.getCurves(),r=0,o=i.length;r<o;r++){for(var s=i[r],a=s.getTimesWithTangent(e),l=0,u=a.length;l<u;l++){var c=n+s.getOffsetAtTime(a[l]);t.indexOf(c)<0&&t.push(c)}n+=s.length}return t}}),new function(){function e(e,t,n){var i,r,o,s,a,l,u,c,h=t._segments,d=h.length,f=new Array(6),p=!0;function g(t){if(n)t._transformCoordinates(n,f),i=f[0],r=f[1];else{var h=t._point;i=h._x,r=h._y}if(p)e.moveTo(i,r),p=!1;else{if(n)a=f[2],l=f[3];else{var d=t._handleIn;a=i+d._x,l=r+d._y}a===i&&l===r&&u===o&&c===s?e.lineTo(i,r):e.bezierCurveTo(u,c,a,l,i,r)}o=i,s=r,n?(u=f[4],c=f[5]):(d=t._handleOut,u=o+d._x,c=s+d._y)}for(var m=0;m<d;m++)g(h[m]);t._closed&&d>0&&g(h[0])}return{_draw:function(t,n,i,r){var o=n.dontStart,s=n.dontFinish||n.clip,a=this.getStyle(),l=a.hasFill(),u=a.hasStroke(),c=a.getDashArray(),h=!de.support.nativeDash&&u&&c&&c.length;function d(e){return c[(e%h+h)%h]}if(o||t.beginPath(),(l||u&&!h||s)&&(e(t,this,r),this._closed&&t.closePath()),!s&&(l||u)&&(this._setStyles(t,n,i),l&&(t.fill(a.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),u)){if(h){o||t.beginPath();var f,p=new W(this,.25,32,!1,r),g=p.length,m=-a.getDashOffset(),v=0;for(m%=g;m>0;)m-=d(v--)+d(v--);for(;m<g;)f=m+d(v++),(m>0||f>0)&&p.drawPart(t,Math.max(m,0),Math.max(f,0)),m=f+d(v++)}t.stroke()}},_drawSelected:function(t,n){t.beginPath(),e(t,this,n),t.stroke(),function(e,t,n,i){if(!(i<=0))for(var r,o,s=i/2,a=i-2,l=s-1,u=new Array(6),c=0,h=t.length;c<h;c++){var d=t[c],f=d._selection;if(d._transformCoordinates(n,u),r=u[0],o=u[1],2&f&&g(2),4&f&&g(4),e.fillRect(r-s,o-s,i,i),a>0&&!(1&f)){var p=e.fillStyle;e.fillStyle="#ffffff",e.fillRect(r-l,o-l,a,a),e.fillStyle=p}}function g(t){var n=u[t],i=u[t+1];r==n&&o==i||(e.beginPath(),e.moveTo(r,o),e.lineTo(n,i),e.stroke(),e.beginPath(),e.arc(n,i,s,0,2*Math.PI,!0),e.fill())}}(t,this._segments,n,de.settings.handleSize)}}},new function(){function e(e){var t=e._segments;if(!t.length)throw new Error("Use a moveTo() command first");return t[t.length-1]}return{moveTo:function(){var e=this._segments;1===e.length&&this.removeSegment(0),e.length||this._add([new j(y.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new j(y.read(arguments))])},cubicCurveTo:function(){var t=arguments,n=y.read(t),i=y.read(t),r=y.read(t),o=e(this);o.setHandleOut(n.subtract(o._point)),this._add([new j(r,i.subtract(r))])},quadraticCurveTo:function(){var t=arguments,n=y.read(t),i=y.read(t),r=e(this)._point;this.cubicCurveTo(n.add(r.subtract(n).multiply(1/3)),n.add(i.subtract(n).multiply(1/3)),i)},curveTo:function(){var t=arguments,n=y.read(t),i=y.read(t),r=c.pick(c.read(t),.5),o=1-r,s=e(this)._point,a=n.subtract(s.multiply(o*o)).subtract(i.multiply(r*r)).divide(2*r*o);if(a.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);this.quadraticCurveTo(a,i)},arcTo:function(){var t,n,i,r,o=arguments,s=Math.abs,a=Math.sqrt,l=e(this),u=l._point,h=y.read(o),d=c.peek(o);if("boolean"==typeof(w=c.pick(d,!0)))var f=(x=u.add(h).divide(2)).add(x.subtract(u).rotate(w?-90:90));else if(c.remain(o)<=2)f=h,h=y.read(o);else if(!u.equals(h)){var p=b.read(o),g=m.isZero;if(g(p.width)||g(p.height))return this.lineTo(h);var v=c.read(o),w=!!c.read(o),_=!!c.read(o),x=u.add(h).divide(2),k=(K=u.subtract(x).rotate(-v)).x,M=K.y,T=s(p.width),z=s(p.height),L=T*T,A=z*z,O=k*k,P=M*M,I=a(O/L+P/A);if(I>1&&(L=(T*=I)*T,A=(z*=I)*z),s(I=(L*A-L*P-A*O)/(L*P+A*O))<1e-12&&(I=0),I<0)throw new Error("Cannot create an arc with the given arguments");t=new y(T*M/z,-z*k/T).multiply((_===w?-1:1)*a(I)).rotate(v).add(x),n=(i=(r=(new C).translate(t).rotate(v).scale(T,z))._inverseTransform(u)).getDirectedAngle(r._inverseTransform(h)),!w&&n>0?n-=360:w&&n<0&&(n+=360)}if(f){var E=new S(u.add(f).divide(2),f.subtract(u).rotate(90),!0),N=new S(f.add(h).divide(2),h.subtract(f).rotate(90),!0),D=new S(u,h),R=D.getSide(f);if(!(t=E.intersect(N,!0))){if(!R)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}n=(i=u.subtract(t)).getDirectedAngle(h.subtract(t));var F=D.getSide(t,!0);0===F?n=R*s(n):R===F&&(n+=n<0?360:-360)}if(n){for(var B=1e-7,H=s(n),W=H>=360?4:Math.ceil((H-B)/90),V=n/W,U=V*Math.PI/360,q=4/3*Math.sin(U)/(1+Math.cos(U)),G=[],$=0;$<=W;$++){var K=h,Z=null;if($<W&&(Z=i.rotate(90).multiply(q),r?(K=r._transformPoint(i),Z=r._transformPoint(i.add(Z)).subtract(K)):K=t.add(i)),$){var X=i.rotate(-90).multiply(q);r&&(X=r._transformPoint(i.add(X)).subtract(K)),G.push(new j(K,X,Z))}else l.setHandleOut(Z);i=i.rotate(V)}this._add(G)}},lineBy:function(){var t=y.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=arguments,n=y.read(t),i=y.read(t),r=c.read(t),o=e(this)._point;this.curveTo(o.add(n),o.add(i),r)},cubicCurveBy:function(){var t=arguments,n=y.read(t),i=y.read(t),r=y.read(t),o=e(this)._point;this.cubicCurveTo(o.add(n),o.add(i),o.add(r))},quadraticCurveBy:function(){var t=arguments,n=y.read(t),i=y.read(t),r=e(this)._point;this.quadraticCurveTo(r.add(n),r.add(i))},arcBy:function(){var t=arguments,n=e(this)._point,i=n.add(y.read(t)),r=c.pick(c.peek(t),!0);"boolean"==typeof r?this.arcTo(i,r):this.arcTo(i,n.add(y.read(t)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(e,t){var n=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return B[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,i,r,o){var s=e[0];if(!s)return new x;var a=new Array(6),l=s._transformCoordinates(i,new Array(6)),u=l.slice(0,2),c=u.slice(),h=new Array(2);function d(e){e._transformCoordinates(i,a);for(var t=0;t<2;t++)D._addBounds(l[t],l[t+4],a[t+2],a[t],t,o?o[t]:0,u,c,h);var n=l;l=a,a=n}for(var f=1,p=e.length;f<p;f++)d(e[f]);return t&&d(s),new x(u[0],u[1],c[0]-u[0],c[1]-u[1])},getStrokeBounds:function(e,t,n,i,r){var o=n.getStyle(),s=o.hasStroke(),a=o.getStrokeWidth(),l=s&&n._getStrokeMatrix(i,r),u=s&&B._getStrokePadding(a,l),c=B.getBounds(e,t,n,i,r,u);if(!s)return c;var h=a/2,d=o.getStrokeJoin(),f=o.getStrokeCap(),p=o.getMiterLimit(),g=new x(new b(u));function m(e){c=c.include(e)}function v(e){c=c.unite(g.setCenter(e._point.transform(i)))}function y(e,t){"round"===t||e.isSmooth()?v(e):B._addBevelJoin(e,t,h,p,i,l,m)}function w(e,t){"round"===t?v(e):B._addSquareCap(e,t,h,i,l,m)}for(var _=e.length-(t?0:1),k=1;k<_;k++)y(e[k],d);return t?y(e[0],d):_>0&&(w(e[0],f),w(e[e.length-1],f)),c},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new y(e,0).transform(t),i=new y(0,e).transform(t),r=n.getAngleInRadians(),o=n.getLength(),s=i.getLength(),a=Math.sin(r),l=Math.cos(r),u=Math.tan(r),c=Math.atan2(s*u,o),h=Math.atan2(s,u*o);return[Math.abs(o*Math.cos(c)*l+s*Math.sin(c)*a),Math.abs(s*Math.sin(h)*l+o*Math.cos(h)*a)]},_addBevelJoin:function(e,t,n,i,r,o,s,a){var l=e.getCurve(),u=l.getPrevious(),c=l.getPoint1().transform(r),h=u.getNormalAtTime(1).multiply(n).transform(o),d=l.getNormalAtTime(0).multiply(n).transform(o),f=h.getDirectedAngle(d);if((f<0||f>=180)&&(h=h.negate(),d=d.negate()),a&&s(c),s(c.add(h)),"miter"===t){var p=new S(c.add(h),new y(-h.y,h.x),!0).intersect(new S(c.add(d),new y(-d.y,d.x),!0),!0);p&&c.getDistance(p)<=i*n&&s(p)}s(c.add(d))},_addSquareCap:function(e,t,n,i,r,o,s){var a=e._point.transform(i),l=e.getLocation(),u=l.getNormal().multiply(0===l.getTime()?n:-n).transform(r);"square"===t&&(s&&(o(a.subtract(u)),o(a.add(u))),a=a.add(u.rotate(-90))),o(a.add(u)),o(a.subtract(u))},getHandleBounds:function(e,t,n,i,r){var o,s,a=n.getStyle();if(r.stroke&&a.hasStroke()){var l=n._getStrokeMatrix(i,r),u=a.getStrokeWidth()/2,c=u;"miter"===a.getStrokeJoin()&&(c=u*a.getMiterLimit()),"square"===a.getStrokeCap()&&(c=Math.max(c,u*Math.SQRT2)),o=B._getStrokePadding(u,l),s=B._getStrokePadding(c,l)}for(var h=new Array(6),d=1/0,f=-d,p=d,g=f,m=0,v=e.length;m<v;m++){e[m]._transformCoordinates(i,h);for(var y=0;y<6;y+=2){var w=y?o:s,b=w?w[0]:0,_=w?w[1]:0,k=h[y],C=h[y+1],S=k-b,M=k+b,T=C-_,z=C+_;S<d&&(d=S),M>f&&(f=M),T<p&&(p=T),z>g&&(g=z)}}return new x(d,p,f-d,g-p)}}});B.inject({statics:new function(){var e=.5522847498307936,t=[new j([-1,0],[0,e],[0,-e]),new j([0,-1],[-e,0],[e,0]),new j([1,0],[0,-e],[0,e]),new j([0,1],[e,0],[-e,0])];function n(e,t,n){var i=c.getNamed(n),r=new B(i&&0==i.insert&&T.NO_INSERT);return r._add(e),r._closed=t,r.set(i,{insert:!0})}function i(e,i,r){for(var o=new Array(4),s=0;s<4;s++){var a=t[s];o[s]=new j(a._point.multiply(i).add(e),a._handleIn.multiply(i),a._handleOut.multiply(i))}return n(o,!0,r)}return{Line:function(){var e=arguments;return n([new j(y.readNamed(e,"from")),new j(y.readNamed(e,"to"))],!1,e)},Circle:function(){var e=arguments,t=y.readNamed(e,"center"),n=c.readNamed(e,"radius");return i(t,new b(n),e)},Rectangle:function(){var t,i=arguments,r=x.readNamed(i,"rectangle"),o=b.readNamed(i,"radius",0,{readNull:!0}),s=r.getBottomLeft(!0),a=r.getTopLeft(!0),l=r.getTopRight(!0),u=r.getBottomRight(!0);if(!o||o.isZero())t=[new j(s),new j(a),new j(l),new j(u)];else{var c=(o=b.min(o,r.getSize(!0).divide(2))).width,h=o.height,d=c*e,f=h*e;t=[new j(s.add(c,0),null,[-d,0]),new j(s.subtract(0,h),[0,f]),new j(a.add(0,h),null,[0,-f]),new j(a.add(c,0),[-d,0],null),new j(l.subtract(c,0),null,[d,0]),new j(l.add(0,h),[0,-f],null),new j(u.subtract(0,h),null,[0,f]),new j(u.subtract(c,0),[d,0])]}return n(t,!0,i)},RoundRectangle:"#Rectangle",Ellipse:function(){var e=arguments,t=A._readEllipse(e);return i(t.center,t.radius,e)},Oval:"#Ellipse",Arc:function(){var e=arguments,t=y.readNamed(e,"from"),n=y.readNamed(e,"through"),i=y.readNamed(e,"to"),r=c.getNamed(e),o=new B(r&&0==r.insert&&T.NO_INSERT);return o.moveTo(t),o.arcTo(n,i),o.set(r)},RegularPolygon:function(){for(var e=arguments,t=y.readNamed(e,"center"),i=c.readNamed(e,"sides"),r=c.readNamed(e,"radius"),o=360/i,s=i%3==0,a=new y(0,s?-r:r),l=s?-1:.5,u=new Array(i),h=0;h<i;h++)u[h]=new j(t.add(a.rotate((h+l)*o)));return n(u,!0,e)},Star:function(){for(var e=arguments,t=y.readNamed(e,"center"),i=2*c.readNamed(e,"points"),r=c.readNamed(e,"radius1"),o=c.readNamed(e,"radius2"),s=360/i,a=new y(0,-1),l=new Array(i),u=0;u<i;u++)l[u]=new j(t.add(a.rotate(s*u).multiply(u%2?o:r)));return n(l,!0,e)}}}});var H=F.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||("string"==typeof e?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function e(t,n){var i=n,r=i[0];r&&"number"==typeof r[0]&&(i=[i]);for(var o=n.length-1;o>=0;o--){var s=i[o];i!==n||s instanceof B||(i=c.slice(i)),Array.isArray(s)?i[o]=new B({segments:s,insert:!1}):s instanceof H&&(i.splice.apply(i,[o,1].concat(s.removeChildren())),s.remove())}return e.base.call(this,t,i)},reduce:function e(t){for(var n=this._children,i=n.length-1;i>=0;i--){var r;(r=n[i].reduce(t)).isEmpty()&&r.remove()}return n.length?e.base.call(this):((r=new B(T.NO_INSERT)).copyAttributes(this),r.insertAbove(this),this.remove(),r)},isClosed:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,n=0,i=t.length;n<i;n++)t[n].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,i=e.length;n<i;n++)c.push(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,n=0,i=e.length;n<i;n++)t+=e[n].getArea();return t},getLength:function(){for(var e=this._children,t=0,n=0,i=e.length;n<i;n++)t+=e[n].getLength();return t},getPathData:function(e,t){for(var n=this._children,i=[],r=0,o=n.length;r<o;r++){var s=n[r],a=s._matrix;i.push(s.getPathData(e&&!a.isIdentity()?e.appended(a):e,t))}return i.join("")},_hitTestChildren:function e(t,n,i){return e.base.call(this,t,n.class===B||"path"===n.type?n:c.set({},n,{fill:!1}),i)},_draw:function(e,t,n,i){var r=this._children;if(r.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var o=0,s=r.length;o<s;o++)r[o].draw(e,t,i);if(!t.clip){this._setStyles(e,t,n);var a=this._style;a.hasFill()&&(e.fill(a.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),a.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var i=this._children,r=0,o=i.length;r<o;r++){var s=i[r],a=s._matrix;n[s._id]||s._drawSelected(e,a.isIdentity()?t:t.appended(a))}}},new function(){function e(e,t){var n=e._children;if(t&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return c.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}}),{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new B(T.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),i=y.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(t){e(this,!0).closePath(t)}})},c.each(["reverse","flatten","simplify","smooth"],(function(e){this[e]=function(t){for(var n,i=this._children,r=0,o=i.length;r<o;r++)n=i[r][e](t)||n;return n}}),{}));F.inject(new function(){var e=Math.min,t=Math.max,n=Math.abs,i={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function r(e){return e._children||[e]}function o(e,t){var n=e.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(t){for(var i=r(n),o=0,s=i.length;o<s;o++)(e=i[o])._closed||e.isEmpty()||(e.closePath(1e-12),e.getFirstSegment().setHandleIn(0,0),e.getLastSegment().setHandleOut(0,0));n=n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0)}return n}function s(e,t,n,i,r){var o=new H(T.NO_INSERT);return o.addChildren(e,!0),o=o.reduce({simplify:t}),r&&0==r.insert||o.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),o.copyAttributes(n,!0),o}function l(e){return e.hasOverlap()||e.isCrossing()}function u(e,t,n,a){if(a&&(0==a.trace||a.stroke)&&/^(subtract|intersect)$/.test(n))return h(e,t,n);var u=o(e,!0),d=t&&e!==t&&o(t,!0),f=i[n];f[n]=!0,d&&(f.subtract||f.exclude)^d.isClockwise()^u.isClockwise()&&d.reverse();var m,y=v(R.expand(u.getIntersections(d,l))),_=r(u),x=d&&r(d),k=[],C=[];function S(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];c.push(k,i._segments),c.push(C,i.getCurves()),i._overlapsOnly=!0}}function M(e){for(var t=[],n=0,i=e&&e.length;n<i;n++)t.push(C[e[n]]);return t}if(y.length){S(_),x&&S(x);for(var T=new Array(C.length),z=0,L=C.length;z<L;z++)T[z]=C[z].getValues();var A=p.findCurveBoundsCollisions(T,T,0,!0),O={};for(z=0;z<C.length;z++){var P=C[z],I=P._path._id;(O[I]=O[I]||{})[P.getIndex()]={hor:M(A[z].hor),ver:M(A[z].ver)}}for(z=0,L=y.length;z<L;z++)w(y[z]._segment,u,d,O,f);for(z=0,L=k.length;z<L;z++){var E=k[z],j=E._intersection;E._winding||w(E,u,d,O,f),j&&j._overlap||(E._path._overlapsOnly=!1)}m=b(k,f)}else m=g(x?_.concat(x):_.slice(),(function(e){return!!f[e]}));return s(m,!0,e,t,a)}function h(e,t,n){var i=o(e),r=o(t),a=i.getIntersections(r,l),u="subtract"===n,c="divide"===n,h={},d=[];function f(e){if(!h[e._id]&&(c||r.contains(e.getPointAt(e.getLength()/2))^u))return d.unshift(e),h[e._id]=!0}for(var p=a.length-1;p>=0;p--){var g=a[p].split();g&&(f(g)&&g.getFirstSegment().setHandleIn(0,0),i.getLastSegment().setHandleOut(0,0))}return f(i),s(d,!1,e,t)}function d(e,t){for(var n=e;n;){if(n===t)return;n=n._previous}for(;e._next&&e._next!==t;)e=e._next;if(!e._next){for(;t._previous;)t=t._previous;e._next=t,t._previous=e}}function f(e){for(var t=e.length-1;t>=0;t--)e[t].clearHandles()}function g(e,t,i){var r=e&&e.length;if(r){var o=c.each(e,(function(e,t){this[e._id]={container:null,winding:e.isClockwise()?1:-1,index:t}}),{}),s=e.slice().sort((function(e,t){return n(t.getArea())-n(e.getArea())})),a=s[0],l=p.findItemBoundsCollisions(s,null,m.GEOMETRIC_EPSILON);null==i&&(i=a.isClockwise());for(var u=0;u<r;u++){var h=s[u],d=o[h._id],f=0,g=l[u];if(g)for(var v=null,y=g.length-1;y>=0;y--)if(g[y]<u){v=v||h.getInteriorPoint();var w=s[g[y]];if(w.contains(v)){var b=o[w._id];f=b.winding,d.winding+=f,d.container=b.exclude?b.container:w;break}}if(t(d.winding)===t(f))d.exclude=!0,e[d.index]=null;else{var _=d.container;h.setClockwise(_?!_.isClockwise():i)}}}return e}function v(e,t,n){var i,r,o,s=t&&[],a=!1,l=n||[],u=n&&{};function c(e){return e._path._id+"."+e._segment1._index}for(var h=(n&&n.length)-1;h>=0;h--)(p=n[h])._path&&(u[c(p)]=!0);for(h=e.length-1;h>=0;h--){var p,g,m=e[h],v=m._time,y=v,w=t&&!t(m);if((p=m._curve)&&(p!==r?(a=!p.hasHandles()||u&&u[c(p)],i=[],o=null,r=p):o>=1e-8&&(v/=o)),w)i&&i.push(m);else{if(t&&s.unshift(m),o=y,v<1e-8)g=p._segment1;else if(v>1-1e-8)g=p._segment2;else{var b=p.divideAtTime(v,!0);a&&l.push(p,b),g=b._segment1;for(var _=i.length-1;_>=0;_--){var x=i[_];x._time=(x._time-v)/(1-v)}}m._setSegment(g);var k=g._intersection,C=m._intersection;if(k){d(k,C);for(var S=k;S;)d(S._intersection,k),S=S._next}else g._intersection=C}}return n||f(l),s||e}function y(i,r,o,s,a){var l,u,c=Array.isArray(r)?r:r[o?"hor":"ver"],h=o?1:0,d=1^h,f=[i.x,i.y],p=f[h],g=f[d],m=p-1e-9,v=p+1e-9,w=0,b=0,_=0,x=0,k=!1,C=!1,S=1,M=[];function T(n){var u=n[d+0],c=n[d+6];if(!(g<e(u,c)||g>t(u,c))){var f=n[h+0],w=n[h+2],b=n[h+4],C=n[h+6];if(u!==c){var T=g===u?0:g===c||m>t(f,w,b,C)||v<e(f,w,b,C)?1:D.solveCubic(n,d,g,M,0,1)>0?M[0]:1,z=0===T?f:1===T?C:D.getPoint(n,T)[o?"y":"x"],L=u>c?1:-1,A=l[d]>l[d+6]?1:-1,O=l[h+6];return g!==u?(z<m?_+=L:z>v?x+=L:k=!0,z>p-1e-6&&z<p+1e-6&&(S/=2)):(L!==A?f<m?_+=L:f>v&&(x+=L):f!=O&&(O<v&&z>v?(x+=L,k=!0):O>m&&z<m&&(_+=L,k=!0)),S/=4),l=n,!a&&z>m&&z<v&&0===D.getTangent(n,T)[o?"x":"y"]&&y(i,r,!o,s,!0)}(f<v&&C>m||C<v&&f>m)&&(k=!0)}}function z(n){var i=n[d+0],r=n[d+2],s=n[d+4],a=n[d+6];if(g<=t(i,r,s,a)&&g>=e(i,r,s,a))for(var l,u=n[h+0],c=n[h+2],f=n[h+4],p=n[h+6],y=m>t(u,c,f,p)||v<e(u,c,f,p)?[n]:D.getMonoCurves(n,o),w=0,b=y.length;w<b;w++)if(l=T(y[w]))return l}for(var L=0,A=c.length;L<A;L++){var O,P=c[L],I=P._path,E=P.getValues();if(!(L&&c[L-1]._path===I||(l=null,I._closed||(u=D.getValues(I.getLastCurve().getSegment2(),P.getSegment1(),null,!s))[d]!==u[d+6]&&(l=u),l))){l=E;for(var j=I.getLastCurve();j&&j!==P;){var N=j.getValues();if(N[d]!==N[d+6]){l=N;break}j=j.getPrevious()}}if(O=z(E))return O;if(L+1===A||c[L+1]._path!==I){if(u&&(O=z(u)))return O;!k||_||x||(_=x=I.isClockwise(s)^o?1:-1),w+=_,b+=x,_=x=0,k&&(C=!0,k=!1),u=null}}return w=n(w),b=n(b),{winding:t(w,b),windingL:w,windingR:b,quality:S,onPath:C}}function w(e,t,i,r,o){var s=[],a=e,l=0;do{if(w=e.getCurve()){var u=w.getLength();s.push({segment:e,curve:w,length:u}),l+=u}e=e.getNext()}while(e&&!e._intersection&&e!==a);for(var c=[.5,.25,.75],h={winding:0,quality:-1},d=0;d<c.length&&h.quality<.5;d++){u=l*c[d];for(var f=0,p=s.length;f<p;f++){var g=s[f],v=g.length;if(u<=v){var w,b=(w=g.curve)._path,_=b._parent,x=_ instanceof H?_:b,k=m.clamp(w.getTimeAt(u),.001,.999),C=w.getPointAtTime(k),S=n(w.getTangentAtTime(k).y)<Math.SQRT1_2,M=null;if(o.subtract&&i){var T=(x===t?i:t)._getWinding(C,S,!0);if(x===t&&T.winding||x===i&&!T.winding){if(T.quality<1)continue;M={winding:0,quality:1}}}(M=M||y(C,r[b._id][w.getIndex()],S,!0)).quality>h.quality&&(h=M);break}u-=v}}for(f=s.length-1;f>=0;f--)s[f].segment._winding=h}function b(e,t){var n,i=[];function r(e){var n;return!(!e||e._visited||t&&(!t[(n=e._winding||{}).winding]||t.unite&&2===n.winding&&n.windingL&&n.windingR))}function o(e){if(e)for(var t=0,i=n.length;t<i;t++)if(e===n[t])return!0;return!1}function s(e){for(var t=e._segments,n=0,i=t.length;n<i;n++)t[n]._visited=!0}function a(e,t){var i=e._intersection,s=i,a=[];function l(i,s){for(;i&&i!==s;){var l=i._segment,u=l&&l._path;if(u){var c=l.getNext()||u.getFirstSegment(),h=c._intersection;l!==e&&(o(l)||o(c)||c&&r(l)&&(r(c)||h&&r(h._segment)))&&a.push(l),t&&n.push(l)}i=i._next}}if(t&&(n=[e]),i){for(l(i);i&&i._previous;)i=i._previous;l(i,s)}return a}e.sort((function(e,t){var n=e._intersection,i=t._intersection,r=!(!n||!n._overlap),o=!(!i||!i._overlap),s=e._path,a=t._path;return r^o?r?1:-1:!n^!i?n?1:-1:s!==a?s._id-a._id:e._index-t._index}));for(var l=0,u=e.length;l<u;l++){var c,h,d,f=e[l],p=r(f),g=null,m=!1,v=!0,y=[];if(p&&f._path._overlapsOnly){var w=f._path,b=f._intersection._segment._path;w.compare(b)&&(w.getArea()&&i.push(w.clone(!1)),s(w),s(b),p=!1)}for(;p;){var _=!g,x=a(f,_),k=x.shift(),C=!(m=!_&&(o(f)||o(k)))&&k;if(_&&(g=new B(T.NO_INSERT),c=null),m){(f.isFirst()||f.isLast())&&(v=f._path._closed),f._visited=!0;break}if(C&&c&&(y.push(c),c=null),c||(C&&x.push(f),c={start:g._segments.length,crossings:x,visited:h=[],handleIn:d}),C&&(f=k),!r(f)){g.removeSegments(c.start);for(var S=0,M=h.length;S<M;S++)h[S]._visited=!1;h.length=0;do{(f=c&&c.crossings.shift())&&f._path||(f=null,(c=y.pop())&&(h=c.visited,d=c.handleIn))}while(c&&!r(f));if(!f)break}var z=f.getNext();g.add(new j(f._point,d,z&&f._handleOut)),f._visited=!0,h.push(f),f=z||f._path.getFirstSegment(),d=z&&z._handleIn}m&&(v&&(g.getFirstSegment().setHandleIn(d),g.setClosed(v)),0!==g.getArea()&&i.push(g))}return i}return{_getWinding:function(e,t,n){return y(e,this.getCurves(),t,n)},unite:function(e,t){return u(this,e,"unite",t)},intersect:function(e,t){return u(this,e,"intersect",t)},subtract:function(e,t){return u(this,e,"subtract",t)},exclude:function(e,t){return u(this,e,"exclude",t)},divide:function(e,t){return t&&(0==t.trace||t.stroke)?h(this,e,"divide"):s([this.subtract(e,t),this.intersect(e,t)],!0,this,e,t)},resolveCrossings:function(){var e=this._children,t=e||[this];function n(e,t){var n=e&&e._intersection;return n&&n._overlap&&n._path===t}var i=!1,r=!1,o=this.getIntersections(null,(function(e){return e.hasOverlap()&&(i=!0)||e.isCrossing()&&(r=!0)})),s=i&&r&&[];if(o=R.expand(o),i)for(var a=v(o,(function(e){return e.hasOverlap()}),s),l=a.length-1;l>=0;l--){var u=a[l],h=u._path,d=u._segment,p=d.getPrevious(),g=d.getNext();n(p,h)&&n(g,h)&&(d.remove(),p._handleOut._set(0,0),g._handleIn._set(0,0),p===d||p.getCurve().hasLength()||(g._handleIn.set(p._handleIn),p.remove()))}r&&(v(o,i&&function(e){var t=e.getCurve(),n=e.getSegment(),i=e._intersection,r=i._curve,o=i._segment;if(t&&r&&t._path&&r._path)return!0;n&&(n._intersection=null),o&&(o._intersection=null)},s),s&&f(s),t=b(c.each(t,(function(e){c.push(this,e._segments)}),[])));var m,y=t.length;return y>1&&e?(t!==e&&this.setChildren(t),m=this):1!==y||e||(t[0]!==this&&this.setSegments(t[0].removeSegments()),m=this),m||((m=new H(T.NO_INSERT)).addChildren(t),(m=m.reduce()).copyAttributes(this),this.replaceWith(m)),m},reorient:function(e,t){var n=this._children;return n&&n.length?this.setChildren(g(this.removeChildren(),(function(t){return!!(e?t:1&t)}),t)):t!==a&&this.setClockwise(t),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var i=this.getCurves(),r=n.y,o=[],s=[],a=0,l=i.length;a<l;a++){var u=i[a].getValues(),c=u[1],h=u[3],d=u[5],f=u[7];if(r>=e(c,h,d,f)&&r<=t(c,h,d,f))for(var p=D.getMonoCurves(u),g=0,m=p.length;g<m;g++){var v=p[g],y=v[1],w=v[7];if(y!==w&&(r>=y&&r<=w||r>=w&&r<=y)){var b=r===y?v[0]:r===w?v[6]:1===D.solveCubic(v,1,r,s,0,1)?D.getPoint(v,s[0]).x:(v[0]+v[6])/2;o.push(b)}}}o.length>1&&(o.sort((function(e,t){return e-t})),n.x=(o[0]+o[1])/2)}return n}}});var W=c.extend({_class:"PathFlattener",initialize:function(e,t,n,i,r){var o,s=[],a=[],l=0,u=1/(n||32),c=e._segments,h=c[0];function d(e,n){var o=D.getValues(e,n,r);s.push(o),function e(n,r,o,s){if(!(s-o>u)||i&&D.isStraight(n)||D.isFlatEnough(n,t||.25)){var c=n[6]-n[0],h=n[7]-n[1],d=Math.sqrt(c*c+h*h);d>0&&(l+=d,a.push({offset:l,curve:n,index:r,time:s}))}else{var f=D.subdivide(n,.5),p=(o+s)/2;e(f[0],r,o,p),e(f[1],r,p,s)}}(o,e._index,0,1)}for(var f=1,p=c.length;f<p;f++)d(h,o=c[f]),h=o;e._closed&&d(o||h,c[0]),this.curves=s,this.parts=a,this.length=l,this.index=0},_get:function(e){for(var t,n=this.parts,i=n.length,r=this.index;t=r,r&&!(n[--r].offset<e););for(;t<i;t++){var o=n[t];if(o.offset>=e){this.index=t;var s=n[t-1],a=s&&s.index===o.index?s.time:0,l=s?s.offset:0;return{index:o.index,time:a+(o.time-a)*(e-l)/(o.offset-l)}}}return{index:n[i-1].index,time:1}},drawPart:function(e,t,n){for(var i=this._get(t),r=this._get(n),o=i.index,s=r.index;o<=s;o++){var a=D.getPart(this.curves[o],o===i.index?i.time:0,o===r.index?r.time:1);o===i.index&&e.moveTo(a[0],a[1]),e.bezierCurveTo.apply(e,a.slice(2))}}},c.each(D._evaluateMethods,(function(e){this[e+"At"]=function(t){var n=this._get(t);return D[e](this.curves[n.index],n.time)}}),{})),V=c.extend({initialize:function(e){for(var t,n=this.points=[],i=e._segments,r=e._closed,o=0,s=i.length;o<s;o++){var a=i[o].point;t&&t.equals(a)||n.push(t=a.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(e){var t=this.points,n=t.length,i=null;return n>0&&(i=[new j(t[0])],n>1&&(this.fitCubic(i,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(e,t,n,i,r,o){var s=this.points;if(i-n!=1){for(var a,l=this.chordLengthParameterize(n,i),u=Math.max(t,t*t),c=!0,h=0;h<=4;h++){var d=this.generateBezier(n,i,l,r,o),f=this.findMaxError(n,i,d,l);if(f.error<t&&c)return void this.addCurve(e,d);if(a=f.index,f.error>=u)break;c=this.reparameterize(n,i,l,d),u=f.error}var p=s[a-1].subtract(s[a+1]);this.fitCubic(e,t,n,a,r,p),this.fitCubic(e,t,a,i,p.negate(),o)}else{var g=s[n],m=s[i],v=g.getDistance(m)/3;this.addCurve(e,[g,g.add(r.normalize(v)),m.add(o.normalize(v)),m])}},addCurve:function(e,t){e[e.length-1].setHandleOut(t[1].subtract(t[0])),e.push(new j(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,n,i,r){for(var o=Math.abs,s=this.points,a=s[e],l=s[t],u=[[0,0],[0,0]],c=[0,0],h=0,d=t-e+1;h<d;h++){var f=n[h],p=1-f,g=3*f*p,m=p*p*p,v=g*p,y=g*f,w=f*f*f,b=i.normalize(v),_=r.normalize(y),x=s[e+h].subtract(a.multiply(m+v)).subtract(l.multiply(y+w));u[0][0]+=b.dot(b),u[0][1]+=b.dot(_),u[1][0]=u[0][1],u[1][1]+=_.dot(_),c[0]+=b.dot(x),c[1]+=_.dot(x)}var k,C,S=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(o(S)>1e-12){var M=u[0][0]*c[1]-u[1][0]*c[0];k=(c[0]*u[1][1]-c[1]*u[0][1])/S,C=M/S}else{var T=u[0][0]+u[0][1],z=u[1][0]+u[1][1];k=C=o(T)>1e-12?c[0]/T:o(z)>1e-12?c[1]/z:0}var L,A,O=l.getDistance(a),P=1e-12*O;if(k<P||C<P)k=C=O/3;else{var I=l.subtract(a);L=i.normalize(k),A=r.normalize(C),L.dot(I)-A.dot(I)>O*O&&(k=C=O/3,L=A=null)}return[a,a.add(L||i.normalize(k)),l.add(A||r.normalize(C)),l]},reparameterize:function(e,t,n,i){for(var r=e;r<=t;r++)n[r-e]=this.findRoot(i,this.points[r],n[r-e]);r=1;for(var o=n.length;r<o;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(e,t,n){for(var i=[],r=[],o=0;o<=2;o++)i[o]=e[o+1].subtract(e[o]).multiply(3);for(o=0;o<=1;o++)r[o]=i[o+1].subtract(i[o]).multiply(2);var s=this.evaluate(3,e,n),a=this.evaluate(2,i,n),l=this.evaluate(1,r,n),u=s.subtract(t),c=a.dot(a)+u.dot(l);return m.isMachineZero(c)?n:n-u.dot(a)/c},evaluate:function(e,t,n){for(var i=t.slice(),r=1;r<=e;r++)for(var o=0;o<=e-r;o++)i[o]=i[o].multiply(1-n).add(i[o+1].multiply(n));return i[0]},chordLengthParameterize:function(e,t){for(var n=[0],i=e+1;i<=t;i++)n[i-e]=n[i-e-1]+this.points[i].getDistance(this.points[i-1]);i=1;for(var r=t-e;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(e,t,n,i){for(var r=Math.floor((t-e+1)/2),o=0,s=e+1;s<t;s++){var a=this.evaluate(3,n,i[s-e]).subtract(this.points[s]),l=a.x*a.x+a.y*a.y;l>=o&&(o=l,r=s)}return{error:o,index:r}}}),U=T.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content="",this._lines=[];var t=e&&c.isPlainObject(e)&&e.x===a&&e.y===a;this._initialize(t&&e,!t&&y.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),q=U.extend({_class:"PointText",initialize:function(){U.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new w(e.x,e.y,this,"setPoint")},setPoint:function(){var e=y.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(this._content){this._setStyles(e,t,n);var i=this._lines,r=this._style,o=r.hasFill(),s=r.hasStroke(),a=r.getLeading(),l=e.shadowColor;e.font=r.getFontStyle(),e.textAlign=r.getJustification();for(var u=0,c=i.length;u<c;u++){e.shadowColor=l;var h=i[u];o&&(e.fillText(h,0,0),e.shadowColor="rgba(0,0,0,0)"),s&&e.strokeText(h,0,0),e.translate(0,a)}}},_getBounds:function(e,t){var n=this._style,i=this._lines,r=i.length,o=n.getJustification(),s=n.getLeading(),a=this.getView().getTextWidth(n.getFontStyle(),i),l=0;"left"!==o&&(l-=a/("center"===o?2:1));var u=new x(l,r?-.75*s:0,a,r*s);return e?e._transformBounds(u,u):u}}),G=c.extend(new function(){var e,t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},i={transparent:[0,0,0,0]};function r(t){var n,r=t.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||t.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),o="rgb";if(r){var s=r[4]?4:3;n=new Array(s);for(var a=0;a<s;a++){var u=r[a+1];n[a]=parseInt(1==u.length?u+u:u,16)/255}}else if(r=t.match(/^(rgb|hsl)a?\((.*)\)$/)){o=r[1],n=r[2].trim().split(/[,\s]+/g);for(var c="hsl"===o,h=(a=0,Math.min(n.length,4));a<h;a++){var d=n[a];if(u=parseFloat(d),c)if(0===a){var f=d.match(/([a-z]*)$/)[1];u*={turn:360,rad:180/Math.PI,grad:.9}[f]||1}else a<3&&(u/=100);else a<3&&(u/=/%$/.test(d)?100:255);n[a]=u}}else{var p=i[t];if(!p)if(l){e||((e=le.getContext(1,1)).globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var g=e.getImageData(0,0,1,1).data;p=i[t]=[g[0]/255,g[1]/255,g[2]/255]}else p=[0,0,0];n=p.slice()}return[o,n]}var o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],s={"rgb-hsb":function(e,t,n){var i=Math.max(e,t,n),r=i-Math.min(e,t,n);return[0===r?0:60*(i==e?(t-n)/r+(t<n?6:0):i==t?(n-e)/r+2:(e-t)/r+4),0===i?0:r/i,i]},"hsb-rgb":function(e,t,n){var i,r=(e=(e/60%6+6)%6)-(i=Math.floor(e)),s=[n,n*(1-t),n*(1-t*r),n*(1-t*(1-r))];return[s[(i=o[i])[0]],s[i[1]],s[i[2]]]},"rgb-hsl":function(e,t,n){var i=Math.max(e,t,n),r=Math.min(e,t,n),o=i-r,s=0===o,a=(i+r)/2;return[s?0:60*(i==e?(t-n)/o+(t<n?6:0):i==t?(n-e)/o+2:(e-t)/o+4),s?0:a<.5?o/(i+r):o/(2-i-r),a]},"hsl-rgb":function(e,t,n){if(0===t)return[n,n,n];for(var i=[(e=(e/360%1+1)%1)+1/3,e,e-1/3],r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,s=[],a=0;a<3;a++){var l=i[a];l<0&&(l+=1),l>1&&(l-=1),s[a]=6*l<1?o+6*(r-o)*l:2*l<1?r:3*l<2?o+(r-o)*(2/3-l)*6:o}return s},"rgb-gray":function(e,t,n){return[.2989*e+.587*t+.114*n]},"gray-rgb":function(e){return[e,e,e]},"gray-hsb":function(e){return[0,0,e]},"gray-hsl":function(e){return[0,0,e]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return c.each(t,(function(e,i){n[i]=[],c.each(e,(function(e,r){var o=c.capitalize(e),s=/^(hue|saturation)$/.test(e),a=n[i][r]="gradient"===i?"gradient"===e?function(e){var t=this._components[0];return t!==(e=$.read(Array.isArray(e)?e:arguments,0,{readNull:!0}))&&(t&&t._removeOwner(this),e&&e._addOwner(this)),e}:function(){return y.read(arguments,0,{readNull:"highlight"===e,clone:!0})}:function(e){return null==e||isNaN(e)?0:+e};this["get"+o]=function(){return this._type===i||s&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(i)[r]},this["set"+o]=function(e){this._type===i||s&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(i),this._properties=t[i],this._type=i),this._components[r]=a.call(this,e),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function e(i){var o,s,a,l,u=arguments,h=this.__read,d=0;Array.isArray(i)&&(i=(u=i)[0]);var f=null!=i&&typeof i;if("string"===f&&i in t&&(o=i,i=u[1],Array.isArray(i)?(s=i,a=u[2]):(h&&(d=1),u=c.slice(u,1),f=typeof i)),!s){if(l="number"===f?u:"object"===f&&null!=i.length?i:null){o||(o=l.length>=3?"rgb":"gray");var p=t[o].length;a=l[p],h&&(d+=l===arguments?p+(null!=a?1:0):1),l.length>p&&(l=c.slice(l,0,p))}else if("string"===f){var g=r(i);o=g[0],4===(s=g[1]).length&&(a=s[3],s.length--)}else if("object"===f)if(i.constructor===e){if(o=i._type,s=i._components.slice(),a=i._alpha,"gradient"===o)for(var m=1,v=s.length;m<v;m++){var y=s[m];y&&(s[m]=y.clone())}}else if(i.constructor===$)o="gradient",l=u;else{var w=t[o="hue"in i?"lightness"in i?"hsl":"hsb":"gradient"in i||"stops"in i||"radial"in i?"gradient":"gray"in i?"gray":"rgb"],b=n[o];for(this._components=s=[],m=0,v=w.length;m<v;m++)null==(_=i[w[m]])&&!m&&"gradient"===o&&"stops"in i&&(_={stops:i.stops,radial:i.radial}),null!=(_=b[m].call(this,_))&&(s[m]=_);a=i.alpha}h&&o&&(d=1)}if(this._type=o||"rgb",!s)for(this._components=s=[],m=0,v=(b=n[this._type]).length;m<v;m++){var _;null!=(_=b[m].call(this,l&&l[m]))&&(s[m]=_)}return this._components=s,this._properties=t[this._type],this._alpha=a,h&&(this.__read=d),this},set:"#initialize",_serialize:function(e,t){var n=this.getComponents();return c.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),e,!0,t)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(e){var t;return this._type===e?this._components.slice():(t=s[this._type+"-"+e])?t.apply(this,this._components):s["rgb-"+e].apply(this,s[this._type+"-rgb"].apply(this,this._components))},convert:function(e){return new G(e,this._convert(e),this._alpha)},getType:function(){return this._type},setType:function(e){this._components=this._convert(e),this._properties=t[e],this._type=e},getComponents:function(){var e=this._components.slice();return null!=this._alpha&&e.push(this._alpha),e},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(e){this._alpha=null==e?null:Math.min(Math.max(e,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(e){var t=c.isPlainValue(e,!0)?G.read(arguments):e;return t===this||t&&this._class===t._class&&this._type===t._type&&this.getAlpha()===t.getAlpha()&&c.equals(this._components,t._components)||!1},toString:function(){for(var e=this._properties,t=[],n="gradient"===this._type,i=g.instance,r=0,o=e.length;r<o;r++){var s=this._components[r];null!=s&&t.push(e[r]+": "+(n?s:i.number(s)))}return null!=this._alpha&&t.push("alpha: "+i.number(this._alpha)),"{ "+t.join(", ")+" }"},toCSS:function(e){var t=this._convert("rgb"),n=e||null==this._alpha?1:this._alpha;function i(e){return Math.round(255*(e<0?0:e>1?1:e))}return t=[i(t[0]),i(t[1]),i(t[2])],n<1&&t.push(n<0?0:n),e?"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+t[2]).toString(16).slice(1):(4==t.length?"rgba(":"rgb(")+t.join(",")+")"},toCanvasStyle:function(e,t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,i=this._components,r=i[0],o=r._stops,s=i[1],a=i[2],l=i[3],u=t&&t.inverted();if(u&&(s=u._transformPoint(s),a=u._transformPoint(a),l&&(l=u._transformPoint(l))),r._radial){var c=a.getDistance(s);if(l){var h=l.subtract(s);h.getLength()>c&&(l=s.add(h.normalize(c-.1)))}var d=l||s;n=e.createRadialGradient(d.x,d.y,0,s.x,s.y,c)}else n=e.createLinearGradient(s.x,s.y,a.x,a.y);for(var f=0,p=o.length;f<p;f++){var g=o[f],m=g._offset;n.addColorStop(null==m?f/(p-1):m,g._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(e){if("gradient"===this._type){for(var t=this._components,n=1,i=t.length;n<i;n++){var r=t[n];e._transformPoint(r,r,!0)}this._changed()}},statics:{_types:t,random:function(){var e=Math.random;return new G(e(),e(),e())},_setOwner:function(e,t,n){return e&&(e._owner&&t&&e._owner!==t&&(e=e.clone()),!e._owner^!t&&(e._owner=t||null,e._setter=n||null)),e}}})},new function(){return c.each({add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t}},(function(e,t){this[t]=function(t){t=G.read(arguments);for(var n=this._type,i=this._components,r=t._convert(n),o=0,s=i.length;o<s;o++)r[o]=e(i[o],r[o]);return new G(n,r,null!=this._alpha?e(this._alpha,t.getAlpha()):null)}}),{})}),$=c.extend({_class:"Gradient",initialize:function(e,t){this._id=v.get(),e&&c.isPlainObject(e)&&(this.set(e),e=t=null),null==this._stops&&this.setStops(e||["white","black"]),null==this._radial&&this.setRadial("string"==typeof t&&"radial"===t||t||!1)},_serialize:function(e,t){return t.add(this,(function(){return c.serialize([this._stops,this._radial],e,!0,t)}))},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;-1!=t&&(this._owners.splice(t,1),this._owners.length||(this._owners=a))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new $(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var n=0,i=t.length;n<i;n++)t[n]._owner=a;for(n=0,i=(t=this._stops=K.readList(e,0,{clone:!0})).length;n<i;n++)t[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,i=t.length;if(i===n.length){for(var r=0;r<i;r++)if(!t[r].equals(n[r]))return!1;return!0}}return!1}}),K=c.extend({_class:"GradientStop",initialize:function(e,t){var n=e,i=t;"object"==typeof e&&t===a&&(Array.isArray(e)&&"number"!=typeof e[0]?(n=e[0],i=e[1]):("color"in e||"offset"in e||"rampPoint"in e)&&(n=e.color,i=e.offset||e.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new K(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,i=this._offset;return c.serialize(null==i?[n]:[n,i],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){G._setOwner(this._color,null),this._color=G._setOwner(G.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),Z=c.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new y,selectedColor:null},t=c.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=c.set({},t,{fillColor:new G}),i={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},o={_class:"Style",beans:!0,initialize:function(i,r,o){this._values={},this._owner=r,this._project=r&&r._project||o||de.project,this._defaults=!r||r instanceof z?t:r instanceof U?n:e,i&&this.set(i)}};return c.each(t,(function(e,t){var n=/Color$/.test(t),s="shadowOffset"===t,l=c.capitalize(t),u=i[t],h="set"+l,d="get"+l;o[h]=function(e){var i=this._owner,r=i&&i._children,o=r&&r.length>0&&!(i instanceof H);if(o)for(var s=0,a=r.length;s<a;s++)r[s]._style[h](e);if(("selectedColor"===t||!o)&&t in this._defaults){var l=this._values[t];l!==e&&(n&&(l&&(G._setOwner(l,null),l._canvasStyle=null),e&&e.constructor===G&&(e=G._setOwner(e,i,o&&h))),this._values[t]=e,i&&i._changed(u||129))}},o[d]=function(e){var i=this._owner,r=i&&i._children,o=r&&r.length>0&&!(i instanceof H);if(o&&!e)for(var l=0,u=r.length;l<u;l++){var f=r[l]._style[d]();if(l){if(!c.equals(p,f))return a}else p=f}else if(t in this._defaults){var p;if((p=this._values[t])===a)(p=this._defaults[t])&&p.clone&&(p=p.clone());else{var g=n?G:s?y:null;!g||p&&p.constructor===g||(this._values[t]=p=g.read([p],0,{readNull:!0,clone:!0}))}}return p&&n&&(p=G._setOwner(p,i,o&&h)),p},r[d]=function(e){return this._style[d](e)},r[h]=function(e){this._style[h](e)}})),c.each({Font:"FontFamily",WindingRule:"FillRule"},(function(e,t){var n="get"+t,i="set"+t;o[n]=r[n]="#get"+e,o[i]=r[i]="#set"+e})),T.inject(r),o},{set:function(e){var t=e instanceof Z,n=t?e._values:e;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&t&&r.clone?r.clone():r}},equals:function(e){function t(e,t,n){var i=e._values,r=t._values,o=t._defaults;for(var s in i){var l=i[s],u=r[s];if(!(n&&s in r||c.equals(l,u===a?o[s]:u)))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;(e=this.getFillColor())&&(e._canvasStyle=null),(e=this.getStrokeColor())&&(e._canvasStyle=null),(e=this.getShadowColor())&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=t?t:1.2*n}}),X=new function(){function e(e,t,n,i){for(var r=["","webkit","moz","Moz","ms","o"],o=t[0].toUpperCase()+t.substring(1),s=0;s<6;s++){var a=r[s],l=a?a+o:t;if(l in e){if(!n)return e[l];e[l]=i;break}}}return{getStyles:function(e){var t=e&&9!==e.nodeType?e.ownerDocument:e,n=t&&t.defaultView;return n&&n.getComputedStyle(e,"")},getBounds:function(e,t){var n,i=e.ownerDocument,r=i.body,o=i.documentElement;try{n=e.getBoundingClientRect()}catch(e){n={left:0,top:0,width:0,height:0}}var s=n.left-(o.clientLeft||r.clientLeft||0),a=n.top-(o.clientTop||r.clientTop||0);if(!t){var l=i.defaultView;s+=l.pageXOffset||o.scrollLeft||r.scrollLeft,a+=l.pageYOffset||o.scrollTop||r.scrollTop}return new x(s,a,n.width,n.height)},getViewportBounds:function(e){var t=e.ownerDocument,n=t.defaultView,i=t.documentElement;return new x(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(e,t){return X.getBounds(e,t).getPoint()},getSize:function(e){return X.getBounds(e,!0).getSize()},isInvisible:function(e){return X.getSize(e).equals(new b(0,0))},isInView:function(e){return!X.isInvisible(e)&&X.getViewportBounds(e).intersects(X.getBounds(e,!0))},isInserted:function(e){return u.body.contains(e)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,i){if("object"==typeof n)for(var r in n)e(t,r,!0,n[r]);else e(t,n,!0,i)}}},Y={add:function(e,t){if(e)for(var n in t)for(var i=t[n],r=n.split(/[\s,]+/g),o=0,s=r.length;o<s;o++){var a=r[o],l=e===u&&("touchstart"===a||"touchmove"===a)&&{passive:!1};e.addEventListener(a,i,l)}},remove:function(e,t){if(e)for(var n in t)for(var i=t[n],r=n.split(/[\s,]+/g),o=0,s=r.length;o<s;o++)e.removeEventListener(r[o],i,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new y(t.pageX||t.clientX+u.documentElement.scrollLeft,t.pageY||t.clientY+u.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return Y.getPoint(e).subtract(X.getOffset(t||Y.getTarget(e)))}};Y.requestAnimationFrame=new function(){var e,t=X.getPrefixed(l,"requestAnimationFrame"),n=!1,i=[];function r(){var e=i;i=[];for(var o=0,s=e.length;o<s;o++)e[o]();(n=t&&i.length)&&t(r)}return function(o){i.push(o),t?n||(t(r),n=!0):e||(e=setInterval(r,1e3/60))}};var J=c.extend(h,{_class:"View",initialize:function e(t,n){function i(e){return n[e]||parseInt(n.getAttribute(e),10)}function r(){var e=X.getSize(n);return e.isNaN()||e.isZero()?new b(i("width"),i("height")):e}var o;if(l&&n){if(this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="view-"+e._id++),Y.add(n,this._viewEvents),X.setPrefixed(n.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),d.hasAttribute(n,"resize")){var s=this;Y.add(l,this._windowEvents={resize:function(){s.setViewSize(r())}})}if(o=r(),d.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var a=this._stats.domElement,c=a.style,h=X.getOffset(n);c.position="absolute",c.left=h.x+"px",c.top=h.y+"px",u.body.appendChild(a)}}else o=new b(n),n=null;this._project=t,this._scope=t._scope,this._element=n,this._pixelRatio||(this._pixelRatio=l&&l.devicePixelRatio||1),this._setElementSize(o.width,o.height),this._viewSize=o,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new C)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!de.agent.node,this._needsUpdate=!1,this._drawSelection=!0},remove:function(){if(!this._project)return!1;J._focused===this&&(J._focused=null),J._views.splice(J._views.indexOf(this),1),delete J._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),Y.remove(this._element,this._viewEvents),Y.remove(l,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:c.each(T._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(e){this[e]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},getDrawSelection:function(){return this._drawSelection},setDrawSelection:function(e){this._drawSelection=e,this.requestUpdate()},markDirty:function(){this._needsUpdate=!0,this.draw()},update:function(){},rawDraw:function(e){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;Y.requestAnimationFrame((function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;X.getPrefixed(u,"hidden")&&"true"!==d.getAttribute(t,"keepalive")||!X.isInView(t)||e._handleFrame()}e._autoUpdate&&e.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){de=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new c({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[e._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit("frame",new c(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=a,this.emit("changed",new c({}))},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var e=this._viewSize;return new _(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=b.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new x(new y,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return X.isInView(this._element)},isInserted:function(){return X.isInserted(this._element)},getPixelSize:function(e){var t,n=this._element;if(n){var i=n.parentNode,r=u.createElement("div");r.style.fontSize=e,i.appendChild(r),t=parseFloat(X.getStyles(r).fontSize),i.removeChild(r)}else t=parseFloat(t);return t},getTextWidth:function(e,t){return 0}},c.each(["rotate","scale","shear","skew"],(function(e){var t="rotate"===e;this[e]=function(){var n=arguments,i=(t?c:y).read(n),r=y.read(n,0,{readNull:!0});return this.transform((new C)[e](i,r||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new C;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=y.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform((new C).scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();null!=t&&null!=e&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new w(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=y.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.initialize.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(y.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(y.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(y.read(arguments))},getEventPoint:function(e){return this.viewToProject(Y.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){return u&&"string"==typeof t&&(t=u.getElementById(t)),new(l?Q:J)(e,t)}}},new function(){if(l){var e,t,n,i,r,o=!1,s=!1,a=l.navigator;a.pointerEnabled||a.msPointerEnabled?(n="pointerdown MSPointerDown",i="pointermove MSPointerMove",r="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",i="touchmove",r="touchend touchcancel","ontouchstart"in l&&a.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",i+=" mousemove",r+=" mouseup"));var c={},h={mouseout:function(e){var t=J._focused,n=Y.getRelatedTarget(e);if(t&&(!n||"HTML"===n.nodeName)){var i=Y.getOffset(e,t._element),r=i.x,o=Math.abs,s=o(r),a=s-(1<<25);i.x=o(a)<s?a*(r<0?-1:1):r,T(t,e,t.viewToProject(i))}},scroll:M};c[n]=function(e){var t=J._focused=S(e);o||(o=!0,t._handleMouseEvent("mousedown",e))},h[i]=function(n){var i=J._focused;if(!s){var r=S(n);r?i!==r&&(i&&T(i,n),e||(e=i),i=J._focused=t=r):t&&t===i&&(e&&!e.isInserted()&&(e=null),i=J._focused=e,e=null,M())}i&&T(i,n)},h[n]=function(){s=!0},h[r]=function(e){var t=J._focused;t&&o&&t._handleMouseEvent("mouseup",e),s=o=!1},Y.add(u,h),Y.add(l,{load:M});var d,f,p,g,m,v,y,w,b=!1,_=!1,x={doubleclick:"click",mousedrag:"mousemove"},k=!1,C={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:c,_handleMouseEvent:function(e,t,n){var i=this._itemEvents,r=i.native[e],s="mousemove"===e,a=this._scope.tool,l=this;function u(e){return i.virtual[e]||l.responds(e)||a&&a.responds(e)}s&&o&&u("mousedrag")&&(e="mousedrag"),n||(n=this.getEventPoint(t));var c=this.getBounds().contains(n),h=r&&c&&l._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),x=h&&h.item||null,C=!1,S={};if(S[e.substr(5)]=!0,r&&x!==g&&(g&&z(g,null,"mouseleave",t,n),x&&z(x,null,"mouseenter",t,n),g=x),k^c&&(z(this,null,c?"mouseenter":"mouseleave",t,n),C=!0),!c&&!S.drag||n.equals(f)||(L(this,x,s?e:"mousemove",t,n,f),C=!0),k=c,S.down&&c||S.up&&d){if(L(this,x,e,t,n,d),S.down){if(w=x===v&&Date.now()-y<300,p=v=x,!_&&x){for(var M=x;M&&!M.responds("mousedrag");)M=M._parent;M&&(m=x)}d=n}else S.up&&(_||x!==p||(y=Date.now(),L(this,x,w?"doubleclick":"click",t,n,d),w=!1),p=m=null);k=!1,C=!0}f=n,!_&&C&&a&&(b=a._handleMouseEvent(e,t,n,S)||b),!1!==t.cancelable&&(b&&!S.move||S.down&&u("mouseup"))&&t.preventDefault()},_handleKeyEvent:function(e,t,n,i){var r,o=this._scope,s=o.tool;function a(s){s.responds(e)&&(de=o,s.emit(e,r=r||new te(e,t,n,i)))}this.isVisible()&&(a(this),s&&s.responds(e)&&a(s))},_countItemEvent:function(e,t){var n=this._itemEvents,i=n.native,r=n.virtual;for(var o in C)i[o]=(i[o]||0)+(C[o][e]||0)*t;r[e]=(r[e]||0)+t},statics:{updateFocus:M,_resetState:function(){o=s=b=k=!1,e=t=d=f=p=g=m=v=y=w=null}}}}function S(e){var t=Y.getTarget(e);return t.getAttribute&&J._viewsById[t.getAttribute("id")]}function M(){var e=J._focused;if(!e||!e.isVisible())for(var n=0,i=J._views.length;n<i;n++)if((e=J._views[n]).isVisible()){J._focused=t=e;break}}function T(e,t,n){e._handleMouseEvent("mousemove",t,n)}function z(e,t,n,i,r,o,s){var a,l=!1;function u(e,n){if(e.responds(n)){if(a||(a=new ie(n,i,r,t||e,o?r.subtract(o):null)),e.emit(n,a)&&(b=!0,a.prevented&&(_=!0),a.stopped))return l=!0}else{var s=x[n];if(s)return u(e,s)}}for(;e&&e!==s&&!u(e,n);)e=e._parent;return l}function L(e,t,n,i,r,o){return e._project.removeOn(n),_=b=!1,m&&z(m,null,n,i,r,o)||t&&t!==m&&!t.isDescendant(m)&&z(t,null,"mousedrag"===n?"mousemove":n,i,r,o,m)||z(e,m||t||e,n,i,r,o)}}),Q=J.extend({_class:"CanvasView",initialize:function(e,t){if(!(t instanceof l.HTMLCanvasElement)){var n=b.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+c.slice(arguments,1));t=le.getCanvas(n)}var i=this._context=t.getContext("2d");if(i.save(),this._pixelRatio=1,!/^off|false$/.test(d.getAttribute(t,"hidpi"))){var r=l.devicePixelRatio||1,o=X.getPrefixed(i,"backingStorePixelRatio")||1;this._pixelRatio=r/o}J.call(this,e,t),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,n){var i=this._pixelRatio;if(e.base.call(this,t*i,n*i),1!==i){var r=this._element,o=this._context;if(!d.hasAttribute(r,"resize")){var s=r.style;s.width=t+"px",s.height=n+"px"}o.restore(),o.save(),o.scale(i,i)}},getContext:function(){return this._context},getPixelSize:function e(t){var n,i=de.agent;if(i&&i.firefox)n=e.base.call(this,t);else{var r=this._context,o=r.font;r.font=t+" serif",n=parseFloat(r.font),r.font=o}return n},getTextWidth:function(e,t){var n=this._context,i=n.font,r=0;n.font=e;for(var o=0,s=t.length;o<s;o++)r=Math.max(r,n.measureText(t[o]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio,this._drawSelection),this._needsUpdate=!1,this.emit("updated",new c({})),!0},rawDraw:function(e){e(this._context,this._matrix)}}),ee=c.extend({_class:"Event",initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return ne.modifiers}}),te=ee.extend({_class:"KeyEvent",initialize:function(e,t,n,i){this.type=e,this.event=t,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),ne=new function(){var e,t,n={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},i={tab:"\t",space:" ",enter:"\r"},r={},o={},s=new c({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var e=de&&de.agent;return e&&e.mac?this.meta:this.control}}});function h(e){var t=e.key||e.keyIdentifier;return t=/^U\+/.test(t)?String.fromCharCode(parseInt(t.substr(2),16)):/^Arrow[A-Z]/.test(t)?t.substr(5):"Unidentified"===t||t===a?String.fromCharCode(e.keyCode):t,n[t]||(t.length>1?c.hyphenate(t):t.toLowerCase())}function d(t,n,i,a){var l,u=J._focused;if(r[n]=t,t?o[n]=i:delete o[n],n.length>1&&(l=c.camelize(n))in s){s[l]=t;var h=de&&de.agent;if("meta"===l&&h&&h.mac)if(t)e={};else{for(var f in e)f in o&&d(!1,f,e[f],a);e=null}}else t&&e&&(e[n]=i);u&&u._handleKeyEvent(t?"keydown":"keyup",a,n,i)}return Y.add(u,{keydown:function(e){var n=h(e),r=de&&de.agent;n.length>1||r&&r.chrome&&(e.altKey||r.mac&&e.metaKey||!r.mac&&e.ctrlKey)?d(!0,n,i[n]||(n.length>1?"":n),e):t=n},keypress:function(e){if(t){var n=h(e),i=e.charCode,r=i>=32?String.fromCharCode(i):n.length>1?"":n;n!==t&&(n=r.toLowerCase()),d(!0,n,r,e),t=null}},keyup:function(e){var t=h(e);t in o&&d(!1,t,o[t],e)}}),Y.add(l,{blur:function(e){for(var t in o)d(!1,t,o[t],e)}}),{modifiers:s,isDown:function(e){return!!r[e]}}},ie=ee.extend({_class:"MouseEvent",initialize:function(e,t,n,i,r){this.type=e,this.event=t,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),re=ee.extend({_class:"ToolEvent",_item:null,initialize:function(e,t,n){this.tool=e,this.type=t,this.event=n},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),oe=f.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(e){f.call(this),this._moveCount=-1,this._downCount=-1,this._name="",this.set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,null!=e&&null!=this._maxDistance&&e>this._maxDistance&&(this._maxDistance=e)},getName:function(){return this._name},setName:function(e){this._name=e},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,null!=this._minDistance&&null!=e&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,i){de=this._scope,i.drag&&!this.responds(e)&&(e="mousemove");var r=i.move||i.drag,o=this.responds(e),s=this.minDistance,a=this.maxDistance,l=!1,u=this;function c(e,t){var o=n,s=r?u._point:u._downPoint||o;if(r){if(u._moveCount>=0&&o.equals(s))return!1;if(s&&(null!=e||null!=t)){var a=o.subtract(s),l=a.getLength();if(l<(e||0))return!1;t&&(o=s.add(a.normalize(Math.min(l,t))))}u._moveCount++}return u._point=o,u._lastPoint=s||o,i.down&&(u._moveCount=-1,u._downPoint=o,u._downCount++),!0}function h(){o&&(l=u.emit(e,new re(u,e,t))||l)}if(i.down)c(),h();else if(i.up)c(null,a),h();else if(o)for(;c(s,a);)h();return l}}),se=c.extend(h,{_class:"Tween",statics:{easings:{linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:2*(2-e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}}},initialize:function e(t,n,i,r,o,s){this.object=t;var a=typeof o,l="function"===a;this.type=l?a:"string"===a?o:"linear",this.easing=l?o:e.easings[this.type],this.duration=r,this.running=!1,this._then=null,this._startTime=null;var u=n||i;this._keys=u?Object.keys(u):[],this._parsedKeys=this._parseKeys(this._keys),this._from=u&&this._getState(n),this._to=u&&this._getState(i),!1!==s&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>1&&(e=1,this.running=!1);for(var t=this.easing(e),n=this._keys,i=function(n){return"function"==typeof n?n(t,e):n},r=0,o=n&&n.length;r<o;r++){var s=n[r],a=i(this._from[s]),l=i(this._to[s]),u=a&&l&&a.__add&&l.__add?l.__subtract(a).__multiply(t).__add(a):(l-a)*t+a;this._setProperty(this._parsedKeys[s],u)}!this.running&&this._then&&this._then(this.object),this.responds("update")&&this.emit("update",new c({progress:e,factor:t}))}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,n=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(n)},_getState:function(e){for(var t=this._keys,n={},i=0,r=t.length;i<r;i++){var o,s=t[i],a=this._parsedKeys[s],l=this._getProperty(a);if(e){var u=this._resolveValue(l,e[s]);this._setProperty(a,u),o=(o=this._getProperty(a))&&o.clone?o.clone():o,this._setProperty(a,l)}else o=l&&l.clone?l.clone():l;n[s]=o}return n},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&2===t.length){var n=t[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(e,n[0],t[1]):t}if("string"==typeof t){var i=t.match(/^[+\-*/]=(.*)/);if(i){var r=JSON.parse(i[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],r)}}}return t},_calculate:function(e,t,n){return de.PaperScript.calculateBinary(e,t,n)},_parseKeys:function(e){for(var t={},n=0,i=e.length;n<i;n++){var r=e[n],o=r.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[r]=o.split("/")}return t},_getProperty:function(e,t){for(var n=this.object,i=0,r=e.length-(t||0);i<r&&n;i++)n=n[e[i]];return n},_setProperty:function(e,t){var n=this._getProperty(e,1);n&&(n[e[e.length-1]]=t)}}),ae=function(e){var t=new s.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,c.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var n=t.status;0===n||200===n?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var n=t.status,i='Could not load "'+e.url+'" (Status: '+n+")";if(!e.onError)throw new Error(i);e.onError(i,n)},t.send(null)},le={canvases:[],getCanvas:function(e,t){if(!l)return null;var n,i=!0;"object"==typeof e&&(t=e.height,e=e.width),this.canvases.length?n=this.canvases.pop():(n=u.createElement("canvas"),i=!1);var r=n.getContext("2d");if(!r)throw new Error("Canvas "+n+" is unable to provide a 2D context.");return n.width===e&&n.height===t?i&&r.clearRect(0,0,e+1,t+1):(n.width=e,n.height=t),r.save(),n},getContext:function(e,t){var n=this.getCanvas(e,t);return n?n.getContext("2d"):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},ue=new function(){var e,t,n,i,r,o,s,a,l,u,h,d=Math.min,f=Math.max,p=Math.abs;function g(e,t,n){return.2989*e+.587*t+.114*n}function m(e,t,n,i){var r=i-g(e,t,n),o=(i=g(l=e+r,u=t+r,h=n+r),d(l,u,h)),s=f(l,u,h);if(o<0){var a=i-o;l=i+(l-i)*i/a,u=i+(u-i)*i/a,h=i+(h-i)*i/a}if(s>255){var c=255-i,p=s-i;l=i+(l-i)*c/p,u=i+(u-i)*c/p,h=i+(h-i)*c/p}}function v(e,t,n){return f(e,t,n)-d(e,t,n)}function y(e,t,n,i){var r,o=[e,t,n],s=f(e,t,n),a=d(e,t,n);r=0===d(a=a===e?0:a===t?1:2,s=s===e?0:s===t?1:2)?1===f(a,s)?2:1:0,o[s]>o[a]?(o[r]=(o[r]-o[a])*i/(o[s]-o[a]),o[s]=i):o[r]=o[s]=0,o[a]=0,l=o[0],u=o[1],h=o[2]}var w={multiply:function(){l=r*e/255,u=o*t/255,h=s*n/255},screen:function(){l=r+e-r*e/255,u=o+t-o*t/255,h=s+n-s*n/255},overlay:function(){l=r<128?2*r*e/255:255-2*(255-r)*(255-e)/255,u=o<128?2*o*t/255:255-2*(255-o)*(255-t)/255,h=s<128?2*s*n/255:255-2*(255-s)*(255-n)/255},"soft-light":function(){var i=e*r/255;l=i+r*(255-(255-r)*(255-e)/255-i)/255,u=(i=t*o/255)+o*(255-(255-o)*(255-t)/255-i)/255,h=(i=n*s/255)+s*(255-(255-s)*(255-n)/255-i)/255},"hard-light":function(){l=e<128?2*e*r/255:255-2*(255-e)*(255-r)/255,u=t<128?2*t*o/255:255-2*(255-t)*(255-o)/255,h=n<128?2*n*s/255:255-2*(255-n)*(255-s)/255},"color-dodge":function(){l=0===r?0:255===e?255:d(255,255*r/(255-e)),u=0===o?0:255===t?255:d(255,255*o/(255-t)),h=0===s?0:255===n?255:d(255,255*s/(255-n))},"color-burn":function(){l=255===r?255:0===e?0:f(0,255-255*(255-r)/e),u=255===o?255:0===t?0:f(0,255-255*(255-o)/t),h=255===s?255:0===n?0:f(0,255-255*(255-s)/n)},darken:function(){l=r<e?r:e,u=o<t?o:t,h=s<n?s:n},lighten:function(){l=r>e?r:e,u=o>t?o:t,h=s>n?s:n},difference:function(){(l=r-e)<0&&(l=-l),(u=o-t)<0&&(u=-u),(h=s-n)<0&&(h=-h)},exclusion:function(){l=r+e*(255-r-r)/255,u=o+t*(255-o-o)/255,h=s+n*(255-s-s)/255},hue:function(){y(e,t,n,v(r,o,s)),m(l,u,h,g(r,o,s))},saturation:function(){y(r,o,s,v(e,t,n)),m(l,u,h,g(r,o,s))},luminosity:function(){m(r,o,s,g(e,t,n))},color:function(){m(e,t,n,g(r,o,s))},add:function(){l=d(r+e,255),u=d(o+t,255),h=d(s+n,255)},subtract:function(){l=f(r-e,0),u=f(o-t,0),h=f(s-n,0)},average:function(){l=(r+e)/2,u=(o+t)/2,h=(s+n)/2},negation:function(){l=255-p(255-e-r),u=255-p(255-t-o),h=255-p(255-n-s)}},b=this.nativeModes=c.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(e){this[e]=!0}),{}),_=le.getContext(1,1);_&&(c.each(w,(function(e,t){var n="darken"===t,i=!1;_.save();try{_.fillStyle=n?"#300":"#a00",_.fillRect(0,0,1,1),_.globalCompositeOperation=t,_.globalCompositeOperation===t&&(_.fillStyle=n?"#a00":"#300",_.fillRect(0,0,1,1),i=_.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(e){}_.restore(),b[t]=i})),le.release(_)),this.process=function(c,d,f,p,g){var m=d.canvas,v="normal"===c;if(v||b[c])f.save(),f.setTransform(1,0,0,1,0,0),f.globalAlpha=p,v||(f.globalCompositeOperation=c),f.drawImage(m,g.x,g.y),f.restore();else{var y=w[c];if(!y)return;for(var _=f.getImageData(g.x,g.y,m.width,m.height),x=_.data,k=d.getImageData(0,0,m.width,m.height).data,C=0,S=x.length;C<S;C+=4){e=k[C],r=x[C],t=k[C+1],o=x[C+1],n=k[C+2],s=x[C+2],i=k[C+3],a=x[C+3],y();var M=i*p/255,T=1-M;x[C]=M*l+T*r,x[C+1]=M*u+T*o,x[C+2]=M*h+T*s,x[C+3]=i*p+T*a}f.putImageData(_,g.x,g.y)}}},ce=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",i={href:n,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function r(e,t,n){for(var r in t){var o=t[r],s=i[r];"number"==typeof o&&n&&(o=n.number(o)),s?e.setAttributeNS(s,r,o):e.setAttribute(r,o)}return e}return{svg:e,xmlns:t,xlink:n,create:function(t,n,i){return r(u.createElementNS(e,t),n,i)},get:function(e,t){var n=i[t],r=n?e.getAttributeNS(n,t):e.getAttribute(t);return"null"===r?null:r},set:r}},he=c.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof F||e instanceof A||e instanceof U)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(e,t){var n=c.capitalize(t),i=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:i,fromSVG:i&&c.each(i,(function(e,t){this[e]=t}),{}),exportFilter:e[3],get:"get"+n,set:"set"+n}}),{});new function(){var e;function t(t,n,i){var r,o=new c,s=t.getTranslation();if(n&&(t.isInvertible()?(r=(t=t._shiftless())._inverseTransform(s),s=null):r=new y,o[i?"cx":"x"]=r.x,o[i?"cy":"y"]=r.y),!t.isIdentity()){var a=t.decompose();if(a){var l=[],u=a.rotation,h=a.scaling,d=a.skewing;s&&!s.isZero()&&l.push("translate("+e.point(s)+")"),u&&l.push("rotate("+e.number(u)+")"),m.isZero(h.x-1)&&m.isZero(h.y-1)||l.push("scale("+e.point(h)+")"),d.x&&l.push("skewX("+e.number(d.x)+")"),d.y&&l.push("skewY("+e.number(d.y)+")"),o.transform=l.join(" ")}else o.transform="matrix("+t.getValues().join(",")+")"}return o}function n(n,i){for(var r=t(n._matrix),o=n._children,s=ce.create("g",r,e),a=0,l=o.length;a<l;a++){var c=o[a],h=d(c,i);if(h)if(c.isClipMask()){var f=ce.create("clipPath");f.appendChild(h),u(c,f,"clip"),ce.set(s,{"clip-path":"url(#"+f.id+")"})}else s.appendChild(h)}return s}function i(n){var i=n._type,r=n._radius,o=t(n._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var s=n._size,a=s.width,l=s.height;o.x-=a/2,o.y-=l/2,o.width=a,o.height=l,r.isZero()&&(r=null)}return r&&("circle"===i?o.r=r:(o.rx=r.width,o.ry=r.height)),ce.create(i,o,e)}var r,o={Group:n,Layer:n,Raster:function(n,i){var r=t(n._matrix,!0),o=n.getSize(),s=n.getImage();return r.x-=o.width/2,r.y-=o.height/2,r.width=o.width,r.height=o.height,r.href=0==i.embedImages&&s&&s.src||n.toDataURL(),ce.create("image",r,e)},Path:function(n,r){var o=r.matchShapes;if(o){var s=n.toShape(!1);if(s)return i(s)}var a,l=n._segments,u=l.length,c=t(n._matrix);if(o&&u>=2&&!n.hasHandles())if(u>2){a=n._closed?"polygon":"polyline";for(var h=[],d=0;d<u;d++)h.push(e.point(l[d]._point));c.points=h.join(" ")}else{a="line";var f=l[0]._point,p=l[1]._point;c.set({x1:f.x,y1:f.y,x2:p.x,y2:p.y})}else a="path",c.d=n.getPathData(null,r.precision);return ce.create(a,c,e)},Shape:i,CompoundPath:function(n,i){var r=t(n._matrix),o=n.getPathData(null,i.precision);return o&&(r.d=o),ce.create("path",r,e)},SymbolItem:function(n,i){var r=t(n._matrix,!0),o=n._definition,s=l(o,"symbol"),a=o._item,c=a.getStrokeBounds();return s||((s=ce.create("symbol",{viewBox:e.rectangle(c)})).appendChild(d(a,i)),u(o,s,"symbol")),r.href="#"+s.id,r.x+=c.x,r.y+=c.y,r.width=c.width,r.height=c.height,r.overflow="visible",ce.create("use",r,e)},PointText:function(n){var i=ce.create("text",t(n._matrix,!0),e);return i.textContent=n._content,i}};function a(t,n,i){var r={},o=!i&&t.getParent(),s=[];return null!=t._name&&(r.id=t._name),c.each(he,(function(n){var i=n.get,a=n.type,h=t[i]();if(n.exportFilter?n.exportFilter(t,h):!o||!c.equals(o[i](),h)){if("color"===a&&null!=h){var d=h.getAlpha();d<1&&(r[n.attribute+"-opacity"]=d)}"style"===a?s.push(n.attribute+": "+h):r[n.attribute]=null==h?"none":"color"===a?h.gradient?function(t){var n=l(t,"color");if(!n){var i,r=t.getGradient(),o=r._radial,s=t.getOrigin(),a=t.getDestination();if(o){i={cx:s.x,cy:s.y,r:s.getDistance(a)};var c=t.getHighlight();c&&(i.fx=c.x,i.fy=c.y)}else i={x1:s.x,y1:s.y,x2:a.x,y2:a.y};i.gradientUnits="userSpaceOnUse",n=ce.create((o?"radial":"linear")+"Gradient",i,e);for(var h=r._stops,d=0,f=h.length;d<f;d++){var p=h[d],g=p._color,m=g.getAlpha(),v=p._offset;i={offset:null==v?d/(f-1):v},g&&(i["stop-color"]=g.toCSS(!0)),m<1&&(i["stop-opacity"]=m),n.appendChild(ce.create("stop",i,e))}u(t,n,"color")}return"url(#"+n.id+")"}(h):h.toCSS(!0):"array"===a?h.join(","):"lookup"===a?n.toSVG[h]:h}})),s.length&&(r.style=s.join(";")),1===r.opacity&&delete r.opacity,t._visible||(r.visibility="hidden"),ce.set(n,r,e)}function l(e,t){return r||(r={ids:{},svgs:{}}),e&&r.svgs[t+"-"+(e._id||e.__id||(e.__id=v.get("svg")))]}function u(e,t,n){r||l();var i=r.ids[n]=(r.ids[n]||0)+1;t.id=n+"-"+i,r.svgs[n+"-"+(e._id||e.__id)]=t}function h(e,t){var n=e,i=null;if(r){for(var o in n="svg"===e.nodeName.toLowerCase()&&e,r.svgs)i||(n||(n=ce.create("svg")).appendChild(e),i=n.insertBefore(ce.create("defs"),n.firstChild)),i.appendChild(r.svgs[o]);r=null}return t.asString?(new s.XMLSerializer).serializeToString(n):n}function d(e,t,n){var i=o[e._class],r=i&&i(e,t);if(r){var s=t.onExport;s&&(r=s(e,r,t)||r);var l=JSON.stringify(e._data);l&&"{}"!==l&&"null"!==l&&r.setAttribute("data-paper-data",l)}return r&&a(e,r,n)}function f(t){return t||(t={}),e=new g(t.precision),t}T.inject({exportSVG:function(e){return h(d(this,e=f(e),!0),e)}}),M.inject({exportSVG:function(n){n=f(n);var i=this._children,r=this.getView(),o=c.pick(n.bounds,"view"),s=n.matrix||"view"===o&&r._matrix,a=s&&C.read([s]),l="view"===o?new x([0,0],r.getViewSize()):"content"===o?T._getBounds(i,a,{stroke:!0}).rect:x.read([o],0,{readNull:!0}),u={version:"1.1",xmlns:ce.svg,"xmlns:xlink":ce.xlink};l&&(u.width=l.width,u.height=l.height,(l.x||0===l.x||l.y||0===l.y)&&(u.viewBox=e.rectangle(l)));var p=ce.create("svg",u,e),g=p;a&&!a.isIdentity()&&(g=p.appendChild(ce.create("g",t(a),e)));for(var m=0,v=i.length;m<v;m++)g.appendChild(d(i[m],n,!0));return h(p,n)}})},new function(){var e,t={};function n(t,n,i,r,o,s){var a=ce.get(t,n)||s,l=null==a?r?null:i?"":0:i?a:parseFloat(a);return/%\s*$/.test(a)?l/100*(o?1:e[/x|^width/.test(n)?"width":"height"]):l}function i(e,t,i,r,o,s,a){return t=n(e,t||"x",!1,r,o,s),i=n(e,i||"y",!1,r,o,a),!r||null!=t&&null!=i?new y(t,i):null}function r(e,t,i,r,o){return t=n(e,t||"width",!1,r,o),i=n(e,i||"height",!1,r,o),!r||null!=t&&null!=i?new b(t,i):null}function o(e,t,n){return"none"===e?null:"number"===t?parseFloat(e):"array"===t?e?e.split(/[\s,]+/g).map(parseFloat):[]:"color"===t?k(e)||e:"lookup"===t?n[e]:e}function h(e,t,n,i){var r=e.childNodes,o="clippath"===t,s="defs"===t,a=new z,l=a._project,u=l._currentStyle,c=[];if(o||s||(a=_(a,e,i),l._currentStyle=a._style.clone()),i)for(var h=e.querySelectorAll("defs"),d=0,f=h.length;d<f;d++)S(h[d],n,!1);for(d=0,f=r.length;d<f;d++){var p,g=r[d];1!==g.nodeType||/^defs$/i.test(g.nodeName)||!(p=S(g,n,!1))||p instanceof I||c.push(p)}return a.addChildren(c),o&&(a=_(a.reduce(),e,i)),l._currentStyle=u,(o||s)&&(a.remove(),a=null),a}function d(e,t){for(var n=e.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,o=n.length;r<o;r+=2)i.push(new y(parseFloat(n[r]),parseFloat(n[r+1])));var s=new B(i);return"polygon"===t&&s.closePath(),s}function f(e,r){var o,s=(n(e,"href",!0)||"").substring(1),a="radialgradient"===r;if(s)(o=t[s].getGradient())._radial^a&&((o=o.clone())._radial=a);else{for(var l=e.childNodes,u=[],c=0,h=l.length;c<h;c++){var d=l[c];1===d.nodeType&&u.push(_(new K,d))}o=new $(u,a)}var f,p,g,m="userSpaceOnUse"!==n(e,"gradientUnits",!0);return a?(p=(f=i(e,"cx","cy",!1,m,"50%","50%")).add(n(e,"r",!1,!1,m,"50%"),0),g=i(e,"fx","fy",!0,m)):(f=i(e,"x1","y1",!1,m,"0%","0%"),p=i(e,"x2","y2",!1,m,"100%","0%")),_(new G(o,f,p,g),e)._scaleToBounds=m,null}var p={"#document":function(e,t,n,i){for(var r=e.childNodes,o=0,s=r.length;o<s;o++){var a=r[o];if(1===a.nodeType)return S(a,n,i)}},g:h,svg:h,clippath:h,polygon:d,polyline:d,path:function(e){return F.create(e.getAttribute("d"))},lineargradient:f,radialgradient:f,image:function(e){var t=new O(n(e,"href",!0));return t.on("load",(function(){var t=r(e);this.setSize(t);var n=i(e).add(t.divide(2));this._matrix.append((new C).translate(n))})),t},symbol:function(e,t,n,i){return new I(h(e,t,n,i),!0)},defs:h,use:function(e){var r=(n(e,"href",!0)||"").substring(1),o=t[r],s=i(e);return o?o instanceof I?o.place(s):o.clone().translate(s):null},circle:function(e){return new A.Circle(i(e,"cx","cy"),n(e,"r"))},ellipse:function(e){return new A.Ellipse({center:i(e,"cx","cy"),radius:r(e,"rx","ry")})},rect:function(e){return new A.Rectangle(new x(i(e),r(e)),r(e,"rx","ry"))},line:function(e){return new B.Line(i(e,"x1","y1"),i(e,"x2","y2"))},text:function(e){var t=new q(i(e).add(i(e,"dx","dy")));return t.setContent(e.textContent.trim()||""),t},switch:h};function g(e,t,n,i){if(e.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),o=new C,s=0,a=r.length;s<a;s++){var l=r[s];if(!l)break;for(var u=l.split(/\(\s*/),c=u[0],h=u[1].split(/[\s,]+/g),d=0,f=h.length;d<f;d++)h[d]=parseFloat(h[d]);switch(c){case"matrix":o.append(new C(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":o.rotate(h[0],h[1]||0,h[2]||0);break;case"translate":o.translate(h[0],h[1]||0);break;case"scale":o.scale(h);break;case"skewX":o.skew(h[0],0);break;case"skewY":o.skew(0,h[0])}}e.transform(o)}}function m(e,t,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=e[i]&&e[i]();r&&r.setAlpha(parseFloat(t))}var v=c.set(c.each(he,(function(e){this[e.attribute]=function(t,n){if(t[e.set]&&(t[e.set](o(n,e.type,e.fromSVG)),"color"===e.type)){var i=t[e.get]();if(i&&i._scaleToBounds){var r=t.getBounds();i.transform((new C).translate(r.getPoint()).scale(r.getSize()))}}}}),{}),{id:function(e,n){t[n]=e,e.setName&&e.setName(n)},"clip-path":function(e,t){var n=k(t);if(n){if((n=n.clone()).setClipMask(!0),!(e instanceof z))return new z(n,e);e.insertChild(0,n)}},gradientTransform:g,transform:g,"fill-opacity":m,"stroke-opacity":m,visibility:function(e,t){e.setVisible&&e.setVisible("visible"===t)},display:function(e,t){e.setVisible&&e.setVisible(null!==t)},"stop-color":function(e,t){e.setColor&&e.setColor(t)},"stop-opacity":function(e,t){e._color&&e._color.setAlpha(parseFloat(t))},offset:function(e,t){if(e.setOffset){var n=t.match(/(.*)%$/);e.setOffset(n?n[1]/100:parseFloat(t))}},viewBox:function(e,t,n,i,s){var a,l=new x(o(t,"array")),u=r(i,null,null,!0);if(e instanceof z){var c=u?u.divide(l.getSize()):1,h=(new C).scale(c).translate(l.getPoint().negate());a=e}else e instanceof I&&(u&&l.setSize(u),a=e._item);if(a){if("visible"!==w(i,"overflow",s)){var d=new A.Rectangle(l);d.setClipMask(!0),a.addChild(d)}h&&a.transform(h)}}});function w(e,t,n){var i=e.attributes[t],r=i&&i.value;if(!r&&e.style){var o=c.camelize(t);(r=e.style[o])||n.node[o]===n.parent[o]||(r=n.node[o])}return r?"none"===r?null:r:a}function _(e,t,n){var i=t.parentNode,r={node:X.getStyles(t)||{},parent:!n&&!/^defs$/i.test(i.tagName)&&X.getStyles(i)||{}};return c.each(v,(function(n,i){var o=w(t,i,r);e=o!==a&&n(e,o,i,t,r)||e})),e}function k(e){var n=e&&e.match(/\((?:["'#]*)([^"')]+)/),i=n&&n[1],r=i&&t[l?i.replace(l.location.href.split("#")[0]+"#",""):i];return r&&r._scaleToBounds&&((r=r.clone())._scaleToBounds=!0),r}function S(n,i,o){var s,a,l,h=n.nodeName.toLowerCase(),d="#document"!==h,f=u.body;o&&d&&(e=de.getView().getSize(),e=r(n,null,null,!0)||e,s=ce.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),a=n.parentNode,l=n.nextSibling,s.appendChild(n),f.appendChild(s));var g=de.settings,m=g.applyMatrix,v=g.insertItems;g.applyMatrix=!1,g.insertItems=!1;var y=p[h],w=y&&y(n,h,i,o)||null;if(g.insertItems=v,g.applyMatrix=m,w){!d||w instanceof z||(w=_(w,n,o));var b=i.onImport,x=d&&n.getAttribute("data-paper-data");b&&(w=b(n,w,i)||w),i.expandShapes&&w instanceof A&&(w.remove(),w=w.toPath()),x&&(w._data=JSON.parse(x))}return s&&(f.removeChild(s),a&&(l?a.insertBefore(n,l):a.appendChild(n))),o&&(t={},w&&c.pick(i.applyMatrix,m)&&w.matrix.apply(!0,!0)),w}function L(e,t,n){if(!e)return null;t="function"==typeof t?{onLoad:t}:t||{};var i=de,r=null;function o(o){try{var u="object"==typeof o?o:(new s.DOMParser).parseFromString(o,"image/svg+xml");if(!u.nodeName)throw u=null,new Error("Unsupported SVG source: "+e);de=i,r=S(u,t,!0),t&&!1===t.insert||n._insertItem(a,r);var c=t.onLoad;c&&c(r,o)}catch(e){l(e)}}function l(e,n){var i=t.onError;if(!i)throw new Error(e);i(e,n)}if("string"!=typeof e||/^.*</.test(e)){if("undefined"!=typeof File&&e instanceof File){var c=new FileReader;return c.onload=function(){o(c.result)},c.onerror=function(){l(c.error)},c.readAsText(e)}o(e)}else{var h=u.getElementById(e);h?o(h):ae({url:e,async:!0,onLoad:o,onError:l})}return r}T.inject({importSVG:function(e,t){return L(e,t,this)}}),M.inject({importSVG:function(e,t){return this.activate(),L(e,t,this)}})},c.exports.PaperScript=function(){var e,t,h,f=this,p=f.acorn;if(!p)try{p=n(5)}catch(e){}function g(e,t){return(f.acorn||p).parse(e,t)}p||(p=e=t={},h=function(e){"use strict";var t,n,i,r;e.version="0.5.0",e.parse=function(e,r){return n=String(e),i=n.length,s(r),Ge(),function(e){v=y=a,t.locations&&(w=new qe),b=x=null,_=[],Ye();var n=e||ut(),i=!0;for(e||(n.body=[]);d!==A;){var r=_t();n.body.push(r),i&&dt(r)&&st(!0),i=!1}return ht(n,"Program")}(t.program)};var o=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function s(e){for(var n in t=e||{},o)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=o[n]);r=t.sourceFile||null}var a,l,u,c,h,d,f,p,g,m,v,y,w,b,_,x,k=e.getLineInfo=function(e,t){for(var n=1,i=0;;){We.lastIndex=i;var r=We.exec(e);if(!(r&&r.index<t))break;++n,i=r.index+r[0].length}return{line:n,column:t-i}};function C(e,t){var i=k(n,e);t+=" ("+i.line+":"+i.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=i,r.raisedAt=a,r}e.tokenize=function(e,r){n=String(e),i=n.length,s(r),Ge();var o={};function v(e){return y=u,Ye(e),o.start=l,o.end=u,o.startLoc=c,o.endLoc=h,o.type=d,o.value=f,o}return v.jumpTo=function(e,i){var r;if(a=e,t.locations)for(g=1,m=We.lastIndex=0;(r=We.exec(n))&&r.index<e;)++g,m=r.index+r[0].length;p=i,Xe()},v};var S=[],M={type:"num"},T={type:"regexp"},z={type:"string"},L={type:"name"},A={type:"eof"},O={keyword:"break"},P={keyword:"case",beforeExpr:!0},I={keyword:"catch"},E={keyword:"continue"},j={keyword:"debugger"},N={keyword:"default"},D={keyword:"do",isLoop:!0},R={keyword:"else",beforeExpr:!0},F={keyword:"finally"},B={keyword:"for",isLoop:!0},H={keyword:"function"},W={keyword:"if"},V={keyword:"return",beforeExpr:!0},U={keyword:"switch"},q={keyword:"throw",beforeExpr:!0},G={keyword:"try"},$={keyword:"var"},K={keyword:"while",isLoop:!0},Z={keyword:"with"},X={keyword:"new",beforeExpr:!0},Y={keyword:"this"},J={keyword:"null",atomValue:null},Q={keyword:"true",atomValue:!0},ee={keyword:"false",atomValue:!1},te={keyword:"in",binop:7,beforeExpr:!0},ne={break:O,case:P,catch:I,continue:E,debugger:j,default:N,do:D,else:R,finally:F,for:B,function:H,if:W,return:V,switch:U,throw:q,try:G,var:$,while:K,with:Z,null:J,true:Q,false:ee,new:X,in:te,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Y,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ie={type:"[",beforeExpr:!0},re={type:"]"},oe={type:"{",beforeExpr:!0},se={type:"}"},ae={type:"(",beforeExpr:!0},le={type:")"},ue={type:",",beforeExpr:!0},ce={type:";",beforeExpr:!0},he={type:":",beforeExpr:!0},de={type:"."},fe={type:"?",beforeExpr:!0},pe={binop:10,beforeExpr:!0},ge={isAssign:!0,beforeExpr:!0},me={isAssign:!0,beforeExpr:!0},ve={postfix:!0,prefix:!0,isUpdate:!0},ye={prefix:!0,beforeExpr:!0},we={binop:1,beforeExpr:!0},be={binop:2,beforeExpr:!0},_e={binop:3,beforeExpr:!0},xe={binop:4,beforeExpr:!0},ke={binop:5,beforeExpr:!0},Ce={binop:6,beforeExpr:!0},Se={binop:7,beforeExpr:!0},Me={binop:8,beforeExpr:!0},Te={binop:9,prefix:!0,beforeExpr:!0},ze={binop:10,beforeExpr:!0};for(var Le in e.tokTypes={bracketL:ie,bracketR:re,braceL:oe,braceR:se,parenL:ae,parenR:le,comma:ue,semi:ce,colon:he,dot:de,question:fe,slash:pe,eq:ge,name:L,eof:A,num:M,regexp:T,string:z},ne)e.tokTypes["_"+Le]=ne[Le];function Ae(e){e=e.split(" ");var t="",n=[];e:for(var i=0;i<e.length;++i){for(var r=0;r<n.length;++r)if(n[r][0].length==e[i].length){n[r].push(e[i]);continue e}n.push([e[i]])}function o(e){if(1==e.length)return t+="return str === "+JSON.stringify(e[0])+";";t+="switch(str){";for(var n=0;n<e.length;++n)t+="case "+JSON.stringify(e[n])+":";t+="return true}return false;"}if(n.length>3){for(n.sort((function(e,t){return t.length-e.length})),t+="switch(str.length){",i=0;i<n.length;++i){var s=n[i];t+="case "+s[0].length+":",o(s)}t+="}"}else o(e);return new Function("str",t)}var Oe,Pe=Ae("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ie=Ae("class enum extends super const export import"),Ee=Ae("implements interface let package private protected public static yield"),je=Ae("eval arguments"),Ne=Ae("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),De=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Re="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Fe=new RegExp("["+Re+"]"),Be=new RegExp("["+Re+"------------------------------------------------------------------------------------------------------------------------------------------]"),He=/[\n\r\u2028\u2029]/,We=/\r\n|[\n\r\u2028\u2029]/g,Ve=e.isIdentifierStart=function(e){return e<65?36===e:e<91||(e<97?95===e:e<123||e>=170&&Fe.test(String.fromCharCode(e)))},Ue=e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&Be.test(String.fromCharCode(e))))};function qe(){this.line=g,this.column=a-m}function Ge(){g=1,a=m=0,p=!0,Xe()}function $e(e,n){u=a,t.locations&&(h=new qe),d=e,Xe(),f=n,p=e.beforeExpr}function Ke(){var e,i=t.onComment&&t.locations&&new qe,r=a,o=n.indexOf("*/",a+=2);if(-1===o&&C(a-2,"Unterminated comment"),a=o+2,t.locations)for(We.lastIndex=r;(e=We.exec(n))&&e.index<a;)++g,m=e.index+e[0].length;t.onComment&&t.onComment(!0,n.slice(r+2,o),r,a,i,t.locations&&new qe)}function Ze(){for(var e=a,r=t.onComment&&t.locations&&new qe,o=n.charCodeAt(a+=2);a<i&&10!==o&&13!==o&&8232!==o&&8233!==o;)++a,o=n.charCodeAt(a);t.onComment&&t.onComment(!1,n.slice(e+2,a),e,a,r,t.locations&&new qe)}function Xe(){for(;a<i;){var e=n.charCodeAt(a);if(32===e)++a;else if(13===e)++a,10===(r=n.charCodeAt(a))&&++a,t.locations&&(++g,m=a);else if(10===e||8232===e||8233===e)++a,t.locations&&(++g,m=a);else if(e>8&&e<14)++a;else if(47===e){var r;if(42===(r=n.charCodeAt(a+1)))Ke();else{if(47!==r)break;Ze()}}else if(160===e)++a;else{if(!(e>=5760&&De.test(String.fromCharCode(e))))break;++a}}}function Ye(e){if(e?a=l+1:l=a,t.locations&&(c=new qe),e)return Qe();if(a>=i)return $e(A);var r=n.charCodeAt(a);if(Ve(r)||92===r)return rt();var o=function(e){switch(e){case 46:return function(){var e=n.charCodeAt(a+1);return e>=48&&e<=57?tt(!0):(++a,$e(de))}();case 40:return++a,$e(ae);case 41:return++a,$e(le);case 59:return++a,$e(ce);case 44:return++a,$e(ue);case 91:return++a,$e(ie);case 93:return++a,$e(re);case 123:return++a,$e(oe);case 125:return++a,$e(se);case 58:return++a,$e(he);case 63:return++a,$e(fe);case 48:var r=n.charCodeAt(a+1);if(120===r||88===r)return function(){a+=2;var e=et(16);return null==e&&C(l+2,"Expected hexadecimal number"),Ve(n.charCodeAt(a))&&C(a,"Identifier directly after number"),$e(M,e)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return tt(!1);case 34:case 39:return function(e){a++;for(var r="";;){a>=i&&C(l,"Unterminated string constant");var o=n.charCodeAt(a);if(o===e)return++a,$e(z,r);if(92===o){o=n.charCodeAt(++a);var s=/^[0-7]+/.exec(n.slice(a,a+3));for(s&&(s=s[0]);s&&parseInt(s,8)>255;)s=s.slice(0,-1);if("0"===s&&(s=null),++a,s)x&&C(a-2,"Octal literal in strict mode"),r+=String.fromCharCode(parseInt(s,8)),a+=s.length-1;else switch(o){case 110:r+="\n";break;case 114:r+="\r";break;case 120:r+=String.fromCharCode(nt(2));break;case 117:r+=String.fromCharCode(nt(4));break;case 85:r+=String.fromCharCode(nt(8));break;case 116:r+="\t";break;case 98:r+="\b";break;case 118:r+="\v";break;case 102:r+="\f";break;case 48:r+="\0";break;case 13:10===n.charCodeAt(a)&&++a;case 10:t.locations&&(m=a,++g);break;default:r+=String.fromCharCode(o)}}else 13!==o&&10!==o&&8232!==o&&8233!==o||C(l,"Unterminated string constant"),r+=String.fromCharCode(o),++a}}(e);case 47:return function(){var e=n.charCodeAt(a+1);return p?(++a,Qe()):61===e?Je(me,2):Je(pe,1)}();case 37:case 42:return 61===n.charCodeAt(a+1)?Je(me,2):Je(ze,1);case 124:case 38:return function(e){var t=n.charCodeAt(a+1);return t===e?Je(124===e?we:be,2):61===t?Je(me,2):Je(124===e?_e:ke,1)}(e);case 94:return 61===n.charCodeAt(a+1)?Je(me,2):Je(xe,1);case 43:case 45:return function(e){var t=n.charCodeAt(a+1);return t===e?45==t&&62==n.charCodeAt(a+2)&&He.test(n.slice(y,a))?(a+=3,Ze(),Xe(),Ye()):Je(ve,2):61===t?Je(me,2):Je(Te,1)}(e);case 60:case 62:return function(e){var t=n.charCodeAt(a+1),i=1;return t===e?(i=62===e&&62===n.charCodeAt(a+2)?3:2,61===n.charCodeAt(a+i)?Je(me,i+1):Je(Me,i)):33==t&&60==e&&45==n.charCodeAt(a+2)&&45==n.charCodeAt(a+3)?(a+=4,Ze(),Xe(),Ye()):(61===t&&(i=61===n.charCodeAt(a+2)?3:2),Je(Se,i))}(e);case 61:case 33:return function(e){return 61===n.charCodeAt(a+1)?Je(Ce,61===n.charCodeAt(a+2)?3:2):Je(61===e?ge:ye,1)}(e);case 126:return Je(ye,1)}return!1}(r);if(!1===o){var s=String.fromCharCode(r);if("\\"===s||Fe.test(s))return rt();C(a,"Unexpected character '"+s+"'")}return o}function Je(e,t){var i=n.slice(a,a+t);a+=t,$e(e,i)}function Qe(){for(var e,t,r=a;;){a>=i&&C(r,"Unterminated regular expression");var o=n.charAt(a);if(He.test(o)&&C(r,"Unterminated regular expression"),e)e=!1;else{if("["===o)t=!0;else if("]"===o&&t)t=!1;else if("/"===o&&!t)break;e="\\"===o}++a}var s=n.slice(r,a);++a;var l=it();l&&!/^[gmsiy]*$/.test(l)&&C(r,"Invalid regexp flag");try{var u=new RegExp(s,l)}catch(e){e instanceof SyntaxError&&C(r,e.message),C(e)}return $e(T,u)}function et(e,t){for(var i=a,r=0,o=0,s=null==t?1/0:t;o<s;++o){var l,u=n.charCodeAt(a);if((l=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=e)break;++a,r=r*e+l}return a===i||null!=t&&a-i!==t?null:r}function tt(e){var t=a,i=!1,r=48===n.charCodeAt(a);e||null!==et(10)||C(t,"Invalid number"),46===n.charCodeAt(a)&&(++a,et(10),i=!0);var o=n.charCodeAt(a);69!==o&&101!==o||(43!==(o=n.charCodeAt(++a))&&45!==o||++a,null===et(10)&&C(t,"Invalid number"),i=!0),Ve(n.charCodeAt(a))&&C(a,"Identifier directly after number");var s,l=n.slice(t,a);return i?s=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||x?C(t,"Invalid number"):s=parseInt(l,8):s=parseInt(l,10),$e(M,s)}function nt(e){var t=et(16,e);return null===t&&C(l,"Bad character escape sequence"),t}function it(){Oe=!1;for(var e,t=!0,i=a;;){var r=n.charCodeAt(a);if(Ue(r))Oe&&(e+=n.charAt(a)),++a;else{if(92!==r)break;Oe||(e=n.slice(i,a)),Oe=!0,117!=n.charCodeAt(++a)&&C(a,"Expecting Unicode escape sequence \\uXXXX"),++a;var o=nt(4),s=String.fromCharCode(o);s||C(a-1,"Invalid Unicode escape"),(t?Ve(o):Ue(o))||C(a-4,"Invalid Unicode escape"),e+=s}t=!1}return Oe?e:n.slice(i,a)}function rt(){var e=it(),t=L;return!Oe&&Ne(e)&&(t=ne[e]),$e(t,e)}function ot(){v=l,y=u,w=h,Ye()}function st(e){if(x=e,a=l,t.locations)for(;a<m;)m=n.lastIndexOf("\n",m-2)+1,--g;Xe(),Ye()}function at(){this.type=null,this.start=l,this.end=null}function lt(){this.start=c,this.end=null,null!==r&&(this.source=r)}function ut(){var e=new at;return t.locations&&(e.loc=new lt),t.directSourceFile&&(e.sourceFile=t.directSourceFile),t.ranges&&(e.range=[l,0]),e}function ct(e){var n=new at;return n.start=e.start,t.locations&&(n.loc=new lt,n.loc.start=e.loc.start),t.ranges&&(n.range=[e.range[0],0]),n}function ht(e,n){return e.type=n,e.end=y,t.locations&&(e.loc.end=w),t.ranges&&(e.range[1]=y),e}function dt(e){return t.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value}function ft(e){if(d===e)return ot(),!0}function pt(){return!t.strictSemicolons&&(d===A||d===se||He.test(n.slice(y,l)))}function gt(){ft(ce)||pt()||vt()}function mt(e){d===e?ot():vt()}function vt(){C(l,"Unexpected token")}function yt(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&C(e.start,"Assigning to rvalue"),x&&"Identifier"===e.type&&je(e.name)&&C(e.start,"Assigning to "+e.name+" in strict mode")}var wt={kind:"loop"},bt={kind:"switch"};function _t(){(d===pe||d===me&&"/="==f)&&Ye(!0);var e=d,i=ut();switch(e){case O:case E:ot();var r=e===O;ft(ce)||pt()?i.label=null:d!==L?vt():(i.label=jt(),gt());for(var o=0;o<_.length;++o){var s=_[o];if(null==i.label||s.name===i.label.name){if(null!=s.kind&&(r||"loop"===s.kind))break;if(i.label&&r)break}}return o===_.length&&C(i.start,"Unsyntactic "+e.keyword),ht(i,r?"BreakStatement":"ContinueStatement");case j:return ot(),gt(),ht(i,"DebuggerStatement");case D:return ot(),_.push(wt),i.body=_t(),_.pop(),mt(K),i.test=xt(),gt(),ht(i,"DoWhileStatement");case B:if(ot(),_.push(wt),mt(ae),d===ce)return Ct(i,null);if(d===$){var a=ut();return ot(),Mt(a,!0),ht(a,"VariableDeclaration"),1===a.declarations.length&&ft(te)?St(i,a):Ct(i,a)}return a=Tt(!1,!0),ft(te)?(yt(a),St(i,a)):Ct(i,a);case H:return ot(),It(i,!0);case W:return ot(),i.test=xt(),i.consequent=_t(),i.alternate=ft(R)?_t():null,ht(i,"IfStatement");case V:return b||t.allowReturnOutsideFunction||C(l,"'return' outside of function"),ot(),ft(ce)||pt()?i.argument=null:(i.argument=Tt(),gt()),ht(i,"ReturnStatement");case U:ot(),i.discriminant=xt(),i.cases=[],mt(oe),_.push(bt);for(var u,c;d!=se;)if(d===P||d===N){var h=d===P;u&&ht(u,"SwitchCase"),i.cases.push(u=ut()),u.consequent=[],ot(),h?u.test=Tt():(c&&C(v,"Multiple default clauses"),c=!0,u.test=null),mt(he)}else u||vt(),u.consequent.push(_t());return u&&ht(u,"SwitchCase"),ot(),_.pop(),ht(i,"SwitchStatement");case q:return ot(),He.test(n.slice(y,l))&&C(y,"Illegal newline after throw"),i.argument=Tt(),gt(),ht(i,"ThrowStatement");case G:if(ot(),i.block=kt(),i.handler=null,d===I){var p=ut();ot(),mt(ae),p.param=jt(),x&&je(p.param.name)&&C(p.param.start,"Binding "+p.param.name+" in strict mode"),mt(le),p.guard=null,p.body=kt(),i.handler=ht(p,"CatchClause")}return i.guardedHandlers=S,i.finalizer=ft(F)?kt():null,i.handler||i.finalizer||C(i.start,"Missing catch or finally clause"),ht(i,"TryStatement");case $:return ot(),Mt(i),gt(),ht(i,"VariableDeclaration");case K:return ot(),i.test=xt(),_.push(wt),i.body=_t(),_.pop(),ht(i,"WhileStatement");case Z:return x&&C(l,"'with' in strict mode"),ot(),i.object=xt(),i.body=_t(),ht(i,"WithStatement");case oe:return kt();case ce:return ot(),ht(i,"EmptyStatement");default:var g=f,m=Tt();if(e===L&&"Identifier"===m.type&&ft(he)){for(o=0;o<_.length;++o)_[o].name===g&&C(m.start,"Label '"+g+"' is already declared");var w=d.isLoop?"loop":d===U?"switch":null;return _.push({name:g,kind:w}),i.body=_t(),_.pop(),i.label=m,ht(i,"LabeledStatement")}return i.expression=m,gt(),ht(i,"ExpressionStatement")}}function xt(){mt(ae);var e=Tt();return mt(le),e}function kt(e){var t,n=ut(),i=!0,r=!1;for(n.body=[],mt(oe);!ft(se);){var o=_t();n.body.push(o),i&&e&&dt(o)&&(t=r,st(r=!0)),i=!1}return r&&!t&&st(!1),ht(n,"BlockStatement")}function Ct(e,t){return e.init=t,mt(ce),e.test=d===ce?null:Tt(),mt(ce),e.update=d===le?null:Tt(),mt(le),e.body=_t(),_.pop(),ht(e,"ForStatement")}function St(e,t){return e.left=t,e.right=Tt(),mt(le),e.body=_t(),_.pop(),ht(e,"ForInStatement")}function Mt(e,t){for(e.declarations=[],e.kind="var";;){var n=ut();if(n.id=jt(),x&&je(n.id.name)&&C(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=ft(ge)?Tt(!0,t):null,e.declarations.push(ht(n,"VariableDeclarator")),!ft(ue))break}return e}function Tt(e,t){var n=zt(t);if(!e&&d===ue){var i=ct(n);for(i.expressions=[n];ft(ue);)i.expressions.push(zt(t));return ht(i,"SequenceExpression")}return n}function zt(e){var t=function(e){var t=function(e){return function e(t,n,i){var r=d.binop;if(null!=r&&(!i||d!==te)&&r>n){var o=ct(t);o.left=t,o.operator=f;var s=d;return ot(),o.right=e(Lt(),r,i),e(ht(o,s===we||s===be?"LogicalExpression":"BinaryExpression"),n,i)}return t}(Lt(),-1,e)}(e);if(ft(fe)){var n=ct(t);return n.test=t,n.consequent=Tt(!0),mt(he),n.alternate=Tt(!0,e),ht(n,"ConditionalExpression")}return t}(e);if(d.isAssign){var n=ct(t);return n.operator=f,n.left=t,ot(),n.right=zt(e),yt(t),ht(n,"AssignmentExpression")}return t}function Lt(){if(d.prefix){var e=ut(),t=d.isUpdate;return e.operator=f,e.prefix=!0,p=!0,ot(),e.argument=Lt(),t?yt(e.argument):x&&"delete"===e.operator&&"Identifier"===e.argument.type&&C(e.start,"Deleting local variable in strict mode"),ht(e,t?"UpdateExpression":"UnaryExpression")}for(var n=At(Ot());d.postfix&&!pt();)(e=ct(n)).operator=f,e.prefix=!1,e.argument=n,yt(n),ot(),n=ht(e,"UpdateExpression");return n}function At(e,t){var n;return ft(de)?((n=ct(e)).object=e,n.property=jt(!0),n.computed=!1,At(ht(n,"MemberExpression"),t)):ft(ie)?((n=ct(e)).object=e,n.property=Tt(),n.computed=!0,mt(re),At(ht(n,"MemberExpression"),t)):!t&&ft(ae)?((n=ct(e)).callee=e,n.arguments=Et(le,!1),At(ht(n,"CallExpression"),t)):e}function Ot(){switch(d){case Y:var e=ut();return ot(),ht(e,"ThisExpression");case L:return jt();case M:case z:case T:return(e=ut()).value=f,e.raw=n.slice(l,u),ot(),ht(e,"Literal");case J:case Q:case ee:return(e=ut()).value=d.atomValue,e.raw=d.keyword,ot(),ht(e,"Literal");case ae:var i=c,r=l;ot();var o=Tt();return o.start=r,o.end=u,t.locations&&(o.loc.start=i,o.loc.end=h),t.ranges&&(o.range=[r,u]),mt(le),o;case ie:return e=ut(),ot(),e.elements=Et(re,!0,!0),ht(e,"ArrayExpression");case oe:return function(){var e=ut(),n=!0,i=!1;for(e.properties=[],ot();!ft(se);){if(n)n=!1;else if(mt(ue),t.allowTrailingCommas&&ft(se))break;var r,o={key:Pt()},s=!1;if(ft(he)?(o.value=Tt(!0),r=o.kind="init"):t.ecmaVersion>=5&&"Identifier"===o.key.type&&("get"===o.key.name||"set"===o.key.name)?(s=i=!0,r=o.kind=o.key.name,o.key=Pt(),d!==ae&&vt(),o.value=It(ut(),!1)):vt(),"Identifier"===o.key.type&&(x||i))for(var a=0;a<e.properties.length;++a){var l=e.properties[a];if(l.key.name===o.key.name){var u=r==l.kind||s&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);u&&!x&&"init"===r&&"init"===l.kind&&(u=!1),u&&C(o.key.start,"Redefinition of property")}}e.properties.push(o)}return ht(e,"ObjectExpression")}();case H:return e=ut(),ot(),It(e,!1);case X:return function(){var e=ut();return ot(),e.callee=At(Ot(),!0),ft(ae)?e.arguments=Et(le,!1):e.arguments=S,ht(e,"NewExpression")}();default:vt()}}function Pt(){return d===M||d===z?Ot():jt(!0)}function It(e,t){d===L?e.id=jt():t?vt():e.id=null,e.params=[];var n=!0;for(mt(ae);!ft(le);)n?n=!1:mt(ue),e.params.push(jt());var i=b,r=_;if(b=!0,_=[],e.body=kt(!0),b=i,_=r,x||e.body.body.length&&dt(e.body.body[0]))for(var o=e.id?-1:0;o<e.params.length;++o){var s=o<0?e.id:e.params[o];if((Ee(s.name)||je(s.name))&&C(s.start,"Defining '"+s.name+"' in strict mode"),o>=0)for(var a=0;a<o;++a)s.name===e.params[a].name&&C(s.start,"Argument name clash in strict mode")}return ht(e,t?"FunctionDeclaration":"FunctionExpression")}function Et(e,n,i){for(var r=[],o=!0;!ft(e);){if(o)o=!1;else if(mt(ue),n&&t.allowTrailingCommas&&ft(e))break;i&&d===ue?r.push(null):r.push(Tt(!0))}return r}function jt(e){var i=ut();return e&&"everywhere"==t.forbidReserved&&(e=!1),d===L?(!e&&(t.forbidReserved&&(3===t.ecmaVersion?Pe:Ie)(f)||x&&Ee(f))&&-1==n.slice(l,u).indexOf("\\")&&C(l,"The keyword '"+f+"' is reserved"),i.name=f):e&&d.keyword?i.name=d.keyword:vt(),p=!1,ot(),ht(i,"Identifier")}},"object"==typeof e&&"object"==typeof t?h(e):(i=[e],(o="function"==typeof(r=h)?r.apply(e,i):r)===a||(t.exports=o)),p.version||(p=null));var m={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},v={"-":"__negate","+":"__self"},w=c.each(["add","subtract","multiply","divide","modulo","equals","negate"],(function(e){this["__"+e]="#"+e}),{__self:function(){return this}});function _(e,t,n){var i=m[t];if(e&&e[i]){var r=e[i](n);return"!="===t?!r:r}switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;case"==":return e==n;case"!=":return e!=n}}function x(e,t){var n=v[e];if(t&&t[n])return t[n]();switch(e){case"+":return+t;case"-":return-t}}function k(e,t){if(!e)return"";var n=[];function i(e){for(var t=0,i=n.length;t<i;t++){var r=n[t];if(r[0]>=e)break;e+=r[1]}return e}function r(t){return e.substring(i(t.range[0]),i(t.range[1]))}function o(t,r){for(var o=i(t.range[0]),s=i(t.range[1]),a=0,l=n.length-1;l>=0;l--)if(o>n[l][0]){a=l+1;break}n.splice(a,0,[o,r.length-s+o]),e=e.substring(0,o)+r+e.substring(s)}var a,c=(t=t||{}).url||"",h=de.agent,d=h.versionNumber,f=!1,p=t.sourceMaps,y=t.source||e,w=/\r\n|\n|\r/gm,b=t.offset||0;if(p&&(h.chrome&&d>=30||h.webkit&&d>=537.76||h.firefox&&d>=23||h.node)){if(h.node)b-=2;else if(l&&c&&!l.location.href.indexOf(c)){var _=u.getElementsByTagName("html")[0].innerHTML;b=_.substr(0,_.indexOf(e)+1).match(w).length+1}var x=["AA"+function(e){var t="";for(e=(Math.abs(e)<<1)+(e<0?1:0);e||!t;){var n=31&e;(e>>=5)&&(n|=32),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return t}((f=b>0&&!(h.chrome&&d>=36||h.safari&&d>=600||h.firefox&&d>=40||h.node))?0:b)+"A"];x.length=(e.match(w)||[]).length+1+(f?b:0),a={version:3,file:c,names:[],mappings:x.join(";AACA"),sourceRoot:"",sources:[c],sourcesContent:[y]}}return function t(n,s){if(n){for(var a in n)if("range"!==a&&"loc"!==a){var l=n[a];if(Array.isArray(l))for(var u=0,c=l.length;u<c;u++)t(l[u],n);else l&&"object"==typeof l&&t(l,n)}switch(n.type){case"UnaryExpression":if(n.operator in v&&"Literal"!==n.argument.type){var h=r(n.argument);o(n,'$__("'+n.operator+'", '+h+")")}break;case"BinaryExpression":if(n.operator in m&&"Literal"!==n.left.type){var d=r(n.left),f=r(n.right),p=function(t,n){return e.substring(i(t.range[1]),i(n.range[0]))}(n.left,n.right),g=n.operator;o(n,"__$__("+d+","+p.replace(new RegExp("\\"+g),'"'+g+'"')+", "+f+")")}break;case"UpdateExpression":case"AssignmentExpression":var y=s&&s.type;if(!("ForStatement"===y||"BinaryExpression"===y&&/^[=!<>]/.test(s.operator)||"MemberExpression"===y&&s.computed))if("UpdateExpression"===n.type){var w=(h=r(n.argument))+" = "+(b="__$__("+h+', "'+n.operator[0]+'", 1)');n.prefix?w="("+w+")":"AssignmentExpression"!==y&&"VariableDeclarator"!==y&&"BinaryExpression"!==y||(r(s.left||s.id)===h&&(w=b),w=h+"; "+w),o(n,w)}else if(/^.=$/.test(n.operator)&&"Literal"!==n.left.type){d=r(n.left),f=r(n.right);var b=d+" = __$__("+d+', "'+n.operator[0]+'", '+f+")";o(n,/^\(.*\)$/.test(r(n))?"("+b+")":b)}break;case"ExportDefaultDeclaration":o({range:[n.start,n.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var _=n.declaration,x=n.specifiers;if(_){var k=_.declarations;k&&(k.forEach((function(e){o(e,"module.exports."+r(e))})),o({range:[n.start,_.start+_.kind.length]},""))}else if(x){var C=x.map((function(e){var t=r(e);return"module.exports."+t+" = "+t+"; "})).join("");C&&o(n,C)}}}}(g(e,{ranges:!0,preserveParens:!0,sourceType:"module"})),a&&(f&&(e=new Array(b+1).join("\n")+e),/^(inline|both)$/.test(p)&&(e+="\n//# sourceMappingURL=data:application/json;base64,"+s.btoa(unescape(encodeURIComponent(JSON.stringify(a))))),e+="\n//# sourceURL="+(c||"paperscript")),{url:c,source:y,code:e,map:a}}function C(e,t,n){de=t;var i,r=t.getView(),o=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(e)&&!/\bnew\s+Tool\b/.test(e)?new oe:null,s=o?o._events:[],a=["onFrame","onResize"].concat(s),l=[],h=[],d="object"==typeof e?e:k(e,n);function f(t,n){for(var i in t)!n&&/^_/.test(i)||!new RegExp("([\\b\\s\\W]|^)"+i.replace(/\$/g,"\\$")+"\\b").test(e)||(l.push(i),h.push(t[i]))}e=d.code,f({__$__:_,$__:x,paper:t,tool:o},!0),f(t),e="var module = { exports: {} }; "+e,(v=c.each(a,(function(t){new RegExp("\\s+"+t+"\\b").test(e)&&(l.push(t),this.push("module.exports."+t+" = "+t+";"))}),[]).join("\n"))&&(e+="\n"+v),e+="\nreturn module.exports;";var p=de.agent;if(u&&(p.chrome||p.firefox&&p.versionNumber<40)){var g=u.createElement("script"),m=u.head||u.getElementsByTagName("head")[0];p.firefox&&(e="\n"+e),g.appendChild(u.createTextNode("document.__paperscript__ = function("+l+") {"+e+"\n}")),m.appendChild(g),i=u.__paperscript__,delete u.__paperscript__,m.removeChild(g)}else i=Function(l,e);var v,w=(v=i&&i.apply(t,h))||{};return c.each(s,(function(e){var t=w[e];t&&(o[e]=t)})),r&&(w.onResize&&r.setOnResize(w.onResize),r.emit("resize",{size:r.size,delta:new y}),w.onFrame&&r.setOnFrame(w.onFrame),r.requestUpdate()),v}function S(e){if(/^text\/(?:x-|)paperscript$/.test(e.type)&&"true"!==d.getAttribute(e,"ignore")){var t=d.getAttribute(e,"canvas"),n=u.getElementById(t),i=e.src||e.getAttribute("data-src"),r=d.hasAttribute(e,"async");if(!n)throw new Error('Unable to find canvas with id "'+t+'"');var o=d.get(n.getAttribute("data-paper-scope"))||(new d).setup(n);return n.setAttribute("data-paper-scope",o._id),i?ae({url:i,async:r,mimeType:"text/plain",onLoad:function(e){C(e,o,i)}}):C(e.innerHTML,o,e.baseURI),e.setAttribute("data-paper-ignore","true"),o}}function M(){c.each(u&&u.getElementsByTagName("script"),S)}return y.inject(w),b.inject(w),G.inject(w),l&&("complete"===u.readyState?setTimeout(M):Y.add(l,{load:M})),{compile:k,execute:C,load:function(e){return e?S(e):M()},parse:g,calculateBinary:_,calculateUnary:x}}.call(this);var de=new(d.inject(c.exports,{Base:c,Numerical:m,Key:ne,DomEvent:Y,DomElement:X,document:u,window:l,Symbol:I,PlacedSymbol:P}));return de.agent.node&&n(6)(de),(o="function"==typeof(r=de)?r.call(t,n,t,e):r)===a||(e.exports=o),de}).call(this,"object"==typeof self?self:null)},function(e,t,n){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),i=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),s=i||r||o,a=s&&(i?document.documentMode||6:+(o||r)[1]),l=!o&&/WebKit\//.test(e),u=l&&/Qt\/\d+\.\d+/.test(e),c=!o&&/Chrome\//.test(e),h=/Opera\//.test(e),d=/Apple Computer/.test(navigator.vendor),f=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),p=/PhantomJS/.test(e),g=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),m=/Android/.test(e),v=g||m||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=g||/Mac/.test(t),w=/\bCrOS\b/.test(e),b=/win/i.test(t),_=h&&e.match(/Version\/(\d*\.\d*)/);_&&(_=Number(_[1])),_&&_>=15&&(h=!1,l=!0);var x=y&&(u||h&&(null==_||_<12.11)),k=n||s&&a>=9;function C(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var S,M=function(e,t){var n=e.className,i=C(t).exec(n);if(i){var r=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function T(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function z(e,t){return T(e).appendChild(t)}function L(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function A(e,t,n,i){var r=L(e,t,n,i);return r.setAttribute("role","presentation"),r}function O(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function P(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function I(e,t){var n=e.className;C(t).test(n)||(e.className+=(n?" ":"")+t)}function E(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!C(n[i]).test(t)&&(t+=" "+n[i]);return t}S=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var j=function(e){e.select()};function N(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function D(e,t,n){for(var i in t||(t={}),e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function R(e,t,n,i,r){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=i||0,s=r||0;;){var a=e.indexOf("\t",o);if(a<0||a>=t)return s+(t-o);s+=a-o,s+=n-s%n,o=a+1}}g?j=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(j=function(e){try{e.select()}catch(e){}});var F=function(){this.id=null,this.f=null,this.time=0,this.handler=N(this.onTimeout,this)};function B(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}F.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},F.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var H={toString:function(){return"CodeMirror.Pass"}},W={scroll:!1},V={origin:"*mouse"},U={origin:"+move"};function q(e,t,n){for(var i=0,r=0;;){var o=e.indexOf("\t",i);-1==o&&(o=e.length);var s=o-i;if(o==e.length||r+s>=t)return i+Math.min(s,t-r);if(r+=o-i,i=o+1,(r+=n-r%n)>=t)return i}}var G=[""];function $(e){for(;G.length<=e;)G.push(K(G)+" ");return G[e]}function K(e){return e[e.length-1]}function Z(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function X(){}function Y(e,t){var n;return Object.create?n=Object.create(e):(X.prototype=e,n=new X),t&&D(t,n),n}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Q(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||J.test(e))}function ee(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Q(e))||t.test(e):Q(e)}function te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ne=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(e){return e.charCodeAt(0)>=768&&ne.test(e)}function re(e,t,n){for(;(n<0?t>0:t<e.length)&&ie(e.charAt(t));)t+=n;return t}function oe(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var r=(t+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+i}}var se=null;function ae(e,t,n){var i;se=null;for(var r=0;r<e.length;++r){var o=e[r];if(o.from<t&&o.to>t)return r;o.to==t&&(o.from!=o.to&&"before"==n?i=r:se=r),o.from==t&&(o.from!=o.to&&"before"!=n?i=r:se=r)}return null!=i?i:se}var le=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,n=/[LRr]/,i=/[Lb1n]/,r=/[1n]/;function o(e,t,n){this.level=e,this.from=t,this.to=n}return function(s,a){var l="ltr"==a?"L":"R";if(0==s.length||"ltr"==a&&!e.test(s))return!1;for(var u,c=s.length,h=[],d=0;d<c;++d)h.push((u=s.charCodeAt(d))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L");for(var f=0,p=l;f<c;++f){var g=h[f];"m"==g?h[f]=p:p=g}for(var m=0,v=l;m<c;++m){var y=h[m];"1"==y&&"r"==v?h[m]="n":n.test(y)&&(v=y,"r"==y&&(h[m]="R"))}for(var w=1,b=h[0];w<c-1;++w){var _=h[w];"+"==_&&"1"==b&&"1"==h[w+1]?h[w]="1":","!=_||b!=h[w+1]||"1"!=b&&"n"!=b||(h[w]=b),b=_}for(var x=0;x<c;++x){var k=h[x];if(","==k)h[x]="N";else if("%"==k){var C=void 0;for(C=x+1;C<c&&"%"==h[C];++C);for(var S=x&&"!"==h[x-1]||C<c&&"1"==h[C]?"1":"N",M=x;M<C;++M)h[M]=S;x=C-1}}for(var T=0,z=l;T<c;++T){var L=h[T];"L"==z&&"1"==L?h[T]="L":n.test(L)&&(z=L)}for(var A=0;A<c;++A)if(t.test(h[A])){var O=void 0;for(O=A+1;O<c&&t.test(h[O]);++O);for(var P="L"==(A?h[A-1]:l),I=P==("L"==(O<c?h[O]:l))?P?"L":"R":l,E=A;E<O;++E)h[E]=I;A=O-1}for(var j,N=[],D=0;D<c;)if(i.test(h[D])){var R=D;for(++D;D<c&&i.test(h[D]);++D);N.push(new o(0,R,D))}else{var F=D,B=N.length,H="rtl"==a?1:0;for(++D;D<c&&"L"!=h[D];++D);for(var W=F;W<D;)if(r.test(h[W])){F<W&&(N.splice(B,0,new o(1,F,W)),B+=H);var V=W;for(++W;W<D&&r.test(h[W]);++W);N.splice(B,0,new o(2,V,W)),B+=H,F=W}else++W;F<D&&N.splice(B,0,new o(1,F,D))}return"ltr"==a&&(1==N[0].level&&(j=s.match(/^\s+/))&&(N[0].from=j[0].length,N.unshift(new o(0,0,j[0].length))),1==K(N).level&&(j=s.match(/\s+$/))&&(K(N).to-=j[0].length,N.push(new o(0,c-j[0].length,c)))),"rtl"==a?N.reverse():N}}();function ue(e,t){var n=e.order;return null==n&&(n=e.order=le(e.text,t)),n}var ce=[],he=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||ce).concat(n)}};function de(e,t){return e._handlers&&e._handlers[t]||ce}function fe(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,r=i&&i[t];if(r){var o=B(r,n);o>-1&&(i[t]=r.slice(0,o).concat(r.slice(o+1)))}}}function pe(e,t){var n=de(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function ge(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),pe(e,n||t.type,e,t),_e(t)||t.codemirrorIgnore}function me(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==B(n,t[i])&&n.push(t[i])}function ve(e,t){return de(e,t).length>0}function ye(e){e.prototype.on=function(e,t){he(this,e,t)},e.prototype.off=function(e,t){fe(this,e,t)}}function we(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function be(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function _e(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function xe(e){we(e),be(e)}function ke(e){return e.target||e.srcElement}function Ce(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),y&&e.ctrlKey&&1==t&&(t=3),t}var Se,Me,Te=function(){if(s&&a<9)return!1;var e=L("div");return"draggable"in e||"dragDrop"in e}();function ze(e){if(null==Se){var t=L("span","");z(e,L("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Se=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&a<8))}var n=Se?L("span",""):L("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Le(e){if(null!=Me)return Me;var t=z(e,document.createTextNode("AA")),n=S(t,0,1).getBoundingClientRect(),i=S(t,1,2).getBoundingClientRect();return T(e),!(!n||n.left==n.right)&&(Me=i.right-n.right<3)}var Ae,Oe=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),t+=s+1):(n.push(o),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Pe=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Ie="oncopy"in(Ae=L("div"))||(Ae.setAttribute("oncopy","return;"),"function"==typeof Ae.oncopy),Ee=null,je={},Ne={};function De(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),je[e]=t}function Re(e){if("string"==typeof e&&Ne.hasOwnProperty(e))e=Ne[e];else if(e&&"string"==typeof e.name&&Ne.hasOwnProperty(e.name)){var t=Ne[e.name];"string"==typeof t&&(t={name:t}),(e=Y(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Re("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Re("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Fe(e,t){t=Re(t);var n=je[t.name];if(!n)return Fe(e,"text/plain");var i=n(e,t);if(Be.hasOwnProperty(t.name)){var r=Be[t.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)i[s]=t.modeProps[s];return i}var Be={};function He(e,t){D(t,Be.hasOwnProperty(e)?Be[e]:Be[e]={})}function We(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Ve(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Ue(e,t,n){return!e.startState||e.startState(t,n)}var qe=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Ge(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(t<o){n=r;break}t-=o}return n.lines[t]}function $e(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,(function(e){var o=e.text;r==n.line&&(o=o.slice(0,n.ch)),r==t.line&&(o=o.slice(t.ch)),i.push(o),++r})),i}function Ke(e,t,n){var i=[];return e.iter(t,n,(function(e){i.push(e.text)})),i}function Ze(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function Xe(e){if(null==e.parent)return null;for(var t=e.parent,n=B(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function Ye(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],o=r.height;if(t<o){e=r;continue e}t-=o,n+=r.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var a=e.lines[s].height;if(t<a)break;t-=a}return n+s}function Je(e,t){return t>=e.first&&t<e.first+e.size}function Qe(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function et(e,t,n){if(void 0===n&&(n=null),!(this instanceof et))return new et(e,t,n);this.line=e,this.ch=t,this.sticky=n}function tt(e,t){return e.line-t.line||e.ch-t.ch}function nt(e,t){return e.sticky==t.sticky&&0==tt(e,t)}function it(e){return et(e.line,e.ch)}function rt(e,t){return tt(e,t)<0?t:e}function ot(e,t){return tt(e,t)<0?e:t}function st(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function at(e,t){if(t.line<e.first)return et(e.first,0);var n=e.first+e.size-1;return t.line>n?et(n,Ge(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?et(e.line,t):n<0?et(e.line,0):e}(t,Ge(e,t.line).text.length)}function lt(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=at(e,t[i]);return n}qe.prototype.eol=function(){return this.pos>=this.string.length},qe.prototype.sol=function(){return this.pos==this.lineStart},qe.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},qe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},qe.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},qe.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},qe.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},qe.prototype.skipToEnd=function(){this.pos=this.string.length},qe.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},qe.prototype.backUp=function(e){this.pos-=e},qe.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=R(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},qe.prototype.indentation=function(){return R(this.string,null,this.tabSize)-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},qe.prototype.match=function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e};if(r(this.string.substr(this.pos,e.length))==r(e))return!1!==t&&(this.pos+=e.length),!0},qe.prototype.current=function(){return this.string.slice(this.start,this.pos)},qe.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},qe.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},qe.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var ut=function(e,t){this.state=e,this.lookAhead=t},ct=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function ht(e,t,n,i){var r=[e.state.modeGen],o={};bt(e,t.text,e.doc.mode,n,(function(e,t){return r.push(e,t)}),o,i);for(var s=n.state,a=function(i){n.baseTokens=r;var a=e.state.overlays[i],l=1,u=0;n.state=!0,bt(e,t.text,a.mode,n,(function(e,t){for(var n=l;u<e;){var i=r[l];i>e&&r.splice(l,1,e,r[l+1],i),l+=2,u=Math.min(e,i)}if(t)if(a.opaque)r.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+t}}),o),n.state=s,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)a(l);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function dt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=ft(e,Xe(t)),r=t.text.length>e.options.maxHighlightLength&&We(e.doc.mode,i.state),o=ht(e,t,i);r&&(i.state=r),t.stateAfter=i.save(!r),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ft(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return new ct(i,!0,t);var o=function(e,t,n){for(var i,r,o=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=o.first)return o.first;var l=Ge(o,a-1),u=l.stateAfter;if(u&&(!n||a+(u instanceof ut?u.lookAhead:0)<=o.modeFrontier))return a;var c=R(l.text,null,e.options.tabSize);(null==r||i>c)&&(r=a-1,i=c)}return r}(e,t,n),s=o>i.first&&Ge(i,o-1).stateAfter,a=s?ct.fromSaved(i,s,o):new ct(i,Ue(i.mode),o);return i.iter(o,t,(function(n){pt(e,n.text,a);var i=a.line;n.stateAfter=i==t-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?a.save():null,a.nextLine()})),n&&(i.modeFrontier=a.line),a}function pt(e,t,n,i){var r=e.doc.mode,o=new qe(t,e.options.tabSize,n);for(o.start=o.pos=i||0,""==t&&gt(r,n.state);!o.eol();)mt(r,o,n.state),o.start=o.pos}function gt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ve(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function mt(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=Ve(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}ct.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ct.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ct.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ct.fromSaved=function(e,t,n){return t instanceof ut?new ct(e,We(e.mode,t.state),n,t.lookAhead):new ct(e,We(e.mode,t),n)},ct.prototype.save=function(e){var t=!1!==e?We(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ut(t,this.maxLookAhead):t};var vt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function yt(e,t,n,i){var r,o,s=e.doc,a=s.mode,l=Ge(s,(t=at(s,t)).line),u=ft(e,t.line,n),c=new qe(l.text,e.options.tabSize,u);for(i&&(o=[]);(i||c.pos<t.ch)&&!c.eol();)c.start=c.pos,r=mt(a,c,u.state),i&&o.push(new vt(c,r,We(s.mode,u.state)));return i?o:new vt(c,r,u.state)}function wt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+n[2])}return e}function bt(e,t,n,i,r,o,s){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,u=0,c=null,h=new qe(t,e.options.tabSize,i),d=e.options.addModeClass&&[null];for(""==t&&wt(gt(n,i.state),o);!h.eol();){if(h.pos>e.options.maxHighlightLength?(a=!1,s&&pt(e,t,i,h.pos),h.pos=t.length,l=null):l=wt(mt(n,h,i.state,d),o),d){var f=d[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!a||c!=l){for(;u<h.start;)r(u=Math.min(h.start,u+5e3),c);c=l}h.start=h.pos}for(;u<h.pos;){var p=Math.min(h.pos,u+5e3);r(p,c),u=p}}var _t=!1,xt=!1;function kt(e,t,n){this.marker=e,this.from=t,this.to=n}function Ct(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function St(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Mt(e,t){if(t.full)return null;var n=Je(e,t.from.line)&&Ge(e,t.from.line).markedSpans,i=Je(e,t.to.line)&&Ge(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,o=t.to.ch,s=0==tt(t.from,t.to),a=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],s=o.marker;if(null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var a=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push(new kt(s,o.from,a?null:o.to))}}return i}(n,r,s),l=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],s=o.marker;if(null==o.to||(s.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var a=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push(new kt(s,a?null:o.from-t,null==o.to?null:o.to-t))}}return i}(i,o,s),u=1==t.text.length,c=K(t.text).length+(u?r:0);if(a)for(var h=0;h<a.length;++h){var d=a[h];if(null==d.to){var f=Ct(l,d.marker);f?u&&(d.to=null==f.to?null:f.to+c):d.to=r}}if(l)for(var p=0;p<l.length;++p){var g=l[p];null!=g.to&&(g.to+=c),null==g.from?Ct(a,g.marker)||(g.from=c,u&&(a||(a=[])).push(g)):(g.from+=c,u&&(a||(a=[])).push(g))}a&&(a=Tt(a)),l&&l!=a&&(l=Tt(l));var m=[a];if(!u){var v,y=t.text.length-2;if(y>0&&a)for(var w=0;w<a.length;++w)null==a[w].to&&(v||(v=[])).push(new kt(a[w].marker,null,null));for(var b=0;b<y;++b)m.push(v);m.push(l)}return m}function Tt(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function zt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Lt(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function At(e){return e.inclusiveLeft?-1:0}function Ot(e){return e.inclusiveRight?1:0}function Pt(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),o=tt(i.from,r.from)||At(e)-At(t);return o?-o:tt(i.to,r.to)||Ot(e)-Ot(t)||t.id-e.id}function It(e,t){var n,i=xt&&e.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(t?r.from:r.to)&&(!n||Pt(n,r.marker)<0)&&(n=r.marker);return n}function Et(e){return It(e,!0)}function jt(e){return It(e,!1)}function Nt(e,t){var n,i=xt&&e.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||Pt(n,o.marker)<0)&&(n=o.marker)}return n}function Dt(e,t,n,i,r){var o=Ge(e,t),s=xt&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var u=l.marker.find(0),c=tt(u.from,n)||At(l.marker)-At(r),h=tt(u.to,i)||Ot(l.marker)-Ot(r);if(!(c>=0&&h<=0||c<=0&&h>=0)&&(c<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?tt(u.to,n)>=0:tt(u.to,n)>0)||c>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?tt(u.from,i)<=0:tt(u.from,i)<0)))return!0}}}function Rt(e){for(var t;t=Et(e);)e=t.find(-1,!0).line;return e}function Ft(e,t){var n=Ge(e,t),i=Rt(n);return n==i?t:Xe(i)}function Bt(e,t){if(t>e.lastLine())return t;var n,i=Ge(e,t);if(!Ht(e,i))return t;for(;n=jt(i);)i=n.find(1,!0).line;return Xe(i)+1}function Ht(e,t){var n=xt&&t.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Wt(e,t,i))return!0}}function Wt(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return Wt(e,i.line,Ct(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r=void 0,o=0;o<t.markedSpans.length;++o)if((r=t.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&Wt(e,t,r))return!0}function Vt(e){for(var t=0,n=(e=Rt(e)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var o=n.parent;o;o=(n=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;t+=a.height}return t}function Ut(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=Et(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=jt(i);){var o=t.find(0,!0);n-=i.text.length-o.from.ch,n+=(i=o.to.line).text.length-o.to.ch}return n}function qt(e){var t=e.display,n=e.doc;t.maxLine=Ge(n,n.first),t.maxLineLength=Ut(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=Ut(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var Gt=function(e,t,n){this.text=e,Lt(this,t),this.height=n?n(this):1};function $t(e){e.parent=null,zt(e)}Gt.prototype.lineNo=function(){return Xe(this)},ye(Gt);var Kt={},Zt={};function Xt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Zt:Kt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Yt(e,t){var n=A("span",null,null,l?"padding-right: .1px":null),i={pre:A("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var o=r?t.rest[r-1]:t.line,s=void 0;i.pos=0,i.addToken=Qt,Le(e.display.measure)&&(s=ue(o,e.doc.direction))&&(i.addToken=en(i.addToken,s)),i.map=[],nn(o,i,dt(e,o,t!=e.display.externalMeasured&&Xe(o))),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=E(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=E(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(ze(e.display.measure))),0==r?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var a=i.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return pe(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=E(i.pre.className,i.textClass||"")),i}function Jt(e){var t=L("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Qt(e,t,n,i,r,o,l){if(t){var u,c=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",r=0;r<e.length;r++){var o=e.charAt(r);" "!=o||!n||r!=e.length-1&&32!=e.charCodeAt(r+1)||(o=""),i+=o,n=" "==o}return i}(t,e.trailingSpace):t,h=e.cm.state.specialChars,d=!1;if(h.test(t)){u=document.createDocumentFragment();for(var f=0;;){h.lastIndex=f;var p=h.exec(t),g=p?p.index-f:t.length-f;if(g){var m=document.createTextNode(c.slice(f,f+g));s&&a<9?u.appendChild(L("span",[m])):u.appendChild(m),e.map.push(e.pos,e.pos+g,m),e.col+=g,e.pos+=g}if(!p)break;f+=g+1;var v=void 0;if("\t"==p[0]){var y=e.cm.options.tabSize,w=y-e.col%y;(v=u.appendChild(L("span",$(w),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=w}else"\r"==p[0]||"\n"==p[0]?((v=u.appendChild(L("span","\r"==p[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",p[0]),e.col+=1):((v=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),s&&a<9?u.appendChild(L("span",[v])):u.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,u=document.createTextNode(c),e.map.push(e.pos,e.pos+t.length,u),s&&a<9&&(d=!0),e.pos+=t.length;if(e.trailingSpace=32==c.charCodeAt(t.length-1),n||i||r||d||o){var b=n||"";i&&(b+=i),r&&(b+=r);var _=L("span",[u],b,o);if(l)for(var x in l)l.hasOwnProperty(x)&&"style"!=x&&"class"!=x&&_.setAttribute(x,l[x]);return e.content.appendChild(_)}e.content.appendChild(u)}}function en(e,t){return function(n,i,r,o,s,a,l){r=r?r+" cm-force-border":"cm-force-border";for(var u=n.pos,c=u+i.length;;){for(var h=void 0,d=0;d<t.length&&!((h=t[d]).to>u&&h.from<=u);d++);if(h.to>=c)return e(n,i,r,o,s,a,l);e(n,i.slice(0,h.to-u),r,o,null,a,l),o=null,i=i.slice(h.to-u),u=h.to}}}function tn(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function nn(e,t,n){var i=e.markedSpans,r=e.text,o=0;if(i)for(var s,a,l,u,c,h,d,f=r.length,p=0,g=1,m="",v=0;;){if(v==p){l=u=c=a="",d=null,h=null,v=1/0;for(var y=[],w=void 0,b=0;b<i.length;++b){var _=i[b],x=_.marker;if("bookmark"==x.type&&_.from==p&&x.widgetNode)y.push(x);else if(_.from<=p&&(null==_.to||_.to>p||x.collapsed&&_.to==p&&_.from==p)){if(null!=_.to&&_.to!=p&&v>_.to&&(v=_.to,u=""),x.className&&(l+=" "+x.className),x.css&&(a=(a?a+";":"")+x.css),x.startStyle&&_.from==p&&(c+=" "+x.startStyle),x.endStyle&&_.to==v&&(w||(w=[])).push(x.endStyle,_.to),x.title&&((d||(d={})).title=x.title),x.attributes)for(var k in x.attributes)(d||(d={}))[k]=x.attributes[k];x.collapsed&&(!h||Pt(h.marker,x)<0)&&(h=_)}else _.from>p&&v>_.from&&(v=_.from)}if(w)for(var C=0;C<w.length;C+=2)w[C+1]==v&&(u+=" "+w[C]);if(!h||h.from==p)for(var S=0;S<y.length;++S)tn(t,0,y[S]);if(h&&(h.from||0)==p){if(tn(t,(null==h.to?f+1:h.to)-p,h.marker,null==h.from),null==h.to)return;h.to==p&&(h=!1)}}if(p>=f)break;for(var M=Math.min(f,v);;){if(m){var T=p+m.length;if(!h){var z=T>M?m.slice(0,M-p):m;t.addToken(t,z,s?s+l:l,c,p+z.length==v?u:"",a,d)}if(T>=M){m=m.slice(M-p),p=M;break}p=T,c=""}m=r.slice(o,o=n[g++]),s=Xt(n[g++],t.cm.options)}}else for(var L=1;L<n.length;L+=2)t.addToken(t,r.slice(o,o=n[L]),Xt(n[L+1],t.cm.options))}function rn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=jt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Xe(K(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Ht(e,t)}function on(e,t,n){for(var i,r=[],o=t;o<n;o=i){var s=new rn(e.doc,Ge(e.doc,o),o);i=o+s.size,r.push(s)}return r}var sn=null,an=null;function ln(e,t){var n=de(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);sn?i=sn.delayedCallbacks:an?i=an:(i=an=[],setTimeout(un,0));for(var o=function(e){i.push((function(){return n[e].apply(null,r)}))},s=0;s<n.length;++s)o(s)}}function un(){var e=an;an=null;for(var t=0;t<e.length;++t)e[t]()}function cn(e,t,n,i){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];"text"==o?fn(e,t):"gutter"==o?gn(e,t,n,i):"class"==o?pn(e,t):"widget"==o&&mn(e,t,i)}t.changes=null}function hn(e){return e.node==e.text&&(e.node=L("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&a<8&&(e.node.style.zIndex=2)),e.node}function dn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Yt(e,t)}function fn(e,t){var n=t.text.className,i=dn(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,pn(e,t)):n&&(t.text.className=n)}function pn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=hn(t);t.background=i.insertBefore(L("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?hn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function gn(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=hn(t);t.gutterBackground=L("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),r.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=hn(t),a=t.gutter=L("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(L("div",Qe(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.display.gutterSpecs.length;++l){var u=e.display.gutterSpecs[l].className,c=o.hasOwnProperty(u)&&o[u];c&&a.appendChild(L("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[u]+"px; width: "+i.gutterWidth[u]+"px"))}}}function mn(e,t,n){t.alignable&&(t.alignable=null);for(var i=C("CodeMirror-linewidget"),r=t.node.firstChild,o=void 0;r;r=o)o=r.nextSibling,i.test(r.className)&&t.node.removeChild(r);yn(e,t,n)}function vn(e,t,n,i){var r=dn(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),pn(e,t),gn(e,t,n,i),yn(e,t,i),t.node}function yn(e,t,n){if(wn(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)wn(e,t.rest[i],t,n,!1)}function wn(e,t,n,i,r){if(t.widgets)for(var o=hn(n),s=0,a=t.widgets;s<a.length;++s){var l=a[s],u=L("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),bn(l,u,n,i),e.display.input.setUneditable(u),r&&l.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),ln(l,"redraw")}}function bn(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function _n(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!O(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),z(t.display.measure,L("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function xn(e,t){for(var n=ke(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function kn(e){return e.lineSpace.offsetTop}function Cn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Sn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=z(e.measure,L("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Mn(e){return 30-e.display.nativeBarWidth}function Tn(e){return e.display.scroller.clientWidth-Mn(e)-e.display.barWidth}function zn(e){return e.display.scroller.clientHeight-Mn(e)-e.display.barHeight}function Ln(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var r=0;r<e.rest.length;r++)if(Xe(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function An(e,t,n,i){return In(e,Pn(e,t),n,i)}function On(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ci(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Pn(e,t){var n=Xe(t),i=On(e,n);i&&!i.text?i=null:i&&i.changes&&(cn(e,i,n,oi(e)),e.curOp.forceUpdate=!0),i||(i=function(e,t){var n=Xe(t=Rt(t)),i=e.display.externalMeasured=new rn(e.doc,t,n);i.lineN=n;var r=i.built=Yt(e,i);return i.text=r.pre,z(e.display.lineMeasure,r.pre),i}(e,t));var r=Ln(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function In(e,t,n,i,r){t.before&&(n=-1);var o,l=n+(i||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var i=e.options.lineWrapping,r=i&&Tn(e);if(!t.measure.heights||i&&t.measure.width!=r){var o=t.measure.heights=[];if(i){t.measure.width=r;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],u=s[a+1];Math.abs(l.bottom-u.bottom)>2&&o.push((l.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,i){var r,o=Nn(t.map,n,i),l=o.node,u=o.start,c=o.end,h=o.collapse;if(3==l.nodeType){for(var d=0;d<4;d++){for(;u&&ie(t.line.text.charAt(o.coverStart+u));)--u;for(;o.coverStart+c<o.coverEnd&&ie(t.line.text.charAt(o.coverStart+c));)++c;if((r=s&&a<9&&0==u&&c==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():Dn(S(l,u,c).getClientRects(),i)).left||r.right||0==u)break;c=u,u-=1,h="right"}s&&a<11&&(r=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Ee)return Ee;var t=z(e,L("span","x")),n=t.getBoundingClientRect(),i=S(t,0,1).getBoundingClientRect();return Ee=Math.abs(n.left-i.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}(e.display.measure,r))}else{var f;u>0&&(h=i="right"),r=e.options.lineWrapping&&(f=l.getClientRects()).length>1?f["right"==i?f.length-1:0]:l.getBoundingClientRect()}if(s&&a<9&&!u&&(!r||!r.left&&!r.right)){var p=l.parentNode.getClientRects()[0];r=p?{left:p.left,right:p.left+ri(e.display),top:p.top,bottom:p.bottom}:jn}for(var g=r.top-t.rect.top,m=r.bottom-t.rect.top,v=(g+m)/2,y=t.view.measure.heights,w=0;w<y.length-1&&!(v<y[w]);w++);var b=w?y[w-1]:0,_=y[w],x={left:("right"==h?r.right:r.left)-t.rect.left,right:("left"==h?r.left:r.right)-t.rect.left,top:b,bottom:_};return r.left||r.right||(x.bogus=!0),e.options.singleCursorHeightPerLine||(x.rtop=g,x.rbottom=m),x}(e,t,n,i)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var En,jn={left:0,right:0,top:0,bottom:0};function Nn(e,t,n){for(var i,r,o,s,a,l,u=0;u<e.length;u+=3)if(a=e[u],l=e[u+1],t<a?(r=0,o=1,s="left"):t<l?o=1+(r=t-a):(u==e.length-3||t==l&&e[u+3]>t)&&(r=(o=l-a)-1,t>=l&&(s="right")),null!=r){if(i=e[u+2],a==l&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==r)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)i=e[2+(u-=3)],s="left";if("right"==n&&r==l-a)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)i=e[(u+=3)+2],s="right";break}return{node:i,start:r,end:o,collapse:s,coverStart:a,coverEnd:l}}function Dn(e,t){var n=jn;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var r=e.length-1;r>=0&&(n=e[r]).left==n.right;r--);return n}function Rn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Fn(e){e.display.externalMeasure=null,T(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Rn(e.display.view[t])}function Bn(e){Fn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Hn(){return c&&m?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Wn(){return c&&m?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Vn(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=_n(e.widgets[n]));return t}function Un(e,t,n,i,r){if(!r){var o=Vn(t);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=Vt(t);if("local"==i?s+=kn(e.display):s-=e.display.viewOffset,"page"==i||"window"==i){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==i?0:Wn());var l=a.left+("window"==i?0:Hn());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function qn(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=Hn(),r-=Wn();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:r-s.top}}function Gn(e,t,n,i,r){return i||(i=Ge(e.doc,t.line)),Un(e,i,An(e,i,t.ch,r),n)}function $n(e,t,n,i,r,o){function s(t,s){var a=In(e,r,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,Un(e,i,a,n)}i=i||Ge(e.doc,t.line),r||(r=Pn(e,i));var a=ue(i,e.doc.direction),l=t.ch,u=t.sticky;if(l>=i.text.length?(l=i.text.length,u="before"):l<=0&&(l=0,u="after"),!a)return s("before"==u?l-1:l,"before"==u);function c(e,t,n){return s(n?e-1:e,1==a[t].level!=n)}var h=ae(a,l,u),d=se,f=c(l,h,"before"==u);return null!=d&&(f.other=c(l,d,"before"!=u)),f}function Kn(e,t){var n=0;t=at(e.doc,t),e.options.lineWrapping||(n=ri(e.display)*t.ch);var i=Ge(e.doc,t.line),r=Vt(i)+kn(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function Zn(e,t,n,i,r){var o=et(e,t,n);return o.xRel=r,i&&(o.outside=i),o}function Xn(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return Zn(i.first,0,null,-1,-1);var r=Ye(i,n),o=i.first+i.size-1;if(r>o)return Zn(i.first+i.size-1,Ge(i,o).text.length,null,1,1);t<0&&(t=0);for(var s=Ge(i,r);;){var a=ei(e,s,r,t,n),l=Nt(s,a.ch+(a.xRel>0||a.outside>0?1:0));if(!l)return a;var u=l.find(1);if(u.line==r)return u;s=Ge(i,r=u.line)}}function Yn(e,t,n,i){i-=Vn(t);var r=t.text.length,o=oe((function(t){return In(e,n,t-1).bottom<=i}),r,0);return{begin:o,end:r=oe((function(t){return In(e,n,t).top>i}),o,r)}}function Jn(e,t,n,i){return n||(n=Pn(e,t)),Yn(e,t,n,Un(e,t,In(e,n,i),"line").top)}function Qn(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function ei(e,t,n,i,r){r-=Vt(t);var o=Pn(e,t),s=Vn(t),a=0,l=t.text.length,u=!0,c=ue(t,e.doc.direction);if(c){var h=(e.options.lineWrapping?ni:ti)(e,t,n,o,c,i,r);a=(u=1!=h.level)?h.from:h.to-1,l=u?h.to:h.from-1}var d,f,p=null,g=null,m=oe((function(t){var n=In(e,o,t);return n.top+=s,n.bottom+=s,!!Qn(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(p=t,g=n),!0)}),a,l),v=!1;if(g){var y=i-g.left<g.right-i,w=y==u;m=p+(w?0:1),f=w?"after":"before",d=y?g.left:g.right}else{u||m!=l&&m!=a||m++,f=0==m?"after":m==t.text.length?"before":In(e,o,m-(u?1:0)).bottom+s<=r==u?"after":"before";var b=$n(e,et(n,m,f),"line",t,o);d=b.left,v=r<b.top?-1:r>=b.bottom?1:0}return Zn(n,m=re(t.text,m,1),f,v,i-d)}function ti(e,t,n,i,r,o,s){var a=oe((function(a){var l=r[a],u=1!=l.level;return Qn($n(e,et(n,u?l.to:l.from,u?"before":"after"),"line",t,i),o,s,!0)}),0,r.length-1),l=r[a];if(a>0){var u=1!=l.level,c=$n(e,et(n,u?l.from:l.to,u?"after":"before"),"line",t,i);Qn(c,o,s,!0)&&c.top>s&&(l=r[a-1])}return l}function ni(e,t,n,i,r,o,s){var a=Yn(e,t,i,s),l=a.begin,u=a.end;/\s/.test(t.text.charAt(u-1))&&u--;for(var c=null,h=null,d=0;d<r.length;d++){var f=r[d];if(!(f.from>=u||f.to<=l)){var p=In(e,i,1!=f.level?Math.min(u,f.to)-1:Math.max(l,f.from)).right,g=p<o?o-p+1e9:p-o;(!c||h>g)&&(c=f,h=g)}}return c||(c=r[r.length-1]),c.from<l&&(c={from:l,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}function ii(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==En){En=L("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)En.appendChild(document.createTextNode("x")),En.appendChild(L("br"));En.appendChild(document.createTextNode("x"))}z(e.measure,En);var n=En.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),T(e.measure),n||1}function ri(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=L("span","xxxxxxxxxx"),n=L("pre",[t],"CodeMirror-line-like");z(e.measure,n);var i=t.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function oi(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var a=e.display.gutterSpecs[s].className;n[a]=o.offsetLeft+o.clientLeft+r,i[a]=o.clientWidth}return{fixedPos:si(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function si(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ai(e){var t=ii(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/ri(e.display)-3);return function(r){if(Ht(e.doc,r))return 0;var o=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(o+=r.widgets[s].height);return n?o+(Math.ceil(r.text.length/i)||1)*t:o+t}}function li(e){var t=e.doc,n=ai(e);t.iter((function(e){var t=n(e);t!=e.height&&Ze(e,t)}))}function ui(e,t,n,i){var r=e.display;if(!n&&"true"==ke(t).getAttribute("cm-not-content"))return null;var o,s,a=r.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(t){return null}var l,u=Xn(e,o,s);if(i&&u.xRel>0&&(l=Ge(e.doc,u.line).text).length==u.ch){var c=R(l,l.length,e.options.tabSize)-l.length;u=et(u.line,Math.max(0,Math.round((o-Sn(e.display).left)/ri(e.display))-c))}return u}function ci(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function hi(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)xt&&Ft(e.doc,t)<r.viewTo&&fi(e);else if(n<=r.viewFrom)xt&&Bt(e.doc,n+i)>r.viewFrom?fi(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)fi(e);else if(t<=r.viewFrom){var o=pi(e,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):fi(e)}else if(n>=r.viewTo){var s=pi(e,t,t,-1);s?(r.view=r.view.slice(0,s.index),r.viewTo=s.lineN):fi(e)}else{var a=pi(e,t,t,-1),l=pi(e,n,n+i,1);a&&l?(r.view=r.view.slice(0,a.index).concat(on(e,a.lineN,l.lineN)).concat(r.view.slice(l.index)),r.viewTo+=i):fi(e)}var u=r.externalMeasured;u&&(n<u.lineN?u.lineN+=i:t<u.lineN+u.size&&(r.externalMeasured=null))}function di(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var o=i.view[ci(e,t)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==B(s,n)&&s.push(n)}}}function fi(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function pi(e,t,n,i){var r,o=ci(e,t),s=e.display.view;if(!xt||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var a=e.display.viewFrom,l=0;l<o;l++)a+=s[l].size;if(a!=t){if(i>0){if(o==s.length-1)return null;r=a+s[o].size-t,o++}else r=a-t;t+=r,n+=r}for(;Ft(e.doc,n)!=n;){if(o==(i<0?0:s.length-1))return null;n+=i*s[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function gi(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function mi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function vi(e,t){void 0===t&&(t=!0);for(var n=e.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(t||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var l=a.empty();(l||e.options.showCursorWhenSelecting)&&yi(e,a.head,r),l||bi(e,a,o)}}return i}function yi(e,t,n){var i=$n(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),r=n.appendChild(L("div","","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var o=n.appendChild(L("div","","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function wi(e,t){return e.top-t.top||e.left-t.left}function bi(e,t,n){var i=e.display,r=e.doc,o=document.createDocumentFragment(),s=Sn(e.display),a=s.left,l=Math.max(i.sizerWidth,Tn(e)-i.sizer.offsetLeft)-s.right,u="ltr"==r.direction;function c(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),o.appendChild(L("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(i-t)+"px"))}function h(t,n,i){var o,s,h=Ge(r,t),d=h.text.length;function f(n,i){return Gn(e,et(t,n),"div",h,i)}function p(t,n,i){var r=Jn(e,h,null,t),o="ltr"==n==("after"==i)?"left":"right";return f("after"==i?r.begin:r.end-(/\s/.test(h.text.charAt(r.end-1))?2:1),o)[o]}var g=ue(h,r.direction);return function(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var r=!1,o=0;o<e.length;++o){var s=e[o];(s.from<n&&s.to>t||t==n&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),r=!0)}r||i(t,n,"ltr")}(g,n||0,null==i?d:i,(function(e,t,r,h){var m="ltr"==r,v=f(e,m?"left":"right"),y=f(t-1,m?"right":"left"),w=null==n&&0==e,b=null==i&&t==d,_=0==h,x=!g||h==g.length-1;if(y.top-v.top<=3){var k=(u?b:w)&&x,C=(u?w:b)&&_?a:(m?v:y).left,S=k?l:(m?y:v).right;c(C,v.top,S-C,v.bottom)}else{var M,T,z,L;m?(M=u&&w&&_?a:v.left,T=u?l:p(e,r,"before"),z=u?a:p(t,r,"after"),L=u&&b&&x?l:y.right):(M=u?p(e,r,"before"):a,T=!u&&w&&_?l:v.right,z=!u&&b&&x?a:y.left,L=u?p(t,r,"after"):l),c(M,v.top,T-M,v.bottom),v.bottom<y.top&&c(a,v.bottom,null,y.top),c(z,y.top,L-z,y.bottom)}(!o||wi(v,o)<0)&&(o=v),wi(y,o)<0&&(o=y),(!s||wi(v,s)<0)&&(s=v),wi(y,s)<0&&(s=y)})),{start:o,end:s}}var d=t.from(),f=t.to();if(d.line==f.line)h(d.line,d.ch,f.ch);else{var p=Ge(r,d.line),g=Ge(r,f.line),m=Rt(p)==Rt(g),v=h(d.line,d.ch,m?p.text.length+1:null).end,y=h(f.line,m?0:null,f.ch).start;m&&(v.top<y.top-2?(c(v.right,v.top,null,v.bottom),c(a,y.top,y.left,y.bottom)):c(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&c(a,v.bottom,null,y.top)}n.appendChild(o)}function _i(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function xi(e){e.state.focused||(e.display.input.focus(),Ci(e))}function ki(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Si(e))}),100)}function Ci(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(pe(e,"focus",e,t),e.state.focused=!0,I(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),_i(e))}function Si(e,t){e.state.delayingBlurEvent||(e.state.focused&&(pe(e,"blur",e,t),e.state.focused=!1,M(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function Mi(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var r=t.view[i],o=e.options.lineWrapping,l=void 0,u=0;if(!r.hidden){if(s&&a<8){var c=r.node.offsetTop+r.node.offsetHeight;l=c-n,n=c}else{var h=r.node.getBoundingClientRect();l=h.bottom-h.top,!o&&r.text.firstChild&&(u=r.text.firstChild.getBoundingClientRect().right-h.left-1)}var d=r.line.height-l;if((d>.005||d<-.005)&&(Ze(r.line,l),Ti(r.line),r.rest))for(var f=0;f<r.rest.length;f++)Ti(r.rest[f]);if(u>e.display.sizerWidth){var p=Math.ceil(u/ri(e.display));p>e.display.maxLineLength&&(e.display.maxLineLength=p,e.display.maxLine=r.line,e.display.maxLineChanged=!0)}}}}function Ti(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function zi(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-kn(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,o=Ye(t,i),s=Ye(t,r);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;a<o?(o=a,s=Ye(t,Vt(Ge(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=s&&(o=Ye(t,Vt(Ge(t,l))-e.wrapper.clientHeight),s=l)}return{from:o,to:Math.max(s,o+1)}}function Li(e,t){var n=e.display,i=ii(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=zn(e),s={};t.bottom-t.top>o&&(t.bottom=t.top+o);var a=e.doc.height+Cn(n),l=t.top<i,u=t.bottom>a-i;if(t.top<r)s.scrollTop=l?0:t.top;else if(t.bottom>r+o){var c=Math.min(t.top,(u?a:t.bottom)-o);c!=r&&(s.scrollTop=c)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,d=Tn(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),f=t.right-t.left>d;return f&&(t.right=t.left+d),t.left<10?s.scrollLeft=0:t.left<h?s.scrollLeft=Math.max(0,t.left-(f?0:10)):t.right>d+h-3&&(s.scrollLeft=t.right+(f?0:10)-d),s}function Ai(e,t){null!=t&&(Ii(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Oi(e){Ii(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Pi(e,t,n){null==t&&null==n||Ii(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Ii(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Ei(e,Kn(e,t.from),Kn(e,t.to),t.margin))}function Ei(e,t,n,i){var r=Li(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});Pi(e,r.scrollLeft,r.scrollTop)}function ji(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||lr(e,{top:t}),Ni(e,t,!0),n&&lr(e),ir(e,100))}function Ni(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Di(e,t,n,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,hr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Ri(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+Cn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Mn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Fi=function(e,t,n){this.cm=n;var i=this.vert=L("div",[L("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=L("div",[L("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,e(i),e(r),he(i,"scroll",(function(){i.clientHeight&&t(i.scrollTop,"vertical")})),he(r,"scroll",(function(){r.clientWidth&&t(r.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Fi.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},Fi.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Fi.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Fi.prototype.zeroWidthHack=function(){var e=y&&!f?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new F,this.disableVert=new F},Fi.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,(function i(){var r=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,i)}))},Fi.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Bi=function(){};function Hi(e,t){t||(t=Ri(e));var n=e.display.barWidth,i=e.display.barHeight;Wi(e,t);for(var r=0;r<4&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&Mi(e),Wi(e,Ri(e)),n=e.display.barWidth,i=e.display.barHeight}function Wi(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Bi.prototype.update=function(){return{bottom:0,right:0}},Bi.prototype.setScrollLeft=function(){},Bi.prototype.setScrollTop=function(){},Bi.prototype.clear=function(){};var Vi={native:Fi,null:Bi};function Ui(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&M(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Vi[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),he(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?Di(e,t):ji(e,t)}),e),e.display.scrollbars.addClass&&I(e.display.wrapper,e.display.scrollbars.addClass)}var qi=0;function Gi(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++qi},t=e.curOp,sn?sn.ops.push(t):t.ownsGroup=sn={ops:[t],delayedCallbacks:[]}}function $i(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}(n)}finally{sn=null,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Ki(t[n]);for(var i=0;i<t.length;i++)Zi(t[i]);for(var r=0;r<t.length;r++)Xi(t[r]);for(var o=0;o<t.length;o++)Yi(t[o]);for(var s=0;s<t.length;s++)Ji(t[s])}(e)}(n)}}(t)}function Ki(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Mn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Mn(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&qt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new or(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Zi(e){e.updatedDisplay=e.mustUpdate&&sr(e.cm,e.update)}function Xi(e){var t=e.cm,n=t.display;e.updatedDisplay&&Mi(t),e.barMeasure=Ri(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=An(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Mn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Tn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Yi(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Di(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==P();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Hi(t,e.barMeasure),e.updatedDisplay&&cr(t,e.barMeasure),e.selectionChanged&&_i(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&xi(e.cm)}function Ji(e){var t=e.cm,n=t.display,i=t.doc;e.updatedDisplay&&ar(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Ni(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Di(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!ge(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),r=null;if(t.top+i.top<0?r=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!p){var o=L("div","",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-kn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Mn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(r),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,n,i){var r;null==i&&(i=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?et(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?et(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var s=!1,a=$n(e,t),l=n&&n!=t?$n(e,n):a,u=Li(e,r={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-i,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+i}),c=e.doc.scrollTop,h=e.doc.scrollLeft;if(null!=u.scrollTop&&(ji(e,u.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(s=!0)),null!=u.scrollLeft&&(Di(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-h)>1&&(s=!0)),!s)break}return r}(t,at(i,e.scrollToPos.from),at(i,e.scrollToPos.to),e.scrollToPos.margin));var r=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(r)for(var s=0;s<r.length;++s)r[s].lines.length||pe(r[s],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&pe(o[a],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&pe(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Qi(e,t){if(e.curOp)return t();Gi(e);try{return t()}finally{$i(e)}}function er(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Gi(e);try{return t.apply(e,arguments)}finally{$i(e)}}}function tr(e){return function(){if(this.curOp)return e.apply(this,arguments);Gi(this);try{return e.apply(this,arguments)}finally{$i(this)}}}function nr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Gi(t);try{return e.apply(this,arguments)}finally{$i(t)}}}function ir(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,N(rr,e))}function rr(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=ft(e,t.highlightFrontier),r=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(i.line>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength?We(t.mode,i.state):null,l=ht(e,o,i,!0);a&&(i.state=a),o.styles=l.styles;var u=o.styleClasses,c=l.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var h=!s||s.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),d=0;!h&&d<s.length;++d)h=s[d]!=o.styles[d];h&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=e.options.maxHighlightLength&&pt(e,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return ir(e,e.options.workDelay),!0})),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),r.length&&Qi(e,(function(){for(var t=0;t<r.length;t++)di(e,r[t],"text")}))}}var or=function(e,t,n){var i=e.display;this.viewport=t,this.visible=zi(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Tn(e),this.force=n,this.dims=oi(e),this.events=[]};function sr(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return fi(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==gi(e))return!1;dr(e)&&(fi(e),t.dims=oi(e));var r=i.first+i.size,o=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(r,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(r,n.viewTo)),xt&&(o=Ft(e.doc,o),s=Bt(e.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=on(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=on(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(ci(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(on(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,ci(e,n)))),i.viewTo=n}(e,o,s),n.viewOffset=Vt(Ge(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var u=gi(e);if(!a&&0==u&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=function(e){if(e.hasFocus())return null;var t=P();if(!t||!O(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&O(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(e);return u>4&&(n.lineDiv.style.display="none"),function(e,t,n){var i=e.display,r=e.options.lineNumbers,o=i.lineDiv,s=o.firstChild;function a(t){var n=t.nextSibling;return l&&y&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var u=i.view,c=i.viewFrom,h=0;h<u.length;h++){var d=u[h];if(d.hidden);else if(d.node&&d.node.parentNode==o){for(;s!=d.node;)s=a(s);var f=r&&null!=t&&t<=c&&d.lineNumber;d.changes&&(B(d.changes,"gutter")>-1&&(f=!1),cn(e,d,c,n)),f&&(T(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(Qe(e.options,c)))),s=d.node.nextSibling}else{var p=vn(e,d,c,n);o.insertBefore(p,s)}c+=d.size}for(;s;)s=a(s)}(e,n.updateLineNumbers,t.dims),u>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=P()&&(e.activeElt.focus(),e.anchorNode&&O(document.body,e.anchorNode)&&O(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(c),T(n.cursorDiv),T(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ir(e,400)),n.updateLineNumbers=null,!0}function ar(e,t){for(var n=t.viewport,i=!0;(i&&e.options.lineWrapping&&t.oldDisplayWidth!=Tn(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Cn(e.display)-zn(e),n.top)}),t.visible=zi(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&sr(e,t);i=!1){Mi(e);var r=Ri(e);mi(e),Hi(e,r),cr(e,r),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function lr(e,t){var n=new or(e,t);if(sr(e,n)){Mi(e),ar(e,n);var i=Ri(e);mi(e),Hi(e,i),cr(e,i),n.finish()}}function ur(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function cr(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Mn(e)+"px"}function hr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=si(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function dr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=Qe(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(L("div",[L("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",ur(e.display),!0}return!1}function fr(e,t){for(var n=[],i=!1,r=0;r<e.length;r++){var o=e[r],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;i=!0}n.push({className:o,style:s})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function pr(e){var t=e.gutters,n=e.gutterSpecs;T(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,s=r.style,a=t.appendChild(L("div",null,"CodeMirror-gutter "+o));s&&(a.style.cssText=s),"CodeMirror-linenumbers"==o&&(e.lineGutter=a,a.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",ur(e)}function gr(e){pr(e.display),hi(e),hr(e)}function mr(e,t,i,r){var o=this;this.input=i,o.scrollbarFiller=L("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=L("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=A("div",null,"CodeMirror-code"),o.selectionDiv=L("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=L("div",null,"CodeMirror-cursors"),o.measure=L("div",null,"CodeMirror-measure"),o.lineMeasure=L("div",null,"CodeMirror-measure"),o.lineSpace=A("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var u=A("div",[o.lineSpace],"CodeMirror-lines");o.mover=L("div",[u],null,"position: relative"),o.sizer=L("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=L("div",null,null,"position: absolute; height: 30px; width: 1px;"),o.gutters=L("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=L("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=L("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),s&&a<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),l||n&&v||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=fr(r.gutters,r.lineNumbers),pr(o),i.init(o)}or.prototype.signal=function(e,t){ve(e,t)&&this.events.push(arguments)},or.prototype.finish=function(){for(var e=0;e<this.events.length;e++)pe.apply(null,this.events[e])};var vr=0,yr=null;function wr(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function br(e){var t=wr(e);return t.x*=yr,t.y*=yr,t}function _r(e,t){var i=wr(t),r=i.x,o=i.y,s=e.display,a=s.scroller,u=a.scrollWidth>a.clientWidth,c=a.scrollHeight>a.clientHeight;if(r&&u||o&&c){if(o&&y&&l)e:for(var d=t.target,f=s.view;d!=a;d=d.parentNode)for(var p=0;p<f.length;p++)if(f[p].node==d){e.display.currentWheelTarget=d;break e}if(r&&!n&&!h&&null!=yr)return o&&c&&ji(e,Math.max(0,a.scrollTop+o*yr)),Di(e,Math.max(0,a.scrollLeft+r*yr)),(!o||o&&c)&&we(t),void(s.wheelStartX=null);if(o&&null!=yr){var g=o*yr,m=e.doc.scrollTop,v=m+s.wrapper.clientHeight;g<0?m=Math.max(0,m+g-50):v=Math.min(e.doc.height,v+g+50),lr(e,{top:m,bottom:v})}vr<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=r,s.wheelDY=o,setTimeout((function(){if(null!=s.wheelStartX){var e=a.scrollLeft-s.wheelStartX,t=a.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(yr=(yr*vr+n)/(vr+1),++vr)}}),200)):(s.wheelDX+=r,s.wheelDY+=o))}}s?yr=-.53:n?yr=15:c?yr=-.7:d&&(yr=-1/3);var xr=function(e,t){this.ranges=e,this.primIndex=t};xr.prototype.primary=function(){return this.ranges[this.primIndex]},xr.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!nt(n.anchor,i.anchor)||!nt(n.head,i.head))return!1}return!0},xr.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new kr(it(this.ranges[t].anchor),it(this.ranges[t].head));return new xr(e,this.primIndex)},xr.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},xr.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(tt(t,i.from())>=0&&tt(e,i.to())<=0)return n}return-1};var kr=function(e,t){this.anchor=e,this.head=t};function Cr(e,t,n){var i=e&&e.options.selectionsMayTouch,r=t[n];t.sort((function(e,t){return tt(e.from(),t.from())})),n=B(t,r);for(var o=1;o<t.length;o++){var s=t[o],a=t[o-1],l=tt(a.to(),s.from());if(i&&!s.empty()?l>0:l>=0){var u=ot(a.from(),s.from()),c=rt(a.to(),s.to()),h=a.empty()?s.from()==s.head:a.from()==a.head;o<=n&&--n,t.splice(--o,2,new kr(h?c:u,h?u:c))}}return new xr(t,n)}function Sr(e,t){return new xr([new kr(e,t||e)],0)}function Mr(e){return e.text?et(e.from.line+e.text.length-1,K(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Tr(e,t){if(tt(e,t.from)<0)return e;if(tt(e,t.to)<=0)return Mr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Mr(t).ch-t.to.ch),et(n,i)}function zr(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new kr(Tr(r.anchor,t),Tr(r.head,t)))}return Cr(e.cm,n,e.sel.primIndex)}function Lr(e,t,n){return e.line==t.line?et(n.line,e.ch-t.ch+n.ch):et(n.line+(e.line-t.line),e.ch)}function Ar(e){e.doc.mode=Fe(e.options,e.doc.modeOption),Or(e)}function Or(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ir(e,100),e.state.modeGen++,e.curOp&&hi(e)}function Pr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==K(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ir(e,t,n,i){function r(e){return n?n[e]:null}function o(e,n,r){!function(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),zt(e),Lt(e,n);var r=i?i(e):1;r!=e.height&&Ze(e,r)}(e,n,r,i),ln(e,"change",e,t)}function s(e,t){for(var n=[],o=e;o<t;++o)n.push(new Gt(u[o],r(o),i));return n}var a=t.from,l=t.to,u=t.text,c=Ge(e,a.line),h=Ge(e,l.line),d=K(u),f=r(u.length-1),p=l.line-a.line;if(t.full)e.insert(0,s(0,u.length)),e.remove(u.length,e.size-u.length);else if(Pr(e,t)){var g=s(0,u.length-1);o(h,h.text,f),p&&e.remove(a.line,p),g.length&&e.insert(a.line,g)}else if(c==h)if(1==u.length)o(c,c.text.slice(0,a.ch)+d+c.text.slice(l.ch),f);else{var m=s(1,u.length-1);m.push(new Gt(d+c.text.slice(l.ch),f,i)),o(c,c.text.slice(0,a.ch)+u[0],r(0)),e.insert(a.line+1,m)}else if(1==u.length)o(c,c.text.slice(0,a.ch)+u[0]+h.text.slice(l.ch),r(0)),e.remove(a.line+1,p);else{o(c,c.text.slice(0,a.ch)+u[0],r(0)),o(h,d+h.text.slice(l.ch),f);var v=s(1,u.length-1);p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,v)}ln(e,"change",e,t)}function Er(e,t,n){!function e(i,r,o){if(i.linked)for(var s=0;s<i.linked.length;++s){var a=i.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;n&&!l||(t(a.doc,l),e(a.doc,i,l))}}}(e,null,!0)}function jr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,li(e),Ar(e),Nr(e),e.options.lineWrapping||qt(e),e.options.mode=t.modeOption,hi(e)}function Nr(e){("rtl"==e.doc.direction?I:M)(e.display.lineDiv,"CodeMirror-rtl")}function Dr(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Rr(e,t){var n={from:it(t.from),to:Mr(t),text:$e(e,t.from,t.to)};return Wr(e,n,t.from.line,t.to.line+1),Er(e,(function(e){return Wr(e,n,t.from.line,t.to.line+1)}),!0),n}function Fr(e){for(;e.length&&K(e).ranges;)e.pop()}function Br(e,t,n,i){var r=e.history;r.undone.length=0;var o,s,a=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&r.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Fr(e.done),K(e.done)):e.done.length&&!K(e.done).ranges?K(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),K(e.done)):void 0}(r,r.lastOp==i)))s=K(o.changes),0==tt(t.from,t.to)&&0==tt(t.from,s.to)?s.to=Mr(t):o.changes.push(Rr(e,t));else{var l=K(r.done);for(l&&l.ranges||Hr(e.sel,r.done),o={changes:[Rr(e,t)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=a,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,s||pe(e,"historyAdded")}function Hr(e,t){var n=K(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Wr(e,t,n,i){var r=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),(function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[o]=n.markedSpans),++o}))}function Vr(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Ur(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],r=0;r<t.text.length;++r)i.push(Vr(n[r]));return i}(e,t),i=Mt(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],s=i[r];if(o&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue e;o.push(l)}else s&&(n[r]=s)}return n}function qr(e,t,n){for(var i=[],r=0;r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?xr.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];i.push({changes:a});for(var l=0;l<s.length;++l){var u=s[l],c=void 0;if(a.push({from:u.from,to:u.to,text:u.text}),t)for(var h in u)(c=h.match(/^spans_(\d+)$/))&&B(t,Number(c[1]))>-1&&(K(a)[h]=u[h],delete u[h])}}}return i}function Gr(e,t,n,i){if(i){var r=e.anchor;if(n){var o=tt(t,r)<0;o!=tt(n,r)<0?(r=t,t=n):o!=tt(t,n)<0&&(t=n)}return new kr(r,t)}return new kr(n||t,t)}function $r(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),Jr(e,new xr([Gr(e.sel.primary(),t,n,r)],0),i)}function Kr(e,t,n){for(var i=[],r=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)i[o]=Gr(e.sel.ranges[o],t[o],null,r);Jr(e,Cr(e.cm,i,e.sel.primIndex),n)}function Zr(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,Jr(e,Cr(e.cm,r,e.sel.primIndex),i)}function Xr(e,t,n,i){Jr(e,Sr(t,n),i)}function Yr(e,t,n){var i=e.history.done,r=K(i);r&&r.ranges?(i[i.length-1]=t,Qr(e,t,n)):Jr(e,t,n)}function Jr(e,t,n){Qr(e,t,n),function(e,t,n,i){var r=e.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||function(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,K(r.done),t))?r.done[r.done.length-1]=t:Hr(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&Fr(r.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Qr(e,t,n){(ve(e,"beforeSelectionChange")||e.cm&&ve(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new kr(at(e,t[n].anchor),at(e,t[n].head))},origin:n&&n.origin};return pe(e,"beforeSelectionChange",e,i),e.cm&&pe(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?Cr(e.cm,i.ranges,i.ranges.length-1):t}(e,t,n));var i=n&&n.bias||(tt(t.primary().head,e.sel.primary().head)<0?-1:1);eo(e,no(e,t,i,!0)),n&&!1===n.scroll||!e.cm||Oi(e.cm)}function eo(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,me(e.cm)),ln(e,"cursorActivity",e))}function to(e){eo(e,no(e,e.sel,null,!1))}function no(e,t,n,i){for(var r,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=ro(e,s.anchor,a&&a.anchor,n,i),u=ro(e,s.head,a&&a.head,n,i);(r||l!=s.anchor||u!=s.head)&&(r||(r=t.ranges.slice(0,o)),r[o]=new kr(l,u))}return r?Cr(e.cm,r,t.primIndex):t}function io(e,t,n,i,r){var o=Ge(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker,u="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,c="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==a.from||(u?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(c?a.to>=t.ch:a.to>t.ch))){if(r&&(pe(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var h=l.find(i<0?1:-1),d=void 0;if((i<0?c:u)&&(h=oo(e,h,-i,h&&h.line==t.line?o:null)),h&&h.line==t.line&&(d=tt(h,n))&&(i<0?d<0:d>0))return io(e,h,t,i,r)}var f=l.find(i<0?-1:1);return(i<0?u:c)&&(f=oo(e,f,i,f.line==t.line?o:null)),f?io(e,f,t,i,r):null}}return t}function ro(e,t,n,i,r){var o=i||1;return io(e,t,n,o,r)||!r&&io(e,t,n,o,!0)||io(e,t,n,-o,r)||!r&&io(e,t,n,-o,!0)||(e.cantEdit=!0,et(e.first,0))}function oo(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?at(e,et(t.line-1)):null:n>0&&t.ch==(i||Ge(e,t.line)).text.length?t.line<e.first+e.size-1?et(t.line+1,0):null:new et(t.line,t.ch+n)}function so(e){e.setSelection(et(e.firstLine(),0),et(e.lastLine()),W)}function ao(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(t,n,r,o){t&&(i.from=at(e,t)),n&&(i.to=at(e,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),pe(e,"beforeChange",e,i),e.cm&&pe(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function lo(e,t,n){if(e.cm){if(!e.cm.curOp)return er(e.cm,lo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"))||(t=ao(e,t,!0))){var i=_t&&!n&&function(e,t,n){var i=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=B(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var r=[{from:t,to:n}],o=0;o<i.length;++o)for(var s=i[o],a=s.find(0),l=0;l<r.length;++l){var u=r[l];if(!(tt(u.to,a.from)<0||tt(u.from,a.to)>0)){var c=[l,1],h=tt(u.from,a.from),d=tt(u.to,a.to);(h<0||!s.inclusiveLeft&&!h)&&c.push({from:u.from,to:a.from}),(d>0||!s.inclusiveRight&&!d)&&c.push({from:a.to,to:u.to}),r.splice.apply(r,c),l+=c.length-3}}return r}(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)uo(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text,origin:t.origin});else uo(e,t)}}function uo(e,t){if(1!=t.text.length||""!=t.text[0]||0!=tt(t.from,t.to)){var n=zr(e,t);Br(e,t,n,e.cm?e.cm.curOp.id:NaN),fo(e,t,n,Mt(e,t));var i=[];Er(e,(function(e,n){n||-1!=B(i,e.history)||(vo(e.history,t),i.push(e.history)),fo(e,t,null,Mt(e,t))}))}}function co(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var r,o=e.history,s=e.sel,a="undo"==t?o.done:o.undone,l="undo"==t?o.undone:o.done,u=0;u<a.length&&(r=a[u],n?!r.ranges||r.equals(e.sel):r.ranges);u++);if(u!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(r=a.pop()).ranges){if(i)return void a.push(r);break}if(Hr(r,l),n&&!r.equals(e.sel))return void Jr(e,r,{clearRedo:!1});s=r}var c=[];Hr(s,l),l.push({changes:c,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var h=ve(e,"beforeChange")||e.cm&&ve(e.cm,"beforeChange"),d=function(n){var i=r.changes[n];if(i.origin=t,h&&!ao(e,i,!1))return a.length=0,{};c.push(Rr(e,i));var o=n?zr(e,i):K(a);fo(e,i,o,Ur(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:Mr(i)});var s=[];Er(e,(function(e,t){t||-1!=B(s,e.history)||(vo(e.history,i),s.push(e.history)),fo(e,i,null,Ur(e,i))}))},f=r.changes.length-1;f>=0;--f){var p=d(f);if(p)return p.v}}}}function ho(e,t){if(0!=t&&(e.first+=t,e.sel=new xr(Z(e.sel.ranges,(function(e){return new kr(et(e.anchor.line+t,e.anchor.ch),et(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){hi(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)di(e.cm,i,"gutter")}}function fo(e,t,n,i){if(e.cm&&!e.cm.curOp)return er(e.cm,fo)(e,t,n,i);if(t.to.line<e.first)ho(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);ho(e,r),t={from:et(e.first,0),to:et(t.to.line+r,t.to.ch),text:[K(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:et(o,Ge(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=$e(e,t.from,t.to),n||(n=zr(e,t)),e.cm?function(e,t,n){var i=e.doc,r=e.display,o=t.from,s=t.to,a=!1,l=o.line;e.options.lineWrapping||(l=Xe(Rt(Ge(i,o.line))),i.iter(l,s.line+1,(function(e){if(e==r.maxLine)return a=!0,!0}))),i.sel.contains(t.from,t.to)>-1&&me(e),Ir(i,t,n,ai(e)),e.options.lineWrapping||(i.iter(l,o.line+t.text.length,(function(e){var t=Ut(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,a=!1)})),a&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var r=Ge(e,i).stateAfter;if(r&&(!(r instanceof ut)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(i,o.line),ir(e,400);var u=t.text.length-(s.line-o.line)-1;t.full?hi(e):o.line!=s.line||1!=t.text.length||Pr(e.doc,t)?hi(e,o.line,s.line+1,u):di(e,o.line,"text");var c=ve(e,"changes"),h=ve(e,"change");if(h||c){var d={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};h&&ln(e,"change",e,d),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(d)}e.display.selForContextMenu=null}(e.cm,t,i):Ir(e,t,i),Qr(e,n,W),e.cantEdit&&ro(e,et(e.firstLine(),0))&&(e.cantEdit=!1)}}function po(e,t,n,i,r){var o;i||(i=n),tt(i,n)<0&&(n=(o=[i,n])[0],i=o[1]),"string"==typeof t&&(t=e.splitLines(t)),lo(e,{from:n,to:i,text:t,origin:r})}function go(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function mo(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r],s=!0;if(o.ranges){o.copied||((o=e[r]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)go(o.ranges[a].anchor,t,n,i),go(o.ranges[a].head,t,n,i)}else{for(var l=0;l<o.changes.length;++l){var u=o.changes[l];if(n<u.from.line)u.from=et(u.from.line+i,u.from.ch),u.to=et(u.to.line+i,u.to.ch);else if(t<=u.to.line){s=!1;break}}s||(e.splice(0,r+1),r=0)}}}function vo(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;mo(e.done,n,i,r),mo(e.undone,n,i,r)}function yo(e,t,n,i){var r=t,o=t;return"number"==typeof t?o=Ge(e,st(e,t)):r=Xe(t),null==r?null:(i(o,r)&&e.cm&&di(e.cm,r,n),o)}function wo(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function bo(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}kr.prototype.from=function(){return ot(this.anchor,this.head)},kr.prototype.to=function(){return rt(this.anchor,this.head)},kr.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},wo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var r=this.lines[n];this.height-=r.height,$t(r),ln(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},bo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var o=Math.min(t,r-e),s=i.height;if(i.removeInner(e,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(t-=o))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof wo))){var a=[];this.collapse(a),this.children=[new wo(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<=o){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(var s=r.lines.length%25+25,a=s;a<r.lines.length;){var l=new wo(r.lines.slice(a,a+=25));r.height-=l.height,this.children.splice(++i,0,l),l.parent=this}r.lines=r.lines.slice(0,s),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new bo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=B(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var i=new bo(e.children);i.parent=e,e.children=[i,t],e=i}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<o){var s=Math.min(t,o-e);if(r.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var _o=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function xo(e,t,n){Vt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Ai(e,n)}_o.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=Xe(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var o=_n(this);Ze(n,Math.max(0,n.height-o)),e&&(Qi(e,(function(){xo(e,n,-o),di(e,i,"widget")})),ln(e,"lineWidgetCleared",e,this,i))}},_o.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=_n(this)-t;r&&(Ht(this.doc,i)||Ze(i,i.height+r),n&&Qi(n,(function(){n.curOp.forceUpdate=!0,xo(n,i,r),ln(n,"lineWidgetChanged",n,e,Xe(i))})))},ye(_o);var ko=0,Co=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ko};function So(e,t,n,i,r){if(i&&i.shared)return function(e,t,n,i,r){(i=D(i)).shared=!1;var o=[So(e,t,n,i,r)],s=o[0],a=i.widgetNode;return Er(e,(function(e){a&&(i.widgetNode=a.cloneNode(!0)),o.push(So(e,at(e,t),at(e,n),i,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=K(o)})),new Mo(o,s)}(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return er(e.cm,So)(e,t,n,i,r);var o=new Co(e,r),s=tt(t,n);if(i&&D(i,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=A("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Dt(e,t.line,t,n,o)||t.line!=n.line&&Dt(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");xt=!0}o.addToHistory&&Br(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var a,l=t.line,u=e.cm;if(e.iter(l,n.line+1,(function(e){u&&o.collapsed&&!u.options.lineWrapping&&Rt(e)==u.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&Ze(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new kt(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l})),o.collapsed&&e.iter(t.line,n.line+1,(function(t){Ht(e,t)&&Ze(t,0)})),o.clearOnEnter&&he(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(_t=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ko,o.atomic=!0),u){if(a&&(u.curOp.updateMaxLine=!0),o.collapsed)hi(u,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=t.line;c<=n.line;c++)di(u,c,"text");o.atomic&&to(u.doc),ln(u,"markerAdded",u,o)}return o}Co.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Gi(e),ve(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=Ct(s.markedSpans,this);e&&!this.collapsed?di(e,Xe(s),"text"):e&&(null!=a.to&&(r=Xe(s)),null!=a.from&&(i=Xe(s))),s.markedSpans=St(s.markedSpans,a),null==a.from&&this.collapsed&&!Ht(this.doc,s)&&e&&Ze(s,ii(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var u=Rt(this.lines[l]),c=Ut(u);c>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&hi(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&to(e.doc)),e&&ln(e,"markerCleared",e,this,i,r),t&&$i(e),this.parent&&this.parent.clear()}},Co.prototype.find=function(e,t){var n,i;null==e&&"bookmark"==this.type&&(e=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],s=Ct(o.markedSpans,this);if(null!=s.from&&(n=et(t?o:Xe(o),s.from),-1==e))return n;if(null!=s.to&&(i=et(t?o:Xe(o),s.to),1==e))return i}return n&&{from:n,to:i}},Co.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;t&&i&&Qi(i,(function(){var r=t.line,o=Xe(t.line),s=On(i,o);if(s&&(Rn(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!Ht(n.doc,r)&&null!=n.height){var a=n.height;n.height=null;var l=_n(n)-a;l&&Ze(r,r.height+l)}ln(i,"markerChanged",i,e)}))},Co.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=B(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Co.prototype.detachLine=function(e){if(this.lines.splice(B(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},ye(Co);var Mo=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function To(e){return e.findMarks(et(e.first,0),e.clipPos(et(e.lastLine())),(function(e){return e.parent}))}function zo(e){for(var t=function(t){var n=e[t],i=[n.primary.doc];Er(n.primary.doc,(function(e){return i.push(e)}));for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==B(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<e.length;n++)t(n)}Mo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ln(this,"clear")}},Mo.prototype.find=function(e,t){return this.primary.find(e,t)},ye(Mo);var Lo=0,Ao=function(e,t,n,i,r){if(!(this instanceof Ao))return new Ao(e,t,n,i,r);null==n&&(n=0),bo.call(this,[new wo([new Gt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=et(n,0);this.sel=Sr(o),this.history=new Dr(null),this.id=++Lo,this.modeOption=t,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Ir(this,{from:o,to:o,text:e}),Jr(this,Sr(o),W)};Ao.prototype=Y(bo.prototype,{constructor:Ao,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ke(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:nr((function(e){var t=et(this.first,0),n=this.first+this.size-1;lo(this,{from:t,to:et(n,Ge(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Pi(this.cm,0,0),Jr(this,Sr(t),W)})),replaceRange:function(e,t,n,i){po(this,e,t=at(this,t),n=n?at(this,n):t,i)},getRange:function(e,t,n){var i=$e(this,at(this,e),at(this,t));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Je(this,e))return Ge(this,e)},getLineNumber:function(e){return Xe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ge(this,e)),Rt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return at(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:nr((function(e,t,n){Xr(this,at(this,"number"==typeof e?et(e,t||0):e),null,n)})),setSelection:nr((function(e,t,n){Xr(this,at(this,e),at(this,t||e),n)})),extendSelection:nr((function(e,t,n){$r(this,at(this,e),t&&at(this,t),n)})),extendSelections:nr((function(e,t){Kr(this,lt(this,e),t)})),extendSelectionsBy:nr((function(e,t){Kr(this,lt(this,Z(this.sel.ranges,e)),t)})),setSelections:nr((function(e,t,n){if(e.length){for(var i=[],r=0;r<e.length;r++)i[r]=new kr(at(this,e[r].anchor),at(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Jr(this,Cr(this.cm,i,t),n)}})),addSelection:nr((function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new kr(at(this,e),at(this,t||e))),Jr(this,Cr(this.cm,i,i.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=$e(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=$e(this,n[i].from(),n[i].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:nr((function(e,t,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var s=r.ranges[o];i[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:n}}for(var a=t&&"end"!=t&&function(e,t,n){for(var i=[],r=et(e.first,0),o=r,s=0;s<t.length;s++){var a=t[s],l=Lr(a.from,r,o),u=Lr(Mr(a),r,o);if(r=a.to,o=u,"around"==n){var c=e.sel.ranges[s],h=tt(c.head,c.anchor)<0;i[s]=new kr(h?u:l,h?l:u)}else i[s]=new kr(l,l)}return new xr(i,e.sel.primIndex)}(this,i,t),l=i.length-1;l>=0;l--)lo(this,i[l]);a?Yr(this,a):this.cm&&Oi(this.cm)})),undo:nr((function(){co(this,"undo")})),redo:nr((function(){co(this,"redo")})),undoSelection:nr((function(){co(this,"undo",!0)})),redoSelection:nr((function(){co(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Dr(this.history.maxGeneration),Er(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:qr(this.history.done),undone:qr(this.history.undone)}},setHistory:function(e){var t=this.history=new Dr(this.history.maxGeneration);t.done=qr(e.done.slice(0),null,!0),t.undone=qr(e.undone.slice(0),null,!0)},setGutterMarker:nr((function(e,t,n){return yo(this,e,"gutter",(function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&te(i)&&(e.gutterMarkers=null),!0}))})),clearGutter:nr((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&yo(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,te(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!Je(this,e))return null;if(t=e,!(e=Ge(this,e)))return null}else if(null==(t=Xe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:nr((function(e,t,n){return yo(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(C(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0}))})),removeLineClass:nr((function(e,t,n){return yo(this,e,"gutter"==t?"gutter":"class",(function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var o=r.match(C(n));if(!o)return!1;var s=o.index+o[0].length;e[i]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0}))})),addLineWidget:nr((function(e,t,n){return function(e,t,n,i){var r=new _o(e,n,i),o=e.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),yo(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r),r.line=t,o&&!Ht(e,t)){var i=Vt(t)<e.scrollTop;Ze(t,t.height+_n(r)),i&&Ai(o,r.height),o.curOp.forceUpdate=!0}return!0})),o&&ln(o,"lineWidgetAdded",o,r,"number"==typeof t?t:Xe(t)),r}(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return So(this,at(this,e),at(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return So(this,e=at(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Ge(this,(e=at(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=at(this,e),t=at(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,(function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&r==e.line&&e.ch>=l.to||null==l.from&&r!=e.line||null!=l.from&&r==t.line&&l.from>=t.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r})),i},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)})),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){var o=r.text.length+i;if(o>e)return t=e,!0;e-=o,++n})),at(this,et(n,t))},indexFromPos:function(e){var t=(e=at(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Ao(Ke(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new Ao(Ke(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),o=e.clipPos(r.from),s=e.clipPos(r.to);if(tt(o,s)){var a=So(e,o,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}(i,To(this)),i},unlinkDoc:function(e){if(e instanceof Ss&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),zo(To(this));break}if(e.history==this.history){var n=[e.id];Er(e,(function(e){return n.push(e.id)}),!0),e.history=new Dr(null),e.history.done=qr(this.history.done,n),e.history.undone=qr(this.history.undone,n)}},iterLinkedDocs:function(e){Er(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Oe(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:nr((function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&Qi(t=this.cm,(function(){Nr(t),hi(t)})))}))}),Ao.prototype.eachLine=Ao.prototype.iter;var Oo=0;function Po(e){var t=this;if(Io(t),!ge(t,e)&&!xn(t.display,e)){we(e),s&&(Oo=+new Date);var n=ui(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),a=0,l=function(){++a==r&&er(t,(function(){var e={from:n=at(t.doc,n),to:n,text:t.doc.splitLines(o.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};lo(t.doc,e),Yr(t.doc,Sr(at(t.doc,n),at(t.doc,Mr(e))))}))()},u=function(e,n){if(t.options.allowDropFileTypes&&-1==B(t.options.allowDropFileTypes,e.type))l();else{var i=new FileReader;i.onerror=function(){return l()},i.onload=function(){var e=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(o[n]=e),l()},i.readAsText(e)}},c=0;c<i.length;c++)u(i[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var h=e.dataTransfer.getData("Text");if(h){var d;if(t.state.draggingText&&!t.state.draggingText.copy&&(d=t.listSelections()),Qr(t.doc,Sr(n,n)),d)for(var f=0;f<d.length;++f)po(t.doc,"",d[f].anchor,d[f].head,"drag");t.replaceSelection(h,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Io(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Eo(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var jo=!1;function No(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Do={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ro=0;Ro<10;Ro++)Do[Ro+48]=Do[Ro+96]=String(Ro);for(var Fo=65;Fo<=90;Fo++)Do[Fo]=String.fromCharCode(Fo);for(var Bo=1;Bo<=12;Bo++)Do[Bo+111]=Do[Bo+63235]="F"+Bo;var Ho={};function Wo(e){var t,n,i,r,o=e.split(/-(?!$)/);e=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);i=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Vo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var r=Z(n.split(" "),Wo),o=0;o<r.length;o++){var s=void 0,a=void 0;o==r.length-1?(a=r.join(" "),s=i):(a=r.slice(0,o+1).join(" "),s="...");var l=t[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[n]}for(var u in t)e[u]=t[u];return e}function Uo(e,t,n,i){var r=(t=Ko(t)).call?t.call(e,i):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Uo(e,t.fallthrough,n,i);for(var o=0;o<t.fallthrough.length;o++){var s=Uo(e,t.fallthrough[o],n,i);if(s)return s}}}function qo(e){var t="string"==typeof e?e:Do[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Go(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(x?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(x?t.ctrlKey:t.metaKey)&&"Cmd"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function $o(e,t){if(h&&34==e.keyCode&&e.char)return!1;var n=Do[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Go(n,e,t))}function Ko(e){return"string"==typeof e?Ho[e]:e}function Zo(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=t(n[r]);i.length&&tt(o.from,K(i).to)<=0;){var s=i.pop();if(tt(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}Qi(e,(function(){for(var t=i.length-1;t>=0;t--)po(e.doc,"",i[t].from,i[t].to,"+delete");Oi(e)}))}function Xo(e,t,n){var i=re(e.text,t+n,n);return i<0||i>e.text.length?null:i}function Yo(e,t,n){var i=Xo(e,t.ch,n);return null==i?null:new et(t.line,i,n<0?"after":"before")}function Jo(e,t,n,i,r){if(e){"rtl"==t.doc.direction&&(r=-r);var o=ue(n,t.doc.direction);if(o){var s,a=r<0?K(o):o[0],l=r<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==t.doc.direction){var u=Pn(t,n);s=r<0?n.text.length-1:0;var c=In(t,u,s).top;s=oe((function(e){return In(t,u,e).top==c}),r<0==(1==a.level)?a.from:a.to-1,s),"before"==l&&(s=Xo(n,s,1))}else s=r<0?a.to:a.from;return new et(i,s,l)}}return new et(i,r<0?n.text.length:0,r<0?"before":"after")}Ho.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ho.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ho.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ho.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ho.default=y?Ho.macDefault:Ho.pcDefault;var Qo={selectAll:so,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),W)},killLine:function(e){return Zo(e,(function(t){if(t.empty()){var n=Ge(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:et(t.head.line+1,0)}:{from:t.head,to:et(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Zo(e,(function(t){return{from:et(t.from().line,0),to:at(e.doc,et(t.to().line+1,0))}}))},delLineLeft:function(e){return Zo(e,(function(e){return{from:et(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Zo(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Zo(e,(function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(et(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(et(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return es(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return ts(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return function(e,t){var n=Ge(e.doc,t),i=function(e){for(var t;t=jt(e);)e=t.find(1,!0).line;return e}(n);return i!=n&&(t=Xe(i)),Jo(!0,e,n,t,-1)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),U)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),U)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?ts(e,t.head):i}),U)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),s=R(e.getLine(o.line),o.ch,i);t.push($(i-s%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Qi(e,(function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var r=t[i].head,o=Ge(e.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new et(r.line,r.ch-1)),r.ch>0)r=new et(r.line,r.ch+1),e.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),et(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var s=Ge(e.doc,r.line-1).text;s&&(r=new et(r.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),et(r.line-1,s.length-1),r,"+transpose"))}n.push(new kr(r,r))}e.setSelections(n)}))},newlineAndIndent:function(e){return Qi(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);Oi(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function es(e,t){var n=Ge(e.doc,t),i=Rt(n);return i!=n&&(t=Xe(i)),Jo(!0,e,i,t,1)}function ts(e,t){var n=es(e,t.line),i=Ge(e.doc,n.line),r=ue(i,e.doc.direction);if(!r||0==r[0].level){var o=Math.max(n.ch,i.text.search(/\S/)),s=t.line==n.line&&t.ch<=o&&t.ch;return et(n.line,s?0:o,n.sticky)}return n}function ns(e,t,n){if("string"==typeof t&&!(t=Qo[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=H}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}var is=new F;function rs(e,t,n,i){var r=e.state.keySeq;if(r){if(qo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:is.set(50,(function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())})),os(e,r+" "+t,n,i))return!0}return os(e,t,n,i)}function os(e,t,n,i){var r=function(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=Uo(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&Uo(t,e.options.extraKeys,n,e)||Uo(t,e.options.keyMap,n,e)}(e,t,i);return"multi"==r&&(e.state.keySeq=t),"handled"==r&&ln(e,"keyHandled",e,t,n),"handled"!=r&&"multi"!=r||(we(n),_i(e)),!!r}function ss(e,t){var n=$o(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?rs(e,"Shift-"+n,t,(function(t){return ns(e,t,!0)}))||rs(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ns(e,t)})):rs(e,n,t,(function(t){return ns(e,t)})))}var as=null;function ls(e){var t=this;if(t.curOp.focus=P(),!ge(t,e)){s&&a<11&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var r=ss(t,e);h&&(as=r?i:null,r||88!=i||Ie||!(y?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),n&&!y&&!r&&46==i&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(M(t,"CodeMirror-crosshair"),fe(document,"keyup",n),fe(document,"mouseover",n))}I(t,"CodeMirror-crosshair"),he(document,"keyup",n),he(document,"mouseover",n)}(t)}}function us(e){16==e.keyCode&&(this.doc.sel.shift=!1),ge(this,e)}function cs(e){var t=this;if(!(xn(t.display,e)||ge(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(h&&n==as)return as=null,void we(e);if(!h||e.which&&!(e.which<10)||!ss(t,e)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(function(e,t,n){return rs(e,"'"+n+"'",t,(function(t){return ns(e,t,!0)}))}(t,e,r)||t.display.input.onKeyPress(e))}}}var hs,ds,fs=function(e,t,n){this.time=e,this.pos=t,this.button=n};function ps(e){var t=this,n=t.display;if(!(ge(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,xn(n,e))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!vs(t,e)){var i=ui(t,e),r=Ce(e),o=i?function(e,t){var n=+new Date;return ds&&ds.compare(n,e,t)?(hs=ds=null,"triple"):hs&&hs.compare(n,e,t)?(ds=new fs(n,e,t),hs=null,"double"):(hs=new fs(n,e,t),ds=null,"single")}(i,r):"single";window.focus(),1==r&&t.state.selectingText&&t.state.selectingText(e),i&&function(e,t,n,i,r){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),rs(e,Go(o=(1==t?"Left":2==t?"Middle":"Right")+o,r),r,(function(t){if("string"==typeof t&&(t=Qo[t]),!t)return!1;var i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i=t(e,n)!=H}finally{e.state.suppressEdits=!1}return i}))}(t,r,i,o,e)||(1==r?i?function(e,t,n,i){s?setTimeout(N(xi,e),0):e.curOp.focus=P();var r,o=function(e,t,n){var i=e.getOption("configureMouse"),r=i?i(e,t,n):{};if(null==r.unit){var o=w?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==r.extend||e.doc.extend)&&(r.extend=e.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=y?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(y?n.altKey:n.ctrlKey)),r}(e,n,i),u=e.doc.sel;e.options.dragDrop&&Te&&!e.isReadOnly()&&"single"==n&&(r=u.contains(t))>-1&&(tt((r=u.ranges[r]).from(),t)<0||t.xRel>0)&&(tt(r.to(),t)>0||t.xRel<0)?function(e,t,n,i){var r=e.display,o=!1,u=er(e,(function(t){l&&(r.scroller.draggable=!1),e.state.draggingText=!1,fe(r.wrapper.ownerDocument,"mouseup",u),fe(r.wrapper.ownerDocument,"mousemove",c),fe(r.scroller,"dragstart",h),fe(r.scroller,"drop",u),o||(we(t),i.addNew||$r(e.doc,n,null,null,i.extend),l||s&&9==a?setTimeout((function(){r.wrapper.ownerDocument.body.focus(),r.input.focus()}),20):r.input.focus())})),c=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},h=function(){return o=!0};l&&(r.scroller.draggable=!0),e.state.draggingText=u,u.copy=!i.moveOnDrag,r.scroller.dragDrop&&r.scroller.dragDrop(),he(r.wrapper.ownerDocument,"mouseup",u),he(r.wrapper.ownerDocument,"mousemove",c),he(r.scroller,"dragstart",h),he(r.scroller,"drop",u),ki(e),setTimeout((function(){return r.input.focus()}),20)}(e,i,t,o):function(e,t,n,i){var r=e.display,o=e.doc;we(t);var s,a,l=o.sel,u=l.ranges;if(i.addNew&&!i.extend?(a=o.sel.contains(n),s=a>-1?u[a]:new kr(n,n)):(s=o.sel.primary(),a=o.sel.primIndex),"rectangle"==i.unit)i.addNew||(s=new kr(n,n)),n=ui(e,t,!0,!0),a=-1;else{var c=gs(e,n,i.unit);s=i.extend?Gr(s,c.anchor,c.head,i.extend):c}i.addNew?-1==a?(a=u.length,Jr(o,Cr(e,u.concat([s]),a),{scroll:!1,origin:"*mouse"})):u.length>1&&u[a].empty()&&"char"==i.unit&&!i.extend?(Jr(o,Cr(e,u.slice(0,a).concat(u.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):Zr(o,a,s,V):(a=0,Jr(o,new xr([s],0),V),l=o.sel);var h=n;function d(t){if(0!=tt(h,t))if(h=t,"rectangle"==i.unit){for(var r=[],u=e.options.tabSize,c=R(Ge(o,n.line).text,n.ch,u),d=R(Ge(o,t.line).text,t.ch,u),f=Math.min(c,d),p=Math.max(c,d),g=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));g<=m;g++){var v=Ge(o,g).text,y=q(v,f,u);f==p?r.push(new kr(et(g,y),et(g,y))):v.length>y&&r.push(new kr(et(g,y),et(g,q(v,p,u))))}r.length||r.push(new kr(n,n)),Jr(o,Cr(e,l.ranges.slice(0,a).concat(r),a),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var w,b=s,_=gs(e,t,i.unit),x=b.anchor;tt(_.anchor,x)>0?(w=_.head,x=ot(b.from(),_.anchor)):(w=_.anchor,x=rt(b.to(),_.head));var k=l.ranges.slice(0);k[a]=function(e,t){var n=t.anchor,i=t.head,r=Ge(e.doc,n.line);if(0==tt(n,i)&&n.sticky==i.sticky)return t;var o=ue(r);if(!o)return t;var s=ae(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return t;var l,u=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==u||u==o.length)return t;if(i.line!=n.line)l=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var c=ae(o,i.ch,i.sticky),h=c-s||(i.ch-n.ch)*(1==a.level?-1:1);l=c==u-1||c==u?h<0:h>0}var d=o[u+(l?-1:0)],f=l==(1==d.level),p=f?d.from:d.to,g=f?"after":"before";return n.ch==p&&n.sticky==g?t:new kr(new et(n.line,p,g),i)}(e,new kr(at(o,x),w)),Jr(o,Cr(e,k,a),V)}}var f=r.wrapper.getBoundingClientRect(),p=0;function g(t){e.state.selectingText=!1,p=1/0,t&&(we(t),r.input.focus()),fe(r.wrapper.ownerDocument,"mousemove",m),fe(r.wrapper.ownerDocument,"mouseup",v),o.history.lastSelOrigin=null}var m=er(e,(function(t){0!==t.buttons&&Ce(t)?function t(n){var s=++p,a=ui(e,n,!0,"rectangle"==i.unit);if(a)if(0!=tt(a,h)){e.curOp.focus=P(),d(a);var l=zi(r,o);(a.line>=l.to||a.line<l.from)&&setTimeout(er(e,(function(){p==s&&t(n)})),150)}else{var u=n.clientY<f.top?-20:n.clientY>f.bottom?20:0;u&&setTimeout(er(e,(function(){p==s&&(r.scroller.scrollTop+=u,t(n))})),50)}}(t):g(t)})),v=er(e,g);e.state.selectingText=v,he(r.wrapper.ownerDocument,"mousemove",m),he(r.wrapper.ownerDocument,"mouseup",v)}(e,i,t,o)}(t,i,o,e):ke(e)==n.scroller&&we(e):2==r?(i&&$r(t.doc,i),setTimeout((function(){return n.input.focus()}),20)):3==r&&(k?t.display.input.onContextMenu(e):ki(t)))}}function gs(e,t,n){if("char"==n)return new kr(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new kr(et(t.line,0),at(e.doc,et(t.line+1,0)));var i=n(e,t);return new kr(i.from,i.to)}function ms(e,t,n,i){var r,o;if(t.touches)r=t.touches[0].clientX,o=t.touches[0].clientY;else try{r=t.clientX,o=t.clientY}catch(t){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&we(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!ve(e,n))return _e(t);o-=a.top-s.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var u=s.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=r)return pe(e,n,e,Ye(e.doc,o),e.display.gutterSpecs[l].className,t),_e(t)}}function vs(e,t){return ms(e,t,"gutterClick",!0)}function ys(e,t){xn(e.display,t)||function(e,t){return!!ve(e,"gutterContextMenu")&&ms(e,t,"gutterContextMenu",!1)}(e,t)||ge(e,t,"contextmenu")||k||e.display.input.onContextMenu(t)}function ws(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Bn(e)}fs.prototype.compare=function(e,t,n){return this.time+400>e&&0==tt(t,this.pos)&&n==this.button};var bs={toString:function(){return"CodeMirror.Init"}},_s={},xs={};function ks(e,t,n){if(!t!=!(n&&n!=bs)){var i=e.display.dragFunctions,r=t?he:fe;r(e.display.scroller,"dragstart",i.start),r(e.display.scroller,"dragenter",i.enter),r(e.display.scroller,"dragover",i.over),r(e.display.scroller,"dragleave",i.leave),r(e.display.scroller,"drop",i.drop)}}function Cs(e){e.options.lineWrapping?(I(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(M(e.display.wrapper,"CodeMirror-wrap"),qt(e)),li(e),hi(e),Bn(e),setTimeout((function(){return Hi(e)}),100)}function Ss(e,t){var n=this;if(!(this instanceof Ss))return new Ss(e,t);this.options=t=t?D(t):{},D(_s,t,!1);var i=t.value;"string"==typeof i?i=new Ao(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var r=new Ss.inputStyles[t.inputStyle](this),o=this.display=new mr(e,i,r,t);for(var u in o.wrapper.CodeMirror=this,ws(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ui(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new F,keySeq:null,specialChars:null},t.autofocus&&!v&&o.input.focus(),s&&a<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(e){var t=e.display;he(t.scroller,"mousedown",er(e,ps)),he(t.scroller,"dblclick",s&&a<11?er(e,(function(t){if(!ge(e,t)){var n=ui(e,t);if(n&&!vs(e,t)&&!xn(e.display,t)){we(t);var i=e.findWordAt(n);$r(e.doc,i.anchor,i.head)}}})):function(t){return ge(e,t)||we(t)}),he(t.scroller,"contextmenu",(function(t){return ys(e,t)})),he(t.input.getField(),"contextmenu",(function(n){t.scroller.contains(n.target)||ys(e,n)}));var n,i={end:0};function r(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(i=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}he(t.scroller,"touchstart",(function(r){if(!ge(e,r)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(r)&&!vs(e,r)){t.input.ensurePolled(),clearTimeout(n);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-i.end<=300?i:null},1==r.touches.length&&(t.activeTouch.left=r.touches[0].pageX,t.activeTouch.top=r.touches[0].pageY)}})),he(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),he(t.scroller,"touchend",(function(n){var i=t.activeTouch;if(i&&!xn(t,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var s,a=e.coordsChar(t.activeTouch,"page");s=!i.prev||o(i,i.prev)?new kr(a,a):!i.prev.prev||o(i,i.prev.prev)?e.findWordAt(a):new kr(et(a.line,0),at(e.doc,et(a.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),we(n)}r()})),he(t.scroller,"touchcancel",r),he(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(ji(e,t.scroller.scrollTop),Di(e,t.scroller.scrollLeft,!0),pe(e,"scroll",e))})),he(t.scroller,"mousewheel",(function(t){return _r(e,t)})),he(t.scroller,"DOMMouseScroll",(function(t){return _r(e,t)})),he(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){ge(e,t)||xe(t)},over:function(t){ge(e,t)||(function(e,t){var n=ui(e,t);if(n){var i=document.createDocumentFragment();yi(e,n,i),e.display.dragCursor||(e.display.dragCursor=L("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),z(e.display.dragCursor,i)}}(e,t),xe(t))},start:function(t){return function(e,t){if(s&&(!e.state.draggingText||+new Date-Oo<100))xe(t);else if(!ge(e,t)&&!xn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!d)){var n=L("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),h&&n.parentNode.removeChild(n)}}(e,t)},drop:er(e,Po),leave:function(t){ge(e,t)||Io(e)}};var l=t.input.getField();he(l,"keyup",(function(t){return us.call(e,t)})),he(l,"keydown",er(e,ls)),he(l,"keypress",er(e,cs)),he(l,"focus",(function(t){return Ci(e,t)})),he(l,"blur",(function(t){return Si(e,t)}))}(this),function(){var e;jo||(he(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Eo(No)}),100))})),he(window,"blur",(function(){return Eo(Si)})),jo=!0)}(),Gi(this),this.curOp.forceUpdate=!0,jr(this,i),t.autofocus&&!v||this.hasFocus()?setTimeout(N(Ci,this),20):Si(this),xs)xs.hasOwnProperty(u)&&xs[u](this,t[u],bs);dr(this),t.finishInit&&t.finishInit(this);for(var c=0;c<Ms.length;++c)Ms[c](this);$i(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Ss.defaults=_s,Ss.optionHandlers=xs;var Ms=[];function Ts(e,t,n,i){var r,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=ft(e,t).state:n="prev");var s=e.options.tabSize,a=Ge(o,t),l=R(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var u,c=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&((u=o.mode.indent(r,a.text.slice(c.length),a.text))==H||u>150)){if(!i)return;n="prev"}}else u=0,n="not";"prev"==n?u=t>o.first?R(Ge(o,t-1).text,null,s):0:"add"==n?u=l+e.options.indentUnit:"subtract"==n?u=l-e.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var h="",d=0;if(e.options.indentWithTabs)for(var f=Math.floor(u/s);f;--f)d+=s,h+="\t";if(d<u&&(h+=$(u-d)),h!=c)return po(o,h,et(t,0),et(t,c.length),"+input"),a.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==t&&g.head.ch<c.length){var m=et(t,c.length);Zr(o,p,new kr(m,m));break}}}Ss.defineInitHook=function(e){return Ms.push(e)};var zs=null;function Ls(e){zs=e}function As(e,t,n,i,r){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var s=+new Date-200,a="paste"==r||e.state.pasteIncoming>s,l=Oe(t),u=null;if(a&&i.ranges.length>1)if(zs&&zs.text.join("\n")==t){if(i.ranges.length%zs.text.length==0){u=[];for(var c=0;c<zs.text.length;c++)u.push(o.splitLines(zs.text[c]))}}else l.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(u=Z(l,(function(e){return[e]})));for(var h=e.curOp.updateInput,d=i.ranges.length-1;d>=0;d--){var f=i.ranges[d],p=f.from(),g=f.to();f.empty()&&(n&&n>0?p=et(p.line,p.ch-n):e.state.overwrite&&!a?g=et(g.line,Math.min(Ge(o,g.line).text.length,g.ch+K(l).length)):a&&zs&&zs.lineWise&&zs.text.join("\n")==t&&(p=g=et(p.line,0)));var m={from:p,to:g,text:u?u[d%u.length]:l,origin:r||(a?"paste":e.state.cutIncoming>s?"cut":"+input")};lo(e.doc,m),ln(e,"inputRead",e,m)}t&&!a&&Ps(e,t),Oi(e),e.curOp.updateInput<2&&(e.curOp.updateInput=h),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Os(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Qi(t,(function(){return As(t,n,0,null,"paste")})),!0}function Ps(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=e.getModeAt(r.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){s=Ts(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Ge(e.doc,r.head.line).text.slice(0,r.head.ch))&&(s=Ts(e,r.head.line,"smart"));s&&ln(e,"electricInput",e,r.head.line)}}}function Is(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,o={anchor:et(r,0),head:et(r+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Es(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function js(){var e=L("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=L("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),Es(e),t}function Ns(e,t,n,i,r){var o=t,s=n,a=Ge(e,t.line),l=r&&"rtl"==e.direction?-n:n;function u(i){var o,s;if(null==(o=r?function(e,t,n,i){var r=ue(t,e.doc.direction);if(!r)return Yo(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=ae(r,n.ch,n.sticky),s=r[o];if("ltr"==e.doc.direction&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return Yo(t,n,i);var a,l=function(e,n){return Xo(t,e instanceof et?e.ch:e,n)},u=function(n){return e.options.lineWrapping?(a=a||Pn(e,t),Jn(e,t,a,n)):{begin:0,end:t.text.length}},c=u("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==s.level){var h=1==s.level==i<0,d=l(n,h?1:-1);if(null!=d&&(h?d<=s.to&&d<=c.end:d>=s.from&&d>=c.begin)){var f=h?"before":"after";return new et(n.line,d,f)}}var p=function(e,t,i){for(var o=function(e,t){return t?new et(n.line,l(e,1),"before"):new et(n.line,e,"after")};e>=0&&e<r.length;e+=t){var s=r[e],a=t>0==(1!=s.level),u=a?i.begin:l(i.end,-1);if(s.from<=u&&u<s.to)return o(u,a);if(u=a?s.from:l(s.to,-1),i.begin<=u&&u<i.end)return o(u,a)}},g=p(o+i,i,c);if(g)return g;var m=i>0?c.end:l(c.begin,-1);return null==m||i>0&&m==t.text.length||!(g=p(i>0?0:r.length-1,i,u(m)))?null:g}(e.cm,a,t,n):Yo(a,t,n))){if(i||(s=t.line+l)<e.first||s>=e.first+e.size||(t=new et(s,t.ch,t.sticky),!(a=Ge(e,s))))return!1;t=Jo(r,e.cm,a,t.line,l)}else t=o;return!0}if("char"==i)u();else if("column"==i)u(!0);else if("word"==i||"group"==i)for(var c=null,h="group"==i,d=e.cm&&e.cm.getHelper(t,"wordChars"),f=!0;!(n<0)||u(!f);f=!1){var p=a.text.charAt(t.ch)||"\n",g=ee(p,d)?"w":h&&"\n"==p?"n":!h||/\s/.test(p)?null:"p";if(!h||f||g||(g="s"),c&&c!=g){n<0&&(n=1,u(),t.sticky="after");break}if(g&&(c=g),n>0&&!u(!f))break}var m=ro(e,t,o,s,!0);return nt(o,m)&&(m.hitSide=!0),m}function Ds(e,t,n,i){var r,o,s=e.doc,a=t.left;if("page"==i){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(l-.5*ii(e.display),3);r=(n>0?t.bottom:t.top)+n*u}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(;(o=Xn(e,a,r)).outside;){if(n<0?r<=0:r>=s.height){o.hitSide=!0;break}r+=5*n}return o}var Rs=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new F,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Fs(e,t){var n=On(e,t.line);if(!n||n.hidden)return null;var i=Ge(e.doc,t.line),r=Ln(n,i,t.line),o=ue(i,e.doc.direction),s="left";o&&(s=ae(o,t.ch)%2?"right":"left");var a=Nn(r.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function Bs(e,t){return t&&(e.bad=!0),e}function Hs(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return Bs(e.clipPos(et(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==i)return Ws(o,t,n)}}function Ws(e,t,n){var i=e.text.firstChild,r=!1;if(!t||!O(i,t))return Bs(et(Xe(e.line),0),!0);if(t==i&&(r=!0,t=i.childNodes[n],n=0,!t)){var o=e.rest?K(e.rest):e.line;return Bs(et(Xe(o),o.text.length),r)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,n&&(n=s.nodeValue.length));a.parentNode!=i;)a=a.parentNode;var l=e.measure,u=l.maps;function c(t,n,i){for(var r=-1;r<(u?u.length:0);r++)for(var o=r<0?l.map:u[r],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==n){var c=Xe(r<0?e.line:e.rest[r]),h=o[s]+i;return(i<0||a!=t)&&(h=o[s+(i?1:0)]),et(c,h)}}}var h=c(s,a,n);if(h)return Bs(h,r);for(var d=a.nextSibling,f=s?s.nodeValue.length-n:0;d;d=d.nextSibling){if(h=c(d,d.firstChild,0))return Bs(et(h.line,h.ch-f),r);f+=d.textContent.length}for(var p=a.previousSibling,g=n;p;p=p.previousSibling){if(h=c(p,p.firstChild,-1))return Bs(et(h.line,h.ch+g),r);g+=p.textContent.length}}Rs.prototype.init=function(e){var t=this,n=this,i=n.cm,r=n.div=e.lineDiv;function o(e){if(!ge(i,e)){if(i.somethingSelected())Ls({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=Is(i);Ls({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation((function(){i.setSelections(t.ranges,0,W),i.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var o=zs.text.join("\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var s=js(),a=s.firstChild;i.display.lineSpace.insertBefore(s,i.display.lineSpace.firstChild),a.value=zs.text.join("\n");var l=document.activeElement;j(a),setTimeout((function(){i.display.lineSpace.removeChild(s),l.focus(),l==r&&n.showPrimarySelection()}),50)}}Es(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),he(r,"paste",(function(e){ge(i,e)||Os(e,i)||a<=11&&setTimeout(er(i,(function(){return t.updateFromDOM()})),20)})),he(r,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),he(r,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),he(r,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),he(r,"touchstart",(function(){return n.forceCompositionEnd()})),he(r,"input",(function(){t.composing||t.readFromDOMSoon()})),he(r,"copy",o),he(r,"cut",o)},Rs.prototype.prepareSelection=function(){var e=vi(this.cm,!1);return e.focus=this.cm.state.focused,e},Rs.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Rs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Rs.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),o=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var s=Hs(t,e.anchorNode,e.anchorOffset),a=Hs(t,e.focusNode,e.focusOffset);if(!s||s.bad||!a||a.bad||0!=tt(ot(s,a),r)||0!=tt(rt(s,a),o)){var l=t.display.view,u=r.line>=t.display.viewFrom&&Fs(t,r)||{node:l[0].measure.map[2],offset:0},c=o.line<t.display.viewTo&&Fs(t,o);if(!c){var h=l[l.length-1].measure,d=h.maps?h.maps[h.maps.length-1]:h.map;c={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(u&&c){var f,p=e.rangeCount&&e.getRangeAt(0);try{f=S(u.node,u.offset,c.offset,c.node)}catch(e){}f&&(!n&&t.state.focused?(e.collapse(u.node,u.offset),f.collapsed||(e.removeAllRanges(),e.addRange(f))):(e.removeAllRanges(),e.addRange(f)),p&&null==e.anchorNode?e.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Rs.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Rs.prototype.showMultipleSelections=function(e){z(this.cm.display.cursorDiv,e.cursors),z(this.cm.display.selectionDiv,e.selection)},Rs.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Rs.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return O(this.div,t)},Rs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Rs.prototype.blur=function(){this.div.blur()},Rs.prototype.getField=function(){return this.div},Rs.prototype.supportsTouch=function(){return!0},Rs.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Qi(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},Rs.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Rs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(m&&c&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Hs(t,e.anchorNode,e.anchorOffset),i=Hs(t,e.focusNode,e.focusOffset);n&&i&&Qi(t,(function(){Jr(t.doc,Sr(n,i),W),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)}))}}},Rs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>i.firstLine()&&(s=et(s.line-1,Ge(i.doc,s.line-1).length)),a.ch==Ge(i.doc,a.line).text.length&&a.line<i.lastLine()&&(a=et(a.line+1,0)),s.line<r.viewFrom||a.line>r.viewTo-1)return!1;s.line==r.viewFrom||0==(e=ci(i,s.line))?(t=Xe(r.view[0].line),n=r.view[0].node):(t=Xe(r.view[e].line),n=r.view[e-1].node.nextSibling);var l,u,c=ci(i,a.line);if(c==r.view.length-1?(l=r.viewTo-1,u=r.lineDiv.lastChild):(l=Xe(r.view[c+1].line)-1,u=r.view[c+1].node.previousSibling),!n)return!1;for(var h=i.doc.splitLines(function(e,t,n,i,r){var o="",s=!1,a=e.doc.lineSeparator(),l=!1;function u(){s&&(o+=a,l&&(o+=a),s=l=!1)}function c(e){e&&(u(),o+=e)}function h(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void c(n);var o,d=t.getAttribute("cm-marker");if(d){var f=e.findMarks(et(i,0),et(r+1,0),(m=+d,function(e){return e.id==m}));return void(f.length&&(o=f[0].find(0))&&c($e(e.doc,o.from,o.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;p&&u();for(var g=0;g<t.childNodes.length;g++)h(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),p&&(s=!0)}else 3==t.nodeType&&c(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var m}for(;h(t),t!=n;)t=t.nextSibling,l=!1;return o}(i,n,u,t,l)),d=$e(i.doc,et(t,0),et(l,Ge(i.doc,l).text.length));h.length>1&&d.length>1;)if(K(h)==K(d))h.pop(),d.pop(),l--;else{if(h[0]!=d[0])break;h.shift(),d.shift(),t++}for(var f=0,p=0,g=h[0],m=d[0],v=Math.min(g.length,m.length);f<v&&g.charCodeAt(f)==m.charCodeAt(f);)++f;for(var y=K(h),w=K(d),b=Math.min(y.length-(1==h.length?f:0),w.length-(1==d.length?f:0));p<b&&y.charCodeAt(y.length-p-1)==w.charCodeAt(w.length-p-1);)++p;if(1==h.length&&1==d.length&&t==s.line)for(;f&&f>s.ch&&y.charCodeAt(y.length-p-1)==w.charCodeAt(w.length-p-1);)f--,p++;h[h.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),h[0]=h[0].slice(f).replace(/\u200b+$/,"");var _=et(t,f),x=et(l,d.length?K(d).length-p:0);return h.length>1||h[0]||tt(_,x)?(po(i.doc,h,_,x,"+input"),!0):void 0},Rs.prototype.ensurePolled=function(){this.forceCompositionEnd()},Rs.prototype.reset=function(){this.forceCompositionEnd()},Rs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Rs.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Rs.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Qi(this.cm,(function(){return hi(e.cm)}))},Rs.prototype.setUneditable=function(e){e.contentEditable="false"},Rs.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||er(this.cm,As)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Rs.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Rs.prototype.onContextMenu=function(){},Rs.prototype.resetPosition=function(){},Rs.prototype.needsContentAttribute=!0;var Vs=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new F,this.hasSelection=!1,this.composing=null};Vs.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var r=this.textarea;function o(e){if(!ge(i,e)){if(i.somethingSelected())Ls({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=Is(i);Ls({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,W):(n.prevInput="",r.value=t.text.join("\n"),j(r))}"cut"==e.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(r.style.width="0px"),he(r,"input",(function(){s&&a>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),he(r,"paste",(function(e){ge(i,e)||Os(e,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())})),he(r,"cut",o),he(r,"copy",o),he(e.scroller,"paste",(function(t){if(!xn(e,t)&&!ge(i,t)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,r.dispatchEvent(o)}})),he(e.lineSpace,"selectstart",(function(t){xn(e,t)||we(t)})),he(r,"compositionstart",(function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}})),he(r,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},Vs.prototype.createField=function(e){this.wrapper=js(),this.textarea=this.wrapper.firstChild},Vs.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=vi(e);if(e.options.moveInputWithCursor){var r=$n(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+s.top-o.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+s.left-o.left))}return i},Vs.prototype.showSelection=function(e){var t=this.cm.display;z(t.cursorDiv,e.cursors),z(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Vs.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&j(this.textarea),s&&a>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null))}},Vs.prototype.getField=function(){return this.textarea},Vs.prototype.supportsTouch=function(){return!1},Vs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||P()!=this.textarea))try{this.textarea.focus()}catch(e){}},Vs.prototype.blur=function(){this.textarea.blur()},Vs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Vs.prototype.receivedFocus=function(){this.slowPoll()},Vs.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},Vs.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}))},Vs.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Pe(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=n.value;if(r==i&&!t.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===r||y&&/[\uf700-\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i=""),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,u=Math.min(i.length,r.length);l<u&&i.charCodeAt(l)==r.charCodeAt(l);)++l;return Qi(t,(function(){As(t,r.slice(l),i.length-l,null,e.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Vs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Vs.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},Vs.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,r=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=ui(n,e),u=i.scroller.scrollTop;if(o&&!h){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&er(n,Jr)(n.doc,Sr(o),W);var c,d=r.style.cssText,f=t.wrapper.style.cssText,p=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-p.top-5)+"px; left: "+(e.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(c=window.scrollY),i.input.focus(),l&&window.scrollTo(null,c),i.input.reset(),n.somethingSelected()||(r.value=t.prevInput=" "),t.contextMenuPending=v,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),s&&a>=9&&m(),k){xe(e);var g=function(){fe(window,"mouseup",g),setTimeout(v,20)};he(window,"mouseup",g)}else setTimeout(v,50)}function m(){if(null!=r.selectionStart){var e=n.somethingSelected(),o=""+(e?r.value:"");r.value="",r.value=o,t.prevInput=e?"":"",r.selectionStart=1,r.selectionEnd=o.length,i.selForContextMenu=n.doc.sel}}function v(){if(t.contextMenuPending==v&&(t.contextMenuPending=!1,t.wrapper.style.cssText=f,r.style.cssText=d,s&&a<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=u),null!=r.selectionStart)){(!s||s&&a<9)&&m();var e=0,o=function(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&""==t.prevInput?er(n,so)(n):e++<10?i.detectingSelectAll=setTimeout(o,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(o,200)}}},Vs.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Vs.prototype.setUneditable=function(){},Vs.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,i,r,o){e.defaults[n]=i,r&&(t[n]=o?function(e,t,n){n!=bs&&r(e,t,n)}:r)}e.defineOption=n,e.Init=bs,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,Ar(e)}),!0),n("indentUnit",2,Ar,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){Or(e),Bn(e),hi(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter((function(e){for(var r=0;;){var o=e.text.indexOf(t,r);if(-1==o)break;r=o+t.length,n.push(et(i,o))}i++}));for(var r=n.length-1;r>=0;r--)po(e.doc,t,n[r],et(n[r].line,n[r].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=bs&&e.refresh()})),n("specialCharPlaceholder",Jt,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",v?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!b),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){ws(e),gr(e)}),!0),n("keyMap","default",(function(e,t,n){var i=Ko(t),r=n!=bs&&Ko(n);r&&r.detach&&r.detach(e,i),i.attach&&i.attach(e,r||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Cs,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=fr(t,e.options.lineNumbers),gr(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?si(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return Hi(e)}),!0),n("scrollbarStyle","native",(function(e){Ui(e),Hi(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=fr(e.options.gutters,t),gr(e)}),!0),n("firstLineNumber",1,gr,!0),n("lineNumberFormatter",(function(e){return e}),gr,!0),n("showCursorWhenSelecting",!1,mi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(Si(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,ks),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,mi,!0),n("singleCursorHeightPerLine",!0,mi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Or,!0),n("addModeClass",!1,Or,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,Or,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}(Ss),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var i=this.options,r=i[e];i[e]==n&&"mode"!=e||(i[e]=n,t.hasOwnProperty(e)&&er(this,t[e])(this,n,r),pe(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ko(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:tr((function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var i=0,r=n(t);i<e.length&&n(e[i])<=r;)i++;e.splice(i,0,t)}(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,hi(this)})),removeOverlay:tr((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void hi(this)}})),indentLine:tr((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Je(this.doc,e)&&Ts(this,e,t,n)})),indentSelection:tr((function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(Ts(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&Oi(this));else{var o=r.from(),s=r.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;l<n;++l)Ts(this,l,e);var u=this.doc.sel.ranges;0==o.ch&&t.length==u.length&&u[i].from().ch>0&&Zr(this.doc,i,new kr(o,u[i].to()),W)}}})),getTokenAt:function(e,t){return yt(this,e,t)},getLineTokens:function(e,t){return yt(this,et(e),t,!0)},getTokenTypeAt:function(e){e=at(this.doc,e);var t,n=dt(this,Ge(this.doc,e.line)),i=0,r=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var s=i+r>>1;if((s?n[2*s-1]:0)>=o)r=s;else{if(!(n[2*s+1]<o)){t=n[2*s+2];break}i=s+1}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!n.hasOwnProperty(t))return i;var r=n[t],o=this.getModeAt(e);if("string"==typeof o[t])r[o[t]]&&i.push(r[o[t]]);else if(o[t])for(var s=0;s<o[t].length;s++){var a=r[o[t][s]];a&&i.push(a)}else o.helperType&&r[o.helperType]?i.push(r[o.helperType]):r[o.name]&&i.push(r[o.name]);for(var l=0;l<r._global.length;l++){var u=r._global[l];u.pred(o,this)&&-1==B(i,u.val)&&i.push(u.val)}return i},getStateAfter:function(e,t){var n=this.doc;return ft(this,(e=st(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return $n(this,null==e?n.head:"object"==typeof e?at(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return Gn(this,at(this.doc,e),t||"page")},coordsChar:function(e,t){return Xn(this,(e=qn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=qn(this,{top:e,left:0},t||"page").top,Ye(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i,r=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,r=!0),i=Ge(this.doc,e)}else i=e;return Un(this,i,{top:0,left:0},t||"page",n||r).top+(r?this.doc.height-Vt(i):0)},defaultTextHeight:function(){return ii(this.display)},defaultCharWidth:function(){return ri(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var o,s,a=this.display,l=(e=$n(this,at(this.doc,e))).bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),a.sizer.appendChild(t),"over"==i)l=e.top;else if("above"==i||"near"==i){var c=Math.max(a.wrapper.clientHeight,this.doc.height),h=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>c)&&e.top>t.offsetHeight?l=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=c&&(l=e.bottom),u+t.offsetWidth>h&&(u=h-t.offsetWidth)}t.style.top=l+"px",t.style.left=t.style.right="","right"==r?(u=a.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?u=0:"middle"==r&&(u=(a.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&(null!=(s=Li(o=this,{left:u,top:l,right:u+t.offsetWidth,bottom:l+t.offsetHeight})).scrollTop&&ji(o,s.scrollTop),null!=s.scrollLeft&&Di(o,s.scrollLeft))},triggerOnKeyDown:tr(ls),triggerOnKeyPress:tr(cs),triggerOnKeyUp:us,triggerOnMouseDown:tr(ps),execCommand:function(e){if(Qo.hasOwnProperty(e))return Qo[e].call(null,this)},triggerElectric:tr((function(e){Ps(this,e)})),findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);for(var o=at(this.doc,e),s=0;s<t&&!(o=Ns(this.doc,o,r,n,i)).hitSide;++s);return o},moveH:tr((function(e,t){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?Ns(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()}),U)})),deleteH:tr((function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Zo(this,(function(n){var r=Ns(i,n.head,e,t,!1);return e<0?{from:r,to:n.head}:{from:n.head,to:r}}))})),findPosV:function(e,t,n,i){var r=1,o=i;t<0&&(r=-1,t=-t);for(var s=at(this.doc,e),a=0;a<t;++a){var l=$n(this,s,"div");if(null==o?o=l.left:l.left=o,(s=Ds(this,l,r,n)).hitSide)break}return s},moveV:tr((function(e,t){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(s){if(o)return e<0?s.from():s.to();var a=$n(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),r.push(a.left);var l=Ds(n,a,e,t);return"page"==t&&s==i.sel.primary()&&Ai(n,Gn(n,l,"div").top-a.top),l}),U),r.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=r[s]})),findWordAt:function(e){var t=Ge(this.doc,e.line).text,n=e.ch,i=e.ch;if(t){var r=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=t.length||!n?++i:--n;for(var o=t.charAt(n),s=ee(o,r)?function(e){return ee(e,r)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ee(e)};n>0&&s(t.charAt(n-1));)--n;for(;i<t.length&&s(t.charAt(i));)++i}return new kr(et(e.line,n),et(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?I(this.display.cursorDiv,"CodeMirror-overwrite"):M(this.display.cursorDiv,"CodeMirror-overwrite"),pe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==P()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:tr((function(e,t){Pi(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Mn(this)-this.display.barHeight,width:e.scrollWidth-Mn(this)-this.display.barWidth,clientHeight:zn(this),clientWidth:Tn(this)}},scrollIntoView:tr((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:et(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Ii(e),e.curOp.scrollToPos=t}(this,e):Ei(this,e.from,e.to,e.margin)})),setSize:tr((function(e,t){var n=this,i=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&Fn(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){di(n,r,"widget");break}++r})),this.curOp.forceUpdate=!0,pe(this,"refresh",this)})),operation:function(e){return Qi(this,e)},startOperation:function(){return Gi(this)},endOperation:function(){return $i(this)},refresh:tr((function(){var e=this.display.cachedTextHeight;hi(this),this.curOp.forceUpdate=!0,Bn(this),Pi(this,this.doc.scrollLeft,this.doc.scrollTop),ur(this.display),(null==e||Math.abs(e-ii(this.display))>.5)&&li(this),pe(this,"refresh",this)})),swapDoc:tr((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),jr(this,e),Bn(this),this.display.input.reset(),Pi(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ye(e),e.registerHelper=function(t,i,r){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][i]=r},e.registerGlobalHelper=function(t,i,r,o){e.registerHelper(t,i,o),n[t]._global.push({pred:r,val:o})}}(Ss);var Us="iter insert remove copy getEditor constructor".split(" ");for(var qs in Ao.prototype)Ao.prototype.hasOwnProperty(qs)&&B(Us,qs)<0&&(Ss.prototype[qs]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ao.prototype[qs]));return ye(Ao),Ss.inputStyles={textarea:Vs,contenteditable:Rs},Ss.defineMode=function(e){Ss.defaults.mode||"null"==e||(Ss.defaults.mode=e),De.apply(this,arguments)},Ss.defineMIME=function(e,t){Ne[e]=t},Ss.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),Ss.defineMIME("text/plain","null"),Ss.defineExtension=function(e,t){Ss.prototype[e]=t},Ss.defineDocExtension=function(e,t){Ao.prototype[e]=t},Ss.fromTextArea=function(e,t){if((t=t?D(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=P();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=a.getValue()}var r;if(e.form&&(he(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var o=e.form;r=o.submit;try{var s=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=s}}catch(e){}}t.finishInit=function(n){n.save=i,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,i(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(fe(e.form,"submit",i),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=r))}},e.style.display="none";var a=Ss((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return a},function(e){e.off=fe,e.on=he,e.wheelEventPixels=br,e.Doc=Ao,e.splitLines=Oe,e.countColumn=R,e.findColumn=q,e.isWordChar=Q,e.Pass=H,e.signal=pe,e.Line=Gt,e.changeEnd=Mr,e.scrollbarModel=Vi,e.Pos=et,e.cmpPos=tt,e.modes=je,e.mimeModes=Ne,e.resolveMode=Re,e.getMode=Fe,e.modeExtensions=Be,e.extendMode=He,e.copyState=We,e.startState=Ue,e.innerMode=Ve,e.commands=Qo,e.keyMap=Ho,e.keyName=$o,e.isModifierKey=qo,e.lookupKey=Uo,e.normalizeKeyMap=Vo,e.StringStream=qe,e.SharedTextMarker=Mo,e.TextMarker=Co,e.LineWidget=_o,e.e_preventDefault=we,e.e_stopPropagation=be,e.e_stop=xe,e.addClass=I,e.contains=O,e.rmClass=M,e.keyNames=Do}(Ss),Ss.version="5.52.0",Ss}()},function(e,t,n){"use strict";var i,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function s(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},i=[],r=0;r<e.length;r++){var a=e[r],l=t.base?a[0]+t.base:a[0],u=n[l]||0,c="".concat(l," ").concat(u);n[l]=u+1;var h=s(c),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==h?(o[h].references++,o[h].updater(d)):o.push({identifier:c,updater:g(d,t),references:1}),i.push(c)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var o=n.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var s=r(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var u,c=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function h(e,t,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=c(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function d(e,t,n){var i=n.css,r=n.media,o=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),o&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var f=null,p=0;function g(e,t){var n,i,r;if(t.singleton){var o=p++;n=f||(f=l(t)),i=h.bind(null,n,o,!1),r=h.bind(null,n,o,!0)}else n=l(t),i=d.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var r=s(n[i]);o[r].references--}for(var l=a(e,t),u=0;u<n.length;u++){var c=s(n[u]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=l}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,i,r,o=e[1]||"",s=e[3];if(!s)return o;if(t&&"function"==typeof btoa){var a=(n=s,i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(r," */")),l=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[o].concat(l).concat([a]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(i)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(r[s]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);i&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},function(e,t){},function(e,t,n){!function(e){"use strict";var t,n,i,r;e.version="0.5.0",e.parse=function(e,r){return n=String(e),i=n.length,s(r),Ge(),function(e){v=y=a,t.locations&&(w=new qe),b=x=null,_=[],Ye();var n=e||ut(),i=!0;for(e||(n.body=[]);d!==A;){var r=_t();n.body.push(r),i&&dt(r)&&st(!0),i=!1}return ht(n,"Program")}(t.program)};var o=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function s(e){for(var n in t=e||{},o)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=o[n]);r=t.sourceFile||null}var a,l,u,c,h,d,f,p,g,m,v,y,w,b,_,x,k=e.getLineInfo=function(e,t){for(var n=1,i=0;;){We.lastIndex=i;var r=We.exec(e);if(!(r&&r.index<t))break;++n,i=r.index+r[0].length}return{line:n,column:t-i}};function C(e,t){var i=k(n,e);t+=" ("+i.line+":"+i.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=i,r.raisedAt=a,r}e.tokenize=function(e,r){n=String(e),i=n.length,s(r),Ge();var o={};function v(e){return y=u,Ye(e),o.start=l,o.end=u,o.startLoc=c,o.endLoc=h,o.type=d,o.value=f,o}return v.jumpTo=function(e,i){var r;if(a=e,t.locations)for(g=1,m=We.lastIndex=0;(r=We.exec(n))&&r.index<e;)++g,m=r.index+r[0].length;p=i,Xe()},v};var S=[],M={type:"num"},T={type:"regexp"},z={type:"string"},L={type:"name"},A={type:"eof"},O={keyword:"break"},P={keyword:"case",beforeExpr:!0},I={keyword:"catch"},E={keyword:"continue"},j={keyword:"debugger"},N={keyword:"default"},D={keyword:"do",isLoop:!0},R={keyword:"else",beforeExpr:!0},F={keyword:"finally"},B={keyword:"for",isLoop:!0},H={keyword:"function"},W={keyword:"if"},V={keyword:"return",beforeExpr:!0},U={keyword:"switch"},q={keyword:"throw",beforeExpr:!0},G={keyword:"try"},$={keyword:"var"},K={keyword:"while",isLoop:!0},Z={keyword:"with"},X={keyword:"new",beforeExpr:!0},Y={keyword:"this"},J={keyword:"null",atomValue:null},Q={keyword:"true",atomValue:!0},ee={keyword:"false",atomValue:!1},te={keyword:"in",binop:7,beforeExpr:!0},ne={break:O,case:P,catch:I,continue:E,debugger:j,default:N,do:D,else:R,finally:F,for:B,function:H,if:W,return:V,switch:U,throw:q,try:G,var:$,while:K,with:Z,null:J,true:Q,false:ee,new:X,in:te,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Y,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ie={type:"[",beforeExpr:!0},re={type:"]"},oe={type:"{",beforeExpr:!0},se={type:"}"},ae={type:"(",beforeExpr:!0},le={type:")"},ue={type:",",beforeExpr:!0},ce={type:";",beforeExpr:!0},he={type:":",beforeExpr:!0},de={type:"."},fe={type:"?",beforeExpr:!0},pe={binop:10,beforeExpr:!0},ge={isAssign:!0,beforeExpr:!0},me={isAssign:!0,beforeExpr:!0},ve={postfix:!0,prefix:!0,isUpdate:!0},ye={prefix:!0,beforeExpr:!0},we={binop:1,beforeExpr:!0},be={binop:2,beforeExpr:!0},_e={binop:3,beforeExpr:!0},xe={binop:4,beforeExpr:!0},ke={binop:5,beforeExpr:!0},Ce={binop:6,beforeExpr:!0},Se={binop:7,beforeExpr:!0},Me={binop:8,beforeExpr:!0},Te={binop:9,prefix:!0,beforeExpr:!0},ze={binop:10,beforeExpr:!0};for(var Le in e.tokTypes={bracketL:ie,bracketR:re,braceL:oe,braceR:se,parenL:ae,parenR:le,comma:ue,semi:ce,colon:he,dot:de,question:fe,slash:pe,eq:ge,name:L,eof:A,num:M,regexp:T,string:z},ne)e.tokTypes["_"+Le]=ne[Le];function Ae(e){e=e.split(" ");var t="",n=[];e:for(var i=0;i<e.length;++i){for(var r=0;r<n.length;++r)if(n[r][0].length==e[i].length){n[r].push(e[i]);continue e}n.push([e[i]])}function o(e){if(1==e.length)return t+="return str === "+JSON.stringify(e[0])+";";t+="switch(str){";for(var n=0;n<e.length;++n)t+="case "+JSON.stringify(e[n])+":";t+="return true}return false;"}if(n.length>3){for(n.sort((function(e,t){return t.length-e.length})),t+="switch(str.length){",i=0;i<n.length;++i){var s=n[i];t+="case "+s[0].length+":",o(s)}t+="}"}else o(e);return new Function("str",t)}var Oe,Pe=Ae("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ie=Ae("class enum extends super const export import"),Ee=Ae("implements interface let package private protected public static yield"),je=Ae("eval arguments"),Ne=Ae("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),De=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Re="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Fe=new RegExp("["+Re+"]"),Be=new RegExp("["+Re+"------------------------------------------------------------------------------------------------------------------------------------------]"),He=/[\n\r\u2028\u2029]/,We=/\r\n|[\n\r\u2028\u2029]/g,Ve=e.isIdentifierStart=function(e){return e<65?36===e:e<91||(e<97?95===e:e<123||e>=170&&Fe.test(String.fromCharCode(e)))},Ue=e.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>=170&&Be.test(String.fromCharCode(e))))};function qe(){this.line=g,this.column=a-m}function Ge(){g=1,a=m=0,p=!0,Xe()}function $e(e,n){u=a,t.locations&&(h=new qe),d=e,Xe(),f=n,p=e.beforeExpr}function Ke(){var e,i=t.onComment&&t.locations&&new qe,r=a,o=n.indexOf("*/",a+=2);if(-1===o&&C(a-2,"Unterminated comment"),a=o+2,t.locations)for(We.lastIndex=r;(e=We.exec(n))&&e.index<a;)++g,m=e.index+e[0].length;t.onComment&&t.onComment(!0,n.slice(r+2,o),r,a,i,t.locations&&new qe)}function Ze(){for(var e=a,r=t.onComment&&t.locations&&new qe,o=n.charCodeAt(a+=2);a<i&&10!==o&&13!==o&&8232!==o&&8233!==o;)++a,o=n.charCodeAt(a);t.onComment&&t.onComment(!1,n.slice(e+2,a),e,a,r,t.locations&&new qe)}function Xe(){for(;a<i;){var e=n.charCodeAt(a);if(32===e)++a;else if(13===e)++a,10===(r=n.charCodeAt(a))&&++a,t.locations&&(++g,m=a);else if(10===e||8232===e||8233===e)++a,t.locations&&(++g,m=a);else if(e>8&&e<14)++a;else if(47===e){var r;if(42===(r=n.charCodeAt(a+1)))Ke();else{if(47!==r)break;Ze()}}else if(160===e)++a;else{if(!(e>=5760&&De.test(String.fromCharCode(e))))break;++a}}}function Ye(e){if(e?a=l+1:l=a,t.locations&&(c=new qe),e)return Qe();if(a>=i)return $e(A);var r=n.charCodeAt(a);if(Ve(r)||92===r)return rt();var o=function(e){switch(e){case 46:return function(){var e=n.charCodeAt(a+1);return e>=48&&e<=57?tt(!0):(++a,$e(de))}();case 40:return++a,$e(ae);case 41:return++a,$e(le);case 59:return++a,$e(ce);case 44:return++a,$e(ue);case 91:return++a,$e(ie);case 93:return++a,$e(re);case 123:return++a,$e(oe);case 125:return++a,$e(se);case 58:return++a,$e(he);case 63:return++a,$e(fe);case 48:var r=n.charCodeAt(a+1);if(120===r||88===r)return function(){a+=2;var e=et(16);return null==e&&C(l+2,"Expected hexadecimal number"),Ve(n.charCodeAt(a))&&C(a,"Identifier directly after number"),$e(M,e)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return tt(!1);case 34:case 39:return function(e){a++;for(var r="";;){a>=i&&C(l,"Unterminated string constant");var o=n.charCodeAt(a);if(o===e)return++a,$e(z,r);if(92===o){o=n.charCodeAt(++a);var s=/^[0-7]+/.exec(n.slice(a,a+3));for(s&&(s=s[0]);s&&parseInt(s,8)>255;)s=s.slice(0,-1);if("0"===s&&(s=null),++a,s)x&&C(a-2,"Octal literal in strict mode"),r+=String.fromCharCode(parseInt(s,8)),a+=s.length-1;else switch(o){case 110:r+="\n";break;case 114:r+="\r";break;case 120:r+=String.fromCharCode(nt(2));break;case 117:r+=String.fromCharCode(nt(4));break;case 85:r+=String.fromCharCode(nt(8));break;case 116:r+="\t";break;case 98:r+="\b";break;case 118:r+="\v";break;case 102:r+="\f";break;case 48:r+="\0";break;case 13:10===n.charCodeAt(a)&&++a;case 10:t.locations&&(m=a,++g);break;default:r+=String.fromCharCode(o)}}else 13!==o&&10!==o&&8232!==o&&8233!==o||C(l,"Unterminated string constant"),r+=String.fromCharCode(o),++a}}(e);case 47:return function(){var e=n.charCodeAt(a+1);return p?(++a,Qe()):61===e?Je(me,2):Je(pe,1)}();case 37:case 42:return 61===n.charCodeAt(a+1)?Je(me,2):Je(ze,1);case 124:case 38:return function(e){var t=n.charCodeAt(a+1);return t===e?Je(124===e?we:be,2):61===t?Je(me,2):Je(124===e?_e:ke,1)}(e);case 94:return 61===n.charCodeAt(a+1)?Je(me,2):Je(xe,1);case 43:case 45:return function(e){var t=n.charCodeAt(a+1);return t===e?45==t&&62==n.charCodeAt(a+2)&&He.test(n.slice(y,a))?(a+=3,Ze(),Xe(),Ye()):Je(ve,2):61===t?Je(me,2):Je(Te,1)}(e);case 60:case 62:return function(e){var t=n.charCodeAt(a+1),i=1;return t===e?(i=62===e&&62===n.charCodeAt(a+2)?3:2,61===n.charCodeAt(a+i)?Je(me,i+1):Je(Me,i)):33==t&&60==e&&45==n.charCodeAt(a+2)&&45==n.charCodeAt(a+3)?(a+=4,Ze(),Xe(),Ye()):(61===t&&(i=61===n.charCodeAt(a+2)?3:2),Je(Se,i))}(e);case 61:case 33:return function(e){return 61===n.charCodeAt(a+1)?Je(Ce,61===n.charCodeAt(a+2)?3:2):Je(61===e?ge:ye,1)}(e);case 126:return Je(ye,1)}return!1}(r);if(!1===o){var s=String.fromCharCode(r);if("\\"===s||Fe.test(s))return rt();C(a,"Unexpected character '"+s+"'")}return o}function Je(e,t){var i=n.slice(a,a+t);a+=t,$e(e,i)}function Qe(){for(var e,t,r=a;;){a>=i&&C(r,"Unterminated regular expression");var o=n.charAt(a);if(He.test(o)&&C(r,"Unterminated regular expression"),e)e=!1;else{if("["===o)t=!0;else if("]"===o&&t)t=!1;else if("/"===o&&!t)break;e="\\"===o}++a}var s=n.slice(r,a);++a;var l=it();l&&!/^[gmsiy]*$/.test(l)&&C(r,"Invalid regexp flag");try{var u=new RegExp(s,l)}catch(e){e instanceof SyntaxError&&C(r,e.message),C(e)}return $e(T,u)}function et(e,t){for(var i=a,r=0,o=0,s=null==t?1/0:t;o<s;++o){var l,u=n.charCodeAt(a);if((l=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=e)break;++a,r=r*e+l}return a===i||null!=t&&a-i!==t?null:r}function tt(e){var t=a,i=!1,r=48===n.charCodeAt(a);e||null!==et(10)||C(t,"Invalid number"),46===n.charCodeAt(a)&&(++a,et(10),i=!0);var o=n.charCodeAt(a);69!==o&&101!==o||(43!==(o=n.charCodeAt(++a))&&45!==o||++a,null===et(10)&&C(t,"Invalid number"),i=!0),Ve(n.charCodeAt(a))&&C(a,"Identifier directly after number");var s,l=n.slice(t,a);return i?s=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||x?C(t,"Invalid number"):s=parseInt(l,8):s=parseInt(l,10),$e(M,s)}function nt(e){var t=et(16,e);return null===t&&C(l,"Bad character escape sequence"),t}function it(){Oe=!1;for(var e,t=!0,i=a;;){var r=n.charCodeAt(a);if(Ue(r))Oe&&(e+=n.charAt(a)),++a;else{if(92!==r)break;Oe||(e=n.slice(i,a)),Oe=!0,117!=n.charCodeAt(++a)&&C(a,"Expecting Unicode escape sequence \\uXXXX"),++a;var o=nt(4),s=String.fromCharCode(o);s||C(a-1,"Invalid Unicode escape"),(t?Ve(o):Ue(o))||C(a-4,"Invalid Unicode escape"),e+=s}t=!1}return Oe?e:n.slice(i,a)}function rt(){var e=it(),t=L;return!Oe&&Ne(e)&&(t=ne[e]),$e(t,e)}function ot(){v=l,y=u,w=h,Ye()}function st(e){if(x=e,a=l,t.locations)for(;a<m;)m=n.lastIndexOf("\n",m-2)+1,--g;Xe(),Ye()}function at(){this.type=null,this.start=l,this.end=null}function lt(){this.start=c,this.end=null,null!==r&&(this.source=r)}function ut(){var e=new at;return t.locations&&(e.loc=new lt),t.directSourceFile&&(e.sourceFile=t.directSourceFile),t.ranges&&(e.range=[l,0]),e}function ct(e){var n=new at;return n.start=e.start,t.locations&&(n.loc=new lt,n.loc.start=e.loc.start),t.ranges&&(n.range=[e.range[0],0]),n}function ht(e,n){return e.type=n,e.end=y,t.locations&&(e.loc.end=w),t.ranges&&(e.range[1]=y),e}function dt(e){return t.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value}function ft(e){if(d===e)return ot(),!0}function pt(){return!t.strictSemicolons&&(d===A||d===se||He.test(n.slice(y,l)))}function gt(){ft(ce)||pt()||vt()}function mt(e){d===e?ot():vt()}function vt(){C(l,"Unexpected token")}function yt(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&C(e.start,"Assigning to rvalue"),x&&"Identifier"===e.type&&je(e.name)&&C(e.start,"Assigning to "+e.name+" in strict mode")}var wt={kind:"loop"},bt={kind:"switch"};function _t(){(d===pe||d===me&&"/="==f)&&Ye(!0);var e=d,i=ut();switch(e){case O:case E:ot();var r=e===O;ft(ce)||pt()?i.label=null:d!==L?vt():(i.label=jt(),gt());for(var o=0;o<_.length;++o){var s=_[o];if(null==i.label||s.name===i.label.name){if(null!=s.kind&&(r||"loop"===s.kind))break;if(i.label&&r)break}}return o===_.length&&C(i.start,"Unsyntactic "+e.keyword),ht(i,r?"BreakStatement":"ContinueStatement");case j:return ot(),gt(),ht(i,"DebuggerStatement");case D:return ot(),_.push(wt),i.body=_t(),_.pop(),mt(K),i.test=xt(),gt(),ht(i,"DoWhileStatement");case B:if(ot(),_.push(wt),mt(ae),d===ce)return Ct(i,null);if(d===$){var a=ut();return ot(),Mt(a,!0),ht(a,"VariableDeclaration"),1===a.declarations.length&&ft(te)?St(i,a):Ct(i,a)}return a=Tt(!1,!0),ft(te)?(yt(a),St(i,a)):Ct(i,a);case H:return ot(),It(i,!0);case W:return ot(),i.test=xt(),i.consequent=_t(),i.alternate=ft(R)?_t():null,ht(i,"IfStatement");case V:return b||t.allowReturnOutsideFunction||C(l,"'return' outside of function"),ot(),ft(ce)||pt()?i.argument=null:(i.argument=Tt(),gt()),ht(i,"ReturnStatement");case U:ot(),i.discriminant=xt(),i.cases=[],mt(oe),_.push(bt);for(var u,c;d!=se;)if(d===P||d===N){var h=d===P;u&&ht(u,"SwitchCase"),i.cases.push(u=ut()),u.consequent=[],ot(),h?u.test=Tt():(c&&C(v,"Multiple default clauses"),c=!0,u.test=null),mt(he)}else u||vt(),u.consequent.push(_t());return u&&ht(u,"SwitchCase"),ot(),_.pop(),ht(i,"SwitchStatement");case q:return ot(),He.test(n.slice(y,l))&&C(y,"Illegal newline after throw"),i.argument=Tt(),gt(),ht(i,"ThrowStatement");case G:if(ot(),i.block=kt(),i.handler=null,d===I){var p=ut();ot(),mt(ae),p.param=jt(),x&&je(p.param.name)&&C(p.param.start,"Binding "+p.param.name+" in strict mode"),mt(le),p.guard=null,p.body=kt(),i.handler=ht(p,"CatchClause")}return i.guardedHandlers=S,i.finalizer=ft(F)?kt():null,i.handler||i.finalizer||C(i.start,"Missing catch or finally clause"),ht(i,"TryStatement");case $:return ot(),Mt(i),gt(),ht(i,"VariableDeclaration");case K:return ot(),i.test=xt(),_.push(wt),i.body=_t(),_.pop(),ht(i,"WhileStatement");case Z:return x&&C(l,"'with' in strict mode"),ot(),i.object=xt(),i.body=_t(),ht(i,"WithStatement");case oe:return kt();case ce:return ot(),ht(i,"EmptyStatement");default:var g=f,m=Tt();if(e===L&&"Identifier"===m.type&&ft(he)){for(o=0;o<_.length;++o)_[o].name===g&&C(m.start,"Label '"+g+"' is already declared");var w=d.isLoop?"loop":d===U?"switch":null;return _.push({name:g,kind:w}),i.body=_t(),_.pop(),i.label=m,ht(i,"LabeledStatement")}return i.expression=m,gt(),ht(i,"ExpressionStatement")}}function xt(){mt(ae);var e=Tt();return mt(le),e}function kt(e){var t,n=ut(),i=!0,r=!1;for(n.body=[],mt(oe);!ft(se);){var o=_t();n.body.push(o),i&&e&&dt(o)&&(t=r,st(r=!0)),i=!1}return r&&!t&&st(!1),ht(n,"BlockStatement")}function Ct(e,t){return e.init=t,mt(ce),e.test=d===ce?null:Tt(),mt(ce),e.update=d===le?null:Tt(),mt(le),e.body=_t(),_.pop(),ht(e,"ForStatement")}function St(e,t){return e.left=t,e.right=Tt(),mt(le),e.body=_t(),_.pop(),ht(e,"ForInStatement")}function Mt(e,t){for(e.declarations=[],e.kind="var";;){var n=ut();if(n.id=jt(),x&&je(n.id.name)&&C(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=ft(ge)?Tt(!0,t):null,e.declarations.push(ht(n,"VariableDeclarator")),!ft(ue))break}return e}function Tt(e,t){var n=zt(t);if(!e&&d===ue){var i=ct(n);for(i.expressions=[n];ft(ue);)i.expressions.push(zt(t));return ht(i,"SequenceExpression")}return n}function zt(e){var t=function(e){var t=function(e){return function e(t,n,i){var r=d.binop;if(null!=r&&(!i||d!==te)&&r>n){var o=ct(t);o.left=t,o.operator=f;var s=d;return ot(),o.right=e(Lt(),r,i),e(ht(o,s===we||s===be?"LogicalExpression":"BinaryExpression"),n,i)}return t}(Lt(),-1,e)}(e);if(ft(fe)){var n=ct(t);return n.test=t,n.consequent=Tt(!0),mt(he),n.alternate=Tt(!0,e),ht(n,"ConditionalExpression")}return t}(e);if(d.isAssign){var n=ct(t);return n.operator=f,n.left=t,ot(),n.right=zt(e),yt(t),ht(n,"AssignmentExpression")}return t}function Lt(){if(d.prefix){var e=ut(),t=d.isUpdate;return e.operator=f,e.prefix=!0,p=!0,ot(),e.argument=Lt(),t?yt(e.argument):x&&"delete"===e.operator&&"Identifier"===e.argument.type&&C(e.start,"Deleting local variable in strict mode"),ht(e,t?"UpdateExpression":"UnaryExpression")}for(var n=At(Ot());d.postfix&&!pt();)(e=ct(n)).operator=f,e.prefix=!1,e.argument=n,yt(n),ot(),n=ht(e,"UpdateExpression");return n}function At(e,t){var n;return ft(de)?((n=ct(e)).object=e,n.property=jt(!0),n.computed=!1,At(ht(n,"MemberExpression"),t)):ft(ie)?((n=ct(e)).object=e,n.property=Tt(),n.computed=!0,mt(re),At(ht(n,"MemberExpression"),t)):!t&&ft(ae)?((n=ct(e)).callee=e,n.arguments=Et(le,!1),At(ht(n,"CallExpression"),t)):e}function Ot(){switch(d){case Y:var e=ut();return ot(),ht(e,"ThisExpression");case L:return jt();case M:case z:case T:return(e=ut()).value=f,e.raw=n.slice(l,u),ot(),ht(e,"Literal");case J:case Q:case ee:return(e=ut()).value=d.atomValue,e.raw=d.keyword,ot(),ht(e,"Literal");case ae:var i=c,r=l;ot();var o=Tt();return o.start=r,o.end=u,t.locations&&(o.loc.start=i,o.loc.end=h),t.ranges&&(o.range=[r,u]),mt(le),o;case ie:return e=ut(),ot(),e.elements=Et(re,!0,!0),ht(e,"ArrayExpression");case oe:return function(){var e=ut(),n=!0,i=!1;for(e.properties=[],ot();!ft(se);){if(n)n=!1;else if(mt(ue),t.allowTrailingCommas&&ft(se))break;var r,o={key:Pt()},s=!1;if(ft(he)?(o.value=Tt(!0),r=o.kind="init"):t.ecmaVersion>=5&&"Identifier"===o.key.type&&("get"===o.key.name||"set"===o.key.name)?(s=i=!0,r=o.kind=o.key.name,o.key=Pt(),d!==ae&&vt(),o.value=It(ut(),!1)):vt(),"Identifier"===o.key.type&&(x||i))for(var a=0;a<e.properties.length;++a){var l=e.properties[a];if(l.key.name===o.key.name){var u=r==l.kind||s&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);u&&!x&&"init"===r&&"init"===l.kind&&(u=!1),u&&C(o.key.start,"Redefinition of property")}}e.properties.push(o)}return ht(e,"ObjectExpression")}();case H:return e=ut(),ot(),It(e,!1);case X:return function(){var e=ut();return ot(),e.callee=At(Ot(),!0),ft(ae)?e.arguments=Et(le,!1):e.arguments=S,ht(e,"NewExpression")}();default:vt()}}function Pt(){return d===M||d===z?Ot():jt(!0)}function It(e,t){d===L?e.id=jt():t?vt():e.id=null,e.params=[];var n=!0;for(mt(ae);!ft(le);)n?n=!1:mt(ue),e.params.push(jt());var i=b,r=_;if(b=!0,_=[],e.body=kt(!0),b=i,_=r,x||e.body.body.length&&dt(e.body.body[0]))for(var o=e.id?-1:0;o<e.params.length;++o){var s=o<0?e.id:e.params[o];if((Ee(s.name)||je(s.name))&&C(s.start,"Defining '"+s.name+"' in strict mode"),o>=0)for(var a=0;a<o;++a)s.name===e.params[a].name&&C(s.start,"Argument name clash in strict mode")}return ht(e,t?"FunctionDeclaration":"FunctionExpression")}function Et(e,n,i){for(var r=[],o=!0;!ft(e);){if(o)o=!1;else if(mt(ue),n&&t.allowTrailingCommas&&ft(e))break;i&&d===ue?r.push(null):r.push(Tt(!0))}return r}function jt(e){var i=ut();return e&&"everywhere"==t.forbidReserved&&(e=!1),d===L?(!e&&(t.forbidReserved&&(3===t.ecmaVersion?Pe:Ie)(f)||x&&Ee(f))&&-1==n.slice(l,u).indexOf("\\")&&C(l,"The keyword '"+f+"' is reserved"),i.name=f):e&&d.keyword?i.name=d.keyword:vt(),p=!1,ot(),ht(i,"Identifier")}}(t)},function(e,t){},function(e,t,n){var i=n(2),r=n(8);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o=(i(r,{insert:"head",singleton:!1}),r.locals?r.locals:{});e.exports=o},function(e,t,n){(t=n(3)(!1)).push([e.i,"/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: 300px;\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n  width: auto;\n  border: 0;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: #7e7;\n}\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 30px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -30px; margin-right: -30px;\n  padding-bottom: 30px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 30px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -30px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ''; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n",""]),e.exports=t},function(e,t,n){var i=n(2),r=n(10);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o=(i(r,{insert:"head",singleton:!1}),r.locals?r.locals:{});e.exports=o},function(e,t,n){(t=n(3)(!1)).push([e.i,".CodeMirror-fullscreen {\n  position: fixed;\n  top: 0; left: 0; right: 0; bottom: 0;\n  height: auto;\n  z-index: 9;\n}\n",""]),e.exports=t},function(e,t,n){!function(e){"use strict";function t(e,t){this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var n=this;e.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}e.showHint=function(e,t,n){if(!t)return e.showHint(n);n&&n.async&&(t.async=!0);var i={hint:t};if(n)for(var r in n)i[r]=n[r];return e.showHint(i)},e.defineExtension("showHint",(function(n){n=function(e,t,n){var i=e.options.hintOptions,r={};for(var o in l)r[o]=l[o];if(i)for(var o in i)void 0!==i[o]&&(r[o]=i[o]);if(n)for(var o in n)void 0!==n[o]&&(r[o]=n[o]);return r.hint.resolve&&(r.hint=r.hint.resolve(e,t)),r}(this,this.getCursor("start"),n);var i=this.listSelections();if(!(i.length>1)){if(this.somethingSelected()){if(!n.hint.supportsSelection)return;for(var r=0;r<i.length;r++)if(i[r].head.line!=i[r].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var o=this.state.completionActive=new t(this,n);o.options.hint&&(e.signal(this,"startCompletion",this),o.update(!0))}})),e.defineExtension("closeHint",(function(){this.state.completionActive&&this.state.completionActive.close()}));var n=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},i=window.cancelAnimationFrame||clearTimeout;function r(e){return"string"==typeof e?e:e.text}function o(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function s(t,n){this.completion=t,this.data=n,this.picked=!1;var i=this,s=t.cm,a=s.getInputField().ownerDocument,l=a.defaultView||a.parentWindow,u=this.hints=a.createElement("ul"),c=t.cm.options.theme;u.className="CodeMirror-hints "+c,this.selectedHint=n.selectedHint||0;for(var h=n.list,d=0;d<h.length;++d){var f=u.appendChild(a.createElement("li")),p=h[d],g="CodeMirror-hint"+(d!=this.selectedHint?"":" CodeMirror-hint-active");null!=p.className&&(g=p.className+" "+g),f.className=g,p.render?p.render(f,n,p):f.appendChild(a.createTextNode(p.displayText||r(p))),f.hintId=d}var m=t.options.container||a.body,v=s.cursorCoords(t.options.alignWithWord?n.from:null),y=v.left,w=v.bottom,b=!0,_=0,x=0;if(m!==a.body){var k=-1!==["absolute","relative","fixed"].indexOf(l.getComputedStyle(m).position)?m:m.offsetParent,C=k.getBoundingClientRect(),S=a.body.getBoundingClientRect();_=C.left-S.left-k.scrollLeft,x=C.top-S.top-k.scrollTop}u.style.left=y-_+"px",u.style.top=w-x+"px";var M=l.innerWidth||Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),T=l.innerHeight||Math.max(a.body.offsetHeight,a.documentElement.offsetHeight);m.appendChild(u);var z=u.getBoundingClientRect(),L=z.bottom-T,A=u.scrollHeight>u.clientHeight+1,O=s.getScrollInfo();if(L>0){var P=z.bottom-z.top;if(v.top-(v.bottom-z.top)-P>0)u.style.top=(w=v.top-P-x)+"px",b=!1;else if(P>T){u.style.height=T-5+"px",u.style.top=(w=v.bottom-z.top-x)+"px";var I=s.getCursor();n.from.ch!=I.ch&&(v=s.cursorCoords(I),u.style.left=(y=v.left-_)+"px",z=u.getBoundingClientRect())}}var E,j=z.right-M;if(j>0&&(z.right-z.left>M&&(u.style.width=M-5+"px",j-=z.right-z.left-M),u.style.left=(y=v.left-j-_)+"px"),A)for(var N=u.firstChild;N;N=N.nextSibling)N.style.paddingRight=s.display.nativeBarWidth+"px";return s.addKeyMap(this.keyMap=function(e,t){var n={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(1-t.menuSize(),!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close};/Mac/.test(navigator.platform)&&(n["Ctrl-P"]=function(){t.moveFocus(-1)},n["Ctrl-N"]=function(){t.moveFocus(1)});var i=e.options.customKeys,r=i?{}:n;function o(e,i){var o;o="string"!=typeof i?function(e){return i(e,t)}:n.hasOwnProperty(i)?n[i]:i,r[e]=o}if(i)for(var s in i)i.hasOwnProperty(s)&&o(s,i[s]);var a=e.options.extraKeys;if(a)for(var s in a)a.hasOwnProperty(s)&&o(s,a[s]);return r}(t,{moveFocus:function(e,t){i.changeActive(i.selectedHint+e,t)},setFocus:function(e){i.changeActive(e)},menuSize:function(){return i.screenAmount()},length:h.length,close:function(){t.close()},pick:function(){i.pick()},data:n})),t.options.closeOnUnfocus&&(s.on("blur",this.onBlur=function(){E=setTimeout((function(){t.close()}),100)}),s.on("focus",this.onFocus=function(){clearTimeout(E)})),s.on("scroll",this.onScroll=function(){var e=s.getScrollInfo(),n=s.getWrapperElement().getBoundingClientRect(),i=w+O.top-e.top,r=i-(l.pageYOffset||(a.documentElement||a.body).scrollTop);if(b||(r+=u.offsetHeight),r<=n.top||r>=n.bottom)return t.close();u.style.top=i+"px",u.style.left=y+O.left-e.left+"px"}),e.on(u,"dblclick",(function(e){var t=o(u,e.target||e.srcElement);t&&null!=t.hintId&&(i.changeActive(t.hintId),i.pick())})),e.on(u,"click",(function(e){var n=o(u,e.target||e.srcElement);n&&null!=n.hintId&&(i.changeActive(n.hintId),t.options.completeOnSingleClick&&i.pick())})),e.on(u,"mousedown",(function(){setTimeout((function(){s.focus()}),20)})),this.scrollToActive(),e.signal(n,"select",h[this.selectedHint],u.childNodes[this.selectedHint]),!0}function a(e,t,n,i){if(e.async)e(t,i,n);else{var r=e(t,n);r&&r.then?r.then(i):i(r)}}t.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&e.signal(this.data,"close"),this.widget&&this.widget.close(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,n){var i=t.list[n];i.hint?i.hint(this.cm,t,i):this.cm.replaceRange(r(i),i.from||t.from,i.to||t.to,"complete"),e.signal(t,"pick",i),this.close()},cursorActivity:function(){this.debounce&&(i(this.debounce),this.debounce=0);var e=this.cm.getCursor(),t=this.cm.getLine(e.line);if(e.line!=this.startPos.line||t.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||!e.ch||this.options.closeCharacters.test(t.charAt(e.ch-1)))this.close();else{var r=this;this.debounce=n((function(){r.update()})),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){var t=this,n=++this.tick;a(this.options.hint,this.cm,this.options,(function(i){t.tick==n&&t.finishUpdate(i,e)}))}},finishUpdate:function(t,n){this.data&&e.signal(this.data,"update");var i=this.widget&&this.widget.picked||n&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=t,t&&t.list.length&&(i&&1==t.list.length?this.pick(t,0):(this.widget=new s(this,t),e.signal(t,"shown")))}},s.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,n){if(t>=this.data.list.length?t=n?this.data.list.length-1:0:t<0&&(t=n?0:this.data.list.length-1),this.selectedHint!=t){var i=this.hints.childNodes[this.selectedHint];i&&(i.className=i.className.replace(" CodeMirror-hint-active","")),(i=this.hints.childNodes[this.selectedHint=t]).className+=" CodeMirror-hint-active",this.scrollToActive(),e.signal(this.data,"select",this.data.list[this.selectedHint],i)}},scrollToActive:function(){var e=this.hints.childNodes[this.selectedHint];e.offsetTop<this.hints.scrollTop?this.hints.scrollTop=e.offsetTop-3:e.offsetTop+e.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=e.offsetTop+e.offsetHeight-this.hints.clientHeight+3)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},e.registerHelper("hint","auto",{resolve:function(t,n){var i,r=t.getHelpers(n,"hint");if(r.length){var o=function(e,t,n){var i=function(e,t){if(!e.somethingSelected())return t;for(var n=[],i=0;i<t.length;i++)t[i].supportsSelection&&n.push(t[i]);return n}(e,r);!function r(o){if(o==i.length)return t(null);a(i[o],e,n,(function(e){e&&e.list.length>0?t(e):r(o+1)}))}(0)};return o.async=!0,o.supportsSelection=!0,o}return(i=t.getHelper(t.getCursor(),"hintWords"))?function(t){return e.hint.fromList(t,{words:i})}:e.hint.anyword?function(t,n){return e.hint.anyword(t,n)}:function(){}}}),e.registerHelper("hint","fromList",(function(t,n){var i,r=t.getCursor(),o=t.getTokenAt(r),s=e.Pos(r.line,o.start),a=r;o.start<r.ch&&/\w/.test(o.string.charAt(r.ch-o.start-1))?i=o.string.substr(0,r.ch-o.start):(i="",s=r);for(var l=[],u=0;u<n.words.length;u++){var c=n.words[u];c.slice(0,i.length)==i&&l.push(c)}if(l.length)return{list:l,from:s,to:a}})),e.commands.autocomplete=e.showHint;var l={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};e.defineOption("hintOptions",null)}(n(1))},function(e,t,n){var i=n(2),r=n(13);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o=(i(r,{insert:"head",singleton:!1}),r.locals?r.locals:{});e.exports=o},function(e,t,n){(t=n(3)(!1)).push([e.i,".CodeMirror-hints {\n  position: absolute;\n  z-index: 10;\n  overflow: hidden;\n  list-style: none;\n\n  margin: 0;\n  padding: 2px;\n\n  -webkit-box-shadow: 2px 3px 5px rgba(0,0,0,.2);\n  -moz-box-shadow: 2px 3px 5px rgba(0,0,0,.2);\n  box-shadow: 2px 3px 5px rgba(0,0,0,.2);\n  border-radius: 3px;\n  border: 1px solid silver;\n\n  background: white;\n  font-size: 90%;\n  font-family: monospace;\n\n  max-height: 20em;\n  overflow-y: auto;\n}\n\n.CodeMirror-hint {\n  margin: 0;\n  padding: 0 4px;\n  border-radius: 2px;\n  white-space: pre;\n  color: black;\n  cursor: pointer;\n}\n\nli.CodeMirror-hint-active {\n  background: #08f;\n  color: white;\n}\n",""]),e.exports=t},function(e,t,n){!function(e){var t=e.Pos;function n(e,t){for(var n=0,i=e.length;n<i;++n)t(e[n])}function i(n,i,r,o){var s=n.getCursor(),a=r(n,s);if(!/\b(?:string|comment)\b/.test(a.type)){var l=e.innerMode(n.getMode(),a.state);if("json"!==l.mode.helperType){a.state=l.state,/^[\w$_]*$/.test(a.string)?a.end>s.ch&&(a.end=s.ch,a.string=a.string.slice(0,s.ch-a.start)):a={start:s.ch,end:s.ch,string:"",state:a.state,type:"."==a.string?"property":null};for(var u=a;"property"==u.type;){if("."!=(u=r(n,t(s.line,u.start))).string)return;if(u=r(n,t(s.line,u.start)),!h)var h=[];h.push(u)}return{list:c(a,h,i,o),from:t(s.line,a.start),to:t(s.line,a.end)}}}}function r(e,t){var n=e.getTokenAt(t);return t.ch==n.start+1&&"."==n.string.charAt(0)?(n.end=n.start,n.string=".",n.type="property"):/^\.[\w$_]*$/.test(n.string)&&(n.type="property",n.start++,n.string=n.string.replace(/\./,"")),n}e.registerHelper("hint","javascript",(function(e,t){return i(e,l,(function(e,t){return e.getTokenAt(t)}),t)})),e.registerHelper("hint","coffeescript",(function(e,t){return i(e,u,r,t)}));var o="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),s="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),a="prototype apply call bind".split(" "),l="break case catch class const continue debugger default delete do else export extends false finally for function if in import instanceof new null return super switch this throw true try typeof var void while with yield".split(" "),u="and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ");function c(e,t,i,r){var l=[],u=e.string,c=r&&r.globalScope||window;function h(e){0!=e.lastIndexOf(u,0)||function(e,t){if(!Array.prototype.indexOf){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}return-1!=e.indexOf(t)}(l,e)||l.push(e)}function d(e){"string"==typeof e?n(o,h):e instanceof Array?n(s,h):e instanceof Function&&n(a,h),function(e,t){if(Object.getOwnPropertyNames&&Object.getPrototypeOf)for(var n=e;n;n=Object.getPrototypeOf(n))Object.getOwnPropertyNames(n).forEach(t);else for(var i in e)t(i)}(e,h)}if(t&&t.length){var f,p=t.pop();for(p.type&&0===p.type.indexOf("variable")?(r&&r.additionalContext&&(f=r.additionalContext[p.string]),r&&!1===r.useGlobalScope||(f=f||c[p.string])):"string"==p.type?f="":"atom"==p.type?f=1:"function"==p.type&&(null==c.jQuery||"$"!=p.string&&"jQuery"!=p.string||"function"!=typeof c.jQuery?null!=c._&&"_"==p.string&&"function"==typeof c._&&(f=c._()):f=c.jQuery());null!=f&&t.length;)f=f[t.pop().string];null!=f&&d(f)}else{for(var g=e.state.localVars;g;g=g.next)h(g.name);for(var m=e.state.context;m;m=m.prev)for(g=m.vars;g;g=g.next)h(g.name);for(g=e.state.globalVars;g;g=g.next)h(g.name);r&&!1===r.useGlobalScope||d(c),n(i,h)}return l}}(n(1))},function(e,t,n){var i=n(2),r=n(16);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o=(i(r,{insert:"head",singleton:!1}),r.locals?r.locals:{});e.exports=o},function(e,t,n){(t=n(3)(!1)).push([e.i,".cm-s-neat span.cm-comment { color: #a86; }\n.cm-s-neat span.cm-keyword { line-height: 1em; font-weight: bold; color: blue; }\n.cm-s-neat span.cm-string { color: #a22; }\n.cm-s-neat span.cm-builtin { line-height: 1em; font-weight: bold; color: #077; }\n.cm-s-neat span.cm-special { line-height: 1em; font-weight: bold; color: #0aa; }\n.cm-s-neat span.cm-variable { color: black; }\n.cm-s-neat span.cm-number, .cm-s-neat span.cm-atom { color: #3a3; }\n.cm-s-neat span.cm-meta { color: #555; }\n.cm-s-neat span.cm-link { color: #3a3; }\n\n.cm-s-neat .CodeMirror-activeline-background { background: #e8f2ff; }\n.cm-s-neat .CodeMirror-matchingbracket { outline:1px solid grey; color:black !important; }\n",""]),e.exports=t},function(e,t,n){!function(e){"use strict";e.defineMode("javascript",(function(t,n){var i,r,o=t.indentUnit,s=n.statementIndent,a=n.jsonld,l=n.json||a,u=n.typescript,c=n.wordCharacters||/[\w$\xa1-\uffff]/,h=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("keyword d"),o=e("operator"),s={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:e("new"),delete:i,void:i,throw:i,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:o,typeof:o,instanceof:o,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:e("this"),class:e("class"),super:e("atom"),yield:i,export:e("export"),import:e("import"),extends:i,await:i}}(),d=/[+\-*&%=<>!?|~^@]/,f=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function p(e,t,n){return i=e,r=n,t}function g(e,t){var n,i=e.next();if('"'==i||"'"==i)return t.tokenize=(n=i,function(e,t){var i,r=!1;if(a&&"@"==e.peek()&&e.match(f))return t.tokenize=g,p("jsonld-keyword","meta");for(;null!=(i=e.next())&&(i!=n||r);)r=!r&&"\\"==i;return r||(t.tokenize=g),p("string","string")}),t.tokenize(e,t);if("."==i&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return p("number","number");if("."==i&&e.match(".."))return p("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return p(i);if("="==i&&e.eat(">"))return p("=>","operator");if("0"==i&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return p("number","number");if(/\d/.test(i))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),p("number","number");if("/"==i)return e.eat("*")?(t.tokenize=m,m(e,t)):e.eat("/")?(e.skipToEnd(),p("comment","comment")):$e(e,t,1)?(function(e){for(var t,n=!1,i=!1;null!=(t=e.next());){if(!n){if("/"==t&&!i)return;"["==t?i=!0:i&&"]"==t&&(i=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),p("regexp","string-2")):(e.eat("="),p("operator","operator",e.current()));if("`"==i)return t.tokenize=v,v(e,t);if("#"==i)return e.skipToEnd(),p("error","error");if("<"==i&&e.match("!--")||"-"==i&&e.match("->"))return e.skipToEnd(),p("comment","comment");if(d.test(i))return">"==i&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=i&&"="!=i||e.eat("="):/[<>*+\-]/.test(i)&&(e.eat(i),">"==i&&e.eat(i))),p("operator","operator",e.current());if(c.test(i)){e.eatWhile(c);var r=e.current();if("."!=t.lastType){if(h.propertyIsEnumerable(r)){var o=h[r];return p(o.type,o.style,r)}if("async"==r&&e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return p("async","keyword",r)}return p("variable","variable",r)}}function m(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=g;break}i="*"==n}return p("comment","comment")}function v(e,t){for(var n,i=!1;null!=(n=e.next());){if(!i&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=g;break}i=!i&&"\\"==n}return p("quasi","string-2",e.current())}function y(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(u){var i=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));i&&(n=i.index)}for(var r=0,o=!1,s=n-1;s>=0;--s){var a=e.string.charAt(s),l="([{}])".indexOf(a);if(l>=0&&l<3){if(!r){++s;break}if(0==--r){"("==a&&(o=!0);break}}else if(l>=3&&l<6)++r;else if(c.test(a))o=!0;else if(/["'\/`]/.test(a))for(;;--s){if(0==s)return;if(e.string.charAt(s-1)==a&&"\\"!=e.string.charAt(s-2)){s--;break}}else if(o&&!r){++s;break}}o&&!r&&(t.fatArrowAt=s)}}var w={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function b(e,t,n,i,r,o){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=o,null!=i&&(this.align=i)}function _(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var i=e.context;i;i=i.prev)for(n=i.vars;n;n=n.next)if(n.name==t)return!0}var x={state:null,column:null,marked:null,cc:null};function k(){for(var e=arguments.length-1;e>=0;e--)x.cc.push(arguments[e])}function C(){return k.apply(null,arguments),!0}function S(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function M(e){var t=x.state;if(x.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var i=function e(t,n){if(n){if(n.block){var i=e(t,n.prev);return i?i==n.prev?n:new z(i,n.vars,!0):null}return S(t,n.vars)?n:new z(n.prev,new L(t,n.vars),!1)}return null}(e,t.context);if(null!=i)return void(t.context=i)}else if(!S(e,t.localVars))return void(t.localVars=new L(e,t.localVars));n.globalVars&&!S(e,t.globalVars)&&(t.globalVars=new L(e,t.globalVars))}function T(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function z(e,t,n){this.prev=e,this.vars=t,this.block=n}function L(e,t){this.name=e,this.next=t}var A=new L("this",new L("arguments",null));function O(){x.state.context=new z(x.state.context,x.state.localVars,!1),x.state.localVars=A}function P(){x.state.context=new z(x.state.context,x.state.localVars,!0),x.state.localVars=null}function I(){x.state.localVars=x.state.context.vars,x.state.context=x.state.context.prev}function E(e,t){var n=function(){var n=x.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var r=n.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;n.lexical=new b(i,x.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function j(){var e=x.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function N(e){return function t(n){return n==e?C():";"==e||"}"==n||")"==n||"]"==n?k():C(t)}}function D(e,t){return"var"==e?C(E("vardef",t),ye,N(";"),j):"keyword a"==e?C(E("form"),H,D,j):"keyword b"==e?C(E("form"),D,j):"keyword d"==e?x.stream.match(/^\s*$/,!1)?C():C(E("stat"),V,N(";"),j):"debugger"==e?C(N(";")):"{"==e?C(E("}"),P,oe,j,I):";"==e?C():"if"==e?("else"==x.state.lexical.info&&x.state.cc[x.state.cc.length-1]==j&&x.state.cc.pop()(),C(E("form"),H,D,j,Ce)):"function"==e?C(ze):"for"==e?C(E("form"),Se,D,j):"class"==e||u&&"interface"==t?(x.marked="keyword",C(E("form","class"==e?e:t),Ie,j)):"variable"==e?u&&"declare"==t?(x.marked="keyword",C(D)):u&&("module"==t||"enum"==t||"type"==t)&&x.stream.match(/^\s*\w/,!1)?(x.marked="keyword","enum"==t?C(qe):"type"==t?C(Ae,N("operator"),ce,N(";")):C(E("form"),we,N("{"),E("}"),oe,j,j)):u&&"namespace"==t?(x.marked="keyword",C(E("form"),F,D,j)):u&&"abstract"==t?(x.marked="keyword",C(D)):C(E("stat"),J):"switch"==e?C(E("form"),H,N("{"),E("}","switch"),P,oe,j,j,I):"case"==e?C(F,N(":")):"default"==e?C(N(":")):"catch"==e?C(E("form"),O,R,D,j,I):"export"==e?C(E("stat"),De,j):"import"==e?C(E("stat"),Fe,j):"async"==e?C(D):"@"==t?C(F,D):k(E("stat"),F,N(";"),j)}function R(e){if("("==e)return C(Oe,N(")"))}function F(e,t){return W(e,t,!1)}function B(e,t){return W(e,t,!0)}function H(e){return"("!=e?k():C(E(")"),F,N(")"),j)}function W(e,t,n){if(x.state.fatArrowAt==x.stream.start){var i=n?Z:K;if("("==e)return C(O,E(")"),ie(Oe,")"),j,N("=>"),i,I);if("variable"==e)return k(O,we,N("=>"),i,I)}var r=n?q:U;return w.hasOwnProperty(e)?C(r):"function"==e?C(ze,r):"class"==e||u&&"interface"==t?(x.marked="keyword",C(E("form"),Pe,j)):"keyword c"==e||"async"==e?C(n?B:F):"("==e?C(E(")"),V,N(")"),j,r):"operator"==e||"spread"==e?C(n?B:F):"["==e?C(E("]"),Ue,j,r):"{"==e?re(ee,"}",null,r):"quasi"==e?k(G,r):"new"==e?C(function(e){return function(t){return"."==t?C(e?Y:X):"variable"==t&&u?C(ge,e?q:U):k(e?B:F)}}(n)):"import"==e?C(F):C()}function V(e){return e.match(/[;\}\)\],]/)?k():k(F)}function U(e,t){return","==e?C(V):q(e,t,!1)}function q(e,t,n){var i=0==n?U:q,r=0==n?F:B;return"=>"==e?C(O,n?Z:K,I):"operator"==e?/\+\+|--/.test(t)||u&&"!"==t?C(i):u&&"<"==t&&x.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?C(E(">"),ie(ce,">"),j,i):"?"==t?C(F,N(":"),r):C(r):"quasi"==e?k(G,i):";"!=e?"("==e?re(B,")","call",i):"."==e?C(Q,i):"["==e?C(E("]"),V,N("]"),j,i):u&&"as"==t?(x.marked="keyword",C(ce,i)):"regexp"==e?(x.state.lastType=x.marked="operator",x.stream.backUp(x.stream.pos-x.stream.start-1),C(r)):void 0:void 0}function G(e,t){return"quasi"!=e?k():"${"!=t.slice(t.length-2)?C(G):C(F,$)}function $(e){if("}"==e)return x.marked="string-2",x.state.tokenize=v,C(G)}function K(e){return y(x.stream,x.state),k("{"==e?D:F)}function Z(e){return y(x.stream,x.state),k("{"==e?D:B)}function X(e,t){if("target"==t)return x.marked="keyword",C(U)}function Y(e,t){if("target"==t)return x.marked="keyword",C(q)}function J(e){return":"==e?C(j,D):k(U,N(";"),j)}function Q(e){if("variable"==e)return x.marked="property",C()}function ee(e,t){return"async"==e?(x.marked="property",C(ee)):"variable"==e||"keyword"==x.style?(x.marked="property","get"==t||"set"==t?C(te):(u&&x.state.fatArrowAt==x.stream.start&&(n=x.stream.match(/^\s*:\s*/,!1))&&(x.state.fatArrowAt=x.stream.pos+n[0].length),C(ne))):"number"==e||"string"==e?(x.marked=a?"property":x.style+" property",C(ne)):"jsonld-keyword"==e?C(ne):u&&T(t)?(x.marked="keyword",C(ee)):"["==e?C(F,se,N("]"),ne):"spread"==e?C(B,ne):"*"==t?(x.marked="keyword",C(ee)):":"==e?k(ne):void 0;var n}function te(e){return"variable"!=e?k(ne):(x.marked="property",C(ze))}function ne(e){return":"==e?C(B):"("==e?k(ze):void 0}function ie(e,t,n){function i(r,o){if(n?n.indexOf(r)>-1:","==r){var s=x.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),C((function(n,i){return n==t||i==t?k():k(e)}),i)}return r==t||o==t?C():n&&n.indexOf(";")>-1?k(e):C(N(t))}return function(n,r){return n==t||r==t?C():k(e,i)}}function re(e,t,n){for(var i=3;i<arguments.length;i++)x.cc.push(arguments[i]);return C(E(t,n),ie(e,t),j)}function oe(e){return"}"==e?C():k(D,oe)}function se(e,t){if(u){if(":"==e)return C(ce);if("?"==t)return C(se)}}function ae(e,t){if(u&&(":"==e||"in"==t))return C(ce)}function le(e){if(u&&":"==e)return x.stream.match(/^\s*\w+\s+is\b/,!1)?C(F,ue,ce):C(ce)}function ue(e,t){if("is"==t)return x.marked="keyword",C()}function ce(e,t){return"keyof"==t||"typeof"==t||"infer"==t?(x.marked="keyword",C("typeof"==t?B:ce)):"variable"==e||"void"==t?(x.marked="type",C(pe)):"|"==t||"&"==t?C(ce):"string"==e||"number"==e||"atom"==e?C(pe):"["==e?C(E("]"),ie(ce,"]",","),j,pe):"{"==e?C(E("}"),ie(de,"}",",;"),j,pe):"("==e?C(ie(fe,")"),he,pe):"<"==e?C(ie(ce,">"),ce):void 0}function he(e){if("=>"==e)return C(ce)}function de(e,t){return"variable"==e||"keyword"==x.style?(x.marked="property",C(de)):"?"==t||"number"==e||"string"==e?C(de):":"==e?C(ce):"["==e?C(N("variable"),ae,N("]"),de):"("==e?k(Le,de):void 0}function fe(e,t){return"variable"==e&&x.stream.match(/^\s*[?:]/,!1)||"?"==t?C(fe):":"==e?C(ce):"spread"==e?C(fe):k(ce)}function pe(e,t){return"<"==t?C(E(">"),ie(ce,">"),j,pe):"|"==t||"."==e||"&"==t?C(ce):"["==e?C(ce,N("]"),pe):"extends"==t||"implements"==t?(x.marked="keyword",C(ce)):"?"==t?C(ce,N(":"),ce):void 0}function ge(e,t){if("<"==t)return C(E(">"),ie(ce,">"),j,pe)}function me(){return k(ce,ve)}function ve(e,t){if("="==t)return C(ce)}function ye(e,t){return"enum"==t?(x.marked="keyword",C(qe)):k(we,se,xe,ke)}function we(e,t){return u&&T(t)?(x.marked="keyword",C(we)):"variable"==e?(M(t),C()):"spread"==e?C(we):"["==e?re(_e,"]"):"{"==e?re(be,"}"):void 0}function be(e,t){return"variable"!=e||x.stream.match(/^\s*:/,!1)?("variable"==e&&(x.marked="property"),"spread"==e?C(we):"}"==e?k():"["==e?C(F,N("]"),N(":"),be):C(N(":"),we,xe)):(M(t),C(xe))}function _e(){return k(we,xe)}function xe(e,t){if("="==t)return C(B)}function ke(e){if(","==e)return C(ye)}function Ce(e,t){if("keyword b"==e&&"else"==t)return C(E("form","else"),D,j)}function Se(e,t){return"await"==t?C(Se):"("==e?C(E(")"),Me,j):void 0}function Me(e){return"var"==e?C(ye,Te):"variable"==e?C(Te):k(Te)}function Te(e,t){return")"==e?C():";"==e?C(Te):"in"==t||"of"==t?(x.marked="keyword",C(F,Te)):k(F,Te)}function ze(e,t){return"*"==t?(x.marked="keyword",C(ze)):"variable"==e?(M(t),C(ze)):"("==e?C(O,E(")"),ie(Oe,")"),j,le,D,I):u&&"<"==t?C(E(">"),ie(me,">"),j,ze):void 0}function Le(e,t){return"*"==t?(x.marked="keyword",C(Le)):"variable"==e?(M(t),C(Le)):"("==e?C(O,E(")"),ie(Oe,")"),j,le,I):u&&"<"==t?C(E(">"),ie(me,">"),j,Le):void 0}function Ae(e,t){return"keyword"==e||"variable"==e?(x.marked="type",C(Ae)):"<"==t?C(E(">"),ie(me,">"),j):void 0}function Oe(e,t){return"@"==t&&C(F,Oe),"spread"==e?C(Oe):u&&T(t)?(x.marked="keyword",C(Oe)):u&&"this"==e?C(se,xe):k(we,se,xe)}function Pe(e,t){return"variable"==e?Ie(e,t):Ee(e,t)}function Ie(e,t){if("variable"==e)return M(t),C(Ee)}function Ee(e,t){return"<"==t?C(E(">"),ie(me,">"),j,Ee):"extends"==t||"implements"==t||u&&","==e?("implements"==t&&(x.marked="keyword"),C(u?ce:F,Ee)):"{"==e?C(E("}"),je,j):void 0}function je(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||u&&T(t))&&x.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(x.marked="keyword",C(je)):"variable"==e||"keyword"==x.style?(x.marked="property",C(u?Ne:ze,je)):"number"==e||"string"==e?C(u?Ne:ze,je):"["==e?C(F,se,N("]"),u?Ne:ze,je):"*"==t?(x.marked="keyword",C(je)):u&&"("==e?k(Le,je):";"==e||","==e?C(je):"}"==e?C():"@"==t?C(F,je):void 0}function Ne(e,t){if("?"==t)return C(Ne);if(":"==e)return C(ce,xe);if("="==t)return C(B);var n=x.state.lexical.prev;return k(n&&"interface"==n.info?Le:ze)}function De(e,t){return"*"==t?(x.marked="keyword",C(Ve,N(";"))):"default"==t?(x.marked="keyword",C(F,N(";"))):"{"==e?C(ie(Re,"}"),Ve,N(";")):k(D)}function Re(e,t){return"as"==t?(x.marked="keyword",C(N("variable"))):"variable"==e?k(B,Re):void 0}function Fe(e){return"string"==e?C():"("==e?k(F):k(Be,He,Ve)}function Be(e,t){return"{"==e?re(Be,"}"):("variable"==e&&M(t),"*"==t&&(x.marked="keyword"),C(We))}function He(e){if(","==e)return C(Be,He)}function We(e,t){if("as"==t)return x.marked="keyword",C(Be)}function Ve(e,t){if("from"==t)return x.marked="keyword",C(F)}function Ue(e){return"]"==e?C():k(ie(B,"]"))}function qe(){return k(E("form"),we,N("{"),E("}"),ie(Ge,"}"),j,j)}function Ge(){return k(we,xe)}function $e(e,t,n){return t.tokenize==g&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return I.lex=!0,j.lex=!0,{startState:function(e){var t={tokenize:g,lastType:"sof",cc:[],lexical:new b((e||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&new z(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),y(e,t)),t.tokenize!=m&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==i?n:(t.lastType="operator"!=i||"++"!=r&&"--"!=r?i:"incdec",function(e,t,n,i,r){var o=e.cc;for(x.state=e,x.stream=r,x.marked=null,x.cc=o,x.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():l?F:D)(n,i)){for(;o.length&&o[o.length-1].lex;)o.pop()();return x.marked?x.marked:"variable"==n&&_(e,i)?"variable-2":t}}(t,n,i,r,e))},indent:function(t,i){if(t.tokenize==m)return e.Pass;if(t.tokenize!=g)return 0;var r,a=i&&i.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(i))for(var u=t.cc.length-1;u>=0;--u){var c=t.cc[u];if(c==j)l=l.prev;else if(c!=Ce)break}for(;("stat"==l.type||"form"==l.type)&&("}"==a||(r=t.cc[t.cc.length-1])&&(r==U||r==q)&&!/^[,\.=+\-*:?[\(]/.test(i));)l=l.prev;s&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var h=l.type,f=a==h;return"vardef"==h?l.indented+("operator"==t.lastType||","==t.lastType?l.info.length+1:0):"form"==h&&"{"==a?l.indented:"form"==h?l.indented+o:"stat"==h?l.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||d.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,i)?s||o:0):"switch"!=l.info||f||0==n.doubleIndentSwitch?l.align?l.column+(f?0:1):l.indented+(f?0:o):l.indented+(/^(?:case|default)\b/.test(i)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:a,jsonMode:l,expressionAllowed:$e,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=F&&t!=B||e.cc.pop()}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n(1))},function(e,t,n){"use strict";n.r(t);var i=n(0);const r=["aal","aam","aani","aaru","aba","abac","abas","abb","abba","abby","abe","abed","abel","abet","abey","abie","abir","able","ably","abo","abox","absi","abu","abut","aby","acca","ace","acer","ach","ache","achy","acid","acis","acle","acme","acne","acor","acre","act","acta","acts","actu","acyl","ada","adad","adai","adam","adar","adat","adaw","aday","add","adda","addu","addy","ade","adet","adib","adin","adit","admi","ado","adry","ady","adz","adze","aeon","aer","aero","aery","aes","afar","affa","affy","aft","aga","agag","agal","agao","agar","agau","agaz","age","aged","agee","agen","ager","agha","agib","agio","agla","ago","agog","agon","agra","agre","agua","ague","agy","aha","ahem","ahet","ahey","ahir","aho","ahom","ahoy","aht","ahu","ahum","aias","aid","aide","aiel","ail","aile","aim","aint","ainu","aion","air","aira","aire","airt","airy","ait","aix","ajar","ajog","aka","akal","akan","ake","akee","akey","akha","akia","akim","akin","akka","ako","akov","akra","aku","ala","alan","alar","alas","alb","alba","albe","albi","alca","alco","ale","alea","alec","alee","alef","alem","alen","alex","alf","alfa","alga","algy","alif","alin","alit","alix","alk","alky","all","alle","ally","alma","alme","alms","aln","alo","alod","aloe","alop","alow","alp","also","alt","alto","alum","alur","aly","alya","ama","amah","amar","amba","ambo","ame","amen","amex","ami","amia","amic","amid","amil","amin","amir","amla","amli","amma","ammi","ammo","ammu","amok","amor","amos","amoy","amra","amt","amy","amyl","ana","anal","anam","anan","anas","anat","anax","anay","anba","and","anda","ande","andi","andy","anes","anew","ango","ani","anil","anis","ankh","ann","anna","anne","anoa","anon","ansa","ansu","ant","anta","ante","anti","antu","anus","any","aoul","apa","apar","ape","aper","apex","apii","apio","apis","apod","apse","apt","apus","aqua","aquo","ara","arab","arad","arar","arba","arc","arca","arch","ardu","are","area","ared","argo","aria","arid","aril","ark","arm","arms","army","arn","arna","arne","arni","aro","arow","arry","arse","art","arty","aru","arui","arum","arx","ary","arya","aryl","asa","asak","asci","ase","asem","ash","asha","ashy","ask","askr","asok","asop","asor","asp","ass","asse","assi","ast","asta","ata","atap","ate","atef","aten","ates","ati","atik","atip","atis","atka","atle","atma","atmo","atom","atop","atry","atta","atwo","aube","auca","auge","augh","auh","auk","aula","auld","aulu","aum","aune","aunt","aura","aus","ausu","aute","auto","ava","aval","avar","ave","aver","aves","avid","avis","avo","avow","awa","awag","awan","awat","away","awd","awe","awee","awfu","awin","awl","awn","awny","awol","awry","axal","axe","axed","axel","axes","axil","axis","axle","axon","ayah","aye","ayin","ayu","azha","azo","azon","azox","baa","baal","baar","bab","baba","babe","babi","babs","babu","baby","bac","bach","back","bad","bade","bae","baff","baft","bag","baga","bago","bah","baho","baht","bail","bain","bais","bait","baka","bake","baku","bal","bala","bald","bale","bali","balk","ball","balm","balt","balu","bam","ban","bana","banc","band","bane","bang","bani","bank","bant","bap","bar","bara","barb","bard","bare","bari","bark","barm","barn","bart","baru","bas","base","bash","bask","bass","bast","bat","bate","bath","bats","batt","batz","baud","baul","baun","baw","bawd","bawl","bawn","bay","baya","baze","bea","bead","beak","beal","beam","bean","bear","beat","beau","beck","bed","bee","beef","beek","been","beer","bees","beet","beg","bego","behn","beid","beja","bel","bela","beld","bell","belt","bely","bema","ben","bena","bend","bene","beng","beni","benj","benn","beno","bent","benu","ber","bere","berg","beri","berm","bern","bert","bes","besa","bess","best","bet","beta","beth","bevy","bey","bhar","bhat","bhil","bhoy","bhut","bias","bib","bibb","bibi","bice","bick","bid","bide","bien","bier","biff","big","biga","bigg","bija","bike","bikh","bile","bilk","bill","bilo","bim","bin","bind","bine","bing","binh","bini","bink","bino","bint","biod","bion","bios","bird","biri","birk","birl","birn","birr","bis","bit","bite","biti","bito","bitt","biwa","bixa","biz","bizz","blab","blad","blae","blah","blan","blas","blat","blaw","blay","bleb","blee","bleo","blet","blip","blo","blob","bloc","blot","blow","blub","blue","blup","blur","boa","boar","boat","bob","boba","bobo","boce","bock","bod","bode","bodo","body","boer","bog","boga","bogo","bogy","boho","boid","boii","boil","bois","bojo","boke","bola","bold","bole","bolk","boll","bolo","bolt","bom","boma","bomb","bon","bond","bone","bong","boni","bonk","bony","boo","boob","bood","boof","book","bool","boom","boon","boor","boot","bop","bor","bora","bord","bore","borg","borh","born","boro","bort","bos","bosc","bose","bosh","bosk","bosn","boss","bot","bota","bote","both","bott","boud","bouk","boun","bout","bouw","bow","bowk","bowl","boxy","boy","boyd","boza","bozo","bra","brab","brad","brae","brag","bram","bran","brat","braw","bray","bred","bree","brei","bret","brew","brey","brig","brim","brin","brit","brob","brod","brog","broo","brot","brow","brut","bual","bub","buba","bube","bubo","buck","bud","buda","budh","buff","bufo","bug","bugi","buhl","buhr","bukh","bulb","bulk","bull","bult","bum","bump","bun","buna","bund","bung","bunk","bunt","buoy","bur","burd","bure","burg","buri","burl","burn","buro","burp","burr","burt","bury","bus","bush","busk","buss","bust","busy","but","bute","butt","buy","buzz","bye","byee","bygo","byon","byre","byth","caam","cab","caba","caca","cack","cad","cade","cadi","cafh","cag","cage","cagn","caid","cain","cake","caky","cal","calf","calk","call","calm","calp","calx","cam","camb","came","camp","can","cana","cand","cane","cank","cant","cany","cap","cape","caph","car","cara","card","care","cark","carl","caro","carp","carr","cart","cary","case","cash","cask","cass","cast","cat","cate","cauk","caul","caum","caup","cava","cave","cavy","caw","cawk","cay","caza","cede","cee","ceil","cell","celt","cent","cep","cepa","cepe","ceps","cere","cern","cero","cess","cest","cete","ceti","ceyx","cha","chaa","chab","chac","chad","chai","chal","cham","chao","chap","char","chat","chaw","chay","che","chee","chef","chen","chet","chew","chi","chia","chic","chid","chih","chil","chin","chip","chit","cho","chob","chol","chop","chou","chow","chub","chud","chug","chum","chun","chut","cid","cig","cine","cion","cipo","cise","cist","cit","cite","city","cive","cixo","clad","clag","clam","clan","clap","clat","claw","clay","cled","clee","clef","cleg","clem","clep","clew","clio","clip","clit","clod","clog","clop","clot","clow","cloy","club","clue","cly","coak","coal","coan","coat","coax","cob","coca","cock","coco","cod","coda","code","codo","coe","coed","coff","coft","cog","coho","coif","coil","coin","coir","coix","coke","coky","col","cola","cold","cole","coli","colk","coll","colp","colt","coly","coma","comb","come","con","cond","cone","conk","conn","cony","coo","coof","cook","cool","coom","coon","coop","coos","coot","cop","copa","cope","copr","copt","copy","cor","cora","cord","core","corf","cork","corm","corn","corp","cory","cos","cosh","coss","cost","cosy","cot","cote","coth","coto","coue","coul","coup","cove","cow","cowl","cowy","cox","coxa","coxy","coy","coyo","coz","coze","cozy","crab","crag","cram","cran","crap","craw","crax","crea","cree","crew","crex","crib","cric","crig","crin","cris","cro","croc","crom","crop","crow","croy","crum","crus","crux","cry","cub","cuba","cube","cubi","cuck","cud","cue","cuff","cuir","cuke","cull","culm","cult","cum","cump","cuna","cuon","cup","cur","curb","curd","cure","curl","curn","curr","curt","cush","cusk","cusp","cuss","cut","cute","cuvy","cuya","cwm","cyan","cyke","cyma","cyme","cyp","cyst","czar","dab","dabb","dace","dad","dada","dade","dado","dadu","dae","daer","daff","daft","dag","dago","dags","dah","dail","dain","dais","dak","dal","dale","dali","dalk","dalt","dam","dama","dame","damn","damp","dan","dana","dand","dane","dang","dani","dank","dao","dap","dar","dard","dare","darg","dari","dark","darn","darr","dart","das","dash","dasi","data","date","daub","daud","daur","daut","dauw","dave","davy","daw","dawn","day","days","daza","daze","dazy","dead","deaf","deal","dean","dear","deb","debi","debt","deck","dedo","dee","deed","deem","deep","deer","deft","defy","deg","degu","del","dele","delf","dell","deme","demi","demy","den","dene","dent","deny","depa","dere","derm","dern","desi","desk","dess","deul","dev","deva","dew","dewy","dey","dha","dhai","dhak","dhan","dhaw","dhow","dhu","dial","dian","diau","dib","dibs","dice","dich","dick","did","dido","die","dieb","diem","dier","diet","dig","digs","dika","dike","dill","dilo","dim","dime","din","dine","ding","dink","dint","diol","dion","dip","dird","dire","dirk","dirl","dirt","dis","disa","disc","dish","disk","diss","dit","dita","dite","div","diva","dive","dixy","doab","doat","dob","dobe","doby","doc","dock","dod","dodd","dode","dodo","doe","doeg","doer","does","doff","dog","doge","dogs","dogy","doit","doke","doko","dol","dola","dole","doli","doll","dolt","dom","dome","domn","domy","don","done","dong","donn","dont","doob","dook","dool","doom","doon","door","dop","dopa","dope","dor","dora","dori","dorm","dorn","dorp","dory","dos","dosa","dose","doss","dot","dote","doto","doty","douc","doug","doum","doup","dour","dout","dove","dow","dowd","dowf","dowl","down","dowp","doxa","doxy","doze","dozy","drab","drag","dram","drat","draw","dray","dree","dreg","drew","drib","drip","drop","drow","drub","drug","drum","dry","duad","dual","dub","dubb","dubs","duck","duco","duct","dud","dude","due","duel","duer","duet","duff","dug","duhr","duim","duit","duke","dull","dult","duly","dum","duma","dumb","dump","dun","dune","dung","dunk","duns","dunt","duny","duo","dup","dupe","dura","dure","durn","duro","dush","dusk","dust","duty","dux","dyad","dyak","dyas","dyce","dye","dyer","dyke","dyne","each","ean","ear","earl","earn","ease","east","easy","eat","eats","eave","ebb","eben","eboe","ebon","ecad","ecca","eche","echo","ecru","edda","eddo","eddy","edea","eden","edge","edgy","edh","edit","edna","edo","eel","eely","eer","efik","eft","egad","egba","egbo","egg","eggy","egma","ego","egol","eheu","ejam","ejoo","eke","eker","ekka","ekoi","elb","eld","elf","eli","elia","elk","ell","ella","elle","elm","elmy","elod","elon","els","elsa","else","elt","eme","emil","emim","emir","emit","emm","emma","empt","emu","emyd","emys","enam","end","enid","enif","enki","enol","enos","enow","ens","ense","envy","eoan","eon","epee","epha","epic","epos","eppy","era","eral","erd","ere","erg","eria","eric","erie","erik","erma","erne","eros","err","ers","erse","erth","eruc","eryx","esca","esne","esox","espy","ess","esth","eta","etch","etna","etta","etua","etui","etym","euge","eva","evan","eve","evea","even","ever","evil","evoe","ewe","ewer","ewry","exam","exes","exit","exon","eyah","eyas","eye","eyed","eyen","eyer","eyey","eyn","eyne","eyot","eyra","eyre","ezba","ezra","faba","face","fack","fact","facy","fad","fade","fady","fae","faff","fag","fage","fail","fain","fair","fake","faky","fall","falx","fam","fama","fame","fan","fana","fand","fang","fant","fany","faon","far","fare","farl","farm","faro","fash","fass","fast","fat","fate","faun","favn","fawn","fay","faze","feak","feal","fear","feat","feck","fed","fee","feed","feel","feer","fei","feif","feil","feis","fell","fels","felt","feme","fen","fend","fent","feod","ferk","fern","feru","fess","fest","fet","feu","feud","few","fey","fez","fiar","fiat","fib","fice","fico","fid","fide","fido","fie","fife","fifo","fig","fiji","fike","file","fill","film","filo","fils","fin","find","fine","fink","finn","fiot","fip","fir","fire","firk","firm","firn","fisc","fise","fish","fist","fit","five","fix","fizz","flag","flak","flam","flan","flap","flat","flaw","flax","flay","flea","fled","flee","flem","flet","flew","flex","fley","flip","flit","flix","flo","flob","floc","floe","flog","flop","flot","flow","flu","flub","flue","flux","fly","foal","foam","fob","foci","fod","foe","fog","fogo","fogy","foil","fold","fole","folk","fon","fono","fons","font","foo","food","fool","foot","fop","for","fora","forb","ford","fore","fork","form","fort","fosh","fot","fou","foud","foul","foun","four","fow","fowk","fowl","fox","foxy","foy","fozy","fra","frab","frae","fram","frap","frat","fray","fred","free","fret","frib","frig","frim","frit","friz","fro","froe","frog","from","frot","frow","fry","fub","fuci","fud","fuel","fuff","fugu","fuji","fulk","full","fum","fume","fumy","fun","fund","funk","funt","fur","furl","fury","fusc","fuse","fuss","fust","fut","fute","fuye","fuze","fuzz","fyke","fyrd","gab","gabe","gabi","gaby","gad","gade","gael","gaen","gaet","gaff","gag","gage","gaia","gail","gain","gair","gait","gaj","gal","gala","gale","gali","gall","galp","galt","gam","gamb","game","gamp","gamy","gan","gane","gang","gant","gaol","gaon","gap","gapa","gape","gapo","gapy","gar","gara","garb","gare","garn","garo","gary","gas","gash","gasp","gast","gat","gata","gate","gau","gaub","gaud","gaul","gaum","gaun","gaup","gaur","gaus","gaut","gave","gaw","gawk","gawm","gawn","gay","gaz","gaze","gazi","gazy","geal","gean","gear","geat","geck","ged","gee","geek","geet","geez","gegg","gein","gel","geld","gell","gelt","gem","gen","gena","gene","gens","gent","genu","geo","geon","ger","gerb","germ","gers","ges","gest","get","geta","geum","gey","gez","ghan","ghat","ghee","gheg","ghuz","gib","gibe","gid","gie","gied","gien","gif","gift","gig","gigi","gil","gila","gild","gill","gilo","gilt","gim","gimp","gin","ging","gink","gio","gip","gird","girl","girn","giro","girr","girt","gish","gist","git","gith","give","gizz","glad","glam","glar","glee","gleg","glen","glia","glib","glis","glom","glop","glor","glow","gloy","glub","glue","glug","glum","glut","gnar","gnat","gnaw","gnu","goa","goad","goaf","goal","goan","goat","gob","gobi","gobo","goby","god","gode","goel","goer","goes","goff","gog","gogo","goi","gol","gola","gold","golf","goli","goll","golo","goma","gon","gona","gond","gone","gong","gony","goo","good","goof","gook","gool","goon","goop","gor","gora","gorb","gore","gory","gos","gosh","got","gote","goth","goup","gout","gove","gowf","gowk","gowl","gown","goy","gra","grab","grad","gram","grat","gray","gree","greg","grew","grey","grid","grig","grim","grin","grip","gris","grit","grog","gros","grot","grow","grr","grub","grue","grum","grun","grus","guan","guao","guar","gud","gude","gue","gufa","guff","gugu","guha","guhr","guib","gul","gula","gule","gulf","gull","gulo","gulp","gum","gump","gun","guna","gunj","gunk","gunl","gunz","gup","gur","gurk","gurl","gurr","gurt","guru","gus","gush","guss","gust","gut","guti","gutt","guy","guz","guze","gwag","gwen","gyle","gym","gyn","gyne","gyp","gype","gyps","gyre","gyri","gyro","gyte","gyve","haab","haaf","habe","habu","hack","had","hade","hadj","haec","haem","haet","haff","haft","hag","hagi","hah","haik","hail","hain","hair","haje","hak","hake","hako","haku","hal","hala","hale","half","hall","halo","hals","halt","ham","hame","hami","han","hand","hank","hano","hans","hant","hao","hap","hapi","hapu","harb","hard","hare","hark","harl","harm","harn","harp","harr","hart","harv","hash","hask","hasp","hat","hate","hath","hati","hatt","hau","haul","have","haw","hawk","hawm","hay","haya","hayz","haze","hazy","head","heaf","heal","heap","hear","heat","hech","heck","heed","heel","heer","heft","hehe","hei","heii","hein","heir","hele","hell","helm","help","hem","heme","heml","hemp","hen","hend","hent","hep","her","herb","herd","here","herl","hern","hero","hers","hest","het","hevi","hew","hewn","hewt","hex","hexa","hey","hia","hic","hick","hide","hie","high","hike","hill","hilt","him","hima","himp","hin","hind","hing","hint","hip","hipe","hire","hiro","his","hish","hisn","hiss","hist","hit","hive","hizz","hler","hoar","hoax","hob","hobo","hock","hod","hoe","hoer","hog","hoga","hohe","hohn","hoi","hoin","hoit","hoju","hold","hole","holl","holm","holt","holy","home","homo","homy","hon","hone","hong","honk","hood","hoof","hook","hoon","hoop","hoot","hop","hope","hopi","hora","horn","hory","hose","host","hot","hoti","hour","hova","hove","how","howe","howk","howl","hox","hoy","hoya","hsi","hub","hubb","huck","hud","hue","hued","huer","huey","huff","hug","huge","hugh","hugo","huh","hui","huia","huk","huke","hula","hulk","hull","hulu","hum","huma","hume","hump","hun","hung","hunh","hunk","hunt","hup","hupa","hura","hure","hurf","hurl","hurr","hurt","huse","hush","husk","huso","huss","hut","huzz","hwa","hyke","hyla","hyle","hymn","hyne","hyp","hypo","iamb","ian","iao","iba","ibad","iban","ibex","ibid","ibis","ibo","ice","iced","ich","icho","ichu","icon","icy","ida","ide","idea","ides","idic","idle","idly","ido","idol","idyl","ife","iffy","ihi","iiwi","ijma","ijo","ikat","ike","ikey","ikra","ila","ilex","ilia","ilk","ilka","ill","illy","ilot","ilya","ima","imam","imbe","imer","imi","immi","imp","impi","impy","imu","inbe","inby","inca","inch","ind","inde","indy","inez","ing","inga","inia","ink","inks","inky","inly","inn","ino","inro","into","iodo","ion","ione","ioni","iota","iowa","ipid","ipil","ira","iran","iraq","ire","irid","iris","irk","irma","irok","iron","isba","isis","isle","ism","ismy","iso","ist","ita","itch","itea","item","iten","iter","itmo","ito","its","itys","itza","iva","ivan","ivin","ivy","iwa","iwis","ixia","ixil","iyo","izar","izle","izzy","jab","jack","jacu","jade","jady","jag","jaga","jail","jain","jake","jako","jam","jama","jamb","jami","jan","jane","jank","jann","jaob","jap","jape","jar","jara","jarg","jarl","jass","jat","jati","jato","jauk","jaun","jaup","java","jaw","jawy","jay","jazz","jean","jed","jeel","jeep","jeer","jef","jeff","jehu","jell","jem","jerk","jerl","jerm","jert","jess","jest","jesu","jet","jete","jew","jewy","jhow","jib","jibe","jibi","jiff","jig","jill","jilt","jim","jimp","jin","jina","jing","jink","jinn","jinx","jiri","jiti","jiva","jive","joan","job","jobo","joch","jock","jocu","jodo","joe","joel","joey","jog","john","join","joke","joky","joll","jolt","jon","jong","joni","joom","joon","jos","jose","josh","joss","jot","jota","joug","jouk","jova","jove","jow","jowl","joy","jozy","juan","juba","jube","juck","jud","jude","judo","judy","jug","juga","juha","juju","juke","jule","july","jump","jun","june","junk","juno","junt","jupe","jur","jura","jure","juri","jury","just","jut","jute","juza","jynx","kadu","kaf","kafa","kago","kagu","kaha","kahu","kai","kaid","kaik","kail","kaj","kaka","kaki","kala","kale","kali","kalo","kame","kan","kana","kang","kans","kapa","kapp","kari","karl","karo","kasa","kasm","kat","kate","kath","katy","kava","kavi","kaw","kay","kayo","kazi","kea","keb","keck","ked","kee","keek","keel","keen","keep","kees","keet","kef","keg","keid","keld","kele","kelk","kell","kelp","kelt","kemb","kemp","ken","kend","kenn","keno","kent","kep","kepi","kept","ker","kerf","kern","ket","keta","keto","ketu","keup","kex","kexy","key","kha","khan","khar","khat","khet","khir","khot","khu","kibe","kiby","kick","kids","kiel","kier","kiho","kike","kiki","kiku","kil","kill","kiln","kilo","kilp","kilt","kim","kin","kina","kind","king","kink","kino","kip","kipe","kiri","kirk","kirn","kish","kiss","kist","kit","kite","kith","kiva","kivu","kiwi","kiyi","klam","klan","klip","klom","klop","kmet","knab","knag","knap","knar","knee","knet","knew","knez","knit","knob","knop","knot","know","knub","knur","knut","koa","koae","kob","kobi","kobu","koch","koda","koel","koff","koft","kohl","koi","koil","koko","koku","kol","kola","koli","kolo","kome","komi","kon","kona","kop","koph","kopi","kor","kora","kore","kori","kory","kos","koso","kota","koto","kou","kozo","kra","krag","kral","kran","kras","kris","kroo","kru","kua","kuan","kuar","kuba","kudu","kuei","kuge","kui","kuki","kuku","kula","kuli","kulm","kung","kunk","kurd","kuri","kurt","kusa","kwan","kyah","kyar","kyat","kyl","kyle","kylo","kyte","kyu","lab","lac","lace","lack","lacy","lad","lade","lady","laet","lag","lai","laic","laid","lain","lair","lak","lake","laky","lall","lalo","lam","lama","lamb","lame","lamp","lan","lana","land","lane","lank","lant","lanx","lao","lap","lapp","lar","lard","lari","lark","lars","las","lasa","lash","lasi","lask","lass","last","lat","lata","late","lath","laud","laun","laur","lava","lave","law","lawk","lawn","lax","lay","laz","laze","lazy","lea","lead","leaf","leah","leak","leal","leam","lean","leap","lear","leat","lech","leck","led","leda","lede","lee","leed","leek","leep","leer","lees","leet","left","leg","lehi","lehr","lei","leif","lek","len","lena","lend","lene","leno","lens","lent","leo","leon","lepa","ler","lerp","les","less","lest","let","lete","leto","lett","leu","leud","leuk","lev","levi","levo","levy","lew","lewd","lex","ley","liar","lias","lich","lick","lid","lida","lide","lie","lied","lief","lien","lier","lieu","lif","life","lifo","lift","liin","lija","like","lila","lile","lill","lilt","lily","lim","lima","limb","lime","limn","limp","limu","limy","lin","lina","line","ling","link","linn","lino","lint","liny","lion","lip","lipa","lira","lire","lis","lisa","lise","lish","lisk","lisp","liss","list","lit","lite","lith","litz","liv","live","liz","liza","lleu","llew","llyn","loa","load","loaf","loam","loan","lob","lobe","lobo","loca","loch","loci","lock","loco","lod","lode","lof","loft","log","loge","logy","loin","loir","lois","loka","loke","lola","loll","lolo","loma","lone","long","lonk","loo","lood","loof","look","loom","loon","loop","loot","lop","lope","lora","lord","lore","lori","lorn","loro","lors","lory","lose","losh","loss","lost","lot","lota","lote","lots","lou","loud","louk","loup","lour","lout","love","low","lowa","lown","lowy","lox","loy","loyd","luba","lube","luc","luce","luck","lucy","ludo","lue","lues","luff","lug","luge","lui","luis","luke","lula","lull","lulu","lum","lump","luna","lune","lung","lunn","lunt","luo","lupe","lur","lura","lure","lurg","luri","lurk","lush","lusk","lust","lut","lute","lux","luxe","lwo","lyam","lyas","lye","lynn","lynx","lyon","lyra","lyre","lys","lyse","maam","mab","maba","mabi","mac","mace","mack","maco","mad","made","madi","mado","mae","mag","maga","mage","magh","magi","mah","maha","mahi","maia","maid","mail","maim","main","maja","majo","make","maki","mako","maku","mal","mala","male","mali","mall","malm","malo","malt","mam","mamo","man","mana","mand","mane","mang","mani","mank","mann","mano","mans","mant","manx","many","mao","map","mapo","mar","mara","marc","mare","mari","mark","marl","marm","maro","mars","mart","maru","mary","mas","masa","mash","mask","mass","mast","masu","mat","mate","math","mats","matt","maty","mau","maud","maul","maun","maux","maw","mawk","mawp","max","may","maya","mayo","maza","maze","mazy","mead","meak","meal","mean","meat","mede","meed","meek","meet","meg","mein","meio","mel","mela","meld","mele","mell","melt","mem","memo","men","mend","meng","ment","menu","meny","meo","mer","mere","merk","merl","mero","mes","mesa","mese","mesh","meso","mess","met","meta","mete","meum","mev","mew","mewl","mho","mian","miao","mias","mib","mica","mice","mick","mico","mid","mide","mids","miek","mien","miff","mig","mijl","mike","miki","mil","mila","mild","mile","milk","mill","milo","milt","mim","mima","mime","mimi","mimp","min","mina","mind","mine","ming","mink","mino","mint","minx","miny","mir","mira","mird","mire","mirk","miro","miry","mise","miss","mist","mite","mitt","mitu","mity","mix","mixe","mixy","moan","moat","mob","mock","mod","mode","moe","moed","moff","mog","mogo","moha","moho","mohr","moi","moil","moio","moit","mojo","moke","moki","moko","moky","mola","mold","mole","moll","molt","moly","mome","momo","mon","mona","mone","mong","monk","mono","mont","moo","mood","mool","moon","moop","moor","moot","mop","mope","moph","mor","mora","more","morg","morn","moro","mort","mose","moss","most","mot","mote","moth","mott","mou","moud","moul","moup","mout","move","mow","mown","mowt","moxa","moxo","moy","moyo","mrs","mru","much","muck","mud","mudd","muff","mug","muga","mugg","muid","muir","mule","mulk","mull","mult","mum","mump","mun","mund","mung","munj","munt","mura","mure","murk","mus","musa","muse","mush","musk","muss","must","muta","mute","muth","mutt","mux","muzo","muzz","mwa","mya","myal","myna","myra","myst","myth","myxa","myxo","naa","naam","nab","nabk","nabs","nabu","nace","nach","nae","nael","nag","naga","naid","naif","naig","naik","nail","naim","nain","naio","nair","nais","naja","nak","nake","nako","nam","nama","name","nan","nana","nane","nant","naos","nap","napa","nape","napu","nar","nard","nark","narr","nary","nash","nasi","nast","nat","nate","natr","natt","naut","nave","navy","naw","nawt","nay","naze","nazi","nea","neal","neap","neat","neb","neck","ned","nee","need","neem","neep","neer","neet","nef","nei","neif","neil","nejd","nell","nema","neo","neon","nep","nepa","neri","nese","nesh","ness","nest","net","nete","neth","neti","neve","nevo","new","news","newt","next","ngai","nhan","nias","nib","nibs","nice","nici","nick","nid","nide","nidi","nife","nig","nigh","nil","nile","nils","nim","nimb","nina","nine","ning","niog","nip","nipa","nit","nito","niue","nix","nizy","noa","noah","noam","nob","nobs","nock","nod","node","nodi","noel","nog","noil","noir","noll","nolo","noma","nome","non","nona","none","nook","noon","noop","nope","nor","nora","nori","norm","norn","nose","nosu","nosy","not","note","nou","noun","noup","nous","nova","novo","now","nowt","nowy","noxa","noy","nozi","nth","nub","nuba","nuda","nudd","nude","nuke","nul","null","numa","numb","nun","nupe","nut","nye","oaf","oak","oaky","oam","oar","oary","oast","oat","oath","oaty","oban","obe","obex","obey","obi","obit","oboe","obol","och","ocht","ock","oda","odal","odax","odd","odds","ode","odel","odic","odin","odor","ods","odso","odum","odyl","odz","oer","oes","ofer","off","ofo","oft","ogam","ogee","ogle","ogor","ogpu","ogre","ogum","ohia","ohio","ohm","oho","ohoy","oii","oil","oily","oime","oint","oka","okee","oket","oki","okia","okie","okra","olaf","olam","olax","old","ole","olea","oleg","oleo","olga","olid","olio","olla","olm","olof","olor","olpe","oman","omao","omar","omen","omer","omit","ona","onan","onca","once","ondy","one","oner","only","ons","onto","onus","onym","onyx","onza","oofy","ooid","oons","oont","oord","ooze","oozy","opah","opal","ope","open","opsy","opt","opus","ora","orad","oral","orb","orby","orc","orca","ordu","ore","orf","orgy","orle","orlo","orna","ort","ory","oryx","osc","ose","osse","otic","otis","oto","otto","otus","ouch","ouf","ough","our","ours","oust","out","ova","oval","oven","over","ovey","ovis","ovum","owd","owe","owen","ower","owk","owl","owly","own","owse","oxan","oxea","oxen","oxer","oxy","oxyl","oyer","ozan","paal","paar","paba","pac","paca","pace","pack","paco","pact","pad","paga","page","pah","paha","pahi","paho","paik","pail","pain","paip","pair","pais","pal","pala","pale","pali","pall","palm","palp","palt","paly","pam","pan","pand","pane","pang","pani","pank","pant","paon","pap","papa","pape","par","para","pard","pare","pari","park","parr","part","pash","pasi","pass","past","pat","pata","pate","path","pato","patu","paty","pau","paul","paup","paut","pave","pavo","pavy","paw","pawk","pawl","pawn","pax","pay","pea","peag","peai","peak","peal","pean","pear","peat","peba","pech","peck","ped","peda","pee","peed","peek","peel","peen","peep","peer","peg","pega","peho","pele","pelf","pell","pelt","pelu","pen","pend","penk","pent","peon","pep","pepo","per","peri","perk","perm","pern","pert","peru","pes","pesa","peso","pess","pest","pet","pete","peto","petr","peul","pew","pewy","pfui","phew","phi","phil","phit","phiz","pho","phoh","phon","phoo","phos","phot","phu","phut","pia","pial","pian","pic","pica","pice","pici","pick","pico","pict","pie","pied","pien","pier","piet","piff","pig","pik","pika","pike","piki","piky","pile","pili","pill","pilm","pily","pim","pima","pimp","pin","pina","pind","pine","ping","pink","pino","pint","piny","pip","pipa","pipe","pipi","pipy","pir","pirl","pirn","piro","pirr","pise","pish","pisk","piso","piss","pist","pit","pita","pith","pity","pix","pixy","pize","plak","plan","plap","plat","play","plea","pleb","pled","plew","plex","plim","plod","plop","plot","plow","ploy","plud","plug","plum","plup","plus","ply","poa","pob","pobs","pock","poco","pod","poe","poem","poet","pogo","pogy","poh","poha","poi","poil","poke","poky","pol","pole","polk","poll","polo","polt","poly","pom","pome","pomo","pomp","pon","pond","pone","pong","pont","pony","pooa","poof","pooh","pook","pool","poon","poop","poor","poot","pop","pope","pore","pork","porr","port","pory","pose","posh","poss","post","posy","pot","pote","pott","pouf","pour","pout","pow","pox","poxy","poy","prad","pram","prat","prau","pray","prep","prey","pria","prig","prim","pro","proa","prob","prod","prof","prog","proo","prop","prow","prue","pruh","prut","pry","psha","psi","pst","pua","puan","pub","puce","puck","pud","pudu","puff","pug","pugh","puja","puka","puke","puku","puky","pul","pule","puli","pulk","pull","pulp","pulu","puly","puma","pume","pump","pun","puna","pung","punk","puno","punt","puny","pup","pupa","pur","pure","purl","purr","puru","pus","push","puss","put","putt","puxy","puya","pya","pyal","pyic","pyin","pyke","pyla","pyr","pyre","pyro","pyx","qere","qeri","qoph","qua","quab","quad","quag","quan","quar","quat","quaw","quay","quei","quet","quey","quib","quid","quin","quip","quis","quit","quiz","qung","quo","quod","quop","quot","raad","rab","rabi","race","rach","rack","racy","rad","rada","rafe","raff","raft","rag","raga","rage","rah","raia","raid","raif","rail","rain","rais","raj","raja","rake","rakh","raki","raku","ralf","ram","rama","rame","rami","ramp","ran","rana","rand","rane","rang","rani","rank","rann","rant","rap","rape","rapt","rare","ras","rasa","rase","rash","rasp","rat","rata","rate","rath","rauk","raul","raun","rave","ravi","raw","rax","ray","raya","raze","razz","rea","read","reak","real","ream","reap","rear","reb","reck","rect","red","redd","rede","redo","ree","reed","reef","reek","reel","reem","reen","rees","reet","ref","reft","reg","reh","reid","reif","reim","rein","reis","reit","reki","rel","rely","remi","rend","renk","rent","renu","rep","repp","reps","resh","resp","rest","ret","reub","rev","reve","rex","rhe","rhea","rho","rhus","ria","rial","rib","ribe","ric","rice","rich","rick","rid","ride","rie","riem","rier","rife","riff","rifi","rift","rig","rik","rikk","rile","rill","rim","rima","rime","rimu","rimy","rind","rine","ring","rink","rio","riot","rip","ripa","ripe","rise","risk","risp","riss","rist","rit","rita","rite","riva","rive","rix","rixy","road","roam","roan","roar","rob","robe","roc","rock","rod","rodd","rode","roe","roed","roer","roey","rog","roi","roid","roil","roit","rok","roka","roke","roky","role","rolf","roll","rome","romp","ron","rond","rone","rong","rood","roof","rook","rool","room","roon","root","rope","ropp","ropy","rori","rory","rosa","rose","ross","rosy","rot","rota","rote","roto","roub","roud","roue","roun","roup","rout","rove","row","rowy","rox","roxy","roy","royt","rua","rub","rube","ruby","ruck","rud","rudd","rude","rudy","rue","ruen","ruer","ruff","rug","ruga","ruin","rukh","rule","rull","rum","rump","run","rune","rung","runt","rupa","ruru","rus","rusa","ruse","rush","rusk","russ","rust","rut","ruta","ruth","rux","ryal","rye","ryen","ryme","rynd","rynt","ryot","rype","saa","saad","saan","sab","saba","sabe","sac","sack","saco","sad","sade","sadh","sado","sadr","safe","safi","saft","sag","saga","sage","sago","sagy","sah","sahh","saho","sai","saic","said","sail","saim","sain","saip","sair","saj","sak","saka","sake","saki","sal","sale","salm","salp","salt","sam","same","samh","samp","san","sand","sane","sang","sank","sans","sant","sao","sap","sapa","sapo","sar","sara","sard","sare","sari","sark","sart","sasa","sash","sat","sate","sauf","saul","saum","saur","saut","save","saw","sawn","sawt","sax","saxe","say","saya","scab","scad","scam","scan","scap","scar","scat","scaw","scho","scob","scog","scot","scow","scry","scud","scug","scum","scun","scup","scur","scut","scye","scyt","sea","seah","seak","seal","seam","sean","sear","seat","seax","seba","sec","sech","seck","sect","see","seed","seek","seel","seem","seen","seep","seer","seg","sego","seid","seit","sele","self","sell","selt","seme","semi","sen","send","sent","seps","sept","ser","sera","serb","sere","serf","seri","sero","sert","sess","set","seta","seth","sett","sew","sewn","sex","sext","sexy","sey","sgad","sha","shab","shad","shag","shah","shai","sham","shan","shap","shat","shaw","shay","she","shea","shed","shee","shel","shen","sher","shi","shih","shik","shim","shin","ship","shiv","shlu","sho","shoa","shod","shoe","shog","shoo","shop","shoq","shor","shot","shou","show","shu","shug","shul","shun","shut","shy","sia","siak","sial","siam","sib","sic","sice","sick","sid","sida","side","sidi","sidy","sie","sier","sife","sift","sig","sigh","sign","sika","sike","sikh","sil","sile","silk","sill","silo","silt","sim","sima","sime","simp","sin","sina","sind","sine","sing","sinh","sink","siol","sion","sip","sipe","sir","sire","sis","sise","sish","sisi","siss","sist","sit","sita","site","sith","sium","siva","six","size","sizy","sizz","skag","skal","skat","skaw","skee","skef","skeg","skel","sken","skeo","skep","sker","skew","skey","ski","skid","skil","skim","skin","skip","skit","skiv","skoo","skua","skun","sky","skye","sla","slab","slad","slae","slag","slam","slap","slat","slav","slaw","slay","sleb","sled","slee","slew","sley","slid","slim","slip","slit","slob","slod","sloe","slog","slon","sloo","slop","slot","slow","slub","slud","slue","slug","slum","slur","slut","sly","sma","smee","smew","smit","smog","smug","smur","smut","snab","snag","snap","snaw","sneb","sned","snee","snew","snib","snig","snip","snob","snod","snog","snop","snot","snow","snub","snug","snum","snup","snur","sny","soak","soam","soap","soar","sob","soc","soce","sock","soco","sod","soda","sody","soe","sofa","soft","sog","soga","soh","soho","soil","soja","sok","soka","soke","sol","sola","sold","sole","soli","solo","soma","some","son","sond","song","sonk","sons","sook","sool","soon","soot","sop","sope","soph","sora","sorb","sore","sori","sorn","sort","sory","sosh","soso","soss","sot","sots","sou","soud","soul","soum","soup","sour","sov","sow","sowl","sown","sowt","soy","soya","spa","spad","spae","spak","span","spar","spat","spay","spec","sped","spet","spew","spex","spig","spin","spit","spiv","spor","spot","spry","spud","spug","spun","spur","sput","spy","sri","ssi","ssu","stab","stag","stam","stan","stap","star","staw","stay","steg","stem","sten","step","stet","stew","stey","stib","stid","stim","stir","stoa","stob","stod","stof","stog","stop","stot","stow","stra","stre","stu","stub","stud","stue","stug","stum","stun","stut","sty","styx","sub","such","suck","sud","sudd","suds","sue","suer","suet","suff","sufi","sugh","sugi","sui","suid","suit","suji","suk","suku","sula","suld","sulk","sull","sulu","sum","sumo","sump","sun","sune","sung","sunk","sunn","sunt","sup","supa","supe","sur","sura","surd","sure","surf","sus","susi","susu","suto","sutu","suu","suum","suwe","suz","suzy","svan","swa","swab","swad","swag","swam","swan","swap","swat","sway","swep","swig","swim","swiz","swob","swom","swot","swow","swum","syce","syd","sye","syed","sync","syne","syre","syrt","syun","taa","taal","taar","tab","tabu","tach","tack","tact","tad","tade","tae","tael","taen","taft","tag","taha","tahr","tai","tail","tain","tait","taj","take","takt","taku","taky","tal","tala","talc","tald","tale","tali","talk","tall","tam","tama","tame","tamp","tan","tana","tane","tang","tanh","tank","tano","tao","taos","tap","tapa","tape","taps","tapu","tar","tara","tare","tari","tarn","taro","tarp","tarr","tars","tart","tash","task","tass","tasu","tat","tate","tath","tatu","tau","taum","taun","taur","taut","tav","tave","tavy","taw","tawa","tawn","taws","tax","taxi","taxy","tay","tch","tche","tchi","tchu","tck","tea","tead","teak","teal","team","tean","teap","tear","teat","tebu","tec","teca","tech","teck","teco","ted","teda","tee","teel","teem","teen","teer","teet","teff","teg","teil","teju","tele","teli","tell","telt","tema","temp","ten","tend","teng","tent","tera","teri","term","tern","terp","tess","test","tete","teth","teuk","tew","tewa","text","tez","tha","thad","thai","than","thar","that","thaw","the","thea","theb","thee","them","then","theo","thew","they","thig","thin","thio","thir","this","tho","thob","thof","thon","thoo","thos","thou","thow","thro","thud","thug","thus","thy","tiam","tiao","tiar","tib","tic","tice","tick","tid","tide","tidy","tie","tied","tien","tier","tiff","tift","tig","tige","tiki","til","tile","till","tilt","tim","time","timo","tin","tina","tind","tine","ting","tink","tino","tint","tiny","tiou","tip","tipe","tire","tirl","tirr","tit","tite","titi","tivy","tiza","tji","toa","toad","toag","toat","toba","tobe","toby","tock","toco","tod","toda","todd","tode","tody","toe","toed","toff","toft","tofu","tog","toga","togs","togt","toho","toi","toil","toit","toke","toko","tol","told","tole","toll","tolt","tolu","tom","toma","tomb","tome","ton","tone","tong","tonk","tony","too","took","tool","toom","toon","toop","toot","top","tope","toph","topi","topo","tops","tor","tora","torc","tore","torn","toro","tort","toru","tory","tosh","tosk","toss","tost","tosy","tot","tote","toto","toty","tou","toug","toup","tour","tout","tow","towd","town","towy","tox","toxa","toy","toze","tra","trag","trah","tram","tran","trap","tray","tree","tref","trek","tret","trey","tri","trig","trim","trin","trio","trip","trix","trod","trog","tron","trot","trow","troy","trub","true","trug","trun","try","tryp","tryt","tsar","tshi","tsia","tst","tsun","tua","tuan","tub","tuba","tube","tuck","tue","tufa","tuff","tuft","tug","tui","tuik","tuke","tula","tule","tulu","tum","tume","tump","tun","tuna","tund","tune","tung","tunk","tuno","tunu","tuny","tup","tupi","tur","turb","turd","turf","turi","turk","turm","turn","turp","turr","tush","tusk","tut","tute","tuth","tuts","tutu","tuwi","tux","tuza","twa","twae","twal","twas","twat","tway","twee","twi","twig","twin","twit","two","tye","tyee","tyg","tyke","tymp","tynd","type","typo","typp","typy","tyre","tyro","tyrr","tyt","tyto","uang","ubi","ubii","uca","ucal","udal","udi","udic","udo","uds","ugh","ugly","uily","uji","uke","ula","ule","ulex","ull","ulla","ulmo","ulna","ulu","ulua","ulva","umbo","ume","ump","umph","umu","una","unal","unau","unbe","unca","unci","unco","unde","undo","undy","unie","unio","unit","unto","untz","unze","upas","updo","upgo","upla","upo","upon","ura","ural","uran","urao","urd","urde","urdu","ure","urea","urf","urge","uri","uria","uric","urn","urna","uro","urs","ursa","uru","urus","urva","usar","use","used","usee","user","ush","ust","usun","uta","utah","utai","utas","utch","ute","utu","utum","uva","uval","uvea","uvic","uvid","uzan","vade","vady","vag","vage","vai","vail","vain","vair","val","vale","vali","vall","vamp","van","vane","vang","vara","vare","vari","vary","vas","vasa","vase","vast","vasu","vat","vau","vayu","veal","veda","vee","veen","veep","veer","vega","vei","veil","vein","vela","vell","velo","vend","vent","veps","vera","verb","verd","veri","vern","vert","very","vest","vet","veta","veto","vex","vext","via","vial","vic","vice","vick","vie","vier","view","viga","vila","vile","vili","vill","vim","vina","vine","vino","vint","viny","viol","vip","vira","vire","virl","vis","visa","vise","vita","viti","viva","vive","vlei","voar","vod","voe","voet","vog","void","vol","vole","volt","vota","vote","vow","vug","vuln","vum","waac","waag","waar","wab","wabe","wabi","wac","wace","wack","waco","wad","wade","wadi","wae","waeg","waer","waf","wafd","waff","waft","wag","wage","wah","waif","waik","wail","wain","wait","waka","wake","wakf","waky","wale","wali","walk","wall","walt","wame","wamp","wan","wand","wane","wang","want","wany","wap","wapp","war","ward","ware","warf","wark","warl","warm","warn","warp","wart","wary","was","wase","wash","wasp","wast","wat","wath","watt","wauf","waul","waup","waur","wave","wavy","waw","wawa","wax","waxy","way","ways","wea","weak","weal","weam","wean","wear","web","wed","wede","wee","weed","week","weel","ween","weep","weet","weft","wega","wei","weir","weka","weki","weld","welf","welk","well","wels","welt","wem","wen","wend","wene","went","wept","wer","were","werf","weri","wert","wes","wese","west","wet","weta","weve","wey","wezn","wha","wham","whan","whap","whar","what","whau","whee","when","whet","whew","whey","whid","whig","whim","whin","whip","whir","whit","whiz","who","whoa","whom","whoo","whop","whud","whun","whup","whuz","why","whyo","wice","wick","wid","wide","widu","wife","wig","wild","wile","wilk","will","wilt","wily","wim","wime","win","wind","wine","wing","wink","wint","winy","wipe","wips","wir","wird","wire","wirl","wirr","wiry","wis","wise","wish","wisp","wiss","wist","wit","wite","with","wive","wiz","woad","woak","woan","wob","wod","wode","woe","woft","wog","woke","wold","wolf","womb","won","wone","wong","wont","woo","wood","woof","wool","woom","woon","wop","wops","word","wore","work","worm","worn","wort","wot","wote","wots","wouf","wove","wow","wowt","woy","wraf","wran","wrap","wraw","wren","wrig","writ","wro","wrox","wry","wud","wudu","wugg","wulk","wull","wun","wup","wur","wush","wusp","wuss","wust","wut","wuzu","wyde","wye","wyke","wyle","wyn","wynd","wyne","wynn","wype","wyss","wyve","xema","xina","xipe","xmas","xosa","xyla","xyst","yaba","yabu","yad","yade","yaff","yagi","yah","yair","yaje","yak","yaka","yalb","yale","yali","yam","yamp","yan","yana","yang","yank","yao","yap","yapa","yapp","yar","yarb","yard","yare","yark","yarl","yarm","yarn","yarr","yaru","yas","yat","yate","yati","yaud","yava","yaw","yawl","yawn","yawp","yaws","yawy","yaya","ycie","yday","yea","yeah","yean","year","yeat","yed","yede","yee","yeel","yees","yegg","yeld","yelk","yell","yelm","yelp","yelt","yen","yeni","yeo","yep","yer","yerb","yerd","yere","yerk","yern","yes","yese","yeso","yest","yet","yeta","yeth","yeuk","yew","yex","yez","yid","yigh","yill","yilt","yin","yip","yird","yirk","yirm","yirn","yirr","yis","yite","yobi","yock","yodh","yoe","yoga","yogh","yogi","yoi","yok","yoke","yoky","yolk","yom","yon","yond","yont","yook","yoop","yor","yore","york","yot","yote","you","youd","youl","youp","your","yow","yowl","yowt","yox","yoy","yuan","yuca","yuck","yuft","yuga","yuh","yuit","yuki","yule","yuma","yun","yurt","yus","yutu","zac","zach","zad","zag","zain","zak","zan","zant","zany","zar","zarf","zarp","zat","zati","zax","zea","zeal","zebu","zed","zee","zeed","zein","zeke","zel","zemi","zen","zend","zenu","zep","zer","zero","zest","zeta","zeus","zig","zimb","zinc","zing","zink","zion","zip","zipa","zips","zira","zizz","zoa","zobo","zoea","zogo","zoic","zoid","zoll","zone","zoo","zoom","zoon","zulu","zuni","zuza","zyga","zyme"];var o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),s=new Uint8Array(16);function a(){if(!o)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(s)}for(var l=[],u=0;u<256;++u)l[u]=(u+256).toString(16).substr(1);var c=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var o=0;o<16;++o)t[i+o]=r[o];return t||function(e,t){var n=t||0,i=l;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}(r)};function h(e){return document.createTextNode(e)}function d(e,t,n={}){const i=document.createElement("select");return w(i,e,t,n),i}function f(e,t){const n=document.createElement("option");return w(n,e,t),n}function p(e,t,n={}){const i=document.createElement("div");return w(i,e,t,n),i}function g(e,t={}){const n=document.createElement("canvas");return w(n,e,[],t),n}function m(e,t,n={}){const i=document.createElement("button");return w(i,e,t,n),i}function v(e,t={}){const n=document.createElement("input");return n.setAttribute("type","checkbox"),w(n,e,[],t),n}function y(e,t={}){const n=document.createElement("input");return n.setAttribute("type","color"),w(n,e,[],t),n}function w(e,t,n,i={}){Object.entries(t).forEach(([t,n])=>{n&&e.setAttribute(t,n)}),Object.entries(i).forEach(([t,n])=>e.addEventListener(t,n));for(let t=0;t<n.length;t++)e.appendChild(n[t])}function b(e,t){t||(t=document);let n=t.querySelector(e);if(!n)throw"No element for query selector "+e;return n}let _=new Map;function x(e){const t=e.getAttribute("data-paneer-id");if(t)return _.get(t)||void 0}class k{constructor(e){this._type="DOM",this.label="DOM",e||(e=p({},[])),this._element=e,this._id=c(),this._element.setAttribute("data-paneer-id",this._id),_.set(this._id,this)}get element(){return this._element}get id(){return this._id}get style(){return this._element.style}set style(e){for(let t in e){const n=e[t];this._element.style[t]=n||""}}remove(e){try{this.element.removeChild(e.element)}catch(e){}return this}append(e){return this.element.appendChild(e.element),this}replace(e){return this.element.replaceWith(e.element),this}insert(e){return this.element.insertAdjacentElement("afterend",e.element),this}next(e){let t=this._element.nextElementSibling;if(t){const n=x(t);if(e(n))return n}}previous(e){let t=this._element.previousElementSibling;if(t){const n=x(t);if(e(n))return n}}*nextSiblings(e){let t=this._element.nextElementSibling;for(;t;){const n=x(t);e(n)&&(yield n),t=t.nextElementSibling}}*previousSiblings(e){let t=this._element.previousElementSibling;for(;t;){const n=x(t);e(n)&&(yield n),t=t.nextElementSibling}}resize(){[...this.descendents(C,1)].forEach(e=>e.resize())}Ancestor(e){const t=this.ancestor(e);if(!t)throw"BAD ANCESTOR QUERY";return t}Descendent(e,t=1/0){const n=this.descendent(e,t);if(!n)throw"BAD DESCENDENT QUERY";return n}ancestor(e){return this.ancestors(e).next().value}descendent(e,t=1/0){return this.descendents(e,t).next().value}*ancestors(e){let t=this.element.parentElement;for(;t;){const n=x(t);n&&e(n)&&(yield n),t=t.parentElement}}*descendents(e,t=1/0){let n,i=[];for(i.push({el:this.element,depth:1});i.length>0&&(n=i.shift(),n);)for(let r of n.el.children){const o=x(r);o&&e(o)&&(yield o),n.depth<t&&i.push({el:r,depth:n.depth+1})}}}function C(e){return!0}class S extends k{constructor(e){const t=function(e,t={}){const n=document.createElement("img");return w(n,e,[],t),n}({src:e.icon});t.style.width="100%",t.style.height="100%";const n=m({alt:e.alt},[t],{click:e.onClick});n.style.padding="0px",n.style.border="1px solid black",super(n)}}class M extends k{constructor(e){super(),this.aspectRatio=e.aspectRatio,this.width=e.width,this.resize()}resize(){this.element.style.display="grid",this.element.style.gridTemplateColumns=`repeat(auto-fill, ${this.width})`,this.element.style.gridTemplateRows=`repeat(auto-fill, calc(${this.width} / ${this.aspectRatio}))`,super.resize()}add(e){this.append(new S(e))}}const T=["Chartreuse","yellowgreen","Aquamarine","cyan","red","green","blue","pink"];class z extends k{constructor(e){super(),this.label="Layers",this.buttons=new M({aspectRatio:1,width:"2em"}),this.buttons.add({alt:"Add Layer",icon:"icons/plus.svg",onClick:()=>{new i.Layer,this.refreshLayers()}}),this.buttons.add({alt:"Move Forward",icon:"icons/forward.svg",onClick:()=>{this.moveForward()}}),this.buttons.add({alt:"Move Back",icon:"icons/back.svg",onClick:()=>{this.moveBack()}}),this.layers=new k,this.style.height="100%",this.append(this.buttons),this.append(this.layers),this.layers.style.overflow="scroll",this.labels=new Map,this.refreshLayers=this.refreshLayers.bind(this),this.refreshLayers(),e.view.on("updated",this.refreshLayers)}moveForward(){if(0==i.project.selectedItems.length){const e=i.project.activeLayer,t=Math.min(i.project.activeLayer.index+1,i.project.layers.length);return i.project.insertLayer(t,i.project.activeLayer),void e.activate()}i.project.selectedItems.forEach(e=>{const t=e.parent.children.indexOf(e);t<e.parent.children.length-1&&e.parent.insertChild(t+1,e)})}moveBack(){if(0==i.project.selectedItems.length){const e=i.project.activeLayer,t=Math.max(i.project.activeLayer.index-1,0);return i.project.insertLayer(t,i.project.activeLayer),void e.activate()}i.project.selectedItems.forEach(e=>{const t=e.parent.children.indexOf(e);t>0&&e.parent.insertChild(t-1,e)})}refreshLayers(){const e=new Set,t=i.project.layers.map(e=>({item:e,depth:0}));for(;t.length>0;){const n=t.pop();if(!n)break;const{item:i,depth:r}=n;e.add(i.id);let o=this.labels.get(i.id);o||(o=new L(this,i,r),this.labels.set(i.id,o)),o.depth=r,o.resize(),this.layers.append(o),i.children&&o.open&&i.children.forEach(e=>{t.push({item:e,depth:r+1})})}const n=[];for(const t of this.labels.keys())e.has(t)||n.push(t);n.forEach(e=>{const t=this.labels.get(e);t&&(this.layers.remove(t),this.labels.delete(e))})}resize(){super.resize()}serialize(){return{type:"layers"}}static deserialize(e,t){return new z(window.ctx.viewport)}}class L extends k{constructor(e,t,n){super(),this.layers=e,this.item=t,this.depth=n,this.style.display="flex",this.style.flexDirection="row",this.style.width="100%",this.container=new k,this.container.style.width="100%",this.container.style.display="flex",this.container.style.justifyContent="space-between",this.container.style.flexDirection="row",this.container.style.padding=".2em",this.spacing=new k,this.main=new k,this.main.style.cursor="default",this.main.style.width="100%",this.main.style.paddingLeft=".2em",this.main.style.userSelect="none",this.main.element.addEventListener("click",e=>{"Layer"==t.className?(t.activate(),this.layers.refreshLayers()):t.selected&&e.shiftKey?t.selected=!1:(e.shiftKey||t.project.deselectAll(),t.selected=!0)}),this.controls=new M({aspectRatio:1,width:"1.4em"}),this.controls.add({alt:"visibility",icon:"icons/eye.png",onClick:()=>{this.item.visible=!this.item.visible}}),this.open=!0,this.clicker=new k,this.clicker.element.addEventListener("click",()=>{this.open=!this.open,this.layers.refreshLayers()}),this.clicker.style.flex="0",this.clicker.style.userSelect="none",this.container.append(this.clicker),this.container.append(this.main),this.container.append(this.controls),this.append(this.spacing),this.append(this.container),this.resize()}resize(){this.spacing.style.width=`${8*this.depth}px`,this.container.style.backgroundColor=T[this.depth%T.length],this.item.name||(this.item.name=this.item.className.slice(0,1)+r[Math.floor(Math.random()*r.length)]),this.main.element.textContent=this.item.name,this.main.style.fontWeight=this.item.id==this.item.project.activeLayer.id||"Layer"!=this.item.className&&this.item.selected?"bold":"normal",this.item.children?this.clicker.element.textContent=this.open?"":"":this.clicker.element.textContent="",super.resize()}}class A extends k{constructor(e,t){super(),this.label="Tools",this.grid=new M({aspectRatio:1,width:"7vmin"}),this.append(this.grid),this.grid.add(this.toolOptions(function(e,t){const n=new i.Tool;let r;return n.name="select",t.bind("s",{},()=>n.activate()),n.onMouseDown=function(e){var t=i.project.hitTest(e.point,{tolerance:2,fill:!0,stroke:!0});t?(e.modifiers.shift?t.item.selected?t.item.selected=!1:t.item.selected=!0:(t.item.selected||i.project.deselectAll(),t.item.selected=!0),e.modifiers.alt&&i.project.selectedItems.forEach(e=>{e.clone().selected=!1})):(e.modifiers.shift||i.project.deselectAll(),r=new i.Shape.Rectangle(e.point,new i.Size(0,0)),r.removeOnUp(),r.strokeColor=new i.Color("red"),r.strokeWidth=1,r.fillColor=null)},n.onMouseDrag=function(e){r?(r.size=new i.Size(e.downPoint.subtract(e.point)),r.position=e.downPoint.subtract(e.downPoint.subtract(e.point).divide(2))):i.project.selectedItems.forEach(t=>{t.translate(e.delta)})},n.onMouseUp=function(t){r?(i.project.activeLayer.getItems({inside:r.bounds}).forEach(e=>e.selected=!0),r=void 0):i.project.selectedItems.length>0&&t.downPoint.getDistance(t.point)&&e.commit()},n}(e,t),"Select","icons/select.png")),this.grid.add(this.toolOptions(function(e,t){const n=new i.Tool;let r,o,s;n.name="point";let a=0;return n.onMouseDown=function(e){a+=1;let t=i.project.hitTest(e.point,{selected:!0,handles:!0,match:e=>"handle-in"==e.type?!e.segment.handleIn.isZero():!e.segment.handleOut.isZero()});return!t||"handle-in"!=t.type&&"handle-out"!=t.type?(t=i.project.hitTest(e.point,{segments:!0,match:e=>e.item.selected}),t&&"segment"==t.type?(i.project.selectedItems.forEach(e=>{e.selected=!1,e.selected=!0}),o=t.type,s=t.segment,void(s.selected=!0)):(t=i.project.hitTest(e.point,{fill:!0,stroke:!0}),void(t?e.modifiers.shift?t.item.selected?t.item.selected=!1:t.item.selected=!0:(t.item.selected||i.project.deselectAll(),t.item.selected=!0):(e.modifiers.shift||i.project.deselectAll(),r=new i.Shape.Rectangle(e.point,new i.Size(0,0)),r.removeOnUp(),r.strokeColor=new i.Color("red"))))):(o=t.type,s=t.segment,void(s.selected=!0))},n.onMouseDrag=function(e){if(r)r.size=new i.Size(e.downPoint.subtract(e.point)),r.position=e.downPoint.subtract(e.downPoint.subtract(e.point).divide(2));else if(s&&o)if(a=0,"handle-in"==o){const t=s.handleIn.length,n=s.handleIn.angle;s.handleIn=s.handleIn.add(e.delta);const i=s.handleIn.length,r=s.handleIn.angle;s.handleOut.length*=i/t,s.handleOut.angle+=r-n}else if("handle-out"==o){const t=s.handleOut.length,n=s.handleOut.angle;s.handleOut=s.handleOut.add(e.delta);const i=s.handleOut.length,r=s.handleOut.angle;s.handleIn.length*=i/t,s.handleIn.angle+=r-n}else s.point=s.point.add(e.delta)},n.onMouseUp=function(t){r?(i.project.activeLayer.getItems({inside:r.bounds}).forEach(e=>e.selected=!0),r=void 0):s&&o&&(2==a&&("segment"==o?s.remove():"handle-in"==o?s.handleIn=new i.Point(0,0):s.handleOut=new i.Point(0,0),a=0),s=void 0,o=void 0,e.commit())},n.onMouseMove=function(){a=0},n}(e),"Point","icons/point.png")),this.grid.add(this.toolOptions(function(e,t){const n=new i.Tool;let r,o;return n.name="pen",t.bind("p",{},()=>n.activate()),n.minDistance=1,n.onMouseDown=function(e){r?r.lastSegment.point.isClose(e.point,6)?r=void 0:r.firstSegment.point.isClose(e.point,6)?(r.closePath(),o=r.firstSegment,r=void 0):(r.add(e.point),o=r.lastSegment):(i.project.deselectAll(),r=new i.Path([e.downPoint]),o=r.firstSegment,r.selected=!0)},n.onMouseDrag=function(e){o&&(o.selected=!0,o.handleIn=e.downPoint.subtract(e.point),o.handleOut=o.handleIn.multiply(-1))},n.onMouseUp=function(t){e.commit()},n}(e,t),"Pen","icons/pen.png")),this.grid.add(this.toolOptions(function(e,t){const n=new i.Tool;let r;return n.name="freehand",t.bind("f",{},()=>n.activate()),n.minDistance=1,n.onMouseDown=function(e){i.project.deselectAll(),r=new i.Path([e.downPoint]),r.selected=!0},n.onMouseDrag=function(e){r&&(r.add(e.point),e.modifiers.shift?r.closed=!0:(r.closed=!1,r.fillColor=null))},n.onMouseUp=function(t){r&&(r.simplify(),r=void 0,e.commit())},n}(e,t),"Pencil","icons/pencil.png")),this.grid.add(this.toolOptions(function(e,t){const n=new i.Tool;let r;return n.name="elipse",t.bind("e",{},()=>n.activate()),n.onMouseDown=function(e){i.project.deselectAll()},n.onMouseDrag=function(e){r&&r.remove(),r=e.modifiers.shift?new i.Path.Circle({center:e.downPoint,radius:e.downPoint.getDistance(e.point)}):new i.Path.Ellipse({center:e.downPoint,radius:e.downPoint.subtract(e.point)}),r.style=i.project.currentStyle},n.onMouseUp=function(t){r&&(r.selected=!0),r=void 0,e.commit()},n}(e,t),"Elipse","icons/elipse.png")),this.grid.add(this.toolOptions(function(e,t){const n=new i.Tool;let r;return n.name="rectangle",t.bind("r",{},()=>n.activate()),n.onMouseDown=function(e){i.project.deselectAll()},n.onMouseDrag=function(e){if(r&&r.remove(),e.modifiers.shift){let n=e.downPoint.getDistance(e.point)*Math.sqrt(2)/2;var t=e.point.subtract(e.downPoint).normalize().round();0==Math.abs(t.x)&&(t.x=1),0==Math.abs(t.y)&&(t.y=1),t=t.multiply(n).add(e.downPoint),r=new i.Path.Rectangle({from:e.downPoint,to:t})}else r=new i.Path.Rectangle(e.downPoint,e.point)},n.onMouseUp=function(t){r&&(r.selected=!0),r=void 0,e.commit()},n}(e,t),"Rectangle","icons/rectangle.png")),this.append(new O(e))}toolOptions(e,t,n){return{icon:n,alt:t,onClick:()=>e.activate()}}refresh(){}serialize(){return{type:"toolbelt"}}static deserialize(e,t){const n=window.ctx;return new A(n.history,n.keyboard)}}class O extends k{constructor(e){super(),this.element.append(function(e,t={}){const n=document.createElement("input");return n.setAttribute("type","range"),w(n,e,[],t),n}({value:"1",min:"0",max:"50",step:".01"},{input:e=>{i.project.currentStyle.strokeWidth=e.target.value,i.project.selectedItems.forEach(e=>{e.strokeWidth=i.project.currentStyle.strokeWidth}),i.project.view.requestUpdate()},change:t=>e.commit()})),this.element.append(y({value:"#000000"},{input:e=>{i.project.currentStyle.strokeColor=e.target.value,i.project.selectedItems.forEach(e=>{e.strokeColor=i.project.currentStyle.strokeColor}),i.project.view.requestUpdate()},change:t=>e.commit()})),this.element.append(y({value:"#FFFFFF"},{input:e=>{i.project.currentStyle.fillColor=e.target.value,i.project.selectedItems.forEach(e=>{e.fillColor=i.project.currentStyle.fillColor}),i.project.view.requestUpdate()},change:t=>e.commit()}))}}var P=n(1),I=n.n(P);n(7),n(9),n(11),n(12),n(14),n(15),n(17);class E extends k{constructor(e,t){super(),this.label="Code",this.config={tabSize:4,lineNumbers:!0,mode:{name:"javascript",globalVars:!0},extraKeys:{"Ctrl-Space":"autocomplete"},theme:"neat",viewportMargin:1/0},this.editor=I()(this.element,this.config),this.style.fontSize="2em",this.style.height="100%",this.editorDiv=this.element.firstElementChild,e.bind("ctrl+enter",{global:!0},e=>{e.preventDefault(),this.execute(),t.commit()}),this.editor.setSize("100%","100%"),this.editor.refresh()}resize(){super.resize(),this.editor.refresh()}execute(){try{i.execute(this.editor.getValue())}catch(e){const t=e;console.log(t.name,t.message)}}serialize(){return{type:"editor",value:this.editor.getValue()}}static deserialize(e,t){const n=window.ctx,i=new E(n.keyboard,n.history);return i.editor.setValue(e.value),i}}class j extends k{constructor(){super(function(e,t={}){const n=document.createElement("textarea");return w(n,e,[],t),n}({readonly:"true"})),this.label="Console";const e=this.element;this.element.style.width="100%",this.element.style.height="100%",this.element.style.border="none",this.element.style.resize="none",window.console={log:(...t)=>{e.value+="> "+JSON.stringify(t)+"\n",e.scrollTop=e.scrollHeight},error:(...t)=>{e.value+="> "+JSON.stringify(t)+"\n",e.scrollTop=e.scrollHeight},clear:()=>{e.value=""},warn:(...t)=>{e.value+="> "+JSON.stringify(t)+"\n",e.scrollTop=e.scrollHeight}}}serialize(){return{type:"domconsole"}}static deserialize(e,t){return new j}}class N{constructor(e){this.project=e,this.history=[],this.present=0}commit(){this.history=[...this.history.slice(0,this.present+1)],this.history.push(this.project.exportJSON({asString:!0})),this.present=this.history.length-1}undo(){this.present<0||(this.present=this.present-1,this.project.deselectAll(),this.project.clear(),this.project.importJSON(this.history[this.present]),this.reselect())}redo(){this.present>=this.history.length-1||(this.present=this.present+1,this.project.deselectAll(),this.project.clear(),this.project.importJSON(this.history[this.present]),this.reselect())}reselect(){const e=[...this.project.selectedItems];e.filter(e=>"Layer"==e.className).forEach(e=>e.selected=!1),e.filter(e=>"Layer"!=e.className).forEach(e=>e.selected=!0)}}class D extends k{constructor(e,t){super(),this.label="Preview",this.canvas=g({}),this.element.append(this.canvas),this.element.style.position="absolute",this.element.style.top="0",this.element.style.bottom="0",this.element.style.left="0",this.element.style.right="0",this.view=new i.CanvasView(e,this.canvas),this.view.drawSelection=!1,this.viewport=t,this.view.on("updated",this.onViewUpdated.bind(this)),this.viewport.view.on("changed",this.resize.bind(this)),this.viewport.view.on("updated",()=>{this.view.markDirty()}),this.view.on("mousedown",this.moveviewport.bind(this)),this.view.on("mousedrag",this.moveviewport.bind(this)),this.view.on("mouseup",this.moveviewport.bind(this))}onViewUpdated(){this.view.rawDraw((e,t)=>{e.save(),e.lineWidth=1;let n=t.transform(this.viewport.page.bounds.topLeft),i=t.transform(this.viewport.page.bounds.bottomRight);e.fillStyle="#999999";let r=new Path2D;r.rect(n.x,n.y,i.x-n.x,i.y-n.y),r.rect(0,0,this.canvas.width,this.canvas.height),e.clip(r,"evenodd"),e.fillRect(0,0,this.canvas.width,this.canvas.height),e.restore(),e.save(),n=t.transform(this.viewport.project.view.bounds.topLeft),i=t.transform(this.viewport.project.view.bounds.bottomRight),e.strokeStyle="#009dec",e.strokeRect(n.x,n.y,i.x-n.x,i.y-n.y),e.restore()})}resize(){window.requestAnimationFrame(()=>{var e=this.element.getBoundingClientRect();if(!e)return;this.view.viewSize=new i.Size(e.width,e.height);const t=this.viewport.page.bounds.topLeft.x,n=this.viewport.page.bounds.topLeft.y,r=this.viewport.page.bounds.bottomRight.x,o=this.viewport.page.bounds.bottomRight.y;this.view.center=new i.Point(t+(r-t)/2,n+(o-n)/2);var s=e.width/(2*Math.max(this.view.center.x-t,r-this.view.center.x)*1.2),a=e.height/(2*Math.max(this.view.center.y-n,o-this.view.center.y)*1.2);const l=Math.min(s,a);this.view.scaling=new i.Point(l,l)})}moveviewport(e){this.viewport.page.bounds.contains(e.point),this.viewport.view.center=e.point,e.stop()}serialize(){return{type:"preview"}}static deserialize(e,t){const n=window.ctx;return new D(i.project,n.viewport)}}class R extends k{constructor(){super(),this.label="Canvas",this.element.style.overflow="hidden",this.mainCanvas=g({}),this.backgroundCanvas=g({}),this.element.appendChild(this.backgroundCanvas),this.element.appendChild(this.mainCanvas),this.element.style.pointerEvents="all",this.element.style.position="absolute",this.element.style.top="0px",this.element.style.left="0px",this.element.style.bottom="0px",this.element.style.right="0px",this.mainCanvas.style.position="absolute",this.mainCanvas.style.top="0px",this.mainCanvas.style.left="0px",this.mainCanvas.style.bottom="0px",this.mainCanvas.style.right="0px",this.mainCanvas.setAttribute("tabindex","0"),this.mainCanvas.addEventListener("click",e=>{this.mainCanvas.focus()}),i.setup(this.mainCanvas),this.project=i.project,this.view=i.project.view;const e=g({id:"canvaspage"});this.page=new i.CanvasView(i.project,e),this.page.viewSize=new i.Size(600,400),this.page.drawSelection=!1,this.page.on("changed",()=>this.centerPage()),this.page.element.style.imageRendering="pixelated",this.view.on("updated",this.onViewUpdated.bind(this)),window.addEventListener("wheel",this.onScroll.bind(this)),window.onresize=()=>this.resize()}onViewUpdated(){this.view.rawDraw((e,t)=>{e.save();const n=t.transform(this.page.bounds.topLeft),i=t.transform(this.page.bounds.bottomRight);e.fillStyle="#99999999";let r=new Path2D;r.rect(n.x,n.y,i.x-n.x,i.y-n.y),r.rect(0,0,this.view.element.width,this.view.element.height),e.clip(r,"evenodd"),e.fillRect(0,0,this.view.element.width,this.view.element.height),e.restore()})}resize(){window.requestAnimationFrame(()=>{var e,t=null===(e=this.view.element.parentElement)||void 0===e?void 0:e.getBoundingClientRect();if(!t)return;this.view.viewSize=new i.Size(t.width,t.height);const n=this.backgroundCanvas.getContext("2d");if(!n)return;const r=this.makeBgPattern(n);if(this.backgroundCanvas.width=t.width,this.backgroundCanvas.height=t.height,!n)throw"No background context";n.fillStyle=r||"white",n.fillRect(0,0,t.width,t.height)})}makeBgPattern(e){const t=document.createElement("canvas"),n=t.getContext("2d");return n?(t.width=10,t.height=10,n.fillStyle="#aaa",n.fillRect(0,0,t.width/2,t.height/2),n.fillRect(t.width/2,t.height/2,t.width,t.height),e.createPattern(t,"repeat")):null}centerPage(){window.requestAnimationFrame(()=>{this.view.bounds.width<this.view.bounds.height?this.view.zoom=this.view.bounds.height/(1.1*this.page.bounds.height):this.view.zoom=this.view.bounds.width/(1.1*this.page.bounds.width),this.view.center=new i.Point(this.page.bounds.left+this.page.bounds.width/2,this.page.bounds.top+this.page.bounds.height/2)})}onScroll(e){if(e.target!=this.mainCanvas)return;let t,n;e.stopPropagation(),e.preventDefault(),this.view.bounds.width>this.view.bounds.height?(t=this.view.viewSize.height/(2*this.page.viewSize.height),n=this.view.viewSize.height/(.2*this.page.viewSize.height)):(t=this.view.viewSize.width/(2*this.page.viewSize.width),n=this.view.viewSize.width/(.2*this.page.viewSize.width));let r=Math.min(Math.max(t,this.view.zoom+.1*e.deltaY),n),o=this.view.element.getBoundingClientRect(),s=new i.Point(e.x-o.x,e.y-o.y),a=this.view.viewToProject(s);this.view.zoom=r;let l=this.view.viewToProject(s),u=this.view.center.add(a.subtract(l));this.view.center=u}serialize(){return{type:"viewport"}}static deserialize(e,t){return window.ctx.viewport}}class F extends k{constructor(e){super(),this.label="Save",this.page=e,this.element.appendChild(d({id:"savemodeselector"},[f({value:"png",selected:"true"},[h("png")]),f({value:"svg"},[h("svg")]),f({value:"json"},[h("json")]),f({value:"local"},[h("local")])])),this.element.appendChild(m({},[h("save")],{click:()=>this.save()}))}save(){let e;switch(b("#savemodeselector").value){case"png":this.page.markDirty(),this.page.on("updated",function e(){let t=this.page.element.toDataURL();this.page.off("updated",e),fetch(t).then(e=>e.blob()).then(e=>B(e,"image.png"))}.bind(this));break;case"svg":let t=i.project.exportSVG({asString:!0,bounds:this.page.bounds});e=new Blob([t],{type:"image/svg"}),B(e,"image.svg");break;case"json":e=new Blob([i.project.exportJSON({asString:!0})],{type:"text/json"}),B(e,"image.json");break;case"local":const n=i.project.exportJSON({asString:!0});window.localStorage.setItem("saved",n)}}serialize(){return{type:"save"}}static deserialize(e,t){const n=window.ctx;return new F(n.viewport.page)}}function B(e,t){const n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=t||"download";const r=()=>{setTimeout(()=>{URL.revokeObjectURL(n),i.removeEventListener("click",r)},150)};return i.addEventListener("click",r,!1),i.click(),i}class H extends k{constructor(e){super(),this.label="Load",this.fileUpload=this.fileUpload.bind(this),this.element.appendChild(p({},[v({id:"loadclear",checked:"true"},{}),h("Clear on load")])),this.element.appendChild(m({},[h("load")],{click:()=>this.load()}))}load(){var e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});b("#fileInput").addEventListener("change",this.fileUpload),b("#fileInput").dispatchEvent(e)}fileUpload(){const e=b("#fileInput");e.removeEventListener("change",this.fileUpload);const t=e.files;if(t&&0!==t.length){b("#loadclear").checked&&i.project.clear();for(var n=0;n<t.length;n++){const e=t[n];"image/svg+xml"==e.type?i.project.importSVG(URL.createObjectURL(e),e=>{this.page.viewSize=e.bounds.size.clone()}):"image/png"==e.type||"image/jpeg"==e.type?new i.Raster(URL.createObjectURL(e)).smoothing=!1:console.log(e.type)}}}loadlocal(){const e=window.localStorage.getItem("saved");e&&(b("#loadclear").checked&&i.project.clear(),i.project.importJSON(e),i.project.deselectAll())}serialize(){return{type:"load"}}static deserialize(e,t){const n=window.ctx;return new H(n.viewport.page)}}var W="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function V(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on".concat(t),(function(){n(window.event)}))}function U(e,t){for(var n=t.slice(0,t.length-1),i=0;i<n.length;i++)n[i]=e[n[i].toLowerCase()];return n}function q(e){"string"!=typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}for(var G={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,"":20,",":188,".":190,"/":191,"`":192,"-":W?173:189,"=":W?61:187,";":W?59:186,"'":222,"[":219,"]":221,"\\":220},$={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},K={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Z={16:!1,18:!1,17:!1,91:!1},X={},Y=1;Y<20;Y++)G["f".concat(Y)]=111+Y;var J=[],Q="all",ee=[],te=function(e){return G[e.toLowerCase()]||$[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function ne(e){Q=e||"all"}function ie(){return Q||"all"}var re=function(e){var t=e.key,n=e.scope,i=e.method,r=e.splitKey,o=void 0===r?"+":r;q(t).forEach((function(e){var t=e.split(o),r=t.length,s=t[r-1],a="*"===s?"*":te(s);if(X[a]){n||(n=ie());var l=r>1?U($,t):[];X[a]=X[a].map((function(e){return i&&e.method!==i||e.scope!==n||!function(e,t){for(var n=e.length>=t.length?e:t,i=e.length>=t.length?t:e,r=!0,o=0;o<n.length;o++)-1===i.indexOf(n[o])&&(r=!1);return r}(e.mods,l)?e:{}}))}}))};function oe(e,t,n){var i;if(t.scope===n||"all"===t.scope){for(var r in i=t.mods.length>0,Z)Object.prototype.hasOwnProperty.call(Z,r)&&(!Z[r]&&t.mods.indexOf(+r)>-1||Z[r]&&-1===t.mods.indexOf(+r))&&(i=!1);(0!==t.mods.length||Z[16]||Z[18]||Z[17]||Z[91])&&!i&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function se(e){var t=X["*"],n=e.keyCode||e.which||e.charCode;if(ae.filter.call(this,e)){if(93!==n&&224!==n||(n=91),-1===J.indexOf(n)&&229!==n&&J.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var n=K[t];e[t]&&-1===J.indexOf(n)?J.push(n):!e[t]&&J.indexOf(n)>-1&&J.splice(J.indexOf(n),1)})),n in Z){for(var i in Z[n]=!0,$)$[i]===n&&(ae[i]=!0);if(!t)return}for(var r in Z)Object.prototype.hasOwnProperty.call(Z,r)&&(Z[r]=e[K[r]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===J.indexOf(17)&&J.push(17),-1===J.indexOf(18)&&J.push(18),Z[17]=!0,Z[18]=!0);var o=ie();if(t)for(var s=0;s<t.length;s++)t[s].scope===o&&("keydown"===e.type&&t[s].keydown||"keyup"===e.type&&t[s].keyup)&&oe(e,t[s],o);if(n in X)for(var a=0;a<X[n].length;a++)if(("keydown"===e.type&&X[n][a].keydown||"keyup"===e.type&&X[n][a].keyup)&&X[n][a].key){for(var l=X[n][a],u=l.splitKey,c=l.key.split(u),h=[],d=0;d<c.length;d++)h.push(te(c[d]));h.sort().join("")===J.sort().join("")&&oe(e,l,o)}}}function ae(e,t,n){J=[];var i=q(e),r=[],o="all",s=document,a=0,l=!1,u=!0,c="+";for(void 0===n&&"function"==typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(o=t.scope),t.element&&(s=t.element),t.keyup&&(l=t.keyup),void 0!==t.keydown&&(u=t.keydown),"string"==typeof t.splitKey&&(c=t.splitKey)),"string"==typeof t&&(o=t);a<i.length;a++)r=[],(e=i[a].split(c)).length>1&&(r=U($,e)),(e="*"===(e=e[e.length-1])?"*":te(e))in X||(X[e]=[]),X[e].push({keyup:l,keydown:u,scope:o,mods:r,shortcut:i[a],method:n,key:i[a],splitKey:c});void 0!==s&&!function(e){return ee.indexOf(e)>-1}(s)&&window&&(ee.push(s),V(s,"keydown",(function(e){se(e)})),V(window,"focus",(function(){J=[]})),V(s,"keyup",(function(e){se(e),function(e){var t=e.keyCode||e.which||e.charCode,n=J.indexOf(t);if(n>=0&&J.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&J.splice(0,J.length),93!==t&&224!==t||(t=91),t in Z)for(var i in Z[t]=!1,$)$[i]===t&&(ae[i]=!1)}(e)})))}var le={setScope:ne,getScope:ie,deleteScope:function(e,t){var n,i;for(var r in e||(e=ie()),X)if(Object.prototype.hasOwnProperty.call(X,r))for(n=X[r],i=0;i<n.length;)n[i].scope===e?n.splice(i,1):i++;ie()===e&&ne(t||"all")},getPressedKeyCodes:function(){return J.slice(0)},isPressed:function(e){return"string"==typeof e&&(e=te(e)),-1!==J.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,n=t.tagName,i=!0;return!t.isContentEditable&&("INPUT"!==n&&"TEXTAREA"!==n||t.readOnly)||(i=!1),i},unbind:function(e){if(e){if(Array.isArray(e))e.forEach((function(e){e.key&&re(e)}));else if("object"==typeof e)e.key&&re(e);else if("string"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=n[0],o=n[1];"function"==typeof r&&(o=r,r=""),re({key:e,scope:r,method:o,splitKey:"+"})}}else Object.keys(X).forEach((function(e){return delete X[e]}))}};for(var ue in le)Object.prototype.hasOwnProperty.call(le,ue)&&(ae[ue]=le[ue]);if("undefined"!=typeof window){var ce=window.hotkeys;ae.noConflict=function(e){return e&&window.hotkeys===ae&&(window.hotkeys=ce),ae},window.hotkeys=ae}var he=ae;class de{constructor(){this.DEFAULT_SCOPE="global",this.EDITOR_SCOPE="editor",he.setScope(this.DEFAULT_SCOPE),he.filter=e=>{var t,n=null===(t=e.target||e.srcElement)||void 0===t?void 0:t.tagName;return/^(TEXTAREA)$/.test(n)?he.setScope(this.EDITOR_SCOPE):he.getScope()==this.EDITOR_SCOPE&&he.setScope(this.DEFAULT_SCOPE),!0}}bind(e,t,n){he(e,Object.assign(Object.assign({},t),{scope:t.scope||this.DEFAULT_SCOPE}),n),t.global&&he(e,Object.assign(Object.assign({},t),{scope:"editor"}),n)}unbind(e,t){he.unbind(e,t&&t.scope?t.scope:this.DEFAULT_SCOPE),t&&t.global&&he.unbind(e,"editor")}isPressed(e){return he.isPressed(e)}getScope(){return he.getScope()}setScope(e){return he.setScope(e)}}class fe extends k{constructor(){super(),this.label="New Pane",this.selector=d({},["toolbelt","editor","domconsole","layers","preview","save","load","viewport"].map(e=>f({value:e},[h(e)]))),this.element.appendChild(this.selector),this.element.appendChild(m({},[h("new pane")],{click:()=>this.create()}))}create(){let e;const t=window.ctx;switch(this.selector.value){case"toolbelt":e=new A(t.history,t.keyboard);break;case"editor":e=new E(t.keyboard,t.history);break;case"domconsole":e=new j;break;case"layers":e=new z(t.viewport);break;case"preview":e=new D(t.viewport.view.project,t.viewport);break;case"save":e=new F(t.viewport.page);break;case"load":e=new H(t.viewport.page);break;case"viewport":e=t.viewport;break;default:e=null}if(e){const t=this.Ancestor(me);t.addTab(new Ce(e)),t.tabContent=e,[...t.descendents(ge)].filter(e=>e.pane==this).forEach(e=>t.removeTab(e)),t.resize()}}}function pe(e){return!(!e||!e.dragPreview)}function ge(e){return e&&!!e.pane}function me(e){const t=e;return t&&null!=t.removeTab&&null!=t.addTab}function ve(e){const t=e;return void 0!==t.sizing&&null!=t.resizable}function ye(e){return e&&!!e.direction&&!!e.extend}function we(e){return e&&!!e.serialize}class be extends k{constructor(e){super(),this.direction=e,this.style={display:"grid",height:"100%",width:"100%",overflow:"hidden"}}extend(e,t){const n=!!this.descendent(C);n&&!t&&this.append(new Se),t?t.insert(e):this.append(e),n&&t&&t.insert(new Se),this.resize()}dextend(e){const t=e.next(ve),n=e.previous(ve);t?this.remove(t):n&&this.remove(n),this.remove(e),this.resize()}addPane(e,t){const n=new _e(e,t);return this.extend(n),n}addLeaf(e){const t=new xe(e);return this.extend(t),t}frSize(){[...this.descendents(ve,1)].forEach(e=>{const t=e.element.getBoundingClientRect(),n="H"==this.direction?t.width:t.height;e.resizable&&(e.sizing=`${n}fr`)})}resize(){const e=[...this.descendents(ve,1)],t=e.map((e,t)=>ve(e)?`[line${t}] ${e.sizing}`:`[line${t}] auto`).concat([`[line${e.length}]`]).join(" ");"H"==this.direction?this.style={gridTemplateColumns:t,gridTemplateRows:"[start] 100% [end]"}:this.style={gridTemplateColumns:"[start] 100% [end]",gridTemplateRows:t},e.forEach((e,t)=>{"H"==this.direction?e.style={gridColumnStart:`line${t}`,gridColumnEnd:`line${t+1}`,gridRowStart:"start",gridRowEnd:"end"}:e.style={gridRowStart:`line${t}`,gridRowEnd:`line${t+1}`,gridColumnStart:"start",gridColumnEnd:"end"}}),super.resize()}serialize(){return{type:"pane",direction:this.direction,children:[...this.descendents(we,1)].map(e=>e.serialize())}}static deserialize(e,t){const n=new be(e.direction);return e.children.map(t).forEach(e=>n.extend(e)),n}}class _e extends be{constructor(e,t){super(e),this.resizable=!0,this.sizing=t}serialize(){return Object.assign(Object.assign({},super.serialize()),{type:"node",sizing:this.sizing})}static deserialize(e,t){const n=new _e(e.direction,e.sizing);return e.children.map(t).forEach(e=>n.extend(e)),n}}class xe extends k{constructor(e){super(),this.resizable=!0,this.sizing=e,this.header=new ke,this.style={overflow:"hidden",border:"2px groove #999999",display:"flex",flexDirection:"column"};const t=new k;t.style={flex:"1",width:"100%"};const n=new k;n.style={position:"relative",width:"100%",height:"100%"},this.content=new k,this.content.style={position:"absolute",top:"0",bottom:"0",left:"0",right:"0",overflow:"hidden"},this.append(this.header),this.append(t.append(n.append(this.content))),this.element.addEventListener("mouseenter",()=>{const e=this.ancestor(pe);e&&e.dragPreview.descendent(C)&&(this.style={border:"4px solid #0099ff"},e.dropTarget=this)}),this.element.addEventListener("mouseleave",()=>{this.style={border:"2px groove #999999"}})}get tabContent(){return this.content.descendent(C)}set tabContent(e){const t=this.content.descendent(C);t&&this.content.remove(t),e&&this.content.append(e)}addTab(e){return this.header.tabContainer.append(e),this.tabContent||(this.tabContent=e.pane),this.resize(),this}removeTab(e){var t;this.header.tabContainer.remove(e),this.tabContent&&this.tabContent.id==e.pane.id&&(this.tabContent=null===(t=this.descendent(ge))||void 0===t?void 0:t.pane)}serialize(){const e=[...this.header.tabContainer.descendents(ge)].map(e=>e.pane).filter(we).map(e=>e.serialize());return{type:"leaf",sizing:this.sizing,panes:e}}static deserialize(e,t){const n=new xe(e.sizing);return e.panes.map(t).forEach(e=>{n.addTab(new Ce(e))}),n}}class ke extends k{constructor(){super(),this.style={width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",backgroundColor:"#333333"},this.split=this.split.bind(this),this.tabContainer=new k,this.buttons=new M({aspectRatio:1,width:"1.4em"}),this.buttons.add({alt:"Horizontal Split",icon:"icons/hsplit.svg",onClick:()=>{this.split("H")}}),this.buttons.add({alt:"Vertical Split",icon:"icons/vsplit.svg",onClick:()=>{this.split("V")}}),this.buttons.add({alt:"New Pane",icon:"icons/plus.svg",onClick:()=>{this.newTab()}}),this.buttons.add({alt:"Close",icon:"icons/cross.svg",onClick:()=>{this.close()}}),this.buttons.style={minWidth:"5.6em"};const e=(new k).append(this.buttons);e.style={flexBasis:"content"},this.append(this.tabContainer),this.append(e),this.tabContainer.style={display:"flex",flexDirection:"row",maxHeight:"1.5em",overflow:"hidden"}}split(e){const t=this.Ancestor(ye);t.frSize();const n=this.Ancestor(me),i=n.element.getBoundingClientRect(),r="H"==e?`${i.width/2}fr`:`${i.height/2}fr`;if(t.direction==e)t.extend(new xe(r),n),n.sizing=r;else{const i=new _e(e,n.sizing);n.replace(i),i.extend(n),i.extend(new xe(r)),n.sizing=r,t.resize()}}close(){let e=this.Ancestor(ye);const t=this.Ancestor(me);for(e.dextend(t);!e.descendent(ve);){const t=e.Ancestor(ye);t.dextend(e),e=t}}newTab(){const e=this.Ancestor(me),t=new fe;e.addTab(new Ce(t)),e.tabContent=t,e.resize()}}class Ce extends k{constructor(e){super(),this.pane=e,this.element.textContent=e.label,this.mouseDown=this.mouseDown.bind(this),this.mouseMove=this.mouseMove.bind(this),this.mouseUp=this.mouseUp.bind(this),this.style={padding:"2px",width:"min-content",borderLeft:"1px solid #333333",borderRight:"1px solid #333333",borderTop:"1px solid #333333",borderTopRightRadius:"2px",borderTopLeftRadius:"2px",cursor:"select",userSelect:"none"},this.element.addEventListener("mousedown",this.mouseDown)}resize(){const e=this.ancestor(me);e&&this.pane==e.tabContent?this.style={backgroundColor:"white",borderBottom:"none"}:this.style={backgroundColor:"#999999",borderBottom:"1px solid black"}}mouseDown(e){window.addEventListener("mousemove",this.mouseMove),window.addEventListener("mouseup",this.mouseUp)}mouseMove(e){this.dragState={state:"dragging",startPoint:new i.Point(e.screenX,e.screenY),lastPoint:new i.Point(e.screenX,e.screenY)};const t=this.ancestor(pe),n=this.ancestor(me);if(!t)return;n&&(t.dropTarget=n,n.removeTab(this),n.resize()),t.dragPreview.append(this);const r=this.element.getBoundingClientRect();this.style={position:"absolute",top:`${e.clientY-r.height/2}px`,left:`${e.clientX-r.width/2}px`,border:"2px solid #0099ff",backgroundColor:"white"}}mouseUp(e){if(window.removeEventListener("mousemove",this.mouseMove),window.removeEventListener("mouseup",this.mouseUp),this.dragState&&"dragging"==this.dragState.state){if(this.dragState&&"dragging"==this.dragState.state){const e=this.ancestor(pe);e&&e.dropTarget&&me(e.dropTarget)&&e.dropTarget.addTab(this),this.style={position:"",top:"",left:"",borderLeft:"1px solid #333333",borderRight:"1px solid #333333",borderTop:"1px solid #333333",borderTopRightRadius:"2px",borderTopLeftRadius:"2px"}}}else{const e=this.ancestor(me);if(!e)return;e.tabContent=this.pane,e.resize()}this.dragState=void 0}}class Se extends k{constructor(){super(),this.sizing="4px",this.resizable=!1,this.dragState={state:"null"},this.mousedragging=this.mousedragging.bind(this),this.mouseup=this.mouseup.bind(this),this.style={height:"100%",overflow:"hidden"},this.element.ondragstart=function(){return!1},this.element.addEventListener("mouseenter",()=>{this.style={border:"2px solid #0099ff",cursor:"H"==this.Ancestor(ye).direction?"col-resize":"row-resize"}}),this.element.addEventListener("mouseleave",()=>{this.style={border:"2px solid white"}}),this.element.addEventListener("mousedown",e=>{this.Ancestor(ye).frSize(),this.dragState={state:"dragging",startPoint:new i.Point(e.screenX,e.screenY),lastPoint:new i.Point(e.screenX,e.screenY)},window.addEventListener("mousemove",this.mousedragging),window.addEventListener("mouseup",this.mouseup)})}mousedragging(e){if("null"==this.dragState.state)return window.removeEventListener("mousemove",this.mousedragging),void window.removeEventListener("mouseup",this.mouseup);const t=this.previous(ve),n=this.next(ve);if(!t||!n)return console.log("Improper pane nodes.",n,t),window.removeEventListener("mousemove",this.mousedragging),void window.removeEventListener("mouseup",this.mouseup);const r=new i.Point(e.screenX,e.screenY),o=r.subtract(this.dragState.lastPoint),s=this.Ancestor(ye),a=t.element.getBoundingClientRect(),l=n.element.getBoundingClientRect();if("H"==s.direction){const e=a.width+o.x,i=l.width-o.x;t.sizing=`${e}fr`,n.sizing=`${i}fr`}else{const e=a.height+o.y,i=l.height-o.y;t.sizing=`${e}fr`,n.sizing=`${i}fr`}s.resize(),this.dragState=Object.assign(Object.assign({},this.dragState),{lastPoint:r})}mouseup(e){this.dragState={state:"null"},window.removeEventListener("mousemove",this.mousedragging),window.removeEventListener("mouseup",this.mouseup)}}class Me extends k{constructor(){super(),this.dragPreview=new k,this.rest=new k,this.rest=new k,this.rest.style={width:"100%",height:"100%",position:"absolute"},this.append(this.rest),this.dragPreview.style={position:"absolute",width:"100%",height:"100%",pointerEvents:"none"},this.append(this.dragPreview)}}class Te{constructor(){this.deserializers=new Map,this.deserialize=this.deserialize.bind(this)}register(e,t){this.deserializers.set(e,e=>t(e,this.deserialize))}deserialize(e){const t=this.deserializers.get(e.type);if(!t)throw"NO DESERIALIER FOR "+e.type;return t(e)}}window.onload=function(){const e=new R;i.project.currentStyle.strokeWidth=1,i.project.currentStyle.strokeColor=new i.Color("black"),i.project.currentStyle.strokeCap="round",i.project.currentStyle.strokeJoin="round",i.settings.handleSize=6,i.settings.hitTolerance=1;const t=new N(i.project),n=new de;n.bind("backspace",{},e=>{e.preventDefault(),i.project.selectedItems.forEach(e=>e.remove()),t.commit()}),n.bind("command+z",{},e=>{e.preventDefault(),t.undo()}),n.bind("command+shift+z",{},e=>{e.preventDefault(),t.redo()});const r={keyboard:n,viewport:e,history:t};window.ctx=r;const o=new Me;b("#menus").appendChild(o.element);const s=new Te;s.register("pane",be.deserialize),s.register("node",_e.deserialize),s.register("leaf",xe.deserialize),s.register("editor",E.deserialize),s.register("domconsole",j.deserialize),s.register("layers",z.deserialize),s.register("preview",D.deserialize),s.register("viewport",R.deserialize),s.register("save",F.deserialize),s.register("load",H.deserialize),s.register("toolbelt",A.deserialize);const a=window.localStorage.getItem("panes");if(a){console.log(a),JSON.parse(a);const e=s.deserialize(JSON.parse(a));o.rest.append(e)}else{const r=new be("H"),s=r.addPane("V","15%");s.addLeaf("15%").addTab(new Ce(new D(i.project,e))),s.addLeaf("auto").addTab(new Ce(new A(t,n))),s.addLeaf("auto");const a=r.addPane("V","auto");a.addLeaf("5fr").addTab(new Ce(e)),a.addLeaf("2fr").addTab(new Ce(new j)).addTab(new Ce(new E(n,t)));const l=r.addPane("V","10%");l.addLeaf("2fr").addTab(new Ce(new z(e))),l.addLeaf("1fr").addTab(new Ce(new F(e.page))).addTab(new Ce(new H(e.page))),o.rest.append(r)}window.addEventListener("beforeunload",e=>{window.localStorage.setItem("panes",JSON.stringify(o.rest.Descendent(we).serialize())),window.localStorage.setItem("project",i.project.exportJSON())});const l=window.localStorage.getItem("project");l&&(i.project.importJSON(l),i.project.deselectAll()),e.resize(),e.centerPage()}}]);